// ==UserScript==
// @name               圖片全載-FancyboxV5
// @name:en            Full Picture Load - FancyboxV5
// @name:zh-CN         图片全载-FancyboxV5
// @name:zh-TW         圖片全載-FancyboxV5
// @version            2.8.5
// @description        支持寫真、H漫、漫畫的網站1000+，圖片全量加載，簡易的看圖功能，漫畫無限滾動閱讀模式，下載壓縮打包，如有下一頁元素可自動化下載。
// @description:en     supports 1,000+ websites for photos, h-comics, and comics, fully loaded images, simple image viewing function, comic infinite scroll read mode, and compressed and packaged downloads.
// @description:zh-CN  支持写真、H漫、漫画的网站1000+，图片全量加载，简易的看图功能，漫画无限滚动阅读模式，下载压缩打包，如有下一页元素可自动化下载。
// @description:zh-TW  支持寫真、H漫、漫畫的網站1000+，圖片全量加載，簡易的看圖功能，漫畫無限滾動閱讀模式，下載壓縮打包，如有下一頁元素可自動化下載。
// @author             tony0809
// @match              *://*/*
// @connect            *
// @exclude            *.youtube.com*
// @exclude            *docs.google.com*
// @exclude            *google*/maps/*
// @exclude            *mail.google.com*
// @exclude            *accounts.google.com*
// @icon               data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAtFBMVEVEREAAAABEREBEREAuuaIzqpkvr58yiHgzhnY6kYM7mYI4kog4s6A2tpo0r544ooo2nY40sJw0sp00rZg1sJw0sZ0zsp01sZw0sZw0rZk1sJw1sZw1rZk0sp00rpk1sp01sZs1rpk1rpk0sp01spw1sJ00rZo1rZk1rpo0r5k0sJw0sZ01r5o0sZw0rpk0sp01sZ01sJw1spw1r5k1sp01sZw0sZ01sZw1rpk1sp01sZw1r5pUzpTcAAAAOXRSTlMAAAUGCw8QERIUFxgbHB0hIieqq6yvtLa3vb/AwMHCxMXFxsfIyc3Oz+zt7vDx8fL4+Pn5+vr7/v7AEFI4AAABR0lEQVR42qWT11bDMAxApbhsmm5KKVD2KiUQwpD1///FkZcSmh4e8FOsex3LsgymPy6ISkRyA4FlWMRXomIyQOg/SbyKAmSOE2Ip02UOYxf/DILNjOOEWLnAEAqio0MMAzJjTAZh1p0SrYCIuu0cMZc9JbENXLa1NWGdI1nWeQuXGPzBTdzC8ws52UI5MwchrA/VTOuTEP9fFyTG7E+R9q8JLsbW1UHzU8HHrCuU1fyToDlB43xRqMUgfc+/KA77fZrWSH/47zPlzOcpJxG8u32r/OEg5SRCqO/WTeT3+5oTuP4LxrXnd5F7waZ+wM5c+NVeujMRrDYMYueE+VK5E5r3uzOb7TbvHH7f/1pP/L8nU9u38Nwyy8OZdjfwY+ZnmPinp28y3mglNeERDJYy/9A3GYVS+GMPMB+uyL67/qO68Mb8MurBD7foVTtvIbtnAAAAAElFTkSuQmCC
// @license            MIT
// @namespace          https://greasyfork.org/users/20361
// @grant              GM_xmlhttpRequest
// @grant              GM.xmlHttpRequest
// @grant              GM_registerMenuCommand
// @grant              GM.registerMenuCommand
// @grant              GM_unregisterMenuCommand
// @grant              GM.unregisterMenuCommand
// @grant              GM_openInTab
// @grant              GM.openInTab
// @grant              GM_getValue
// @grant              GM.getValue
// @grant              GM_setValue
// @grant              GM.setValue
// @grant              GM_listValues
// @grant              GM.listValues
// @grant              GM_deleteValue
// @grant              GM.deleteValue
// @grant              GM_getResourceText
// @grant              GM.getResourceText
// @grant              GM_addElement
// @grant              GM.addElement
// @grant              unsafeWindow
// @noframes
// @require            https://update.greasyfork.org/scripts/473358/1237031/JSZip.js
// @require            https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js
// @resource JqueryJS https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js
// @resource FancyboxV5JS https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.31/dist/fancybox/fancybox.umd.js
// @resource FancyboxV5Css https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.31/dist/fancybox/fancybox.css
// @resource FancyboxV3JS https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js
// @resource FancyboxV3Css https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css
// @resource ViewerJs https://cdn.jsdelivr.net/npm/viewerjs@1.11.6/dist/viewer.min.js
// @resource ViewerJsCss https://cdn.jsdelivr.net/npm/viewerjs@1.11.6/dist/viewer.min.css
// ==/UserScript==

(async (JSZip, $) => {
    "use strict";

    if ((ge("body.no-js:not(.has-preloader,.single-post)") && !ge("body.no-js #layout-default")) || ge(".captcha-area")) {
        debug("Cloudflare驗證中不運行腳本。");
        return;
    }

    const defaultOptions = {
        icon: 1, //是否顯示左下圖示，1：開啟、0：關閉
        threading: 8, //最大下載線程數
        zip: 1, //1：圖片下載後壓縮打包，0：批量下載圖片，無法全自動下載
        file_extension: "zip", //zip or cbz
        autoInsert: 1, //頁面容器自動聚圖，1：開啟、0：關閉
        autoDownload: 0, //!!!維持0不要改!!!建議透過UI選項設定來開啟，需要customData也有autoDownload
        autoDownloadCountdown: 5, //有NEXT時自動下載的倒數秒數
        comic: 0, //1，忽視漫畫站點開關選項，啟用漫畫規則
        doubleTouchNext: 1, //觸控裝置雙擊前往下一頁，1：開啟、0：關閉
        zoom: 0, //1 ~ 10 腳本插入的圖片縮放比例，10 = 100%，9 = 90%，0 = auto
        column: 4, //圖片並排顯示的數量 2 ~ 6
        viewMode: 0, //0：置中、1：並排
        fancybox: 1, //Fancybox圖片燈箱展示功能，1：開啟、0：關閉
        shadowGallery: 0 //影子畫廊，1：開啟、0：關閉
    };
    let options = defaultOptions;

    const _unsafeWindow = unsafeWindow ?? window;
    const language = _unsafeWindow.navigator.language;
    let siteUrl = _unsafeWindow.location.href.replace(/#FullPictureLoad.+$|#gallery.+$|#lightbox.+$/i, "");
    let frameWindow = _unsafeWindow;
    let siteData = {};
    let _this = {};
    let tempData = {};
    let siteJson = null;
    let displayLanguage = {};
    let globalImgArray = [];
    let captureSrcArray = [];
    let thumbnailSrcArray = [];
    let videoSrcArray = [];
    let promiseBlobArray = [];
    let captureLinksArray = [];
    let customTitle = null;
    let isDownloading = false;
    let isFetching = false;
    let isAutoScrolling = false;
    let isValidPage = true;
    let isAddFullPictureLoadButton = false;
    let isAddFullPictureLoadFixedMenu = false;
    let isAddnewTabViewButton = false;
    let fetchErrorArray = [];
    let fastDownload = false;
    let currentDownloadThread = 0;
    let downloadNum = 0;
    let getImgFn = "";
    let doc = document;
    let autoPagerSwitch = true;
    let httpFetchError = false;
    let currentPageNum = 0;
    let nextLink = null;
    let tempNextLink = null;
    let tempEles = [];
    const PCUA = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36";
    const MobileUA = "Mozilla/5.0 (Linux; Android 10; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Mobile Safari/537.36";
    let loading_bak = "data:image/gif;base64,R0lGODlhIANYAuZoAHt7e7CwsF9fX9HR0aurq8LCwrOzs4iIiNjY2HV1dcrKyt3d3d7e3rGxsX9/f7Kysru7u6Ojo9vb25GRkcvLy2pqatzc3Nra2ra2ttbW1ri4uNfX18bGxtnZ2bS0tNDQ0M3NzZqamsXFxbW1tb29vcDAwH19fdTU1Lm5ucHBwYCAgLe3t8zMzH5+fsjIyL6+vsTExMPDw9LS0oGBgbq6unx8fNPT08/Pz7+/v7y8vNXV1cnJyZaWlo2NjcfHx6qqqs7OzouLi4mJiaGhoZ6enqioqJycnIqKipOTk6enp4WFhYODg4+Pj66urpKSko6OjqysrKWlpYeHh4SEhJ+fn5mZmZiYmIKCgqamppSUlIyMjIaGhpeXl6+vr5WVla2trZCQkJ2dnampqZubm6KioqCgoKSkpN/f3wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFCgBoACwAAAAAIANYAgAH/4BngoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7/AAMKHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzps2bOHPq3Mmzp8+fQIMKHUq0qNGjSJMqXcq0qdOnUKNKnUq1qtWrWLNq3cq1q9evYMOKHUu2rNmzaNOqXcu2rdu3cP/jyp1Lt67du3jz6t3Lt6/fv4ADCx5MuLDhw4gTK17MuLHjx5AjS55MubLly5gza97MubPnz6BDix5NurTp06hTq17NurXr17Bjy55Nu7bt27hz697Nu7fv38CDCx9OvLjx48iTK1/OvLnz59CjS59Ovbr169iza9/Ovbv37+DDix9Pvrz58+jTq1/Pvr379/Djy59Pv779+/jz69/Pv7///wAGKOCABBZo4IEIJqjgggw26OCDEEYo4YQUVmjhhRhmqOGGHHbo4YcghijiiCSWaOKJKKao4oostujiizDGKOOMNNZo44045qjjjjz26OOPQAYp5JBEFmnkkUgmqeT/kkw26eSTUEYp5ZRUVmnllVhm2RkCFJTgwQ9DVIFEDwcsccUMAAAwwxVLHNADElUM8YMHJVCAgJakIeDDCBFMcEWagAYq6KCEAnDFBBGM4MOdeF7GABAYUHFAoZRWammaB1CBARAMNPqYDBiEgOalpJZa6AwhYCCDp4i5UEQQpsYqa6FBFOECq4EpUMQWs/bqq6BbFKEArnrZ0IQQvyarbJpCNGEDsXMxkIIVNSxrrbI1WJFCp9CydYEByF4r7rJCGHBBt2hlQMCo47ar7AwEZIDuWBv84IC7+FrrwA+MzstVB1CokO/A1qoARQf+ZrXAA+wS7HCyMzywQMJVlRDu/8MYKytECRRHJQMXGYdsLRcDdMzUwveKrHKyDnQxsclHscDEyjQr2wMFMBO1wBcm1OzzryZ88XLOPg0Axs9I/wpGyUTzBIHASQNgwhRaIMGDEUZQQQXWPCChxRQ9R60CBE3nZEEEPqvgRAQPvGAnJFy+8EAETkBNcwQWlF3TCROobMIESeCwaicy4JDEBGGHPMEJesvEwRIhB5EEDBKYIgEMScCa8RIcNP4SCokTPIEBg7MigwF9P2wCCp6zRMDDQTzw7Cw2PKA5wQS0jpIFRBDswBC35uLCECnnS0Teuo8kAQ8DT9FFv7sg0MUUA/NQefIgdYBEvkJogDwwFmhwcf+7SCCMfUcIzOyuFBoMPcwCGkiBLxPQn3/RBj24u8QI7huzwAiQa1cPNmA/jHRAfeIyQRQI2AwERCF01mKC+Qo4EQk4oV1OAII0gHDBcTnhehSEyAK8MC4VjIBb0mDACOxmLS/0L4QLocK4eMC4a5yAeeKiAgwd8gNxteAB22DAA1ogrh/scCErENcRWOANFhxBXBg4IkJEAMFfjeFc37jAGK5lAhFIsSAyCCC2AkCOAFRrWUso3Rf/IYEnFCwF5khB8ZL1BBCusR9DsJYScHYOCijBWkO4oz8gYK0gzA4dNrhdsmggyH3IgIW+eoK8WHEBEKQAA11IQgSGgLUhRKD/CF1YQQpAgMVVZMCNylKBGhtJDwakLlkTqB8pMoCDH1iBV7LaghV+gINJngIBr/zVBF7ISnhAYVkTKOUoJFCAKDxRiVEogB1FcYFg+goKxaQHBaooqydMMBQSIIER5uguBxiBBNP8RAdQ+asa8DGb71gAO30VBAaGggVRaNjDZhAFJopiA4rs1ROICU90BEBZW6jhJxhQgu35DAklQKEnToDLX5GxoOz4ABF/5YB3doIBLwioz4JAAolyggXklFULPoDRdeDQVzXg2CdikL+oBaoHMQBFCc7oKx60NB0lUNZFO/EBkNmUUFxgqScaoCyZ/pQcFnimr4zgiQU0YaNH/yVUC5pAUEsYIVlH+N5Tw/GAZAVBmZkAQU2zWqkegKATFxBprIA41nBsAJKxasFbOTFEtpLqh50AAVZnpQJZ1lUbRUiWATjRgSr4NVZV+CYmDJAsIx62GycYrKx8ugkgSPWxpTqCBjfx0lk5wJeXzQYWfjUDhWICBvoELalmAINNnCC2pkpCarWhg5SaKoqaAJ1se7W6TWCAozrYLTZ66CskbMIDw02WBzbh0F5ZVrnUuABuSWWCG2jioNFNVgM0cQNuzhat2H0GdH2l20xQNrzKmm4mkvAr+aYXGguYVK+WIFlKaAC+1mIdJjogRllJoav3PQYOfjWCTFAxZCqYgv8QmEDhA+B1YF3MxAh+5dQEM6O0sToAgh0Bgu1eywFeIAAJSImISpKAAFnwrbhmsFdL5NdXVvBwM2TwK0ZeogPjG5cSiiCCER9iASIowh/xJYT+SoIGMHWtjo9xzF4dwciMsIK7TECFGJh0EgyIARXMm6wqYGIBn43VF6acDAbIr1c+tkRZx+WAJEg5EydIgox/RVdLQLlXUvgym4PBAV8pAcuKYAGZZ2UCLKDWExnAwqJV6s9KLGDJs/LBoI2Btl6N18ZaEJcTajwKEHTQWlpAdCKY2issbJoYCyiwqVTgZEg04cTARQUG9iyrJvz4wpeagqBfvQsR+IoMl7iBZn3/1QOlquIDoV5WC7xrCTL4qnPEBsZqezUsSxhVWUZIJyok8NVlceESCvBVFLINjCCXqgeXKIC1ojBsVDAgCtYqwCXWGispsNsXH/CVfcEc7WT5eha3VpYW6t2I986K1P/GxXplVYPkViIHyxrqLMCbrBxYQgc8nWvEd6HlWTm3EgxI86yuWwvm/uoIDGdEdWN17pHjYgG8plSDKxHUZBFBF71LVoclsWHTqtrmqKCAryxOCWvKqgfinoUE+D2rCXzcVztAui0cHit4V0Lpv1KBs3PxAWCXyqOSoHqpPq31WZRbViyXRKd9pQFf/PdXZrCEy2M1hrbTAtOxwvYkJGD2/0t5YRMWYAEJDNCFLhiABCwQ6yVI6CsVRL0RhZ7VFPwuiwz0qgVHLwTGfWWCsVMiAwbIwrLT1IIsGODRk/jApCvlcUpYYPWXgj3nVQGDXp2cEiH4VREuAQIihLxSNSACxCWRWF+FwBIzN1Vtd++KOcO9EhfA/aUcYE9JICACxydVDSJgWEdsIOeUagF6HyGGXvWZ+qvI46zgSIme96q9k+AA4GelBMFLgr6+MnSQkAK9okPwxwrzZCp39ghzp1JMFwkjEH6zUgMDBwk6oH2WEgGVcAICdYCsUHiFcgWWoF+zEkiT8AXjsmaTUAa+cgCW8CeyogIeqAoI0CtZUAk68P8rwRMJx9UuuQYJPvArDxgJWdAr5TeDoAB2suJqlPACLZh/Eogt/vcIJCgrL1AJ2yYraIeEouCEs1KBkNB8syIG3rd/4qIER5gI7dcrw0cJExcrJMCFpsBqskJ/kwBipqJpkdCA7qKBkRCEvcJZk0CAs8J2cigKYhgry/cI1ENYoQcCUXgtNbCIirAAIFgom0cJIMCGh0gK8icr69cIHdBTkhB0BPNzkYCHpVJrjHABvWKCnRgKjiUrDlAJLHBNkZABkZhAuqcIVTYrlSYJ6DcoZhaLoeB0l+JvlLBgvXKFkGB9DvN+jeCFs4IDlVBRpmJ1xggKKncpTFAJRTcro/X/CEWIMTcICUDgKzs3CQhkKkewjaDwZrEiiJKQcLNyeYcgARg4Li2Aj4YgAb5ycHc4K8oIj51gYpRSjJOQhbEyA5GQbiGzhYsAg7KCf5JQcrEiggZ5kLOCipPwibEiBJFASCFTe4/gbqQCi6U4Kw65kZwwe4PikSs5K173CND4MIsFCWpHKjIZCaZoKibgkpzQK344CWHQK04QCb+IMQLpCKcWK2FQCXxYKkK5CURZCUc5K2CglCLTlI3QjqYSlZQwlaRSlZrQAAGQlmq5lmyplnYoCSnQlnLZlivwkHN5l3iZl2nZbY+wAnopl28ZCXH5l2tpiGZZCQZAmGsZmJBQ/wCKuZbr6AhA8JiUKZfj6AgjUJkBoG+UMJiPmZOHaQmJSZnOOAkwoJmg6Qg6oJmsGQC9mAijSZnTNwkvUJmpGZqTgAGVGYeU4AKseXQLgJat+ZgNAJysuYOSQAKV+YO4KQl+SZkCNgkUwJrd1wg5MJyPaZLmx5oS6QgoUJl12ZyUQAPLWQkfwJqmxwgKgJ2KyZeOcJ6amZ6PkJmUGWfiGQm1SZnSCAkZwJp6+AgXIJzsiZcN4I+G4AOs+ZqM8ACVWZr32ZiaGXqDYAGsyZuQUAIDmpcCyAjKqZmS9wgLoJmc+aCQIAKaWZ2Q4AGa+QAxZwgbkKF4iaKLIESaCYaP8P+ilelFJAoJO6CZTDMJHVqZC7gIMQCjcplTkXACFVoJA6CZWbejj3ADmtmdjWCimjmFjSAB9GmkaTkCBmoIHMCaOiqdmkltUNoI/VmZsykJUqqZzOkINiCgMNoAhwQJulmmlXCalTmEZ5oIEqCZ2hkJF9CaQ7oILMClARCMj6CkrBmK1qmZX9qnZ8CglHmbPMiaIxoJvgmjyAmhbiqalbmfkooI31mZjsoIRbqikWoIFCCnrNkAVLoIEkCplYmkkzColRmdo6oIjlmZPyoJ8KmZ/ykJNqCirekBdfqHrSmfjtCklcmYu2oI61mZWAqirqqYBvChjyABqVqrq2oIFhD/m5RZnJUQppXpntF6CDKgmWRTCTjQmmNKCRuQAtc6lw2QAjJaoq1pjZUAAZq5SulaCH9amQ3Qookwma+aho4gAQqQA/UaAA2QAwrwrYiAAA/7l2YqCQxwsXhJsWe6pY9ZqIywMK0ZqJbAABlwAxTgAi5AATeQAQbrCNfJmhJTCTZQowG7CBhKrZbQrZpJibZwqK1pq/mnmfyas4gwnZVZdzg4nA+gsLGAALSqmXwKCaVKmU+KtIewmpp5qoxAnq3ZProAP8Npn5KAq0KqtYhAo5UZq4wQrKy5obOws8tqCUqrnzEbrUGanZfwnK1ZrbFgrq0ZnhenmRaqtqzaqJbQ/6bDmbWz0KPYmbFny5roiriDgADceQkawJ6d+gqbOpxM+3XUabmIcKfQeQnOip1r6gp6ip2/OglX+5hvSrqC0LqUqaCNsLetWQISygkLQLfDebiTkKZqSruHcLOaSbSTYLEDqgFQCwoIsLns2QDPqwg++5jJarxnwADGqp/aCgmfi50PoKilwAJTO5ydGwkWcL6E6QF5m7PX256XwADSO6AQkK+esAH+mqEa8L6HMK3Fq72GgLyVeUKXkAEcO64i4LGQIAEikMDEibuMoEKsKbK0a7qUeZmUAMAZ+gAcwMCyygHsi52VKwkIW54CfAgIqpkr4L+HkJ9Geq8y4MKGwP8AMkCviOqglMAAfkuZ6ZvCHdCaQPsIFtDDRjoCImADLswANiACIGukGPC96NiaXmu8uquYGEDDhbAB4oqoD5ADHHADG0BQC7ABN8ABOTDCMGoA+PsIDIDBj6nDKUwIcEuZbgunEAyjD+ABGIACfowBaoyoEJu9kyC08TnHawvHiukBUgwJICDIkIydQ0zE3UuZWYzISQuvmnC3kdzJhHnHjmClU4rJiLAAXayY1KsJkOvJrHyXjmsJzIuavYu4gluZ7ZoJnNzKuhwAoOwI+3ulpJwIAdqa5FsJIJDHuzy9kwwJhhyqVYzItlupz+wIp5PMnUw6m/AtmhzMwozMcin/vJewAUZszRm6Am2cnK35ACBMu6I8yogHw+Q8oC/QyJLAwTzLzYogAaeMyudcz94cz/ZawpawAf/MlgawzsZrz5QptpywAfUL0Avdz5FAtq0p0PhMCDw8nEe7CQzgAgUdzw3gAlqsCO86uCMtwKnLmq+sCQhwxRD9zdUbCauMnhftCC6Nyq+7CTLw0C+9lhoAsJowAB+9luBc0xU71Gr5ABJNCTfA0xCtAZLb0IH8l6ls1I0w05o5AtNMCQPwy/EMATnNCRfwxJW50la9trGrmRqA0GgKA/scyQYAAxJ8CRLg1NB50qSMwNiJAvScCQtwAzgw1ez5ADhwA7MMCRaQ/9YEO9dnPQgrXLaHPdEDAAPjPJwrAAMDENmQsABgO5zD2tgT7NWsSQN93QkS8AEc8AJkrZcj8AIc8AFsLQkW0NmtSQN4jc8dINh/iQKxbWkZMAAs4AIiEAMFUAIlUAAxIAI7wAIDkAGabQkSoNihyoqgnQiPzJ4aQN3g0AF2XZnLXN2H0KvYOQKMrQ0ZsNqVmangDaLSHaph/Q0DoNu7/dxn3QGV3JoNYNbdsANIzZYeoN3rrQhxmqE4UNrTYAElPb2EHOCP0MzYuQLl/QwZUNmsWcwMDgm1jJ0NYNHToAD93ZaAe+EDaKQksNXJcAE3zZrQKuKRwAAzm6EG0MvIQP8Bb82aOXDbLL4Aos2e9ysN+sulEEDfLH4Gic2lDUA5zmABMPDhcsnXQ74JdY2oHkABOB4LDEAB9928vf3kgxDdgowBIFDlrMAAIKDIA8rbXN4JFrDjGQrmYn4KZG7m9mvgab7ZLy7lO0Dnr2ABO5DlMJoDQl7nhcBQnfwABWDBr3ACBSDfu/vmgl4IGS7IGqAAJk4KF6AA3W2kIf7omnDMrQwBFADgotABFMDmiNoA383pl1Csu7wCIiADgb4ICyADIkDhgoysql4KF0DbrdwANCACHyDqkdABHyACNMDklUkDlZ7rKBe/u2wAEBADCvABGfCtEpABH6AAMQABNc7/yl7G7KgABIzOyg3gARoAASRg3CmQAsZNAhCgAR6A7B2sweBeCgjA6z2d74RJAzFd75zAAD4g7/pO7j7g6P7On+098AOvARF+8AulAOOu8Lr8ACLt8LHQASku8dZMAv1u8aTwAbau8ay8Aszq8a7AAArQ7SKPqAagAAZv8ppgAT4Q8Su/oj6g5zC/ChIgwjXvxR+c876w8yrf84RpAD8P9MCwABQg50SvlxhAAbGO9KkwAPDc9Hn5Au8t9cHQAS7A9E2PAS4g7Fr/CzrgxFbfpSJQtWO/DCdQ6zXv6oi+9svQASyAA0PPygaAAywg9nLvDBtAAZeUzBiQAhSw1H1v/w0WcAIUEAM0cPfYSgMxQAEngPOHzw0WoAMfQAEcUAAv8O4Y4AEGMJqhz8fn/gIFwAEU8AE6QPmV3/qu//qwH/uyP/u0X/u2f/u4n/u6v/u83/u+//vAH/zCP/zEX/zGf/zIn/zKv/zM3/zO//zQH/3SP/3UX/3Wf/3Yn/3av/3c3/3ZgAAEQAATIAADoQDh7wAuePgFIADsz/4CQQDtLwDp3/frH//vH//zL/f13/73DwgCggdnhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6Slpp8FgqqnrK2WBKoChI+wAhUGrrm6u7y9vr/AwcLDxMWGqbHGypq1g/+PE7ECEcvU1dbX2Nna29y9yKvd3M2yjgrRggjh6uvs7e7v8PGL34Lyy+OzjAbnAgX2/wADChxIsGAhegIM/sLnaN85fwojSpxIsaJFTAgvtmLYyNy5dBpDihxJsiS3jCZDcWwELda0lDBjypxJUxPKmplWNqp1C6fPn0CDirwpVJLOokiTKl0akCjTRUefSp1KtWowp1bPRM3KtavXr5SwWt0KtqzZs1nFViWLtq3btz7VUmULt67duxblTqWLt6/fv/H0SuULuLDhw9UERxpAYNwgArg+KWjc8lzjAaMgEAhxLkFjRIQ7aSYQgd9jAqYaHzDt+TLi17BTKnZEwIH/6WghFGiCwPn2OQeROQ0o7VvVAQiFCA+IhhkSY8fFVU2A6AlC5ejSCeiOzb17xNmLICTAHmsCyFfkoznYnql3egEJNMfKx2h5rOaN7L/nZ55TAdv7nePdgAT+A14i171XAXKWOBRgPxiN96At8z2inyD41TdhZ+xd4t6G9RQo4ojqHGjIAABuiFolCO3XoSQQgHgOfYtcKECGNcoYSwU4SoJAijqSKOSQ15h4xgASqkcAdclBJ8iKkyCgSmMvJkdcNAmcF0mM/BywJCIFEJBgNDQqYmOPidgoS2PBIaIZkKo4YAkCSUYTAQFaHtNYnSES6eefV0UTJZyyVAlaBZZV/6JdJB8+OYlHuKEJGqHkOHKmhcxJosBq0UApCaEVeOqIkYCWauomJo4pKiMIcBqLoZ44KEgFebLKZwVMPiIemZje16sqkjLSKK2TXCldrY2QeuqyzEZyIJex5PqIq4IkYIqxArS5E5bBNkJtmWlmaqm4kyS4KiPQTsmioM22624mB/LJICVwagsKAohK51w0PF6iHLka+kqJjXJGwudLYbH77sIMPwKerAKEcMkA+VZ77Y6QYGuvURWOK3B+AEvSaLeGQAwuJMo2rDKg4AFJrL/RbFxdNMgiUrEABcNs3K8Y8nyjJZAKIjMifJLMSMorJy3kbEELcK6PN5/ciY2wGv+SbrY5dQzyxwEDe8nNCB+NG0YKK222u7NhW7MkapcSjbSIGFsBM1p33bPHXltyndSGYGu02MmcLXizswHJdyRNzyvKzXAfUucEdO+M991b561oLNY6AmTOliA9+OeIKSZlLE9TAnYpdQ59xujqZi155ZTb/XODZSvCuqNkBw767kQq1nTjlFzHeSipJxtN1ZH8y3WOy0siGELAo1w779QTqBjEaxeLsaKk8dOaP8XrQ3Pkzkw+O+znU9J0t9jDO3318MemmGOd0B8JAgTw+Z7q9rtePvpGu5QlBAiV7eUOHPFLoPzeBxrMdQJif8PWg/jnQPJVCoA++5uZQtZAVWT/7oB9UqAIDaOYD31QExAsh/4m2AgTbkJ5lpOdBsPVvEO40H26G6EO/VLCCm4ihYDTEdaE5UNMwDB2zIvhJAioiBuCMCE7jCJe5lfETADRTDfzYGOQZQAxnYOCHnxh3ZKIxA3WcF9nTE4V15VDKbqxLVRsoxEZWAhqDQJ5RIsFGBE4x9fJMIMT4+Ah+ncJz73xkEW53vg2Ibcgtk4S4VtE+/x3wT+ab4aIYGIirtg5OiLyk1RRDPQ4ITxGmKsSkVTEKCl5uCMJMpOvBKQjBaA4NvIRlLisiug6xYnTLeJmJ4SkHhtxO6dZsJWaNKMSJZHMQxQzbLYMYS6n+ZTClWcT/017WjFL14hUKmJzx5QlBgcYy0IAKZgJkyM115lIT/ZtkX1URc0SZwlvJsJvrBSnJSvRzENgK3qjcic7BzqT2SCEm5C42fAOsUpK2BMRTZNYPCtJxvRVFJOH6OcxeFVIgRL0oyYBT51ehp5hVrSWBjNpI+CE0UGOUZllpOEyF1POQsiro+oEqU5l49EzQAyazLwZSROxzXqqVHyxWCjH/HhRfS6xpj7lV0vPYMidWlUgTcue46KBUkjACaFRM6oqVGcIPkn0ckyFqUXVOlVXpnGrSdWqIiB21bqaxEZdnetDKNEodCKIq6g86iwjVtL/7fOwT32r1TikvZ4aQEIHAP9oIR47CMlOFrKWtatmN8FRSIwpr0S1owDwGNUdkTaPY42EBA+A0SOuVaYxReNMFSFBaVjISVB0hATxuNtH9HazwBXFV++nvwng0QBZNCYk9IdQ1ApNEqKVhlwN4doAQrWpkaBUxPAEmtr4xmcWk114xQuf4Jr3E9DxDGhPtEIvvagxpgEquuK7KDM1hgA3I6szteulvN43i8iEqkYv6aPobogWpgkWbru14PM6WBP4uo2FVvie5nZQiPpFhIEfFGDFunW2Tn1EoxQkUNwCz8Tb4kdmH8ziRODWr0QdU3rWy4jaspASuA1Qh0F8ouuytRK72k9uSpxgRjTYyEVusZL/J+EkyG2JwrfpzyUgkNwAZThNMt7PjmObUR/D9rWQMMCGO5UOG4G3vOSFcY87s+Q2w+hgONYubk5LCyj7xgGfwQRjHhQCAvxtwIUANGK5J9o+M+lCavbnOXi7aN822s2QdpgXlTsw+JIJMqF4DoXxzKZQTAa/puG0hWHpYUFjlxVBS/QhKCsLy7I6spF49YojTWsW00Optc61rosRml37+tesMJZ8gU3sYpfiZqM2trKXnU5V0JnZ0I72IuqEa2lb+9qIaFSysc3tYidoqN0Od4vN8SUmJ/fK4k63VWXFaf8SwMBOVre8z2tjHc/73uaV83uGje9+g7TK7znAs/1N/3BQTmbMt6lvwRde10/Xu89+ZrjEJ07xilv84hjPuMY3zvGOe/zjIA+5yEdO8pKb/OQoT7nKV87ylrv85TCPucxnTvOa2/zmOM+5znfO8577/OdAD7rQh070ohv96EhPutKXzvSmO/3pUI+61KdO9apb/epYz7rWt871rnv962APu9jHTvaym/3saE+72tfO9ra7/e1wj7vc5073utv97njPu973zve++/3vgA+84AdP+MIb/vCIT7ziF8/4xjv+8ZCPvOQnT/nKW/7ymM+85jfP+c57/vOgD73oR0/60pv+9KhPvepXz/rWu/71sI+97GdP+9rb/va4z73ud8/73pH7/vfAD77wh0/84hv/+MhPvvKXz/zmO//50I++9KdP/epb//rYz772t8/97nv/++APv/jHT/7ym//86E+/+tfP/va7//3wj7/850//+tv//vjPv/73z//++///ABiAAjiABFiABniACJiACriADNiADviAEBiBEjiBFFiBFniBGJiBGriBHNiBHviBIBiCFxEIACH5BAUKAGgALCwBjAACATABAAf/gGiCg4SFhoeIiYqLjI2JAQYGHhgaEC8FHBQfOhaOnp+goaKjpKWmp6iKAausra0GNDEUJ52ptre4ubq7vGiuv8CrGCksG2e9yMnKy8yOwc/ABjgsHc3W19jZo9DcwCsiJ9ri4+TW3ee/IyI65e3u76Xo8q4YLtXw+Pn6gvP9rS8Dju0bSBCbv4PCKCwoyLAhL4QQDXCQ4LCixXgQIT6YeLGjx0UZQz7wUeujyY8hUxpQwOCkS4spY6748LJmwZg4SdyzyfMdTpwPXLTsSXTcz58oMhRdavAozgY+hjKdiszpURoIqGrdlaJECRIQNHhoYBXhAyBb0yKTkOGDghgQ/wyURRdDqtq7vDp8EEGD7NxgNC7gHYxsgQwRK/7+8mCDsONeHShAUMyqAYjHmHd1UJCYso/MoHOdKPBAcQm7oVOXsrDDw18SC1XLLsUABIa5EErO3g2q9m2rKCjyHv6JAQXXTjUIJ86ckQQYfpHqbk790IbJRyHErs690BkKpX/mQN29+wUSR1OUXz/ojILoKTmwn5+hc0wW89lbwPG0cf71O8AHkQc7/cfdAOGFhMJ2BlaXwQgxFdBgeR3YlxFaE+pTQgExiLADCwNkwKA1EqCQ0gMFZujOMyO8wMEHyy1jAQ0pQUCeikadswIMA4zIywI0hvQZjivO8wAON/iYi/8FJmbUgFJEloOQATBAyYsEGih4Y5TmZARBQLxcAGFGO3CZY0ga3CBQLhkkeFADWZmZzU8ayLDLAAL2Q4Kccx5FQpy47BASTXx2eVQDQuXCH0QrbFnoLnNpsAEuFljojwKPMvNXA5jeskGe8hgQY6YPKfbCdKYokJF8pFZF2QqT2oKeWaO2igtlqxhgZyoXyIWQCLaWiqtltrCgkWDB5oJrKxTYgt1BrCZ7y7KtlIkKAqCeY4CS0pJCLbOpiABRs92m8m0rl51iAXL+YOBouZ+ggAIGblLWgH+mUAARofCmssAGN3CQQ71OGRArbb/580K/uzBggwhjWrUCqqGAABH/sgzvIkMK2Wa0sCkMWCqPCxkjcwEMBIfUaSlAIITBmiXv8lzH/jwJcsT9hBMzMhk8m5IG7zYi6EEw7KwMCykfRPJqSXPjAcxG74JAlinBaUoBCOEb9Y+LhrRnKTogVPTWycAQ0wCmUN0PBmQr48LPUIOi70EHt83L0BndUMoFCK1sNy8chLRC3J/4LM/Xf/dSwqClzN3PA0EnbsoCah8Ewd4I6Sy51E2fww4plctj7ea7WAxRDKUE7g8OpAviAgU3ZBC5JzloxG0jNhzkQeu+VJaDArWGgi1Eeo/CAM3PBN82MA2kULco4iLEOimGo7Pr5tDEQLEjEnQOTQO3M6J6/z9+J87NCFqDEv1B/IYywEHqkd5NA+SGcgHyz6A+Ct/+oNA6OksLBdYOwjZS+MpI/0MHfkJxgouRonb+UN7W5HEvUSSsH8UThdn8YSXzyWMEEkzE+PoBrFE4bh4Z9KA89PeJBh4Ece47yOhUKI/nMYIB3gvG7kaxgYOUUHL+KEEoZuWP7TFiAQeREPb60YAQHsIHCOkgKHL4i48B8VKg+ABC2gcKnKGDBvLzRw5A0cOD1C8UTZrHCsLIxPAZAolKIwUR5VHAK3IQFAecx9hE8QJ/GICNGASFyM6hRFGkwI+AnEf5GBE6dMTPkDVL5MhAUb1zCHEUMTiIJAEIiiD14/+SosikPwZiAgCY8pSoTOUpiUAKIqjylaoMwhRhSctTkm4GtYQlK0cxhFzCcguU9CUsbynMVFaBFFgoZipVAAoFKDOVpJPCM03JA1I0YZqndGIhJNACbAKAdEfAJhNIMQJvAgBDnsiCN0k3AWxKgRQ4MKcVHfGAdW6uCth0AClYYE4ogEIHNcAm6XqJTYyBogPmrCYoXDlN0hXBm+kSxRS8qQI3GgIEAX0m6RrgzUeGggfmHNInItDQzZHAmzsUxUO9KQbhKUGjm6OAN7FAiheY8wCi4EBGhUk6BHgzC6TQgTkBEMBPYECZrVMBNq9QigOYcwij+EIxW/cEb2ouFCT/9aYDpOgJD+yUlq0rQ0dJUYKhEoAUHJhoLVtXT2z+gBQX6CZFASW8CHwVmqSDgTeRUIoQDLUIpgABEe5qytZlwJstsGgicjBUE3BRFBkwQBbkWtjWvRSbIrWfUs3pBVtYgAUkMEAXeGcEb76VFFk1pwZ4pwsDeLMHjRsqABzwWNbmy5yfG0U7h9oDbdrWEwtwgDdHUIqyynaXv0WFFX5Km3DK9rTJNYUHvFmD3IqCsbIFQAOia4oPmDOlomCAFrILgCZwtxRC8OY4S1EA8gIgCrM7ryGiYM4FkoIL7jWCb+VLCBGY0wymuAFlZduD2vIXEQtYAkVTFAqputcBazxw/yNSO80HTG687gWAEyIqYURwwJxKUKwiWFDKDJsgCXTtMCEYIE1vgtEUbc0wAFRAAK6qGArmPIKIFbFcGZuyBVRgoYrRMIChvrgUHUivj0+phCKIYMetA6k3DwBlRIAAl0tGpQO8QAASgMCg0Y2nOYl7ChEQNsunVMEUhLDe3y6gxdhcAoNFoQE0+5K70zVnElLhWjuDNboXwDI2TZDCePh5mNz9wVD5yudDq/K8OhjwNOt4ChSU2NHfPC99zTmDq5oCBoI+tHxPIOlnKjQVQHCuqOW7UnP+0RYdwOeqz7uBzSKWw6h4QKllfOAYezMIYD4FCHpg5wNbQNXeNEIuFv/QhF1nV8LGHep2c/EB/Pq4w1I2Zw1AiYsYEDvDHf6As4vpAFzbggEkCIJ7VRyA7G7B07dgQAmQ8OwOL6Cqsg2CDXHBgiiEGqYdpsCZn/mEOeNCAiQwgnAB3mEcZ3cCwZZZAaKA7LUOeQG7le0EDM6LDODgB1bYwp+HLANbD/UJ+17GBUCQAgx0IQkRGIKyhywIGrg3COmjuTsIml0lnFHn7ZDAt7OrgkICvR0yUDB5axCAo79DBJfO7hgi7nRsHDXDQTB31bGh6Ay3wMJbHwcVfMwDeIedGQvwgo9VMIL4nv3gTliyE9D5dmZ0gAlLNkEUUlx3ZGxg6DJewgiq3Hf/UmwA71mWggYIX/hQdCDuaBaCBozYeFRIQO12nkIX+F75VFiAoXZ2wBCK2nlbEADTQXiA2UsPuqj7eQK6Yj0qOKB0TAMgCEmAwX5lf4gTgMH2qDTBBJKAg+vx3hEWoDDw0+yECDzgBRTg/PEJAQGTL/+VJpiCFpDAAyMYgQrTH8QHfn99hk9/AV9wfflHHn5BsADx67d4+wexgAcsPP6vnL8hZGBt/ONV/4WAA0rmf5UFgIVQf/+2fgaICB0ABdZ3fQuYCBsgBvcHgRGYCBlAAAnoaBe4CL0ygJjWgTeUAlYwcNcmgrjTBCCYZSj4CTtQBCLHgi0ICi5QBOrGazMo8AoygAEhsIEllYPGAwIjQAVOZU9AeAoI4AMjEAETcAVTdYS5gAAUUAIe8ANDUAVIoAUHcAVXgEtQ+IVgGIZiOIZkWIZmeIZomIZquIZs2IZu+IZwGIdyOId0WId2eId4mId6uId82Id++IeAGIiCOIiEWIiGeIiImIiKuIiM2IiO+IiQGImSOImUWImWeImYmImauImc2Ime+ImgGIqiOIqkWIqmeIqomIqquIqs2Iqu+IqwGIuyOIu0WIu2eIu4mIu6uIu8iCNn8IvAOIjAOIyEo4fEOIyBeIzI+IfKGIzM2IzFiIfQKIjNKIzEKAiBAAAh+QQFCgBoACwsAYwA7gAwAQAH/4BogoOEhYaHiImKi4yNiQAzV0sHPUhVQz8eJRQIjp6foKGio6SlpqeeAKqrrKxXExEjPp2otba3uLm6pK29vqoHVBhADLvGx8jJyoa/zb4zIRgyy9TV1teKztq+QUUu2ODh4rjb5b1bRQrj6+zt2ebwrEJNNu729+Hx+qs1VinF+AIK3LWvoCohBi4MXMiwlMGHMwhkaEix4qKHGB38oGWxo0WMIFVA6eCxJEOQKGc8WGCy5T2UMIWUcElzHcybXAbU3Hnt5k0HXVjyHIrMp88eFIgq1WXUp4kvQpdKNdXUKBidU7OKomLECA8kWqaYqGpQBQStaE0hoPDiQQQnKv/ImotgIa3dUzJwJJkwVu6vCSfuCjYlAUaSIH57LeEwuHEpGQYmJF5lAoXjy6NsPEA8mQDmz6FcDHGQmEhd0KgbIegyxS8PCaljL7KgQYhcJCRl6z60QIMUskw47h4uaMGIJVV7bCDOXBCCKH19MsndnDgQJ02dwK5OnMGIuD69ROW++wQPo1TIM2fwoIXPH+qZszjiE0N84hfG3DQh4j7xADXAtMQ0/u2WAmkoPbFdgbJRoARMQzC4mw2cgUSDhOAYMUQERXSxQgogKAROBk+gpAKBGFbTzBZW/IDDRNUgIBlIE4yXYjLmHBFFAQsic8GMGEFxIzX6OGAECT3u0kH/iRjVkNSQOBY0QxQsILNBhQY9YSOUuYCERAkA6XLCFiAFwOUxMAVBQpi4sICgQS18cCZBN/UQwy4lBPgQD3MyZRQXcubSAEgz9XlLVS00seUpRmB0xGmGoiJXDyDgcgGW+zwQaS1+taDpLSC4V5Zwm44yWRXUoWIARvCV6tBkRwBxy3kGOQCjq6JMpsoMMNhywgwPJYGrqboCUJktGDzkgA7DhlLsKh7YgsRDrTabyrOqNFDLDdHpM4OI1jaCLbS1JPFQtOGKO64qlp3SAXIFSbFouoUwwcQB4BXLHyojPFQovY1cAAIJBGTxJlkzVGrKAgcYZAXAoiwgQhEPkiVE/6qj0GBQDYFBPEoMVHR7UxWnLEBfQV94XMoJSRwM06elaBwvmyqHkgEWImPUQpWlLFDxPj7UbAoI2N2kxbyeDFoQFkKfgoHLDzVhSgf5xjMFzU2H8oEWMLVwgylkGMRY1qVI0ChKXJiigEFRkH1KFDAVYEoP8bp9ShMoaYH1J6sWpLDdpASAUg6l6KCnPjADPsoPIB2xtyfT7pO24qUQQWgp/e7jANKUMyIB3Q9NULhBO3ROygdV7/PkKKDro63po2iAkRmlML7PGEJ3YQAJLEB6ihcPqZDkJxwUNIXQrLSQhQG3np4zPISPYoGo+jQPsC81EPH3KEU8FEIpkevTq//KzdQQAamfbAC1OS2AG4oYBSV+vTNKjC2KuQb9G0oKBaVHvjY1QFcodEA9fUSAFCcoyBNqZo6UiaIMBjlAKa6wDxUw0Bz2CYUPHsKsUWShIOgLFzxqYL9PNKwgLyAFFgqyuvmZQwkhXAT8ClIEUnigICT4HzwOCIoNFoRPo+DfPl4HMX3UYHuNWEDqzHG8UYCAhjqEBxFCQat9YMwTFyhIhDy2DxNYjxFQMAjPRLE+bZCMi5kCxQsMggNSkEkfokOjPrIACiAYZASkYMI+jhBFeLRgeIqQgEGkNooqwkMKfYRHCxtBwX0IaxRW2McVEmmO6HnCNvvYoigs5y1KlsP/AKBoXTymOApOxsMEntwGIT1RNH2EgRQRKEgqtbFKR+hxH68cRSz3sYwGBOCXwAymMIGZAlKkYJjIHOYKQKGAZDoTmCozwDOTWcxRFGCaycTjJ4CAzWRGs5vCTOEoYABOYYLyEzoopzBVhgF1/jKHo3CBO4HJOUMswJfzVNkK5tkuUVBgnr9czidyAFCV0WCeGRTFBwAagEB5opn59NgL5im/T2SAoUH7xAXwqU6VXXOe9UyEBRgKz0+UIKIQEwFABSoKDwD0AY9LxAZQCrAdABQroiABQzv2iRi4U2U3AOgiP6FSgJbQERIYQUc9dtF5jk8UQQVoQj9hA45iU2US/wCoJUNxAYYGgKefYEE5a/aAeZ5zFO0EqNxEIc9u1gwFAHUfKHz6UkA2ggJW9aZHb3o6r2ZUFDZw6TNrBlF3HvUT92SoAXwHCgnQVa8ekwFAz0IKHHi1P6XYQAry+suaZXWeDYgpI7jJ0AbE8BMSUEAOrCo0pc4TrKBYQFkZulVTMCADN6DAN2p20nketqdeDQASYeeJf85TA4UL7gNOS9xEpDOuMQuuBkLaXEKwR6ilWGhw9VddRuh0nrUFxRn2GdzfdvcQxp2nXEER1eCW7ryLQABDh/qJM2gguL/cLXwTkVZ39nMUA8DvL2Fwhv0igpwA/SIovovfElCXuDZg6P+dSoEAzgJUA8ytLgME684HMDY0Av7lA8ZoYEE81p3qKAUD7hviAECApQaOMEBHINpGZMDCpRWBXYl7hv66U1ZqazEwH8CBHZvOBwxdQY0bMVEh/7IBKUBRdTvg1eGGwgLkdfIvRyACGyw5awx2Jwa+vIgNSFPLwXxADjhwgw08GGDaxe4pqopmZz7AAxj4b9MY4GN1euDDogBBna9qt/TOE7OnMPSghwm4BZwZtBn2hE0XjUzFccCrlEWFoiltJsBt1KskHhqO0Uw5BAM0IbaADKc7q7hPk/QWG8jyojtX1PnewgJNnjXlJPBo0MIYFQoYtYBNV9gLv9kRG2AxqTv/xwBZz7ONuGCAC4TNUNgF2L26QECYQ0zcbbuzATjFhQyUPWzYVVi5v7bFGW5Abq82d9JeHcF61T0ACOC3uQyAq3SNjIoMwKDXSyXujfGLAkDjYgE3wMFsx1pdJOOXBsfu2QBg4GxndpcB9n64wY0hgQ9w4AWurXR3O7Bwr6KA38dYQAYGwAIXiCAGBeAucQUtYA1cscTh+Ch+R6BgnF9jAfrG7wPC7XNwdIDDwW3Ae4seDjqHGAcbZ3oyxNriFfRc6sm4dIsbkGKsW+OYQibBvL1uDAYQVMgGoECBya6MBWRcyC9muzIsEPStwwDlcidMu0PsAQqQOe+ikEDdhYwB/xD8HfCfsMDbtVz4wyM+iWevswd2EPXHg4IBvR30AwoAW8uTQuuU1oACxu55T4CA2i2GAAVuXvpGBHbVwFyBCGQQ8dJf4KCwB2YDaCCCD7C+9YVgwIlzD0wDQCAGCvhABvCOeCCUnPjIbIAHNAABEpSgBNUsPQJwD32Gt54BPkB991kNfDRkYPDjF3n50cAABTw//cFcPyE64G34d1r+g/hAxdOP/+ArAODj13+GYAE+8H7EJ4CHIAEcYICrhoCIoIAAyGkOmAgLQAF9RmkTqAhnMAC5hoEZuAgd4AIX6GQf6Ag6IAIhR4Il6AknIAL7524rCAodwAI4EIE/FYOicOIGG0ABKTCCboWDpmABJ0ABMUADNshoQHhrOvABFMABBfACEKABGOABBiBNSXiFWJiFWriFXNiFXviFYBiGYjiGZFiGZniGaJiGariGbNiGbviGcBiHcjiHdFiHdniHeJiHeriHfNiHfviHgBiIgjiIhFiIhniIiJiIiriIjNiIjviIkBiJkjiJlFiJlniJmJiJmriJnNiJnviJoBiKojiKpFiKpniKqJiKqriKrNiKrviKsBiLsjiL+HcGtniLeXiLurh2dbiLuniHvviLvRiMtmiHxFiMwxiMeEiMubiLghAIACH5BAUKAGgALCwBjADuADABAAf/gGiCg4SFhoeIiYqLjI2JAQYGHhgaEC8FHBQfOhaOnp+goaKjpKWmp54BqqusrAY0MRQnnai1tre4ubqkrb2+qhgpLBtnu8bHyMnKhr/NvgY4LB3L1NXW14rO2r4rIifY4OHiuNvlvSMiOuPr7O3Z5vCsGC7T7vb34PH6rC8DxfgAA+7aRxAYhQUCEyosVbChAQ4SFkqcuKihxQcQKWrcaLHjAx+0NooU2LGkAQUMRqq8V7Llig8rY65rSZNEPZk4q9Gk+cBFypxAke3ciSJD0KO6hu5s4OMn0qemlA6lgQCq1VEpSpQgAUGDhwZSCz4AcrWsKQkZPiiIAcFAWHMx/5yanUuqwwcRNMC+/UXjAt2/phbIELFiby8PNgArLtWBAgTDqxqAWEx5VAcFhSH7qMw51IkCDwyXkNu5tCILOzzsJYHQtGtFDEBgeAsh5OvbhWLPlooiIu7fhBhQUK1Ug2/gyCXA0EvUNvLfGx4PhdD6OfAzFELvzEHa+u0LJIam8P78jALmJTmQf54hc0sW65FbwEGzQeL4wHegb+jhJv7bA2jXEQrV/fdaBiO0VICBv3XgnkVkMQhOCQXEIMIOLAyQQYHWSIBCSQ/4JyE1zYzwAgcfHLeMBTSUBEF3IwpVzgowDMChMQu02NFmMZIYzwM43HBjLhZ8aFEDRvWoTP9BBsCQpDESaDAgjEqSYxEE/hhzQYIW7VCljB1pcMM/uWQgIEENVPXlQDRpIMMuA+ynDwlrsrkTCWriskNHMNVp5VAN+JQLfQ2tQKWfo7ylwQa4WPDgPgogasteDUR6ywZywmOAipLyYtgLzpmigEXqdRoVZCswakt4YnFqKiiQqWLAm7Vc4FZBIrzqaayS2cJCQw/4pWsosbJCgS3SEVTqsJ8Uy4qXqCCQaTkGDMnsI86uciwqIjS07bWNZMvKZKdYQNw+GBwKLiEooIDBmZDZhwoFDfW5riMLbHADBznAq5QBqpbCwG77vHDvKAzYIAKXUq0QaiggNCTswaPIkML/tBYZbAoDj8LjAsWmXACDvx1ZWgoQBWFAJsijKIfxPkhuzLA+37BsSgbJlqSBuo3sSRAMNqPCAskEfVyKBURr48HKQY+CgJQlpWlKAQXd13QpCxDaEZ2l6FAQ0FefAkNLA5gCtT4YhI2KCzozDQq9BAWsNik+W3RDKRcUZPLcpHDQ0Qpuf5IzPFzzXUoJfJYCtz4P8Gz4IgucTRAEeBdU8+NOJ12OOqRIDg+0mI8ScUMxlOL3PjgE7QIFN2TguCc5AGttIzYQ5EHQrDSQgwKuhiJtQ3cj/HIzvYPrSwMpyC1KtwWlTsrg5tAKsjMxPOyIBJo708DsjJyuz94HazOC/9WhME+QvaEMQNB4LG/TwLegXDB8M6WPkvc+KNhsjtGhUE1Q2qS41Y/0Zw74eEZipIjdPorHLHjIKxQE00fwRDG2fTwpfPAYAQMT4T195GoUi4vHBDEIj/p94gQFKVz6CAI6EsJDeYxgQPZ+cbtRbIAgH6TYPkoQClbtw3qMWABBFjQ9fTRgg4fwQUEuCIoZ9kJjOoQUKD5QEPSBYmbmoEH79pEDUNyQIPADhZHisYItGpF7hhBi0UjhQ3gAMIoWBIUA4wE2UbxgHwYwowRB0bFyEFEUKcCjHuMBPkZ4zhzsAyTMBukxUECvHDwcRQwIwsj9gUJH+oikKCa5j2WYAP8AoAylKEcZSiKQggikTCUpg9BEVboylCybwStVacpRDGGWqtyCI3GpyljycpRVIAUWfjlKFYBCAcQcJcukkExQ8oAUTWhmKJFYCAm0QJoAYNkRpMkEUowAmwCIkCeygE2WTUCaUiAFDsAJRUc8oJwgq4I0HUAKFoATCqDQQQ2kybJbSnNioOgAOJ8JClQ2k2VFwCa5RDEFbKoAjYYAwT6TybIGYDORoeABOHn0iQgcFGQkwGYNRZFQbIrBd0qgKMgogE0skOIF4DyAKDgwUV6yDAHYzAIpdABOAPDvExggps1UIM0rlOIA4BzCKL7wS5s9AZuXC4VHsekAJnrCAzX/daXNynBRUpSgpwToW0NfabN3SvMHpLjANR2aJ99FIKvKZBkMsImEUoSgp0UwBQiIAFdQ2iwD2GwBRBORg56awIqiyIABsrBWv9ospdLkaCguQFRwesEWFmABCQzQhaAZAZtoJcVUwamB0AUQmz1QXE8B4ADEmrYRLMUm50Zxzp72gJqvLcQCHIDNERxutQCoZW49YYWcCmybqw3tcBvhAWzWYLaiKCxwG7DcRnwAnCMVBQO0AFwANKG6jBACNrtZigJ0FwBReF1uowBOA5KCC+c1Am5fKwJwmsEUN2jsanvgWvAuYAkOFVEomHpeB5QRvIYYbTMfEBjunhcATlgo/4LRwAFwKmGwimDBJx9sgiS0tboMYCY2tWgKsz4YACoggFVzCwVwHgHDiijuiUHZAiqYcLgD6CmJGSPeGYdSCUUQAYxtplFsHmDIiACBLH0sSgd4gQAkAAFA57ZOcPr2FCLoK5NDqYIpCIG8YVuAiKW5BAGLQgNbxiXfmgvOJNTCAGkm69wusGRpmmCEDIlzL/n2g57W9c16JqXhdKDfZr7xFCjYcKCzaTj2gnMGUTUFDOqs58edoNDJJGgtgIDcSj+upODMoy06IE9PG24DlQ2shFHxAEyfOHQmxmYQpnwKEPQgzaGzQKexaYRcLKAJrgauab+6Wurm4gPwnfFri/8MzhpoEhcxuPWDX/uBYP/SAau2BQNIEITz5jYAwN1CpG/BgBIgQdivXcBTVxsEGOKCBVGgtEpfSwEtJ/MJZsaFBEhgBN7O+7UtBu4EaL0LCRQgCruWc24XUNvVTiDfxsgADn5ghS1odbkySHVPn+DuZVwABCnAQBeSEIEh9Lq6NDhvEMg34XX4E7hKCGPLwyEBaQNXBX+cuThkAODu1iAAOl+HCBQN3DEQPOjUCOqDg5BtpFOjzw9uAYOdjg0qzJgH46Y6MhbghRmrYATq1ToqJOAEHztBnGJHRgeY4GMTROHDadfFBmx+4iWMAMlx9yLbmSwFDeA9747oQNm3LAT/DQAR8KSQQNfTPIUuwB3xRzNomh0whJ9C3hQEWHQQHpD1y4NCA0SP8wRm5fm+9XzRAAhCEmAw39IP4gRgQL0oTTCBJOBAeq4/jYJlz2UnROABL6DA43MPAY3zPpUmmIIWkMADIxiBCrn/QOyP/2/PL+ALoaf+xXOPBhbsXfsK5/4CHuBv8KeS+4WQQbLNH1f0EwIHPWa/Y91PiPHLW/v0P0QHoGD84+cfERsgBuXnf/+HCBlAAPcXaAWoCLYSf4u2gIvAAClgBfambBDICDbQBA7IZBfoCTtQBBbHgR34CS5QBN32aiMYCjKAASGQgB+VgtoFAiNABUgFTzBoCgjg8QMjEAETcAVNdYO4gAAUUAIe8ANDUAVIoAUHcAVXIEtA+IRQGIVSOIVUWIVWeIVYmIVauIVc2IVe+IVgGIZiOIZkWIZmeIZomIZquIZs2IZu+IZwGIdyOId0WId2eId4mId6uId82Id++IeAGIiCOIiEWIiGeIiImIiKuIiM2IiO+IiQGImSOImUWImWeImYmImauImc2Ime+ImgGIqiOIqkWIqmeIqomIqquIqgaAAJIAACcAA554YRAIu2KACFpIYDcIu2mABwSAC8aItl44bAGIwCMItqWIzBOIxtuIvB6ItwWIu8mItr6IqwKIuCEAgAOw==";
    let autoPagerLoading_gif = "data:image/gif;base64,R0lGODlh8ADwAPcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAICAgUFBQgICAoKChAQEBUVFRwcHCEhISQkJCcnJywsLC8vLzIyMjQ0NDU1NTc3Nzk5OTo6Ojw8PD09PT8/P0FBQUJCQkNDQ0VFRUZGRkhISEpKSk1NTVBQUFdXV1xcXGFhYWVlZWxsbHJycnl5eYCAgJ6enrGxsbGxsbGysbGysbGysbKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrOysrOzs7Ozs7Ozs7S0tLS0tLS0tLS0tLS0tLW1tbW1tbW1tba2tra2tre3t7e3t7i3uLi4uLi4uLm5ubu7u728vL6+vsDAwMLBwsPDw8PDw8PDw8TEw8TExMTExMTExMTExMXFxcXFxcbGxsfHxsfHx8fHx8fHx8fHx8jIyMjIyMjIyMjIyMnJycrKysrLysvMy8zMzM7Ozs/Pz9HR0dLS0tLS0tPT09TU1NXV1dfX19nZ2dra2tvb29vc3N3d3d7e3uDg4OHh4eLi4uTk5Obm5ubm5ujo6Onp6erq6urq6urq6uvr6+vr6+zs7Ozs7Ozt7e3t7e3t7e3u7e7u7u/v7/Dw8PHx8fHy8fLz8vP08/T09PT09PX19fX19fb29vb39vf39/f39/j4+Pn5+fv7+/z8/P7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJBwDsACwAAAAA8ADwAAAI/gDZCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjyuTo7NerVKM2PQLUZ86TWQpnpZnTB5Cj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srKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKzsrKzsrKzs7O0s7O0tLS1tLS1tbW2tra4uLi5ubm6urq7uru8u7u9vL2+vr7BwMHCwsLDwsLDw8PDw8PDw8PDw8PDw8PEw8PExMTExMTExMTFxcXFxcXGxsbGxsbHx8fHx8fHx8fHx8fHyMfIyMjIyMjIyMjIyMjIyMjIyMjKysrMzczPz8/Q0NDR0dHS0tLS0tLT09PU1NTV1dXW1tbX19fX2NjZ2dnb29vb29vc3Nzd3d3d3d3e3t7f39/g4ODi4uLk5OTm5ubn5+fo6Ojp6enq6urq6urr6+vs7Ozs7Ozs7Ozs7Ozs7Ozs7e3t7e3t7e3t7e3t7u3u7u7v7+/w8PDw8fDx8vHy8/Lz8/Pz9PP09PT19fT19vX29vb29/b39/f3+Pf4+Pj4+Pj5+vn6+vr7+/v7+/v8/Pz8/Pz9/f3+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8I/gDRCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjyuRYrNaoTpQYBXrDxsyPUwpPgTHD5s0fRpQ6jbJVbKbTpyyFoeLkSE+aH1izZv3yY5TCUVjB/OCq9UeaPI44oSIGta3bjKswKWojlmzZuz9EKQyFt+/YNooyrXpLuDBCVJb2iPHLGCsohaDENi5LVgwfS6gMa37q65Min2IlT777xZNCT6Pxkv0yVNEnX5tjq8yVqc4PMKztpiatSeEm0bvLSgYDpk6mXLKTgxzWKc/W4JMxKcSkG/pd3FjzdBKm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urq6uru7u7u7u729vb+/v8DAwMHBwcLCwsLCwsPDw8PDw8PDw8PDw8PDw8TExMTExMTExMTExMXFxcXFxcbGxsbGxsfHx8fHx8fIx8jIyMjIyMjIyMjIyMnJycrLys3Nzc/Pz9DQ0NHR0dLS0tPT09PU1NTU1NbW1tfX19jZ2dra2tvb29zc3N3d3d7e3t7f3+Dg4OHh4ePj4+Tk5OXl5ebm5ufn5+jo6Onp6erq6urq6urq6uvr6+vr6+zs7Ozs7e3t7e3t7e3u7e7u7u7u7u/v7+/w7/Dw8PDx8PHx8fLy8vPz8/T09PT19PX19fX19fb29vb29vf39/f39/f49/j4+Pj4+Pn5+fr6+vv7+/7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wj+ANMJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPK5FiM1qhNlBoRkvMGDZNTCk8xQfNGzqBGlDaNqlVsptOnLImp0vTIDxsmWLNmNcNklMJRWrlqZbKmzyNNqohBXcs24ypMi+BgFTu2LpNQCkPZ3cvEDJxFmFi1HUwYoSpLf87wXYz1k8JPjO2KPQPIkqrCmJ/66rTIZ2TGZjgp3PRZ8tyhizr5ysxaJS5MeE7TLV3XTCaFmmiXxoMJV+vfIIdx6rNVd+RLCi/NNm6aSZ9NwoBLvzhqEdflzPeaqaSwUvbP1xf+eZ1OvqGwS3Kxf9dOSSGl9eCxwrk0rLz9grIczVUPvzYkhZD0Z5wjstxXHiqKCMhcIwo1omBpYikClIGtlULIaQ+WxohCjGQIIVaElEJhYakMgqGHny2i0CIofsgEIZeNCJUtjPDXIl+HKHTIjbRxxYgtMspUTCQ8MpdjQonYWKRdkTQVZEucqNHXkrQdidCOVNKmhmhPpuTKH1NmWZqVB2EpZmmAuNKlSZOEeWZkZpBpkJlvLiZWe2uGdEocbtbJWCIKJeInbXFM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kJ3SeaH9t4AQBgcgoJ06mBDJ9yYwYmVp8AHKKQIc0ighcmlvAJe0OQINMigS4mqLMAKrSQIAUicEImujYALRmZg+mhB/eCPzoXuvBgM0Kpcl0B1UIh66JhCkkAIHSowmkBzJBB1VahCWcAIcsJWlKBAg9yC8AYpf6gkqEAIOGpEqoBAnCB9okBrA+KUFAQcl4AEUsI8r8BjrQRmWgaddGFEMc3ACIVCksugCeWEcf4EJykioG3EKcIACI9ABqkmHMdBvi8EGZoEWYSmpIkELjQADKVACIvABGoABDtoGQTEURUEISKEUtFCCogoTxRCqt7qrvNqrvvqrHRUQACH5BAkHAOoALAAAAADwAPAAhwAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAQQEBAoKChYWFiUlJTQ0NJKSkqqqqrGxsbGysbGysbGysbGysbGysbGysbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbKysrGxsrGxsrGxsrGxsrGxsrGxsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrOysrOysrOysrOysrSzs7Szs7S0tLS0tLW1tbW1tba2tre3t7i3uLm4ubm5ubq6uru7u7y8vL6+vsDAwMLCwsLCwsPCwsPDw8PDw8PDw8PDw8PDw8TExMTExMTExMTExMTExMXFxcbFxcbGxsfHx8fHx8fHx8fIx8fIx8fIx8jIyMjIyMjIyMjIyMnJycrKysvMzM3Nzc/Pz9DQ0NLS0tLS0tPT09PT09XV1djY2Nra2tvb29zd3N3d3d7e3uDg4OLi4uPk5OXl5efn5+jo6Onp6enp6erq6urq6uvr6+vr7Ozs7Ozs7O3t7e3t7e3u7e7u7u7v7u/v7/Dw8PHx8fHy8fLy8vPz8/P08/T09PX19fX29fb29vf39/f39/f49/j4+Pn5+fn5+fz8/P39/f7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wj+ANUJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPK5Khs1ypToDQ12oMnzhJYCmGhiYNnDyNNoEyt2qVsptOnLJPFKsUJkZ0lWLNmPbNklcJVWNEs4ap1iR1DnErFagq1rVuMtEZhyiOWbNm7S1QpVIW379g8mEbReku4MMJYoRK18csYKyqFqMQ2Lku2TaJQsQxrfkrs1CWfYiVPvnvGlEJTo/GSPTP00ilim2Or/DUq0BI0rO2mJk1KYSnRu8tKRoMm0KhfspODRGbK0Nbgk0UpFKUb+l3cWA2ZQqa8+8VVmLj+Vrfe90wohaHIT8Z+5pJX7/AbIhOVZyxw9X7PgFIICv9osnmIwl18BBKkyyZYnTGef6p1olAnDAaHxia6FBgfLJZECB0amiikiYapkWUJUBbK5kojty0IYl+ZKJTJiiES14grJRoWCyPEqQgjXpcodMl9O5aHVSOZ1QgVL5mwFuRuaEiikCRL7sZVJrwYKZMyn0RpnZMJVaKjlnh9wpaVLJkyx1hg7sYlQlCmmRoac5xCpkq2JGKfm6mteZAkQOLZFxqJ2DKnSaBg5+d/ehrU5qGNkbXfoCHBsgeajI5WiUKV9FmpcEvoQSKkHPV326ajJVoQn6Q2KtajoGKESx/+o6baWJOYaiprWX3g0qpFpVB6a2OmEpTpr6qWsutEL35JLFbBDiSJsssu0eKxDuGiR6zR+tWsQM9m29geulILmbelPknuZHKKe5Co5/qFxqUJdduuakuwqq5AL87LGLxs6ssYJveqI0wgCvqLF63xQntuccKIiwsetvqLMEKVGMwYHuG2WssbFjO2rToVd0zaEm8IuitqIuPF754RG2wataL4mvISHy86M1bSqcvuzGfUfPOo9orbiaEpr6zoz0s4GDC+RHf8sZcp4zbt0gJZonC0E7M8syVUE6RMIi1763PKiYw5p8kMKWPI1cSObbBYhpitENqy5fLG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5Fqu5nqu6Jqu6joQAQEAIfkECQcA7AAsAAAAAPAA8ACHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBBQUFCQkJEBAQFxcXISEhIyMjJSUlKCgoKysrLy8vODg4QEBARkZGTk5OVlZWW1tbYGBgZGRkZ2dna2trbm5ucXFxdHR0d3d3e3t7fX19hISEi4uLkpKSl5eXnJycn5+foaKho6OjpKSkpKSkpaWlpaWlpaalpqampqemp6enp6inqKioqaqpqquqrK2sra6trq+ur7CvsLGwsbGxsbKxsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKys7OztLS0tLS0tbW1tbW1tba1tra2uLi4urq6vLy8v7+/wMDAwcLBw8PDw8PDw8PDw8PDw8PDw8PDxMTDw8TDxMTExMTExMTExcXFxcXFxsbGx8fHx8fHx8fHyMfIyMfIyMfIyMfIyMjIyMjIyMjIyMjIyMnJycnJysrKy8vLzM3Nzs/P0NDQ0dHR0tLS09PT1NTU1dXV19fX2dnZ29vb3Nzc3d3d3t7e39/f4ODg4+Pj5eXl5+fn6Ojo6enp6unq6urq6urq6+vr6+vr7Ozs7Ozs7e3t7e3t7e7t7u7u7+/v8PDw8PDw8fHx8fLx8vPy8/Pz9PT09PX09fX19vb29vf29/f39/f3+Pj4+fn5+fn5/Pz8/f39/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////CP4A2QkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8rk2OzXK1WlPEHys+fOF1oKaX25s8cPJE+lVL361Wym06csm9lKBQqR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srKysrKysrKysrKysrKysrKysrKysrOysrOysrOys7Ozs7SztLS0tbW1tra2t7e3uLi4ubq5uru6u7u7vLy8vL28vb29vr6+v7+/v7+/wcDBwsLCwsLCw8PDw8PDw8PDw8PDw8PDw8PDw8PDxMTExMTExMTExMTExMTExMTExMXExcXFxcXFxsbGxsbGxsfGx8fHx8fHx8fHx8fHx8fHx8jHyMjIyMjIyMjIyMjIysrKzMzMzs7O0NDQ0dHR0tLS09PT09PT1NTU1dXV1tbW2NfX2tra29vb3Nzc3Nzc3d3d3t7e39/f4eHh4uLj5OPk5eXl5ubm6Ojo6enp6enp6urq6urq6+vr6+vr7Ozs7Ozs7ezs7e3t7e3t7e3t7u7u7u7u7+/v8PDw8fHx8fHx8vLy8/Pz8/Pz9PT09PT09fX19vb29vb29/f39/f39/f3+Pj4+fn5+vr6+vr6+vr6+/v7+/v7+/v7/Pz8/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////CP4A2wkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKlSWfMXMqcSdNkr0sZLlioQGFCBAcG2iiMRQaNmzqNLn0yxaqXs5pQo8qMBUcnBQgLFhgwoFUrVwMcFLIiE6SsWbJl2QjKVGpWTKlw42p0VudCBQlfs27dy3cvBoWrzAoWjJYsmTeVRNmSy7jxwjgWKDDY67WvZcp/E6YazLlzWTJlDIGa5bh0XFR2gV5ezfqCwlOeYxMmQxZNJVTHTOtmGeoCBb2sg1te4DphKdnIPeMRFWy3c5GtfFcWTr1vcYShkmvvLMjUsufgM/5mqDC9uvm9FhSC2s5+MJlKrcLLh8jqgoTy5/OnT+ipvX/BcITy3XwEGmRJBfkleNl+CGny339oBYEJLwUW6AaC+CmYXwUKXfLgh2ZVEkuF4KVBgYYo9sVhQh6CCCIZjbxComlxnJjijVutiFAlLr5YViOkzRgXJuThaCQFCknS45JBWPKLkFDtYoGRVBqAZEJKMtkj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9vb39/f39/f4+Pj4+Pj5+fn5+fn6+vr7+/v8/Pz+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8I/gDVCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqVLgsmWvZxJs6bFZbtaqSr16ZKhP3SsxFLY54EIEidSqGDxYsanXTajSmWpTFaqUJL2WHHjxorXr15bKZzB4UGHB2jLPihLAsWKF4GGTp1LFyOtU54Cbd3LFyxYVgplqEVLuHDasyVUvDgks67jxwZlmZoEp6/fy34BJ4RhuHNnDmU5fEDRQhDk01KJreo0p6tlzLC3rlLI2bNtw6DLilABYzbq3yl9nWLE9XXs41ZQKXxxu7ntDhxQvDAFvDpIZKokeXWNvDvYUwpd/jgf/1y6K+voL7by5L097FIKWwwmT39tWRUz0ut3iOxUIO7uBegVfAmxcFZ9CBZWggti7ecgQbqAIuCEfomi0AoJZmgWYSt48uB+sXBiHIXufXKhhigSpsIfH1b3yiUjkliiQiocmGKGoKVgR4uQyQIjgDJS2AmNNxb5QAqm8TgVL+wVF6SMbmiiUApG3giaCqAoWdMyo8T4pIBSJkRllSmC9sAKuWjpkip4fOmmV5tMSaaRHIwAg5oq3TKJl28GGCZCKcw3Z4ooRIKnSaU42eeXfx4U6KB0dsDCoSLFUsiiizZq0JiQFtlBByboQalHpACJ6ZOaFsRpp1VOOmpG/rkkcuqibsQpJquDnmDrqxSlouisbqZK0Kq40vkCrxN9Auypwg5EbLFGqgAMsg7lcumymDYr0LPQFmkCJdQutAq2s2qrDrfdWnlnuAeVQm65cqYLqavsDtTku9lOKai8RXKggjL1BsMIvvDeyi+kJ6QSbi5/EFwwoPseXGYHJEyCbC1yOHxqlFPaKDGZIByCrCoaMxvvx2RycCy1ppTcJ8cGo9wvBy7U667LwZ4s8430sisKzk/CDOjOVq5QL0GfmAp0e0I7SnSKKiBzNEEiLj1h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ACH5BAkHAOwALAAAAADwAPAAhwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAICAgsLCxcXFyYmJi4uLjMzMzc3Nzg3ODk5OTk5OTo6Ojs7Ozw8PD09PT4+Pj8/P0BAQEFBQUJCQkREREVFRUZGRkdHR0dHR0dHR0hISEhISElJSUpKSktLS01NTVBQUFNTU1ZWVlpaWl5eXmZlZW1tbXR0dHl5eXx8fIGBgYSEhIeHh4mJiY2NjZKSkpaWlpuamqCfn6SkpKuqqrCvr7KxsbKxsbKxsbKxsbKxsbKxsbKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKzsrKzsrOzs7S0tLS1tLW1tba2tre3t7i4uLm6uru7u72+vr/Av8HBwcPDw8PDw8PDw8PDw8PEw8TExMTExMTFxMXFxcbGxsfHx8fHx8fHx8jHyMjHyMjIyMjIyMrKysvMzM3Nzc/Pz9HR0dHR0dLS0tPT09TU1NXV1djY2Nra2tvb29zc3N7e3t/f3+Hh4eTk5OXl5ebm5ufn5+np6enp6erp6erq6uvr6+vr6+zs7Ozs7O3t7O3t7e3t7e7u7u7v7u/v7/Dw8PHx8fHx8fLy8vPz8/T09PX19fX19fb29vf49/r6+vv7+/z8/Pz8/P39/f7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////wj+ANkJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPK5OiMWK1XqkhxesTokJxcCnPJOcToESdSql7VIuZsptOnLJ3temWqkiI5WLEOyrq1lsJaWcNy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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
    const MutationObserverConfig = {
        childList: true,
        subtree: true
    };
    //自定義站點規則
    const customData = [{
        name: "小黃書/8色人體攝影",
        reg: () => fun.checkUrl({
            h: [
                /^([a-z]{2}\.)?xchina\.(co|biz)$/,
                /^(tw\.)?8se\.me$/
            ],
            p: /^\/(photo|amateur)\/id-\w+\.html$/,
            e: ".tab-content div:has(>.fa-picture-o)"
        }),
        init: () => fun.remove("//div[@id='tab_1']/div[contains(text(),'推')] | //div[@class='rules']/ul/li[contains(text(),'推')]"),
        imgs: async () => {
            const isMp4 = fun.ge("video[src$='mp4']");
            if (!!isMp4) {
                const {
                    videos,
                    domain
                } = _unsafeWindow;
                videoSrcArray = videos.map(e => domain + e.url);
            }
            const [, album_id] = /id-([^.]+)/.exec(fun.lp);
            let [numP] = fun.gt(".tab-content div:has(>.fa-picture-o)").match(/\d+/);
            numP = Number(numP);
            const thumb = fun.ge("img.cr_only");
            const srcArrFn = (total, photoUrl = "https://img.xchina.biz/photos/", mode = 1) => {
                let suffix = ".jpg";
                if (mode === 2) {
                    suffix = "_600x0.webp";
                }
                const srcs = [];
                for (let i = 1; i <= total; i++) {
                    let num = String(i).padStart(4, "0");
                    let src = photoUrl + album_id + "/" + num + suffix;
                    srcs.push(src);
                }
                return srcs;
            };
            if (!!thumb) {
                const thumb_src = thumb.src;
                const OOOI = thumb_src.includes("/0001_600x0.webp");
                const [photoUrl] = /^https?:\/\/[^\/]+\/[^\/]+\//.exec(thumb_src);
                if (OOOI) {
                    thumbnailSrcArray = srcArrFn(numP, photoUrl, 2);
                    return srcArrFn(numP, photoUrl);
                } else {
                    let max;
                    try {
                        let pageUrls = fun.gau(".pager a[href]");
                        pageUrls = [...new Set(pageUrls)];
                        let lastUrl = pageUrls.at(-1);
                        let [, lastNum] = lastUrl.match(/\/(\d+)\.html$/);
                        max = Number(lastNum);
                    } catch {
                        max = 1;
                    }
                    if (max > 1) {
                        await fun.getNP(".photos>a", ".pager a[current=true]+a:not(.next)", null, ".pager", 1500);
                    }
                    thumbnailSrcArray = fun.getImgSrcArr("img.cr_only");
                    if (numP != thumbnailSrcArray.length) {
                        setTimeout(() => {
                            fun.hideMsg();
                            fun.showMsg("圖片數量不符合，請反饋", 5000);
                        }, 1500)
                    }
                    if (fun.lp.includes("amateur")) {
                        return thumbnailSrcArray;
                    } else {
                        return thumbnailSrcArray.map(e => e.replace("_600x0", "").replace(".webp", ".jpg"));
                    }
                }
            } else {
                const srcArr = srcArrFn(numP);
                const [first] = srcArr;
                const check1 = await fun.checkImgStatus(first);
                if (check1.ok) {
                    return srcArr;
                } else {
                    const test_src = first.replace("/photos/", "/photos2/");
                    const check2 = await fun.checkImgStatus(test_src);
                    if (check2.ok) {
                        return srcArr.map(src => src.replace("/photos/", "/photos2/"));
                    } else {
                        return [];
                    }
                }
            }
        },
        button: [4, "24%", 1],
        insertImg: [
            ["//div[div[@class='photos']]/*[last()]", 2, ".pager,.photos"], 2
        ],
        customTitle: () => {
            let s = document.title.split("-");
            let title = "";
            if (/未分|xChina/.test(s[1])) {
                title += s[0].trim()
            } else {
                title += s[1].trim() + " - ";
                title += s[0].trim()
            }
            return title;
        },
        css: `
body {
    overflow: unset !important;
}
.push-slider,
.article:has(>div>.media),
div:has(>.links),
a[clickmode=ad],
a:has(>div>div>img),
.photos>div.item,
.jquery-modal.blocker.current,
.push-top,
.push-bottom,
.slider-ad,
.article.ad,
.pager>.tips,
.photoMask,
.banner_ad,
.banner-sexgps {
    display: none !important;
}
        `,
        topButton: true,
        downloadVideo: true,
        category: "nsfw2"
    }, {
        name: "小黃書/8色人體攝影 AD",
        reg: () => fun.checkUrl({
            h: [
                /^([a-z]{2}\.)?xchina\.(co|biz|life|fun)$/,
                /^(tw\.)?8se\.me$/
            ]
        }),
        init: () => fun.addMutationObserver(() => fun.remove("[class*='exoclick']")),
        css: `
body {
    overflow: unset !important;
}
[class*='exoclick'],
.push-slider,
.article:has(>div>.media),
.article:has(>.like-960x80),
div:has(>.links),
a[clickmode=ad],
a:has(>div>div>img),
.photos>div.item,
.jquery-modal.blocker.current,
.push-top-container,
.push-top,
.push-bottom,
.slider-ad,
.article.ad,
.pager>.tips,
.photoMask,
.banner_ad,
.banner-sexgps {
    display: none !important;
}
        `,
        category: "ad"
    }, {
        name: "紳士会所",
        host: ["www.hentaiclub.net"],
        reg: /^https?:\/\/www\.hentaiclub\.net\/r\d+\/\d+\.html$/,
        imgs: "div[data-fancybox]",
        button: [4],
        insertImg: [
            ["#masonry", 2, "#masonry"], 2
        ],
        customTitle: ".post-info-text",
        fancybox: {
            v: 3,
            css: false
        },
        css: ".banner-top{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "NLegs/HoneyLeg/Lady Lap/Nuyet/LegBabe", //需搭配專用腳本 https://greasyfork.org/scripts/463123
        host: ["www.nlegs.com", "www.honeyleg.com", "www.ladylap.com", "www.nuyet.com", "www.legbabe.com"],
        reg: [
            /^https?:\/\/www\.nlegs\.com\/girls\/\d+\/\d+\/\d+\/\d+\.html$/,
            /^https?:\/\/www\.honeyleg\.com\/article\/\d+\/\d+\/\d+\/\d+\.html$/,
            /^https?:\/\/www\.ladylap\.com\/show\//,
            /^https?:\/\/www\.nuyet\.com\/gallery\//,
            /^https?:\/\/www\.legbabe\.com\/hot\/[^\.]+\.html$/
        ],
        imgs: ".col-md-12.col-xs-12 img[src^=blob],.col-md-12.col-lg-12 img[src^=blob]",
        repeat: 1,
        button: [4],
        insertImg: ["//div[img[starts-with(@src,'blob')]]", 0],
        go: 1,
        customTitle: "strong",
        fetch: 1,
        category: "nsfw2"
    }, {
        name: "雅拉伊", //免VIP僅支援PC版和圖片命名是簡單數字遞增的。
        host: ["www.yalayi.com"],
        reg: /https?:\/\/www\.yalayi\.com\/gallery\/\d+\.html/i,
        imgs: async () => {
            await fun.waitEle(".bigimg>img");
            let max = fun.ge(".tishiwenzi-box").innerText.match(/\d+/)[0];
            let firstImg = fun.ge(".bigimg>img");
            let path = firstImg.dataset.original.match(/.+\//)[0];
            let testArr = [path + "1.jpg", path + "01.jpg", path + "001.jpg", path + "0001.jpg"];
            let ok = false;
            let padStart;
            for (let i = 0; i < testArr.length; i++) {
                let obj = await fun.checkImgStatus(testArr[i]);
                console.log(`確認圖片[${i}]`, obj);
                if (obj.ok) {
                    ok = true;
                    padStart = i + 1;
                    break;
                }
            }
            let arr = [];
            if (ok) {
                arr.push(firstImg.src);
                for (let i = 1; i <= max; i++) {
                    let src = path + String(i).padStart(padStart, "0") + ".jpg";
                    arr.push(src);
                }
                return arr;
            } else {
                return arr;
            }
        },
        button: [4, "24%", 4],
        insertImg: [".bigimg", 2],
        customTitle: () => fun.title(" - ", 3),
        category: "nsfw1"
    }, {
        name: "JKF",
        host: ["www.jkforum.net"],
        reg: /www\.jkforum\.net\/(p\/)?thread/,
        init: async () => await fun.waitEle("img[id^=aimg]"),
        imgs: () => hasTouchEvents ? fun.gae("img[id^=aimg]:not([style])") : fun.gae("img[id^=aimg][zoomfile]"),
        capture: () => _this.imgs(),
        customTitle: ".title-hd h1,.post-title",
        category: "nsfw2"
    }, {
        name: "草榴",
        host: ["www.t66y.com", "cl.6962x.xyz"],
        reg: /\/htm_data\/\d+\/\d+\/\d+\.html$/,
        include: "img[ess-data]",
        imgs: "img[ess-data]",
        customTitle: "h4.f16",
        category: "nsfw2"
    }, {
        name: "24FA",
        host: ["www.24fa.com"],
        link: "https://www.24fa.com/c49.aspx",
        reg: /^https?:\/\/(www\.)?\d{2,3}(m|w|fa\w?|aa|xx)?\.[a-z]{2,4}\/m?n\w+\.aspx/,
        include: "#content img",
        init: "document.onkeydown=null",
        imgs: () => fun.getImgA("#content img", ".pager a:not([title])"),
        button: [4],
        insertImg: ["#content", 1],
        autoDownload: [0],
        next: ".prevNews>a",
        prev: ".nextNews>a",
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "Hit-x-Hot格式",
        host: ["www.hitxhot.org", "hitxhot.com", "www.dongojyousan.com"],
        reg: [
            /^https?:\/\/www\.hitxhot\.org\/(gallerys|articles|photos)\/(?!\?page=|\?m=|hot|top|tag)\w+\.html(\?m=1)?$/i,
            /^https?:\/\/hitxhot\.com\/blog\/\w+\.html(\?m=1)?$/i,
            /^https?:\/\/www\.dongojyousan\.com\/articles\/\w+\.html/i
        ],
        init: async () => await fun.clearElementEvent(),
        imgs: async () => {
            let max;
            try {
                [max] = fun.gt(".entry-title").match(/\d+$/);
            } catch {
                max = 1;
            }
            return /\?m=1/.test(siteUrl) ? await fun.getImg(".entry-content img", max, "8") : await fun.getImg(".entry-content img", max);
        },
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: () => fun.title(/^[a-z-\s\.I]+:/i).split("|")[0].trim(),
        category: "nsfw2"
    }, {
        name: "Depvailon格式",
        host: [
            "www.depvailon.com",
            "crimejunkiespodcast.com",
            "pic.yailay.com",
            "nungvl.net",
            "www.kaizty.com",
            "lootiu.com",
            "thismore.fun",
            "cosxuxi.club",
            "baobua.com",
            "cn.looives.com",
            "redseats.org"
        ],
        reg: [
            /^https?:\/\/(www\.depvailon\.com|crimejunkiespodcast\.com)\/(?!\?page=|\?m=).+\.html/i,
            /^https?:\/\/(pic\.yailay\.com|www\.kaizty\.com)\/(gallerys|articles|photos)\/(?!\?page=|\?m=|hot|top|tag)\w+\.html/i,
            /^https?:\/\/nungvl\.net\/gallerys\/\d+\.cg/i,
            /^https?:\/\/lootiu\.com\/gallery\/.+\.cfg/i,
            /^https?:\/\/thismore\.fun\/view\/[^\.]+\.php/i,
            /^https?:\/\/cosxuxi\.club\/[^\.]+\.html/i,
            /^https?:\/\/baobua\.com\/post\/[^\.]+\.html/i,
            /^https?:\/\/cn\.looives\.com\/view\/[^\.]+\.cfg/i,
            /^https?:\/\/redseats\.org\/gallery\/[^\.]+\.cfg/i
        ],
        init: async () => {
            await fun.clearElementEvent();
            await fun.waitVar("jQuery");
            fun.run("jQuery(document).off();jQuery('body').off();");
            fun.createImgBox(".contentme,.contentme2", 2);
            fun.remove(".mobiletop");
            fun.css("#FullPictureLoadEnd{color:rgb(255, 255, 255)}");
        },
        imgs: async () => {
            let max;
            try {
                [max] = fun.gt("h1,h2").match(/\d+$/);
            } catch {
                max = 1;
            }
            return /\?m=1/.test(siteUrl) ? await fun.getImg(".contentme img,.contentme2 img", max, "8") : await fun.getImg(".contentme img,.contentme2 img", max);
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".contentme,.contentme2"], 2
        ],
        customTitle: () => fun.dt({
            t: document.title.split("|")[0],
            d: [
                /^[a-z-\s\.]+:/i,
                "NứngVL.net:"
            ]
        }),
        category: "nsfw2"
    }, {
        name: "TGStat Show more",
        reg: /^https?:\/\/([a-z]{2}\.)?tgstat\.com\//,
        observerClick: "//button[contains(text(),'Show more')]",
        category: "autoPager"
    }, {
        name: "Telegram Web",
        host: ["telegra.ph"],
        reg: /^https?:\/\/telegra\.ph\/.+/,
        imgs: ".figure_wrapper img",
        customTitle: "h1",
        setFancybox: true,
        category: "nsfw2"
    }, {
        name: "Rentry.co",
        host: ["rentry.co"],
        reg: () => /^https?:\/\/rentry\.co\/\w+$/.test(fun.url) && fun.ge("img"),
        imgs: "img",
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "新闻吧/新闻屋/新娱乐在线/新娱乐网/福建热线/山东热线/广西热线/武汉热线/天津热线/云南热线/甘肃热线",
        link: "https://www.xinwenba.net/web/meinv/",
        init: () => fun.createImgBox(".main", 1),
        reg: () => fun.checkUrl({
            h: [
                "www.xinwenba.net",
                "www.xwbar.com",
                "m.xwbar.com",
                "www.dv67.com",
                "m.dv67.com",
                "www.xinent.net",
                "m.xinent.net",
                "www.fjrx.org",
                "m.fjrx.org",
                "www.sdrx.org",
                "m.sdrx.org",
                "www.gxrx.org",
                "m.gxrx.org",
                "www.whrx.org",
                "m.whrx.org",
                "www.tjrx.org",
                "m.tjrx.org",
                "www.ynrx.org",
                "m.ynrx.org",
                "www.gsrx.org",
                "m.gsrx.org",
                "www.xwwu.net",
                "m.xwwu.net"
            ],
            p: /^\/plus\/view-\d+-\d+\.html$/,
            e: ".main img"
        }),
        imgs: () => {
            let max;
            try {
                [max] = fun.gt(".paging>li>a,.tags>li>a,.pre_next>li>a").match(/\d+/);
            } catch {
                max = 1;
            }
            return fun.getImg(".main img", max, "5");
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".view_img .main"], 2
        ],
        insertImgAF: () => {
            let text = fun.ge(".view_img .text");
            if (text) {
                fun.ge("#FullPictureLoadMainImgBox").insertAdjacentElement("beforebegin", text);
            }
        },
        autoDownload: [0],
        next: "//li[contains(text(),'上一篇')]/a",
        prev: "//li[contains(text(),'下一篇')]/a",
        customTitle: ".title>h1",
        css: "div.web{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "四海资讯/娱乐吧/娱乐屋/娱乐宝/美女图片库",
        link: "https://www.shzx.org/b/12-0.html",
        reg: () => fun.checkUrl({
            h: [
                "www.shzx.org",
                "m.shzx.org",
                "www.yuleba.org",
                "m.entba.net",
                "www.entwu.com",
                "m.entwu.com",
                "www.xwbzx.com",
                "m.xwbzx.com",
                "www.entbao.com",
                "m.entbao.com"
            ],
            p: /\/a\/[\d-]+\.html$/,
            e: ".main img"
        }),
        imgs: () => {
            let max;
            try {
                [max] = fun.gt(".paging>a").match(/\d+/);
            } catch {
                max = 1;
            }
            return fun.getImg(".main img", max, "5");
        },
        button: [4],
        insertImg: [".main", 2],
        insertImgAF: () => {
            let text = fun.ge(".a_img .text");
            if (text) {
                fun.ge(".a_img .main").insertAdjacentElement("beforebegin", text);
            }
        },
        autoDownload: [0],
        next: ".pre_next li:last-child a",
        prev: ".pre_next li:first-child a",
        customTitle: ".title>h1",
        css: ".a_img .main img{max-width:100%!important}",
        category: "nsfw1"
    }, {
        name: "留园酷",
        host: ["www.cool18.com", "wap.cool18.com"],
        reg: [
            /^https?:\/\/www\.cool18\.com\/bbs\d*\/index\.php\?app=forum&act=threadview&tid=\d+/,
            /^https?:\/\/wap\.cool18\.com\/index\.php\?app=index&act=view&cid=\d+/
        ],
        imgs: "img[mydatasrc],#shownewsc img,.show_content img",
        customTitle: () => fun.dt({
            s: ".show_content b,h1.article-tit",
            d: /(\s?\.?)?\s?\(\d+P\)\s?/i
        }),
        css: ".img_ad_list{display:none!important}",
        category: "nsfw2"
    }, {
        name: "秀人集",
        host: ["www.xiuren51.top"],
        reg: () => fun.checkUrl({
            e: "//div[@class='item_info']//a[text()='秀人集']",
            p: /\/\w+\/\d+\.html$/
        }),
        init: () => {
            let pag = fun.gae(".page");
            if (pag.length > 0) pag[0].remove();
        },
        imgs: () => fun.getImg(".content>p img[alt]", fun.gt(".page a:last-child", 2), 3, null, 100),
        button: [4],
        insertImg: ["//div[p[img[@alt and @title]]]", 2],
        autoDownload: [0],
        next: "//span[contains(text(),'下一篇')]/a[contains(@href,'html')]",
        prev: "//span[contains(text(),'上一篇')]/a[contains(@href,'html')]",
        customTitle: ".item_title>h1",
        css: ".content br{display:none!important}",
        category: "nsfw1"
    }, {
        name: "秀人美女網",
        host: ["www.xiu01.top"],
        reg: () => fun.checkUrl({
            e: "//div[@class='single-cat']/a[text()='秀人美女网']",
            p: /\/\w+\/\d+\/\d+\.html$/
        }),
        imgs: () => fun.getImg(".content p img[alt]", fun.gt(".page a:last-child", 2), 3, null, 100),
        button: [4],
        insertImg: ["//div[p[img[@alt]]]", 2],
        autoDownload: [0],
        next: "//span[contains(text(),'下一篇')]/a[contains(@href,'html')]",
        prev: "//span[contains(text(),'上一篇')]/a[contains(@href,'html')]",
        customTitle: ".item_title>h1",
        css: ".item_info>a,p[align='center']:has(>img),.item_title>div[id],.item_title>a,.content br,.bottom_fixed,.update_area_lists>div[id]{display:none!important}",
        category: "nsfw1"
    }, {
        name: "极品性感美女",
        host: ["www.xinggan5.top", "尤物网.Com"],
        reg: () => fun.checkUrl({
            e: "//div[@class='toptip']/a[text()='极品性感美女']",
            p: /\/\w+\/\w+\.html$/
        }),
        init: () => {
            let pag = fun.gae(".pagination");
            if (pag.length > 0) pag[0].remove();
            let p = fun.gae("//article/p[not(img)]");
            if (p.length > 0) {
                let te = fun.ge(".article-content");
                p.forEach(e => insertBefore(te, e));
            }
        },
        imgs: () => fun.getImg(".article-content img[alt]", fun.gt("a.current~*:last-child", 2), 3, null, 100),
        button: [4],
        insertImg: [
            ["//div[@class='pagination'][last()]", 1, "//p[img[@alt]]"], 2
        ],
        go: 1,
        autoDownload: [0],
        next: ".article-nav-next>a[href$=html]",
        prev: ".article-nav-prev>a[href$=html]",
        customTitle: ".article-title",
        css: ".article-header>div[id],.article-header>a,.article-content br,img[src*='zz1.gif'],.bottom_fixed,.article-content~a,#bottom-banner,.content>div[id]{display:none!important}",
        category: "nsfw1"
    }, {
        name: "漂亮美女网",
        host: ["www.plmn5.cc", "plmn.cc"],
        reg: /^https?:\/\/(www\.)?plmn5\.cc\/\w+\/\d+\.html/i,
        include: ".page>a",
        imgs: () => fun.getImg(".newstext p img[alt]", fun.gt(".page a:last-child", 2), 3, null, 100),
        button: [4],
        insertImg: ["//div[p[img[@alt]]]", 2],
        autoDownload: [0],
        next: "//span/b[contains(text(),'下一篇')]/a[contains(@href,'html')]",
        prev: "//span/b[contains(text(),'上一篇')]/a[contains(@href,'html')]",
        customTitle: ".news-title-h1",
        css: ".newstext br,img[src*='zz2.gif']{display:none!important}",
        category: "nsfw1"
    }, {
        name: "爱看美女网",
        host: ["www.ik009.top"],
        reg: () => fun.checkUrl({
            e: [
                "//i[@class='iconfont icon-shouye']/following-sibling::a[text()='爱看美女网']",
                ".info-pagebar>a"
            ],
            p: /^\/\w+\/\d+\.html$/
        }),
        init: () => {
            let pag = fun.gae(".pagebar");
            if (pag.length > 0) pag[0].remove();
        },
        imgs: () => fun.getImg(".info-imtg-box img[alt]", fun.gt(".pagebar>*:last-child", 2), 3, null, 100),
        button: [4],
        insertImg: ["//p[img[@alt]]", 2],
        autoDownload: [0],
        next: ".info-next li:last-child a",
        prev: ".info-next li:first-child a",
        customTitle: "h1",
        category: "nsfw1"
    }, {
        name: "美人图",
        reg: () => fun.checkUrl({
            h: [
                "meirentu.cc",
                "meirentu.me",
                "meirentu.top",
                "meirentu.icu"
            ],
            p: /\/pic\/\d+\.html$/
        }),
        imgs: () => fun.getImg(".content_left img[alt]", fun.gt(".page a:last-child", 2), 5),
        button: [4],
        insertImg: [".content_left", 2],
        autoDownload: [0],
        next: "//span[contains(text(),'下一篇')]/a[contains(@href,'html')]",
        prev: "//span[contains(text(),'上一篇')]/a[contains(@href,'html')]",
        customTitle: ".item_title>h1",
        css: "img[alt]~br{display:none!important}",
        category: "nsfw1"
    }, {
        name: "卡卡美女网",
        reg: () => fun.checkUrl({
            h: [
                "www.kaka234.cc",
                "m.kaka234.cc"
            ],
            p: /^\/HTM\/\w+\/(\w+\/)?\d+\/\d+\/\d+\.html$/
        }),
        init: () => {
            let ele = fun.ge(".PsBox");
            if (ele) {
                let te = ele.parentNode;
                insertBefore(te, ele);
            }
        },
        imgs: () => {
            let max;
            try {
                [max] = fun.gt(".dede_pages li>a,.article_page li>a").match(/\d+/);
            } catch {
                max = 1;
            }
            return fun.getImg(".content img,.ArticleImageBox img", max, 9);
        },
        button: [4],
        insertImg: ["//div[@class='content'] | //div[div[@class='ArticleImageBox']]", 2],
        autoDownload: [0],
        next: () => {
            let next = fun.ge("//li[contains(text(),'上一篇')]/a");
            return next ? next.href : null;
        },
        prev: 1,
        customTitle: ".Title>h1,.PsBox",
        css: ".m_adv{display:none!important}",
        category: "nsfw1"
    }, {
        name: "高清图片吧",
        host: ["www.pic88.cc"],
        reg: /^https?:\/\/www\.pic88\.cc\/\w+\/\d+\/\d+\.html$/,
        imgs: () => {
            let max = fun.gt(".page>*:last-child");
            return fun.getImg(".content img,.ArticleImageBox img", max, 9);
        },
        button: [4],
        insertImg: [".content", 2],
        customTitle: "//div[@class='Title111']/h3[not(a)]",
        css: ".center:has(>.dibu1),.center:has(>.dibu2){display:none!important}",
        category: "nsfw1"
    }, {
        name: "高清图片吧M",
        host: ["m.pic88.cc"],
        reg: /^https?:\/\/m\.pic88\.cc\/\w+\/\d+\/\d+\.html$/,
        init: () => fun.createImgBox(".PsBox", 2),
        imgs: ".ArticleImageBox>img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".ArticleImageBox,.m_adv,.m_kanp"], 2
        ],
        customTitle: ".PsBox",
        css: ".m_adv,.m_kanp{display:none!important}",
        category: "nsfw1"
    }, {
        name: "美女写真网",
        host: ["www.ku138.cc"],
        reg: /^https?:\/\/www\.ku138\.cc\/\w+\/\d+\/\d+\.html$/,
        imgs: () => fun.getImgA(".content img", ".page>a[href]"),
        button: [4],
        insertImg: [".content", 2],
        customTitle: () => fun.ge("meta[name=keywords]").content,
        css: ".center:has(>.dibu1),.center:has(>.dibu2){display:none!important}",
        category: "nsfw1"
    }, {
        name: "美女目录网 列表模式",
        host: ["www.girldir.com"],
        reg: /^https?:\/\/www\.girldir\.com\/photos\/\w+_list\/$/i,
        imgs: async () => {
            await fun.getNP(".list-page-box>.item", "li.active+li>a", null, ".pagination");
            thumbnailSrcArray = fun.getImgSrcArr(".list-page-box img");
            return thumbnailSrcArray.map(e => e.replace(".medium.", ".big."));
        },
        button: [4],
        insertImg: [".list-page-box", 2],
        customTitle: () => fun.dt({
            d: " - 美女目录网"
        }),
        category: "nsfw1"
    }, {
        name: "美眉村",
        host: ["meimeicun.com"],
        reg: /^https?:\/\/meimeicun\.com\/articles\/\d+$/,
        imgs: ".images-list img",
        autoDownload: [0],
        next: "//div[contains(text(),'上一篇')]/a",
        prev: "//div[contains(text(),'下一篇')]/a",
        customTitle: ".title",
        category: "nsfw1"
    }, {
        name: "ROSI写真",
        host: ["www.rosipic.com", "rosipic.com"],
        reg: /^https?:\/\/(www\.)?rosipic\.com\/rosi\/\d+\.html$/i,
        imgs: () => fun.gau("a.spotlight").map(u => u.replace("https://wsrv.nl/?url=", "").replace(/&blur=\d+/, "")),
        button: [4],
        insertImg: [
            ["#waterfall-container", 2], 2
        ],
        go: 1,
        category: "nsfw1"
    }, {
        name: "ROSI美女写真",
        host: ["www.rosixz.cc", "www.rosixiezhen.cc", "rosixiezhen.cc", "www.rosi985.com", "www.rosi365.cc", "www.rosi360.cc", "www.2meinv.cc", "www.silk-necktie.com"],
        reg: () => fun.checkUrl({
            h: [
                /^(www\.)?rosixz\.\w+$/,
                /^(www\.)?rosixiezhen\.\w+$/,
                /^(www\.)?rosi\d{3}\.\w+$/,
                /^(www\.)?\dmeinv\.cc$/,
                /^www\.silk-necktie\.com$/
            ],
            p: /^\/\w+\/\w+\.html$/
        }),
        exclude: "//span/a[text()='ROSI视频']",
        init: () => {
            let pag = fun.gae(".pagination2");
            if (pag.length > 0) pag[0].remove();
            fun.remove(".content>b,.content>br,.asst");
        },
        imgs: () => {
            let max;
            try {
                [max] = fun.gt("//a[contains(text(),'共')]").match(/\d+/);
            } catch {
                max = 1;
            }
            return fun.getImg(".article-content img", max, 9);
        },
        button: [4],
        insertImg: [".article-content", 2],
        autoDownload: [0],
        next: ".article-nav-prev>a",
        prev: ".article-nav-next>.a",
        customTitle: ".article-title",
        category: "nsfw1"
    }, {
        name: "ROSI小莉最新写真",
        host: ["www.rosi211.cc"],
        reg: /^https?:\/\/(www\.)?rosi\d{3}\.cc\/\d+$/i,
        init: () => {
            let pag = fun.gae(".wp-pagenavi");
            if (pag.length > 0) pag[0].remove();
            let ele = fun.ge(".entry-header");
            if (ele) {
                let te = fun.ge("article.post");
                insertBefore(te, ele);
            }
        },
        imgs: () => fun.getImgA("article img", ".wp-pagenavi a"),
        button: [4],
        insertImg: ["article.post", 2],
        autoDownload: [0],
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: ".entry-title",
        css: "@media only screen and (max-width:480px){#primary{padding:6px !important}.col-md-12{padding:0px !important}}",
        category: "nsfw1"
    }, {
        name: "新老友图社",
        host: ["m.xtushe.com"],
        reg: /^https?:\/\/m\.xtushe\.com\/photo\/\d+\.html$/i,
        imgs: async () => {
            const error = async (dom) => {
                let ele = fun.ge("#content-photo>img", dom);
                if (!ele) {
                    await alert("遇到驗證");
                    location.reload();
                    return true;
                } else {
                    return false;
                }
            };
            await fun.getNP("#content-photo>img", "li.next>a", error, ".pagebreak");
            return fun.gae("#content-photo>img");
        },
        button: [4],
        insertImg: ["#content-photo", 2],
        insertImgAF: () => fun.remove(".pagebreak"),
        customTitle: "#content-title>h1",
        category: "nsfw1"
    }, {
        name: "闺秀网",
        host: ["www.guixiu.org", "guixiu.org"],
        reg: /^https:\/\/(www\.)?guixiu\.org\/post\/\d+\.html/i,
        imgs: () => fun.getImgA("#lightgallery img", "#ipage a[href*=ipage]"),
        button: [4],
        insertImg: ["#lightgallery", 2],
        customTitle: ".focusbox-title",
        category: "nsfw1"
    }, {
        name: "悄悄的看2019",
        host: ["qqdk2019.net"],
        reg: /^https?:\/\/qqdk2019\.net\/\w+\/\d+$/,
        init: () => fun.createImgBox(".blog-details-text>p:has(>img)", 1),
        imgs: ".blog-details-text>p>img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".blog-details-text>p:has(>img)"], 2
        ],
        customTitle: "h2.blog-details-headline",
        category: "nsfw1"
    }, {
        name: "福利图",
        host: ["fulitu.me"],
        reg: /^https?:\/\/fulitu\.me\/pic\/\d+\.html$/i,
        imgs: () => fun.getImg(".content_left img", fun.gt("//a[text()='下页']", 2), 5),
        button: [4],
        insertImg: [".content_left", 2],
        autoDownload: [0],
        next: "//span[contains(text(),'下一篇')]/a",
        prev: "//span[contains(text(),'上一篇')]/a",
        customTitle: ".item_title>h1",
        css: ".content br{display:none!important}",
        category: "nsfw1"
    }, {
        name: "爱图门",
        host: ["aitu.men"],
        reg: /^https?:\/\/aitu\.men\/[^\/]+\/\d+\.html/i,
        imgs: async () => {
            await fun.getNP(".context img", ".pagelist span+a", null, ".pagelist", 0, null);
            return fun.gae(".context img");
        },
        button: [4],
        insertImg: [".context", 1],
        autoDownload: [0],
        next: ".post-previous a",
        prev: ".post-next a",
        customTitle: "#content h1",
        category: "nsfw1"
    }, {
        name: "K55",
        host: ["k55.net"],
        link: "https://k55.net/arttype/2.html",
        reg: /^https?:\/\/k55\.net\/artdetail-\d+\.html/,
        include: ".photo_box",
        imgs: () => fun.gae(".photo_box img").map(e => e.src).sort((a, b) => a.match(/(\d+)\.\w+$/)[1] - b.match(/(\d+)\.\w+$/)[1]),
        button: [4],
        insertImg: [".photo_box", 2],
        autoDownload: [0],
        next: ".item_prev_next>.item_right>a",
        prev: ".item_prev_next>.item_left>a",
        customTitle: () => fun.dt({
            s: ".title-box>.h3-md.mb-1",
            d: /\[\d+P\].+$/i
        }),
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw1"
    }, {
        name: "Hotgirl.biz",
        host: ["hotgirl.biz"],
        reg: /^https?:\/\/hotgirl\.biz\/[^\/]+\/$/i,
        imgs: ".entry-content img",
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "XLUST.ORG",
        host: ["xlust.org"],
        reg: /^https?:\/\/xlust\.org\/[^\/]+\/$/i,
        imgs: ".rl-gallery-item a",
        button: [4],
        insertImg: [
            [".entry-content", 0, ".rl-gallery-container"], 2
        ],
        customTitle: ".entry-title",
        fancybox: {
            blacklist: 1
        },
        category: "nsfw1"
    }, {
        name: "秀人网",
        host: ["xiurenwang.me"],
        reg: /^https?:\/\/xiurenwang\.me\/photo\.php\?id=\w+/i,
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr(".intro>img");
            return thumbnailSrcArray.map(e => e.replace("_600x0", "").replace(".webp", ".jpg"));
        },
        button: [4],
        insertImg: [".intro", 2],
        customTitle: "h1",
        css: "@media only screen and (max-width:640px){.paragraph .intro img{width:100%!important}}.article:has(>div>.media),.banner,.banner_ad,.push-top,.push-bottom,.banner-sexgps{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "秀人网 AD",
        reg: /^https?:\/\/xiurenwang\.me/,
        css: ".article:has(>div>.media),.banner,.banner_ad,.push-top,.push-bottom,.banner-sexgps{display:none!important;}",
        category: "ad"
    }, {
        name: "秀人网图集",
        host: ["www.aixiurenji.com", "www.aixiurentuji.com", "www.aixiurenwang.com"],
        reg: () => fun.checkUrl({
            e: ".logo-wrapper img.logo[alt='秀人网图集']",
            p: /^\/\d+\.html/
        }),
        exclude: "//button[contains(text(),'登录购买')]",
        imgs: () => fun.getImgA("a[data-fancybox],.entry-content img", ".fenye a"),
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: ".article-nav-prev a",
        prev: ".article-nav-next a",
        customTitle: ".entry-title",
        fancybox: {
            v: 3,
            css: false
        },
        observerClick: [".swal2-close", ".ht-n-close-toggle"],
        category: "nsfw1"
    }, {
        name: "秀人网图集",
        reg: () => fun.checkUrl({
            e: ".logo-wrapper img.logo[alt='秀人网图集']"
        }),
        observerClick: [".swal2-close", ".ht-n-close-toggle"],
        category: "ad"
    }, {
        name: "足控资源网",
        host: ["www.zukong8.com", "www.yuzu8.com", "aisituba.com"],
        reg: () => fun.checkUrl({
            h: "www.yuzu8.com",
            p: "archives"
        }),
        exclude: ".content-hide-tips",
        imgs: "a[data-fancybox]",
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: ".article-nav-prev a",
        prev: ".article-nav-next a",
        customTitle: ".entry-title",
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw1"
    }, {
        name: "超次元",
        host: ["www.ccy.moe"],
        reg: /^https?:\/\/www\.ccy\.moe\/\w+\/\w+\/\d+\/\d+\/\d+\/\d+/,
        init: async () => {
            await fun.waitEle(".entry-content p:has(>a>img)");
            fun.createImgBox(".entry-content p:has(>a>img)", 1)
        },
        imgs: () => {
            let pages = fun.ge(".post-links");
            if (pages) {
                return fun.getImgA(".entry-content img", ".post-links a");
            } else {
                return fun.gae(".entry-content img");
            }
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".entry-content p:has(>a>img),.post-links"], 2
        ],
        customTitle: ".entry-header h1",
        category: "nsfw1"
    }, {
        name: "资源库图站",
        host: ["www.zyktu.top"],
        reg: () => fun.checkUrl({
            e: "a[title^=资源库图站]>img[alt^=资源库图站]",
            p: /^\/index\.php\/archives\/\d+\/$/
        }),
        imgs: "span[data-fancybox]>img",
        button: [4],
        insertImg: [
            ["span[data-fancybox]", 1, "span[data-fancybox],span[data-fancybox]~br"], 2
        ],
        autoDownload: [0],
        next: "//a[text()='下一篇']",
        prev: "//a[text()='上一篇']",
        customTitle: ".joe_detail__title",
        fancybox: {
            v: 3,
            insertLibrarys: 1
        },
        category: "nsfw1"
    }, {
        name: "牛叉资源网",
        host: ["niuc.net"],
        reg: /^https?:\/\/niuc\.net\/\d+\.html$/,
        include: "//i[@class='czs-folder-l']/following-sibling::a[1][text()='美女写真' or text()='Cosplay' or text()='JAV.PHOTO']",
        imgs: ".content-warp img:not([src$='e4l35o.gif'])",
        button: [4],
        insertImg: [".content-warp", 2],
        customTitle: ".post-title",
        category: "nsfw2"
    }, {
        name: "8E资源站",
        host: ["8ezy.com"],
        reg: /^https?:\/\/8ezy\.com\/[^\/]+\/$/,
        include: ".entry-content",
        init: () => {
            fun.clearAllTimer();
            let e = fun.ge(".yarpp-related-website");
            let x = fun.ge(".entry-tags");
            if (e && x) {
                insertBefore(x, e);
            }
        },
        imgs: async () => {
            videoSrcArray = fun.gae("video>source").map(e => e.src);
            if (fun.ge("//div[contains(text(),'分页阅读')]")) {
                fun.showMsg(displayLanguage.str_05, 0);
                let links = fun.gau("//div[contains(text(),'分页阅读')]/a");
                links = [fun.url].concat([...new Set(links)]);
                let resArr = links.flatMap(url => fun.fetchDoc(url).then(dom => fun.getImgSrcArr(".entry-content img", dom)));
                return Promise.all(resArr).then(srcs => srcs.filter(i => !/jzfi4j-0\.gif|k0j1um-0\.gif/.test(i)));
            } else {
                return fun.getImgSrcArr(".entry-content img").filter(i => !/jzfi4j-0\.gif|k0j1um-0\.gif/.test(i));
            }
        },
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: () => fun.dt({
            s: ".entry-header>h1",
            d: [
                "【在线观看】-",
                /\d+p(\d+v)?$|\(\d+[\w\s\.\+-]+\)|\[\d+[\w\s\.\+-]+\]|“\d+ photos.*/i
            ]
        }),
        fancybox: {
            v: 3,
            insertLibrarys: 1
        },
        downloadVideo: true,
        category: "nsfw1"
    }, {
        name: "丝袜室",
        host: ["www.siwashi.xyz"],
        reg: /^https?:\/\/www\.siwashi\.xyz\/\w+\/\d+\.html$/,
        imgs: async () => {
            if (fun.ge("//div[contains(text(),'分页阅读')]")) {
                fun.showMsg(displayLanguage.str_05, 0);
                let links = fun.gau("//div[contains(text(),'分页阅读')]/a");
                links = [fun.url].concat([...new Set(links)]);
                return links.flatMap(url => fun.fetchDoc(url).then(dom => fun.gae(".entry-content img", dom).map(e => e.dataset.srcset ?? e.src)));
            } else {
                return fun.gae(".entry-content img").map(e => e.dataset.srcset ?? e.src);
            }
        },
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: ".article-nav-prev a",
        prev: ".article-nav-next a",
        customTitle: ".entry-title",
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw1"
    }, {
        name: "牛牛美图",
        host: ["www.uyn8.cn"],
        reg: /^https?:\/\/www\.uyn8\.cn\/archives\/\d+/i,
        init: "fun.clearAllTimer();",
        imgs: ".entry-content img",
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".entry-title",
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw1"
    }, {
        name: "微密猫",
        reg: () => fun.checkUrl({
            e: ".logo>a[title=微密猫]",
            p: /^\/archives\/\d+/
        }),
        imgs: "figure.wp-block-image a[data-fancybox]",
        button: [4],
        insertImg: [
            [".article-content", 0, "figure.wp-block-image,.code-block"], 2
        ],
        autoDownload: [0],
        next: ".article-nav-prev a",
        prev: ".article-nav-next a",
        customTitle: ".article-title",
        go: 1,
        fancybox: {
            v: 3,
            css: false
        },
        css: ".code-block{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "优美图录",
        host: ["www.umei.net", "umei.net"],
        reg: /^https?:\/\/(www\.)?umei\.net\/\w+\/\d+\.html$/i,
        imgs: () => fun.getImgO(".image_div img", fun.gt(".item_info span"), 9, null, 200, ".nav-links"),
        button: [4],
        insertImg: [".image_div", 2],
        customTitle: ".item_title>h1",
        css: ".content_left img{cursor:unset}.affs,.xg_content>li:nth-child(n+1):nth-child(-n+2){display:none!important}.image_div a img{cursor:unset}",
        category: "nsfw1"
    }, {
        name: "Xiutaku/Kiutaku",
        reg: () => fun.checkUrl({
            h: [
                "xiutaku.com",
                "kiutaku.com"
            ],
            p: /^\/\d+$/
        }),
        init: () => fun.remove(".search-form~*,.blog~*:not([class]),.pagination~*:not([class]):not(hr),.article.content~*:not([class]):not(hr),.bottom-articles~*"),
        imgs: () => fun.getImg(".article-fulltext img", fun.gt(".pagination-list>span:last-child")),
        button: [4],
        insertImg: [".article-fulltext", 2],
        customTitle: () => fun.dt({
            s: ".article-header>h1",
            d: /([\s-]+)?.Mitaku.*/i
        }),
        category: "nsfw1"
    }, {
        name: "XGirl/MissBby.com/Xerocos",
        host: ["xgirl.one", "missbby.com", "xerocos.com"],
        reg: [
            /^https?:\/\/(xgirl\.one|missbby\.com)\/[^\/]+$/,
            /^https?:\/\/xerocos\.com\/view\//
        ],
        include: "//div[strong[contains(text(),'Album Name')]]",
        imgs: () => fun.getImgA(".items-center.min-h-screen img", "a[class*=bg-pink-500][href*='page=']"),
        button: [4],
        insertImg: [".items-center.min-h-screen", 2],
        insertImgAF: () => fun.remove("//div[iframe]|//*[span[text()='Sponsored ads']]"),
        customTitle: () => fun.dt({
            s: "//div[strong[contains(text(),'Album Name')]]",
            d: "Album Name: "
        }),
        css: ".md\:px-16,.xl\:px-20{padding:unset!important}.max-w-3xl{max-width:100%!important}",
        category: "nsfw2"
    }, {
        name: "XGirl/MissBby.com 分類自動翻頁",
        enable: 1,
        reg: /^https?:\/\/(xgirl\.one|missbby\.com)\//,
        autoPager: {
            mode: 1,
            waitEle: "//div[@class='flex py-4 justify-center md:justify-between mt-4']/preceding-sibling::div[1][@class='grid grid-cols-1 md:grid-cols-3 gap-y-6 gap-x-4 xl:grid-cols-4']//img",
            ele: "//div[@class='flex py-4 justify-center md:justify-between mt-4']/preceding-sibling::div[1][@class='grid grid-cols-1 md:grid-cols-3 gap-y-6 gap-x-4 xl:grid-cols-4']",
            pos: ["//div[@class='flex py-4 justify-center md:justify-between mt-4']", 1],
            next: "//a[text()='Next']",
            re: "//div[@class='flex py-4 justify-center md:justify-between mt-4']",
            pageNum: () => nextLink.match(/\d+$/)[0],
            bottom: screen.height * 2
        },
        openInNewTab: ".grid a:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "Xerocos 分類自動翻頁",
        enable: 1,
        reg: /^https?:\/\/xerocos\.com\//,
        autoPager: {
            mode: 1,
            waitEle: "//div[@class='flex py-4 justify-center md:justify-between mt-4']/preceding-sibling::div[1][@class='grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4']//img|//div[@class='flex py-4 justify-center md:justify-between mt-4']/preceding-sibling::div[@class='grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 pb-6']//img",
            ele: "//div[@class='flex py-4 justify-center md:justify-between mt-4']/preceding-sibling::div[1][@class='grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4']|//div[@class='flex py-4 justify-center md:justify-between mt-4']/preceding-sibling::div[@class='grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 pb-6']",
            pos: ["//div[@class='flex py-4 justify-center md:justify-between mt-4']", 1],
            next: "//a[text()='Next']",
            re: "//div[@class='flex py-4 justify-center md:justify-between mt-4']",
            pageNum: () => nextLink.match(/\d+$/)[0],
            aF: () => fun.gae(".blur-2xl").forEach(e => e.classList.remove("blur-2xl")),
            bottom: screen.height * 2
        },
        openInNewTab: ".grid a:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "私图网/图库库",
        host: ["baoruba.com", "tukuku.cc"],
        reg: /^https?:\/\/(baoruba\.com|tukuku\.cc)\/(bb|t)?\d+\.html$/i,
        imgs: ".entry-content img[decoding]",
        button: [4],
        insertImg: [".entry-content", 2],
        go: 1,
        autoDownload: [0],
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: () => fun.title(/ - 私图网| - 图库库/),
        css: "[id].widget_text,.gridmode-post-thumbnail-single,.gridbit-thumbnail-alignwide{display:none!important}",
        category: "nsfw1"
    }, {
        name: "Cup2D",
        host: ["www.cup2d.com", "cup2d.com"],
        reg: /^https?:\/\/(www\.)?cup2d\.com\/[^\/]+\/$/i,
        imgs: () => {
            let imgs = fun.gae("img[data-high-res-src]");
            thumbnailSrcArray = imgs.map(e => e.src);
            return imgs;
        },
        button: [4],
        insertImg: ["//div[a[img[@data-high-res-src]]]", 2],
        autoDownload: [0],
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: () => fun.title(" – Cup2D"),
        category: "nsfw1"
    }, {
        name: "COSERMM",
        host: ["cosermm.blog.2nt.com"],
        reg: /^https?:\/\/cosermm\.blog\.2nt\.com\/blog-entry-\d+\.html$/i,
        imgs: "#inner-contents img",
        button: [4],
        insertImg: ["#inner-contents", 2],
        autoDownload: [0],
        next: "a.next-a",
        prev: "a.prev-a",
        customTitle: "#entry-title",
        category: "nsfw1"
    }, {
        name: "COSERMM 自動翻頁",
        reg: /^https?:\/\/cosermm\.blog\.2nt\.com\/(page-\d+\.html)?$/i,
        autoPager: {
            mode: 1,
            waitEle: "#pagination>li",
            ele: "#grid-container",
            observer: "#grid-container>.grid-items",
            next: "li:has(>span#current)+li>a",
            re: "#pagination",
            pageNum: "li:has(>span#current)"
        },
        openInNewTab: ".grid-items a:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "美图网",
        host: ["www.meitu8.cc", "meitu8.cc"],
        reg: /^https?:\/\/(www\.)?meitu8\.cc\/\w+\/\d+\/\d+\.html$/i,
        imgs: () => {
            let [max] = fun.gt(".pagelist>b").match(/\d+$/);
            return fun.getImg("#lightgallery img", max, 9);
        },
        button: [4],
        insertImg: ["#lightgallery", 2],
        autoDownload: [0],
        next: ".prev>a",
        prev: ".next>a",
        customTitle: ".focusbox-title",
        category: "nsfw1"
    }, {
        name: "美图社/花瓣美女",
        reg: () => fun.checkUrl({
            h: [
                /^(www\.)?928r\.com$/,
                /^(www\.)?060k\.com$/,
            ],
            p: /^\/post\/\d+\.html$/i
        }),
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let url = fun.gu("//a[text()='显示全文']");
            return fun.fetchDoc(url).then(dom => fun.gae("#lightgallery img", dom));
        },
        button: [4],
        insertImg: ["#lightgallery", 2],
        autoDownload: [0],
        next: ".prev>a",
        prev: ".next>a",
        customTitle: ".focusbox-title",
        category: "nsfw1"
    }, {
        name: "找套图/Xiuno BBS",
        reg: () => fun.checkUrl({
            h: [
                /^(www\.)?zhaotaotu\.cc$/,
                /^(www\.)?kantaotu\.cc$/
            ],
            p: /^\/\??thread-\d+\.htm$/
        }),
        imgs: ".message>img:not(:first-of-type)",
        button: [4],
        insertImg: [".message", 2],
        customTitle: ".media-body>h4",
        category: "nsfw1"
    }, {
        name: "尤美图库/M5MM",
        host: ["www.umeitu.com", "www.m5mm.com"],
        reg: [
            /^https?:\/\/(www\.)?umeitu\.com\/img\/\d+\.html$/,
            /^https?:\/\/(www\.)?m5mm\.com\/photo\/\d+\.html$/,
        ],
        imgs: () => fun.getImg(".vipimglist img", fun.gt(".stitle>h1>span").match(/\d+/)[0], 9),
        button: [4],
        insertImg: [".vipimglist", 2],
        customTitle: () => fun.dt({
            d: [
                " - 尤美图库",
                " - M5MM"
            ]
        }),
        css: "union[id],.sb.list2>li:nth-child(n+2):nth-child(-n+3){display:none!important}.vipimglist img{min-height:unset!important;}",
        category: "nsfw1"
    }, {
        name: "秀套图吧",
        host: ["www.taotu8.cc"],
        reg: /^https?:\/\/www\.taotu8\.cc\/mm\/\d+\.html$/i,
        imgs: () => {
            let max;
            try {
                max = fun.gu(".page_navi a:last-child").split("_")[1].match(/\d+/)[0];
            } catch {
                max = 1;
            }
            return fun.getImg(".sg_img img", max, 9);
        },
        button: [4],
        insertImg: [".sg_img", 2],
        customTitle: "h1",
        css: "#divpsg,.tujia{display:none!important}.sg_img img{min-height:unset!important}",
        category: "nsfw1"
    }, {
        name: "Xiuren 秀人网",
        reg: () => fun.checkUrl({
            h: "www.xiuren.org"
        }),
        imgs: "a[rel='gallery']:not([href*='html']",
        button: [4],
        insertImg: [
            [".post p>a:not([title])", 2, ".post p>a[title],.post p>span"], 2
        ],
        customTitle: "#title>h1",
        css: "#post .post img{max-width:100% !important}",
        category: "nsfw2"
    }, {
        name: "微圖坊",
        host: ["www.v2ph.com", "www.v2ph.net", "www.v2ph.ru", "www.v2ph.ovh"],
        reg: () => /^https?:\/\/www\.v2ph\.(com|net|ru|ovh)\/album\//.test(siteUrl) && !fun.indexOf(siteUrl, "?page=") && fun.ge(".photos-list"),
        imgs: async () => {
            let [picTotalNum] = fun.gt("dd:last-child").match(/\d+/);
            let pagePicNum = fun.gae(".album-photo img[alt]").length;
            let max = Math.ceil(picTotalNum / pagePicNum);
            let links = fun.arr(max, (v, i) => siteUrl.replace(/\?hl=.+|\?page=\d+/, "") + `?page=${(i + 1)}`);
            let srcArr = [];
            let status = 200;
            let vip = false;
            let fetchNum = 0;
            fun.showMsg(displayLanguage.str_01, 0);
            for (let page = 0; page < links.length; page++) {
                await fetch(links[page]).then(res => {
                    if (res.status == 403) status = 403;
                    fun.showMsg(`${displayLanguage.str_02}${fetchNum+=1}/${links.length}`, 0);
                    return res.arrayBuffer();
                }).then(buffer => {
                    const decoder = new TextDecoder(document.characterSet || document.charset || document.inputEncoding);
                    const htmlText = decoder.decode(buffer);
                    const dom = fun.doc(htmlText);
                    debug(`\n${links[page]}\n`, dom);
                    let vipEle = fun.ge(".lead", dom);
                    if (vipEle) vip = true;
                    let imgs = fun.gae(".album-photo img[alt]", dom);
                    imgs.length == 0 ? debug(`\n${links[page]}\n沒有任何圖片`) : debug(`\n${links[page]}\n此頁圖片`, imgs);
                    let tE = fun.gae("div.album-photo").at(-1);
                    imgs.forEach(img => {
                        img.dataset.src ? srcArr.push(img.dataset.src) : srcArr.push(img.src);
                        if (page != 0) insertAfter(tE, img.parentNode.cloneNode(true));
                    });
                    if (page != 0 && !vipEle && fun.ge(".pagination", dom)) fun.ge(".pagination").outerHTML = fun.ge(".pagination", dom).outerHTML;
                });
                if (status == 403) {
                    setTimeout(() => {
                        fun.showMsg("403請先登錄網站!", 0);
                    }, 1200);
                    return srcArr;
                }
                if (vip) {
                    setTimeout(() => {
                        fun.showMsg("VIP限定專輯圖片!", 5000);
                    }, 1200);
                    return srcArr;
                }
                await fun.delay(600, 0);
            }
            if (picTotalNum != srcArr.length && !vip) {
                setTimeout(() => {
                    fun.hideMsg();
                    fun.showMsg("圖片有缺，請看主控台訊息", 5000);
                }, 1300)
            }
            return srcArr;
        },
        button: [4],
        insertImg: [".photos-list", 2],
        customTitle: "h1",
        css: ".albums-list img,.photos-list img{opacity:1!important}",
        category: "nsfw2"
    }, {
        name: "柠檬皮",
        host: ["www.emonl.com"],
        reg: /^https?:\/\/www\.emonl\.com\/\d+\.html$/i,
        exclude: [
            ".read-point-box",
            "//div[@class='single-content']/p[not(.//img)] | //div[@class='single-content']/fieldset"
        ],
        imgs: () => {
            if (fun.ge(".page-links")) {
                return fun.getImg(".single-content img", (fun.gt(".page-links>a:last-child", 2) || 1), 7);
            } else {
                return fun.gae(".single-content img");
            }
        },
        button: [4],
        insertImg: [".single-content", 2],
        customTitle: "h1.entry-title",
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw1"
    }, {
        name: "柠檬皮",
        host: ["www.emonl.com"],
        reg: /^https?:\/\/www\.emonl\.com\/\d+\.html$/i,
        include: "//div[@class='single-content']/p[not(.//img)] | //div[@class='single-content']/fieldset",
        exclude: [
            ".read-point-box",
            ".page-links"
        ],
        imgs: ".single-content img",
        capture: () => fun.gae(".single-content img"),
        setFancybox: true,
        button: [4],
        insertImg: [".single-content", 0],
        customTitle: "h1.entry-title",
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw1"
    }, {
        name: "51sex",
        host: ["51sex.vip"],
        reg: /^https?:\/\/51sex\.vip\/pic\/\d+/i,
        init: () => fun.addUrlHtml(_this.next(), ".headling_main", 1, "下一篇"),
        imgs: () => {
            let max;
            try {
                [max] = fun.gt(".headling_swiper_num_small").match(/\d+/);
            } catch {
                max = 1;
            }
            let links = fun.arr(max, (v, i) => siteUrl + "/" + (i + 1));
            return fun.getImgA("#bigimg", links);
        },
        button: [4, "24%"],
        insertImg: [".headling_main", 2],
        next: () => {
            let [num] = siteUrl.match(/\d+$/);
            return siteUrl.replace(/\d+$/, "") + (Number(num) - 1);
        },
        customTitle: ".headling_word_main_box_title",
        css: ".headling_main{height:auto}",
        category: "nsfw1"
    }, {
        name: "51sex分類自動翻頁",
        reg: /^https?:\/\/51sex\.vip\/category\/\d+/i,
        init: () => {
            fun.lp.split("/").length == 3 ? currentPageNum = 1 : currentPageNum = Number(fun.lp.split("/").at(-1));
        },
        autoPager: {
            ele: ".headling_main_a",
            observer: ".headling_main_a",
            next: () => siteUrl.match(/https?:\/\/51sex\.vip\/category\/\d+/)[0] + "/" + (currentPageNum += 1),
            stop: (dom) => {
                let currentEleURLs = fun.gau(".headling_main_a");
                if (currentEleURLs.length < 24) {
                    return true;
                } else {
                    if (currentEleURLs.length > 24) currentEleURLs = currentEleURLs.slice(-24);
                    let nextEleURLs = fun.gau(".headling_main_a", dom);
                    for (let url of currentEleURLs) {
                        if (nextEleURLs.includes(url)) return true;
                    }
                }
                return false;
            },
            pageNum: () => currentPageNum
        },
        openInNewTab: "a.headling_main_a:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "美图乐",
        host: ["www.meitule.net", "www.meitule.com", "www.meitulu.cc"],
        reg: /^https?:\/\/(www\.)?(meitule|meitulu)\.\w+\/photo\/\d+\.html$/i,
        imgs: () => {
            let max;
            try {
                [max] = fun.gu(".page>li:last-child>a").split("_")[1].match(/\d+/);
            } catch {
                max = 1;
            }
            return fun.getImgO(".content img", max, 9);
        },
        button: [4],
        insertImg: [".content", 2],
        customTitle: "h1.h5",
        css: "#dtag>center,#divpsg,.tujia,.list-album>li:nth-child(n+1):nth-child(-n+2){display:none!important}",
        category: "nsfw1"
    }, {
        name: "Elysium",
        host: ["www.elysium.pro"],
        reg: /^https?:\/\/www\.elysium\.pro\/(Photobooks|Cosplay)\/Album\/\d+$/i,
        init: () => fun.createImgBox("div[data-lg-thumb=data-thumbnail]", 2),
        imgs: async () => {
            let pages = fun.ge("li.page-item.active+li>a:not([aria-label=Next])");
            if (pages) {
                let links = fun.gau(".pagination>.page-item:not(.disabled)>a:not([aria-label=Next])");
                await fun.getEle(links, "div[data-lg-thumb=data-thumbnail]>div", "div[data-lg-thumb=data-thumbnail]", "nav:has(>.pagination)");
            }
            thumbnailSrcArray = fun.gae("a[data-thumbnail]:not([data-video])").map(e => e.dataset.thumbnail);
            return fun.gae("a[data-thumbnail]:not([data-video])");
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0], 2
        ],
        go: 1,
        customTitle: () => fun.gt(".text-muted+a") + " - " + fun.gt(".btn-toolbar>h4"),
        category: "nsfw1"
    }, {
        name: "美桌",
        host: ["www.win4000.com"],
        link: "http://www.win4000.com/meitu.html",
        reg: /^https?:\/\/www\.win4000\.com\/meinv\d+\.html$/,
        imgs: () => fun.getImgA(".pic-large", "#scroll>li:not(.current)>a", 200),
        button: [4],
        insertImg: ["#pic-meinv,.pic-meinv", 2],
        autoDownload: [0],
        next: ".group-next>a",
        prev: ".group-prev>a",
        customTitle: ".ptitle>h1",
        category: "nsfw1"
    }, {
        name: "MM1311",
        host: ["www.mm1311.net", "m.mm1311.net"],
        reg: /^https?:\/\/(www|m)\.mm1311\.net\/\w+\/\d+\.html$/,
        imgs: () => {
            let max;
            fun.ge(".page-ch") ? [max] = fun.gt(".page-ch").match(/\d+/) : [, max] = fun.gt(".fenye>.rw").match(/\d+\/(\d+)/);
            return fun.getImg(".content-pic img,.post-content img", max, 9);
        },
        button: [4],
        insertImg: [".content-pic,.post-content", 2],
        autoDownload: [0],
        next: ".updown_r",
        prev: ".updown_l",
        customTitle: ".content>h5,.mm-title",
        css: "union{display:none!important}",
        category: "nsfw1"
    }, {
        name: "浪女吧",
        host: ["langnv.neocities.org"],
        reg: /^https?:\/\/langnv\.neocities\.org\/posts\/\d+\/$/,
        imgs: "#images img",
        button: [4],
        insertImg: ["#images", 2],
        autoDownload: [0],
        next: "#prevpost>a",
        prev: "#nextpost>a",
        customTitle: ".title",
        category: "nsfw2"
    }, {
        name: "656G精品套图",
        host: ["www.656g.com", "m.656g.com"],
        reg: /^https?:\/\/(www|m)\.656g\.com\/tid\/\d+\.html$/,
        imgs: () => {
            let [max] = fun.gt(".i1").match(/\d+/);
            return fun.getImgO(".imgg img", max, 9);
        },
        button: [4],
        insertImg: [".imgg", 2],
        customTitle: ".c-tt>h1",
        category: "nsfw1"
    }, {
        name: "依依图片网",
        host: ["www.eemm.cc"],
        reg: /^https?:\/\/www\.eemm\.cc\/pic\/\d+\.html$/,
        imgs: async () => {
            await fun.getNP("#content img", "a.on+a:not(.next)", null, ".page", 0, null, 0, 0);
            return fun.gae("#content img");
        },
        button: [4],
        insertImg: ["#content", 1],
        customTitle: ".article>h1",
        css: ".article .content img{max-width:100%!important}",
        category: "nsfw1"
    }, {
        name: "依依图片网M",
        host: ["m.eemm.cc"],
        reg: /^https?:\/\/m\.eemm\.cc\/pic\/\d+\.html$/,
        imgs: () => {
            let [, max] = fun.gt(".contentpage").match(/\d+\/(\d+)/);
            return fun.getImgO(".content img", max, 9, null, 200, ".contentpage>span:nth-child(2)");
        },
        button: [4],
        insertImg: [".content", 1],
        customTitle: ".content>h1",
        css: ".topad,.mdiv{display:none!important}",
        category: "nsfw1"
    }, {
        name: "青年美圖",
        host: ["jrants.com"],
        reg: [
            /^https?:\/\/(\w+\.)?jrants\.com\/\d+\.html$/,
            /^https:\/\/\w+\.jrants\.com\/[^\/]+\/$/
        ],
        imgs: () => fun.ge(".page-links") ? fun.getImg(".entry-content img", fun.gt(".page-links>a:last-child"), 7) : fun.gae(".entry-content img"),
        button: [4],
        insertImg: [".entry-content", 1],
        autoDownload: [0],
        next: "span.prev>a",
        prev: "span.next>a",
        customTitle: ".entry-title",
        css: ".code-block{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "CosBlay/風流雜誌/虹圖",
        host: ["cosblay.com", "trendszine.com", "www.hongimg.com"],
        reg: [
            /^https?:\/\/(cosblay\.com|trendszine\.com|www\.tiplogo\.com)\/\d+\.html/i,
            /^https?:\/\/[a-z]{2}\.cosblay\.com\/\d+\/[^\.]+\.html$/,
            /^https?:\/\/[a-z]{2,3}\.hongimg.com\/\d+\/[^\.]+\.html$/
        ],
        imgs: () => fun.getImg(".entry-content img", fun.gt(".pgntn-page-pagination-block>*:last-child", 2) || 1, 7),
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: "span.prev>a",
        prev: "span.next>a",
        customTitle: ".entry-title",
        css: ".code-block{display:none!important;}@media (max-width:768px){.separate-containers .inside-article,.separate-containers .comments-area,.separate-containers .page-header,.separate-containers .paging-navigation,.one-container .site-content,.inside-page-header{padding:2px}.entry-content:not(:first-child),.entry-summary:not(:first-child),.page-content:not(:first-child){margin-top:2px}}",
        category: "nsfw2"
    }, {
        name: "MM5MM5美女图片",
        host: ["www.mm5mm5.com"],
        reg: /^https?:\/\/www\.mm5mm5\.com\/mm\/\d+/,
        imgs: () => _unsafeWindow.picinfo[0].split(","),
        button: [4],
        insertImg: ["#content", 2],
        customTitle: ".article>h2",
        css: ".article .content img{max-width:100%!important}",
        category: "nsfw1"
    }, {
        name: "MM5MM5美女图片M",
        host: ["m.mm5mm5.com"],
        reg: /^https?:\/\/m\.mm5mm5\.com\/mm\/\d+/,
        imgs: () => {
            let [, max] = fun.gt(".contentpage>span>i").match(/\/(\d+)/);
            let links = [siteUrl];
            for (let i = 1; i < max; i++) {
                links.push(siteUrl + "/" + i);
            }
            return fun.getImgA("div>a>img", links, 2);
        },
        button: [4],
        insertImg: ["//div[a[img]]", 2],
        customTitle: ".content>h1",
        css: "union[id],.pag-ts,.contentpage{display:none!important}",
        category: "nsfw1"
    }, {
        name: "888美女网",
        host: ["www.888meinv.com"],
        reg: /^https?:\/\/www\.888meinv\.com\/\w+\/\d+$/,
        include: ".suoyou",
        imgs: () => {
            let [, max] = fun.gt(".suoyou").match(/\/(\d+)/);
            let links = fun.arr(max, (v, i) => siteUrl + "/" + (i + 1));
            return fun.getImgA(".pannel img", links);
        },
        button: [4],
        insertImg: [".pannel", 2],
        autoDownload: [0],
        next: ".pre_pageload>a",
        prev: ".next_pageload>a",
        customTitle: "h1",
        css: ".nr .tupianqu img{margin-top:0px!important}@media only screen and (max-width:480px){.nr .tupianqu,.nr .tupianqu .pannel{padding:0px!important}}union{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "淑女爱",
        host: ["www.shunvi.com", "www.shunvai.com"],
        reg: /^https?:\/\/www\.shunva?i\.com\/\w+\/\d+\.html$/,
        include: "#allnum",
        imgs: () => {
            let max = fun.gt("#allnum");
            let links = fun.arr(max, (v, i) => i == 0 ? siteUrl : siteUrl.replace(".html", "") + "_" + (i + 1) + ".html");
            return fun.getImgA(".picsbox img", links, 2);
        },
        button: [4],
        insertImg: [".picsbox>center", 2],
        customTitle: ".picmainer>h1",
        css: ".picpege{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "淑女爱M",
        host: ["m.shunvi.com", "m.shunvai.com"],
        reg: /^https?:\/\/m\.shunva?i\.com\/photo\/\d+\.html$/,
        include: "#thenum",
        imgs: () => {
            let [max] = fun.gt("//span[b[@id='thenum']]").match(/\d+$/);
            let links = fun.arr(max, (v, i) => i == 0 ? siteUrl : siteUrl.replace(".html", "") + "_" + (i + 1) + ".html");
            return fun.getImgA(".swiper-slide img", links, 200);
        },
        button: [4],
        insertImg: ["#slider", 0],
        customTitle: () => fun.dt({
            s: ".infoline",
            d: /\d+\s\/\s\d+\n/
        }),
        category: "nsfw1"
    }, {
        name: "TWOIMG",
        link: "https://www.twoimg.com/people",
        reg: () => fun.checkUrl({
            h: "www.twoimg.com",
            p: /^\/\d+\.html$/
        }),
        imgs: ".gallery a",
        thums: ".gallery img",
        button: [4],
        insertImg: [
            [".article-content", 0, ".gallery"], 2
        ],
        autoDownload: [0],
        next: ".article-nav-prev a",
        prev: ".article-nav-next a",
        customTitle: ".article-title",
        category: "nsfw1"
    }, {
        name: "mn52图库",
        host: ["www.mn52.com", "wap.mn52.com"],
        link: "https://www.mn52.com/xingganmeinv/",
        reg: /^https?:\/\/(www|wap)\.mn52\.com\/\w+\/\d+\.html$/,
        imgs: "#originalpic img,.w100 img,#piclist img",
        button: [4],
        insertImg: ["#originalpic,.w100", 2],
        autoDownload: [0],
        next: "//a[span[text()='上一个图集']]|//li[contains(text(),'上一篇')]/a",
        prev: "//a[span[text()='下一个图集']]|//li[contains(text(),'下一篇')]/a",
        customTitle: ".title>h1,.general-title>h4",
        css: ".general-title{padding:unset!important}",
        category: "nsfw1"
    }, {
        name: "三千图片网",
        host: ["www.win3000.com"],
        link: "https://www.win3000.com/tags/xingganmeinv/",
        reg: /^https?:\/\/www\.win3000\.com\/\w+\/\d+\.html$/,
        imgs: () => {
            let [max] = fun.gt(".title>span").match(/\d+$/);
            let links = fun.arr(max, (v, i) => siteUrl.replace(".html", "") + "_" + (i + 1) + ".html");
            return fun.getImgA(".pic-cont img", links);
        },
        button: [4],
        insertImg: [".pic-cont", 2],
        autoDownload: [0],
        next: "a.other-group.fr",
        prev: "a.other-group.fl",
        customTitle: ".title>h1",
        category: "nsfw1"
    }, {
        name: "三千图片网M",
        host: ["m.win3000.com"],
        link: "https://m.win3000.com/tags/xingganmeinv/",
        reg: /^https?:\/\/m\.win3000\.com\/\w+\/\d+\.html$/,
        imgs: () => {
            let max = fun.gt(".show-page>i");
            let links = fun.arr(max, (v, i) => siteUrl.replace(".html", "") + "_" + (i + 1) + ".html");
            return fun.getImgA(".pic-showbox .imgbox img", links);
        },
        button: [4],
        insertImg: [".pic-showbox", 2],
        autoDownload: [0],
        next: "a.page-next",
        prev: "a.page-prev",
        customTitle: ".pic-infobox h1",
        css: "#app{font-size:14px!important}",
        category: "nsfw1"
    }, {
        name: "3G 壁纸",
        host: ["www.3gbizhi.com", "m.3gbizhi.com"],
        link: "https://www.3gbizhi.com/meinv",
        reg: /^https?:\/\/(www|m|desk)\.3gbizhi\.com\/meinv\/(\w+\/)?\w+\.html$/,
        imgs: () => fun.getImgA("#contpic,#mobile_c_img>img", ".swiper-slide:not(:first-child) a"),
        thums: ".swiper-slide>a>img",
        button: [4],
        insertImg: ["#showimg", 1],
        autoDownload: [0],
        next: "a.next[href$=html]",
        prev: "a.pver[href$=html]",
        customTitle: "h2.title,.titlew>h2",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}.showcontw #showimg{height:auto!important}[class^=ad_id]{display:none!important}",
        category: "nsfw1"
    }, {
        name: "亿图全景图库",
        host: ["www.yeitu.com", "m.yeitu.com"],
        link: "https://www.yeitu.com/meinv/",
        reg: /^https?:\/\/(www|m)\.yeitu\.com\/\w+\/\w+\/\w+\.html$/,
        init: () => {
            let a = fun.ge(".article-body>a,.gallery-item>a");
            if (a) a.outerHTML = a.innerHTML;
        },
        imgs: () => {
            let [, max] = fun.gt(".imageset-sum,span.num").match(/\/\s?(\d+)/);
            let links = [siteUrl];
            let url = siteUrl.replace(".html", "");
            for (let i = 2; i <= max; i++) {
                links.push(url + "_" + i + ".html");
            }
            return fun.getImgA(".img_box img[alt],.gallery-item img[alt],.article-show img", links, 2);
        },
        button: [4],
        insertImg: [".img_box,.gallery-item,.article-show", 2],
        customTitle: "#title>h1,h1.article-title,.article-info>h1",
        css: ".appbox,.uk-page~section,.yt-pages+.mssp{display:none!important}",
        category: "nsfw1"
    }, {
        name: "优美图库",
        host: ["www.umei.cc"],
        link: "https://www.umei.cc/meinvtupian/",
        reg: /^https?:\/\/www\.umei\.cc\/meinvtupian\/\w+\/\d+\.htm$/i,
        imgs: () => {
            let url = fun.gu(".pages li:last-child>a");
            let [, max] = url.match(/_(\d+).htm/);
            return fun.getImg(".big-pic img", max, 17);
        },
        button: [4],
        insertImg: [".big-pic", 1],
        autoDownload: [0],
        next: ".preandnext:not(.connext)>a",
        prev: ".preandnext.connext>a[href$=htm]",
        customTitle: "#photos>h1",
        css: ".photo img {max-width:100% !important}",
        category: "nsfw1"
    }, {
        name: "优美图库M",
        host: ["wap.umei.cc"],
        reg: /^https?:\/\/wap\.umei\.cc\/meinvtupian\/\w+\/\d+\.htm$/,
        include: "//a[text()='尾页']",
        imgs: () => {
            let [, max] = fun.gu("//a[text()='尾页']").match(/_(\d+).htm/);
            return fun.getImg("#maincont img", max, 17);
        },
        button: [4],
        insertImg: ["#maincont", 1],
        autoDownload: [0],
        next: () => {
            let next = fun.ge("a.f-r.l3");
            return next ? next.href : null;
        },
        prev: 1,
        customTitle: ".title>h1",
        css: "#maincont>div:not(#FullPictureLoadImgBox),dl:nth-child(n+1):nth-child(-n+2){display:none!important}",
        category: "nsfw1"
    }, {
        name: "MEITU131",
        host: ["www.meitu131.com", "m.meitu131.com"],
        link: "https://www.meitu131.com/nvshen/，https://www.meitu131.com/jigou/",
        reg: /^https?:\/\/(www|m)\.meitu131\.(com|net)\/(\w+\/)?meinv\/\d+\//,
        imgs: () => {
            let max = fun.gt("a[title],.uk-page>span").match(/\/(\d+)/)[1];
            return fun.getImgO(".work-content img,.uk-article-bd img", max, 15);
        },
        button: [4],
        insertImg: [".work-content>p,.uk-article-bd", 1],
        customTitle: ".contitle-box>h1,h1.uk-article-title",
        css: ".appbox,.uk-page~section{display:none!important}.work-content img{max-width:100%!important}",
        category: "nsfw1"
    }, {
        name: "和邪社",
        host: ["www.hexieshe.cn", "hexieshe.cn"],
        reg: /^https?:\/\/(www\.)?hexieshe\.cn\/\d+\/$/i,
        init: async () => await fun.getNP("#content-innerText>p", "span.current+a", null, ".post-links"),
        imgs: "#content-innerText img",
        customTitle: () => fun.dt({
            s: ".entry-title",
            d: "为您朗读"
        }),
        setFancybox: true,
        category: "nsfw1"
    }, {
        name: "天极图片",
        host: ["pic.yesky.com"],
        reg: /^https?:\/\/pic\.yesky\.com\/\d+\/\d+\.shtml$/i,
        init: () => {
            fun.ge(".bigPic").outerHTML = '<div class="imgBox"></div>';
        },
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr(".previewPic img");
            return thumbnailSrcArray.map(e => e.replace(/d-|\/180x320/g, ""));
        },
        button: [4],
        insertImg: [".imgBox", 2],
        customTitle: "h1",
        css: ".atlasSwiper .floatR,.atlasSwiper .floatR .previewPic{width:unset!important}",
        category: "nsfw1"
    }, {
        name: "天极图片M",
        host: ["wap.yesky.com"],
        reg: /^https?:\/\/wap\.yesky\.com\/pic\/\d+\/\d+\.shtml$/i,
        init: () => {
            globalImgArray = fun.gae("[data-imgid] img");
            fun.ge(".swiper-container").outerHTML = '<div class="imgBox"></div>';
        },
        imgs: () => globalImgArray,
        button: [4],
        insertImg: [".imgBox", 2],
        customTitle: ".atlas_introduce h1",
        css: ".swiper-sum,[class^=ad]{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "爱美女",
        host: ["www.92meinv.com"],
        reg: /^https?:\/\/www\.92meinv\.com\/article.+\.html$/,
        imgs: () => {
            let [, max] = fun.gt(".des>h1,.post_title_topimg").match(/\/\s?(\d+)/);
            let links = fun.arr(max, (v, i) => siteUrl.replace(/\.html$/, "") + "-" + (i + 1) + ".html");
            return fun.getImgA(".pp.hh img[alt],#image_div img", links, 200);
        },
        button: [4],
        insertImg: [".pp.hh,.content", 1],
        autoDownload: [0],
        next: "//a[@class='active' and contains(text(),'下一篇')] | //a[@class='active' and contains(text(),'下一组')]",
        prev: "//a[@class='active' and contains(text(),'上一篇')] | //a[@class='active' and contains(text(),'上一组')]",
        css: ".pp img{max-width:100%!important}",
        customTitle: () => fun.title("_", 1),
        category: "nsfw1"
    }, {
        name: "爱美女M",
        host: ["m.92meinv.com"],
        reg: /^https?:\/\/m\.92meinv\.com\/article-\d+\.html$/,
        imgs: () => {
            let max = fun.gt(".article-page>*:last-child", 2);
            let links = fun.arr(max, (v, i) => siteUrl.replace(/\.html$/, "") + "-" + (i + 1) + ".html");
            return fun.getImgA(".arcmain img,#image_div img", links, 200);
        },
        button: [4],
        insertImg: [".clearfix.arcmain,.content", 1],
        autoDownload: [0],
        next: "a.f-r.l3",
        prev: "a.f-l.l2",
        css: "body>a{display:none!important}",
        customTitle: () => fun.title("_", 1),
        category: "nsfw1"
    }, {
        name: "美女图册",
        host: "www.mntuce.com",
        reg: /^https?:\/\/www\.mntuce\.com\/\d+\/\.html$/,
        imgs: () => fun.getImgA(".article-content img", ".post-nav-links a"),
        button: [4],
        insertImg: [".article-content", 2],
        customTitle: ".article-title",
        category: "nsfw1"
    }, {
        name: "扮之狐狸",
        host: "www.costhisfox.com",
        reg: [
            /^https?:\/\/www\.costhisfox\.com\/\d+\/$/i,
            /^https?:\/\/www\.costhisfox\.com\/\d+\.html$/,
            /^https?:\/\/www\.costhisfox\.com\/\w+\/\d+\.html$/
        ],
        include: "//ul[@class='breadcrumb']//a[text()='cos福利美图']|//ul[@class='breadcrumb']//a[text()='写真系列']",
        imgs: ".wp-posts-content img[data-src]",
        button: [4],
        insertImg: [".wp-posts-content", 2],
        autoDownload: [0],
        next: "//a[p[text()='上一篇']]",
        prev: "//a[p[text()='下一篇']]",
        customTitle: "h1.article-title",
        fancybox: {
            blacklist: 1
        },
        css: "div[data-nav=posts][style]{max-height:unset!important}",
        category: "nsfw1"
    }, {
        name: "男人之家",
        host: ["nanrenhome.cc", "nanrenhome.com"],
        reg: /^https?:\/\/nanrenhome\.(cc|com)\/\d+\.html$/,
        include: "//a[@rel='category tag'][text()='福利美图']",
        imgs: () => {
            let pag = fun.ge(".article-paging a[href]");
            return pag ? fun.getImgA(".article-content img", ".article-paging a[href]") : fun.gae(".article-content img");
        },
        button: [4],
        insertImg: [
            ["//article/p[img]", 2, "//article/p[img] | //div[@class='article-paging']"], 2
        ],
        customTitle: ".article-title",
        category: "nsfw1"
    }, {
        name: "网红跟我俩",
        host: "www.2wh.net",
        reg: /^https?:\/\/www\.2wh\.net\/\d+\.html$/,
        include: "//div[@class='breadcrumbs']/a[2][text()='美女写真机构']",
        imgs: () => {
            let pag = fun.ge(".article-paging a[href]");
            return pag ? fun.getImgA(".article-content img", ".article-paging a[href]") : fun.gae(".article-content img");
        },
        button: [4],
        insertImg: [".article-content", 2],
        autoDownload: [0],
        next: ".article-nav-prev a",
        prev: ".article-nav-next a",
        customTitle: () => fun.dt({
            s: ".article-title",
            d: "无删减私房写真流出"
        }),
        category: "nsfw1"
    }, {
        name: "网红跟我俩",
        reg: /^https?:\/\/www\.2wh\.net\/\d+\.html$/,
        imgs: ".article-content img",
        autoDownload: [0],
        next: ".article-nav-prev a",
        prev: ".article-nav-next a",
        customTitle: () => fun.dt({
            s: ".article-title",
            d: "无删减私房写真流出"
        }),
        setFancybox: true,
        category: "nsfw1"
    }, {
        name: "RedBust",
        host: "redbust.com",
        reg: /^https?:\/\/redbust\.com\/[^\/]+\/$/,
        include: ".entry-inner img",
        imgs: () => fun.getImgSrcset(".entry-inner img"),
        thums: ".entry-inner img",
        button: [4],
        insertImg: [".entry-inner", 2],
        autoDownload: [0],
        next: ".previous>a",
        prev: ".next>a",
        customTitle: "h1.post-title",
        category: "nsfw2"
    }, {
        name: "PixiBB 新分頁開啟鏈結",
        host: ["www.pixibb.com"],
        reg: [
            /^https?:\/\/www\.pixibb\.com\/$/,
            /^https?:\/\/www\.pixibb\.com\/\?list=/
        ],
        openInNewTab: ".list-item-image a",
        category: "none"
    }, {
        name: "PixiBB",
        host: ["www.pixibb.com"],
        link: "https://www.pixibb.com/explore",
        reg: /^https?:\/\/www\.pixibb\.com\/album\//,
        imgs: async () => {
            await fun.getNP("#list-most-recent>.pad-content-listing", ".pagination-next>a");
            try {
                thumbnailSrcArray = fun.gae(".list-item-image img").map(e => e.src.replace(/(-\d+)-1(\.md\.\w+)$/i, "$1$2")).sort((a, b) => a.match(/-(\d+)\.md\./)[1] - b.match(/-(\d+)\.md\./)[1]);
            } catch {
                thumbnailSrcArray = fun.gae(".list-item-image img").map(e => e.src).sort();
            }
            return thumbnailSrcArray.map(e => e.replace(".md.", "."));
        },
        button: [4],
        insertImg: ["#list-most-recent", 2],
        customTitle: () => fun.title(" - PixiBB", 1),
        category: "nsfw1"
    }, {
        name: "PixiBB",
        host: ["new.pixibb.com"],
        reg: /^https?:\/\/new\.pixibb\.com\/[\w-]+\/$/,
        imgs: () => fun.getImgA(".entry-content img", ".page-links a"),
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: ".left-post a",
        prev: ".right-post a",
        customTitle: () => fun.dt({
            s: ".post h2",
            d: [
                /Sexy Cosplay.*$/,
                /Maid Raiden Cosplay.*$/
            ]
        }),
        category: "nsfw1"
    }, {
        name: "PutMega",
        host: ["www.putmega.com"],
        link: "https://www.putmega.com/explore/recent/?list=albums&sort=date_desc&page=1",
        reg: /^https?:\/\/(www\.)?putmega\.com\/album\//,
        imgs: async () => {
            await fun.getNP("#list-most-recent>.pad-content-listing", ".pagination-next>a[href]");
            thumbnailSrcArray = fun.getImgSrcArr(".list-item-image img");
            return thumbnailSrcArray.map(e => e.replace(".md.", "."));
        },
        button: [4],
        insertImg: ["#list-most-recent", 2],
        customTitle: () => fun.title(" - PutMega"),
        category: "nsfw1"
    }, {
        name: "PutMega 分類自動翻頁",
        reg: /^https?:\/\/(www\.)?putmega\.com\/explore\//,
        autoPager: {
            ele: "#list-recent-albums>.pad-content-listing,#list-recent-images>.pad-content-listing",
            observer: "#list-recent-albums>.pad-content-listing>div,#list-recent-images>.pad-content-listing>div",
            next: ".pagination-next>a[href]",
            re: ".content-listing-pagination"
        },
        category: "autoPager"
    }, {
        name: "ImgBB",
        host: ["ibb.co"],
        reg: /^https?:\/\/ibb\.co\/album\//,
        link: "https://shiki17chen.imgbb.com/albums",
        imgs: async () => {
            await fun.getNP("#list-most-recent>.pad-content-listing", ".pagination-next>a[href]");
            thumbnailSrcArray = fun.getImgSrcArr(".list-item-image img");
            return fun.getImgA("link[rel=image_src]", ".list-item-image a").then(arr => arr.reverse());
        },
        button: [4],
        insertImg: ["#content-listing-tabs", 2],
        customTitle: () => fun.dt({
            d: [
                "— ImgBB",
                /^[\d\s-]+/
            ]
        }),
        category: "nsfw1"
    }, {
        name: "JPG5",
        host: ["jpg5.su"],
        reg: /^https?:\/\/jpg5\.su\/a\//,
        link: "https://jpg5.su/a/blackql-cosplay.EzJa9",
        imgs: async () => {
            await fun.getNP("#list-most-recent>.pad-content-listing", ".pagination-next>a[href]");
            thumbnailSrcArray = fun.getImgSrcArr(".list-item-image img");
            return thumbnailSrcArray.map(e => e.replace(".md.", ".")).reverse();
        },
        button: [4],
        insertImg: ["#content-listing-tabs", 2],
        customTitle: () => fun.dt({
            d: [
                "— JPG5",
                /^[\d\s-]+/
            ]
        }),
        category: "nsfw1"
    }, {
        name: "Luscious",
        reg: () => fun.checkUrl({
            h: "luscious.net"
        }),
        imgs: async () => {
            if (!document.URL.includes("/albums/")) return [];
            fun.showMsg(displayLanguage.str_05, 0);
            await fun.waitEle("a[href*='/read/'],.album-heading a");
            const getApiUrl = (id, page) => {
                let searchParams = new URLSearchParams({
                    operationName: "PictureListInsideAlbum",
                    query: " query PictureListInsideAlbum($input: PictureListInput!) { picture { list(input: $input) { info { ...FacetCollectionInfo } items { __typename id title description created like_status number_of_comments number_of_favorites moderation_status width height resolution aspect_ratio url_to_original url_to_video is_animated position permissions url tags { category text url } thumbnails { width height size url } } } } } fragment FacetCollectionInfo on FacetCollectionInfo { page has_next_page has_previous_page total_items total_pages items_per_page url_complete } ",
                    variables: `{"input":{"filters":[{"name":"album_id","value":"${id}"}],"display":"date_newest","items_per_page":50,"page":${page}}}`
                });
                return `https://apicdn.luscious.net/graphql/nobatch/?${searchParams}`;
            };
            let id = Number(new URL(fun.gu("a[href*='/read/'],.album-heading a")).pathname.split("/")[2].match(/\d+$/)[0]);
            let max = await fetch(getApiUrl(id, 1)).then(res => res.json()).then(json => json.data.picture.list.info.total_pages);
            let fetchNum = 0;
            let resArr = fun.arr(max, (v, i) => {
                let url = getApiUrl(id, (i + 1));
                return fetch(url).then(res => {
                    fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${max}`, 0);
                    return res.json();
                }).then(json => json.data.picture.list.items.map(e => {
                    return e.url_to_video ? {
                        video: e.url_to_video
                    } : {
                        original: e.url_to_original,
                        thumbnail: e.thumbnails.at(-1).url
                    }
                }));
            });
            return Promise.all(resArr).then(data => {
                videoSrcArray = data.flat().filter(item => item.video).map(e => e.video);
                thumbnailSrcArray = data.flat().filter(item => item.thumbnail).map(e => e.thumbnail);
                return data.flat().filter(item => item.original).map(e => e.original);
            });
        },
        SPA: () => document.URL.includes("/albums/"),
        capture: () => _this.imgs(),
        button: [4],
        insertImg: ["article.o-padding-top-bottom,.picture-frame-wrapper", 3],
        downloadVideo: true,
        customTitle: async () => {
            await fun.delay(500, 0);
            if (document.URL.includes("/albums/")) {
                return fun.gt(".album-heading:not(.o-padding-sides),.album-heading.o-padding-sides a");
            } else {
                return null;
            }
        },
        observerURL: true,
        css: "body.o-modal-no-scroll{overflow:unset!important}#modal-root{display:none!important;}",
        category: "hcomic"
    }, {
        name: "E次元",
        host: ["www.evacg.org"],
        reg: /^https?:\/\/www\.evacg\.org\/archives\/\d+/,
        include: ".wp-caption img",
        exclude: ".poi-alert__msg",
        imgs: ".wp-caption img",
        button: [4],
        insertImg: [
            [".inn-singular__post__body__content", 0, ".wp-caption"], 2
        ],
        customTitle: ".inn-singular__post__title",
        category: "nsfw1"
    }, {
        name: "次元岛",
        host: ["ciyuandao.com"],
        reg: /^https?:\/\/ciyuandao\.com\/photo\/show\/\d+/,
        imgs: ".talk_pic  img",
        button: [4],
        insertImg: [".talk_pic", 2],
        customTitle: "h1",
        category: "nsfw1"
    }, {
        name: "萌次元",
        host: ["www.mtutuu.com"],
        reg: /^https?:\/\/www\.mtutuu\.com\/\d+\.html$/,
        exclude: ".content-cap",
        imgs: ".entry-content img",
        button: [4],
        insertImg: [
            ["//div[@class='entry-content']/p[img]", 2, "//div[@class='entry-content']/p[img]"], 2
        ],
        customTitle: ".post-style-3-title",
        category: "nsfw1"
    }, {
        name: "次元小镇",
        host: ["dimtown.com"],
        reg: /^https?:\/\/dimtown\.com\/\d+\.html$/,
        exclude: ".down-login",
        imgs: "#content img",
        button: [4],
        insertImg: [
            ["p:has(>img),p:has(a>img)", 2, "p:has(>img),p:has(a>img)"], 2
        ],
        autoDownload: [0],
        next: ".post-pre a",
        prev: ".post-next a",
        customTitle: "h1",
        category: "nsfw1"
    }, {
        name: "米卡插画",
        host: ["mikagogo.com"],
        reg: /^https?:\/\/mikagogo\.com\/\d+/,
        imgs: "#content img",
        autoDownload: [0],
        next: ".post-pre a",
        prev: ".post-next a",
        customTitle: "h1:not([class])",
        setFancybox: true,
        category: "nsfw1"
    }, {
        name: "推次元",
        host: ["www.a2cy.com", "a2cy.com"],
        reg: /^https?:\/\/(www\.)?a2cy\.com\/phone\/list\/\w+\/\d+\.html$/,
        imgs: ".imgBox img",
        customTitle: "h1",
        setFancybox: true,
        category: "nsfw1"
    }, {
        name: "Cosplay Porn",
        host: ["cosplayporn.online"],
        link: "https://cosplayporn.online/category/cosplay/",
        reg: /^https?:\/\/cosplayporn\.online\/\w+\/[^\/]+\/$/,
        include: ".video-description img",
        exclude: ".responsive-player",
        imgs: ".video-description img",
        button: [4],
        insertImg: [".video-description", 2],
        customTitle: ".entry-title",
        observerClick: "#wpdp-close",
        category: "nsfw1"
    }, {
        name: "Cosplay Porn",
        reg: /^https?:\/\/cosplayporn\.online\//,
        observerClick: "#wpdp-close",
        category: "ad"
    }, {
        name: "Cosersets",
        host: ["www.cosersets.com"],
        link: "https://www.cosersets.com/1",
        reg: /^https?:\/\/www\.cosersets\.com/,
        init: async () => await fun.waitEle(".z-breadcrumbs .z-breadcrumbs__item"),
        imgs: async (msg = 1) => {
            if (msg === 1) fun.showMsg(displayLanguage.str_05, 0);
            let body = {
                storageKey: "1",
                path: decodeURIComponent(window.location.pathname.replace(/^\/1/, "")),
                password: "",
                orderBy: "name",
                orderDirection: "asc"
            };
            let fetchJson = await fetch("/api/storage/files", {
                "headers": {
                    "accept": "application/json, text/plain, */*",
                    "content-type": "application/json;charset=UTF-8;"
                },
                "body": JSON.stringify(body),
                "method": "POST"
            }).then(res => res.json());
            return fetchJson.data.files.map(file => file.url);
        },
        SPA: true,
        capture: () => _this.imgs(0),
        customTitle: async () => {
            await fun.delay(500, 0);
            return fun.gt(".z-breadcrumbs")?.replace(/\n/g, " - ").replace(/首页 - |Cosersets - /, "");
        },
        observerURL: true,
        category: "nsfw1"
    }, {
        name: "小丁 (Fantasy Factory) Patreon Cosplay Leaks",
        host: ["www.fantasyfactory.xyz"],
        reg: /^https?:\/\/www\.fantasyfactory\.xyz\//,
        init: async () => await fun.waitEle("#crumbbar"),
        imgs: () => {
            let urls = fun.gau(".item.file>a");
            videoSrcArray = urls.filter(url => url.includes(".mp4"));
            return urls.filter(url => !/\.md$|\.mp4$/.test(url));
        },
        SPA: true,
        capture: () => _this.imgs(),
        customTitle: async () => {
            await fun.delay(500, 0);
            return fun.gt("#crumbbar")?.replace("www.fantasyfactory.xyz", "小丁 (Fantasy Factory)")
        },
        observerURL: true,
        category: "nsfw1"
    }, {
        name: "Tokar浵卡 Cosplay",
        host: ["tokar.fantasyfactory.xyz"],
        reg: /^https?:\/\/tokar\.fantasyfactory\.xyz\/album\/\d+$/,
        init: () => fun.createImgBox(".container", 2),
        button: [4],
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let video = fun.ge("a[href^='/video/']");
            if (video) {
                let url = fun.gu("a[href^='/video/']");
                videoSrcArray = await fun.fetchDoc(url).then(dom => fun.gae("video>source", dom).map(e => e.src));
            }
            let viewUrl = fun.gu("//a[text()='View Photos']");
            return fun.iframeVar(viewUrl, "list").then(w => w.list.flat());
        },
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        customTitle: "h2.text-center",
        downloadVideo: true,
        category: "nsfw1"
    }, {
        name: "蠢沫沫",
        link: "https://yanxiangrong.github.io/chunmomo/",
        reg: /^https?:\/\/yanxiangrong\.github\.io\/chunmomo\/[^\/]+\//,
        imgs: "p img[alt]",
        customTitle: "h1[id]",
        setFancybox: true,
        category: "nsfw1"
    }, {
        name: "二次元图库",
        host: ["vtecy.top"],
        reg: /^https?:\/\/vtecy\.top\/index\.php\/\d+\/\d+\/\d+\/[^\/]+\/$/,
        imgs: ".entry-content img",
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: ".post-next h2>a",
        prev: ".post-pre h2>a",
        customTitle: ".entry-header>h1",
        category: "nsfw2"
    }, {
        name: "女神社",
        host: ["nshens.com", "inewgirl.com", "lovens.shop"],
        reg: /^https?:\/\/((www\.)?nshens\.com|(www\.)?inewgirl\.com)\/(web\/)?\d+\/\d+\/\d+\/[^/]+$/,
        exclude: ".justify-center>button>.v-btn__content",
        init: async () => await fun.waitEle("h3"),
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let [max] = fun.gt(".v-pagination li:last-child,div:has(>div.current-item)~div:last-child", 2).match(/\d+/);
            let links = fun.arr(max, (v, i) => siteUrl + "/" + (i + 1));
            let fetchNum = 0;
            let resArr = links.map((url, i, arr) => {
                return fun.fetchDoc(url).then(dom => {
                    fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${arr.length}`, 0);
                    let code = fun.gst("photoList", dom);
                    return fun.run(code.match(/photoList:([^\]]+\])/)[1]);
                });
            });
            let photourl = await Promise.all(resArr).then(data => data.flat().map(e => e.photourl));
            if (photourl.length > [...new Set(photourl)].length) setTimeout(() => fun.showMsg("VIP套圖需升級為VIP", 5000), 1200);
            return photourl;
        },
        button: [4],
        insertImg: ["//div[a[div[@class='v-image v-responsive theme--light']]]", 2],
        customTitle: "h3",
        category: "nsfw2"
    }, {
        name: "Chottie", //很多都需要VIP，不然只會重複抓到第一頁的圖片
        host: ["chottie.com", "chinesehottie.com"],
        reg: /^https?:\/\/((www\.)?chottie\.com|(www\.)?chinesehottie\.com)\/blog\/(\w{2}\/)?archives\/\d+$/,
        exclude: ".justify-center>button>.v-btn__content",
        init: async () => await fun.waitEle("h3"),
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let [max] = fun.gt(".v-pagination li:last-child,div:has(>div.current-item)~div:last-child", 2).match(/\d+/);
            let links = fun.arr(max, (v, i) => siteUrl + "/" + (i + 1));
            let fetchNum = 0;
            let resArr = links.map((url, i, arr) => {
                return fun.fetchDoc(url).then(dom => {
                    fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${arr.length}`, 0);
                    let code, imgs;
                    try {
                        code = fun.gst("imgList", dom);
                        imgs = fun.run(code.match(/imgList:([^\]]+\])/)[1]);
                    } catch {
                        code = fun.gst("snapshotList", dom);
                        imgs = fun.run(code.match(/snapshotList:([^\]]+\])/)[1]);
                    }
                    return imgs;
                });
            });
            let data = await Promise.all(resArr).then(data => data.flat());
            if (data.length > [...new Set(data)].length) setTimeout(() => fun.showMsg("VIP套圖需升級為VIP", 5000), 1200);
            return data;
        },
        button: [4],
        insertImg: ["//div[a[div[@class='v-image v-responsive theme--light']]]", 2],
        //css: ".text-center{display:none!important}",
        customTitle: "h3",
        category: "nsfw2"
    }, {
        name: "美妹妹",
        host: ["www.meimeimei.org"],
        reg: [
            /^https?:\/\/www\.meimeimei\.org\/\d+\/\d+\/$/,
            /^https?:\/\/www\.meimeimei\.org\/\d+\/\d+\/\d+\.html$/
        ],
        imgs: () => {
            let max = fun.gt(".chapterpage>a:last-child", 2);
            let links = [];
            if (/\.html/.test(siteUrl)) {
                let url = fun.gu(".pageCurr").replace("_1.html", "");
                links = fun.arr(max, (v, i) => url + "_" + (i + 1) + ".html");
            } else {
                let url = fun.gu(".pageCurr").replace("1.html", "");
                links = fun.arr(max, (v, i) => url + (i + 1) + ".html");
            }
            return fun.getImgA(".img>img", links, 100);
        },
        button: [4],
        insertImg: [".txt_tcontent", 1],
        autoDownload: [0],
        next: "//div[contains(text(),'上一篇')]/a[not(@href='#')]",
        prev: "//div[contains(text(),'下一篇')]/a[not(@href='#')]",
        customTitle: ".bread>li:last-child>a",
        category: "nsfw1"
    }, {
        name: "tu928美女写真网",
        host: ["tu928.com"],
        reg: /^https?:\/\/tu928\.com\/\d+\.html/,
        imgs: () => fun.getImgA(".wp-block-image img", ".page-links>a", 300),
        button: [4],
        insertImg: [
            [".post-item-metadata", 1, ".wp-block-image"], 2
        ],
        autoDownload: [0],
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: ".entry-title",
        css: "#af-preloader,#page>a,#page>div:not(#content):has(>a>img){display:none!important;}",
        category: "nsfw1"
    }, {
        name: "图集网",
        host: ["aiavr.uk"],
        reg: /^https?:\/\/aiavr\.uk\/detail\?aid=\d+/,
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let id = fun.url.match(/\?aid=(\d+)/)[1];
            let total = await fetch(`/api/image/list?aid=${id}&pageNum=1`).then(res => res.json()).then(json => json.total);
            let pages = Math.ceil(total / 6);
            let links = fun.arr(pages, (v, i) => `/api/image/list?aid=${id}&pageNum=${i + 1}`);
            let resArr = links.map(url => fetch(url).then(res => res.json()).then(json => json.data));
            return Promise.all(resArr).then(data => data.flat()).then(arr => arr.map(e => e.sourceUrl == null ? e.sourceWeb + e.url : e.sourceWeb + e.sourceUrl));
        },
        capture: () => _this.imgs(),
        //button: [4],
        //insertImg: [".q-infinite-scroll", 2],
        customTitle: () => {
            let id = fun.url.match(/\?aid=(\d+)/)[1];
            //return fetch(`https://admin.aiavr.uk/album/info?id=${id}`).then(res => res.json()).then(json => json.data.title);
            return fun.xhr(`https://admin.aiavr.uk/album/info?id=${id}`, {
                responseType: "json"
            }).then(json => json.data.title);
        },
        category: "nsfw1"
    }, {
        name: "图集网",
        host: ["user.aiavr.uk", "m.aiavr.uk"],
        reg: /^https?:\/\/(user|m)\.aiavr\.uk\/detail\?aid=\d+/,
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let id = fun.url.match(/\?aid=(\d+)/)[1];
            let total = await fetch(`https://admin.aiavr.uk/image/list?aid=${id}&pageNum=1`).then(res => res.json()).then(json => json.total);
            let pages = Math.ceil(total / 6);
            let links = fun.arr(pages, (v, i) => `https://admin.aiavr.uk/image/list?aid=${id}&pageNum=${i + 1}`);
            let resArr = links.map(url => fetch(url).then(res => res.json()).then(json => json.data));
            return Promise.all(resArr).then(data => data.flat()).then(arr => arr.map(e => e.sourceUrl == null ? e.sourceWeb + e.url : e.sourceWeb + e.sourceUrl));
        },
        capture: () => _this.imgs(),
        //button: [4],
        //sertImg: [".q-infinite-scroll", 2],
        customTitle: () => {
            let id = fun.url.match(/\?aid=(\d+)/)[1];
            return fetch(`https://admin.aiavr.uk/album/info?id=${id}`).then(res => res.json()).then(json => json.data.title);
        },
        category: "nsfw1"
    }, {
        name: "图集网",
        host: ["user.aiavr.uk", "m.aiavr.uk"],
        reg: /^https?:\/\/(user|m)\.aiavr\.uk\/userAlbumDetail\?aid=\d+/,
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let id = fun.url.match(/\?aid=(\d+)/)[1];
            let vip = await fetch(`https://admin.aiavr.uk/userAlbum/getInfo/${id}`).then(res => res.json()).then(json => json.data.isSee);
            if (vip == false) {
                setTimeout(() => {
                    fun.showMsg("VIP限定專輯圖片!", 5000);
                }, 1200);
                return [];
            }
            let total = await fetch(`https://admin.aiavr.uk/userImage/list?aid=${id}&pageNum=1`).then(res => res.json()).then(json => json.total);
            let pages = Math.ceil(total / 6);
            let links = fun.arr(pages, (v, i) => `https://admin.aiavr.uk/userImage/list?aid=${id}&pageNum=${i + 1}`);
            let resArr = links.map(url => fetch(url).then(res => res.json()).then(json => json.data));
            return Promise.all(resArr).then(data => data.flat()).then(arr => arr.map(e => e.imgUrl == null ? null : "https://image.51x.uk/xinshijie" + e.imgUrl).filter(item => item));
        },
        capture: () => _this.imgs(),
        //tton: [4],
        //sertImg: [".q-infinite-scroll", 2],
        customTitle: () => {
            let id = fun.url.match(/\?aid=(\d+)/)[1];
            return fetch(`https://admin.aiavr.uk/userAlbum/getInfo/${id}`).then(res => res.json()).then(json => json.data.title);
        },
        category: "nsfw1"
    }, {
        name: "爱死美女图片站",
        host: ["www.24tupian.org"],
        reg: () => fun.checkUrl({
            h: "24tupian.org",
            p: /^\/\w+\/\d+\/\d+\/\d+\.html$/,
            e: "img[data-original*='imgs.diercun.com']"
        }),
        imgs: async () => {
            let pid = fun.gt("#pid");
            let num = Number(fun.gt(".mores>a").match(/\d+/)[0]);
            let max = Math.ceil(num / 21);
            let html = "";
            let fetchNum = 0;
            for (let i = 0; i < num; i += 21) {
                fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${max}`, 0);
                await fetch(`/ajaxs.aspx?fun=getmore&id=${pid}&p=${i}`).then(res => res.text()).then(text => (html += text));
            }
            let dom = fun.doc(html);
            let datas = fun.gae("img[data]", dom).map(e => e.getAttribute("data"));
            thumbnailSrcArray = datas.map(data => "https://imgs.diercun.com" + data);
            return datas.map(data => "https://big.diercun.com" + _unsafeWindow.getbig(data));
        },
        button: [4],
        insertImg: [
            [".mores", 2], 2
        ],
        go: 1,
        topButton: true,
        customTitle: ".gtitle1>h1",
        css: "body>.mask{display:none!important}",
        category: "nsfw1"
    }, {
        name: "爱死cos美女图片站",
        host: ["www.24cos.org", "www.lovecos.net"],
        reg: /^https?:\/\/(www\.24cos\.org|www\.lovecos\.net)\/\w+\/\d+\.html$/,
        imgs: async () => {
            let pages = fun.gau(".page>a");
            let liImgs = fun.gae(".mtp>li");
            if (pages.length > 0 && liImgs.length < 21) {
                await fun.getEle(pages, ".mtp>li", [".mtp", 0]);
            }
            thumbnailSrcArray = fun.gae(".mtp img").map(e => decodeURIComponent(e.src));
            return thumbnailSrcArray.map(url => {
                let i = url.lastIndexOf("/");
                let murl = url.substring(i + 1);
                url = url.replace(murl, murl.substring(1));
                return url;
            });
        },
        button: [4],
        insertImg: [
            [".mtp", 2, ".mtp"], 2
        ],
        topButton: true,
        customTitle: ".tmsg>h1",
        css: ".tpmh img{filter:unset!important;}",
        category: "nsfw1"
    }, {
        name: "Huamao wallpaper 花猫壁纸",
        host: ["ja.huamaobizhi.com", "en.huamaobizhi.com"],
        reg: /^https?:\/\/[a-z]{2}\.huamaobizhi\.com\/mix\/\d+/,
        init: async () => {
            let load = fun.ge(".load-more-photos");
            if (load) load.remove();
            await fun.getNP(".images-card", "li.active+li>a", null, ".pagination");
            fun.gae(".thumb-nsfw").forEach(e => e.classList.remove("thumb-nsfw"));
        },
        imgs: async () => {
            thumbnailSrcArray = fun.gae(".images-card img").map(e => e.dataset.src ?? e.src);
            fun.clearAllTimer(2);
            fun.showMsg(displayLanguage.str_05, 0);
            let fetchNum = 0;
            const resBlobUrl = (id, max) => {
                return fetch("/normal-download/", {
                    "headers": {
                        "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9",
                        "content-type": "application/x-www-form-urlencoded"
                    },
                    "body": `wallpaperId=${id}`,
                    "method": "POST"
                }).then(res => res.blob()).then(blob => {
                    fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${max}`, 0);
                    return URL.createObjectURL(blob);
                });
            };
            let IDs = fun.gae("span[data-imgid]").map(e => e.dataset.imgid);
            let bigImgsArr = [];
            for (let id of IDs) {
                bigImgsArr.push(await resBlobUrl(id, IDs.length));
                //await fun.delay(1500, 0);
            }
            return bigImgsArr;
        },
        button: [4],
        insertImg: [
            ["#main", 2], 0
        ],
        go: 1,
        customTitle: ".title>h1",
        fetch: 1,
        ex: "jpg",
        category: "nsfw1"
    }, {
        name: "Huamao wallpaper 花猫壁纸 en.huamaobizhi.com 分類自動翻頁",
        host: ["ja.huamaobizhi.com", "en.huamaobizhi.com"],
        enable: 1,
        reg: /^https?:\/\/[a-z]{2}\.huamaobizhi\.com\/(mixs|tags|artists|people-tags)\/\?/,
        autoPager: {
            ele: "//div[@class='row'][div[div[@class='mixs-card']]] | //div[@class='table-responsive table-sm-no-border'] | //div[div[div[@class='thumbnail']]] | //div[@class='tags-wrap']",
            next: ".pagination li.active+li>a",
            re: ".pagination",
            pageNum: ".pagination li.active",
            bF: (dom) => {
                fun.gae(".mixs-card-img:not(.lock)", dom).forEach(e => {
                    let url = e.attributes[1].value.replaceAll("'", "");
                    e.outerHTML = `<div class="mixs-card-img" data-src="${url}" lazy="loaded" style="background-image: url(&quot;${url}&quot;);"></div>`;
                });
                fun.gae(".thumbnail .img-circle[v-lazy]", dom).forEach(e => {
                    let url = e.getAttribute("v-lazy").replaceAll("'", "");
                    e.outerHTML = `<img src="${url}" alt="${e.alt}" class="img-circle" data-src="${url}" lazy="loaded">`;
                });
                fun.gae(".tags-item img[v-lazy]", dom).forEach(e => {
                    let url = e.getAttribute("v-lazy").replaceAll("'", "");
                    e.outerHTML = `<img src="${url}" alt="${e.alt}" data-src="${url}" lazy="loaded">`;
                });
            }
        },
        openInNewTab: ".mixs-card-content>a:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "云边网盘",
        host: ["qinzhi.top"],
        reg: /^https?:\/\/qinzhi\.top\/[^\/]+\/[^\/]+\/.+/,
        init: async () => {
            await fun.waitEle("div.list");
            fun.createImgBox(".body");
        },
        imgs: () => fun.getAList(),
        repeat: 1,
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 3],
        go: 1,
        observerTitle: true,
        downloadVideo: true,
        customTitle: () => fun.title(" | 云边网盘").replace(/\s?\d+p\s?|\[\d+[\w\s\.\+-]+\]/i, ""),
        category: "nsfw1"
    }, {
        name: "新美图录/臺灣美腿女郎",
        host: ["www.xinmeitulu.com", "www.twlegs.com"],
        reg: /^https?:\/\/(www\.xinmeitulu\.com|www\.twlegs\.com)\/photo\//,
        imgs: "img[data-original]",
        button: [4],
        insertImg: [".text-center", 2],
        customTitle: "h1.h3",
        category: "nsfw1"
    }, {
        name: "美图录",
        host: ["meitulu.me"],
        reg: /^https?:\/\/meitulu\.me\/item\/\d+\.html$/,
        imgs: () => fun.getImg(".mb-4>img[alt]", fun.gt(".pagination>li:last-child", 2), 9),
        button: [4],
        insertImg: [".mb-4", 1],
        customTitle: ".top-title",
        category: "nsfw1"
    }, {
        name: "秀窝/RMM吧/赞MM/恩图集/美Girl图集/狐图网/930圖片網/爱秀美女/四魔写真/JN美眉网",
        host: [
            "www.xiuwo.net",
            "www.rmm8.com",
            "www.zanmm.com",
            "www.entuji.com",
            "www.mhgirl.com",
            "www.hutu6.com",
            "www.930tu.com",
            "www.930tp.com",
            "wap.kunv.cc",
            "www.smkwan.com",
            "www.jnmmw.com"
        ],
        reg: [
            /^https?:\/\/(www\.xiuwo\.net|www\.rmm8\.com|www\.mhgirl\.com|wap\.kunv\.cc)\/tu([\w]+)?\/\d+\.html$/,
            /^https?:\/\/www\.zanmm\.com\/tupian\/\d+\.html$/,
            /^https?:\/\/(www\.entuji\.com|www\.hutu6\.com)\/\w+\/\d+\.html$/,
            /^https?:\/\/www\.930t(u|p)\.com\/\w+\/\d+\.html$/,
            /^https?:\/\/www\.smkwan\.com\/mm\/\d+\.html$/,
            /^https?:\/\/www\.jnmmw\.com\/meimei\/\d+\.html$/
        ],
        init: () => fun.clearAllTimer(),
        imgs: () => fun.getImgO("#showimg img", fun.gt("//p[contains(text(),'图片数量')]").match(/\d+/)[0], 9),
        button: [4],
        insertImg: ["#showimg", 2],
        customTitle: ".weizhi h1",
        css: "@media only screen and (max-width:3840px){.content img{max-width:100%!important}}",
        category: "nsfw1"
    }, {
        name: "妹妹图",
        host: ["mm.tvv.tw"],
        reg: /^https?:\/\/mm\.tvv\.tw\/archives\/\d+\.html$/,
        imgs: ".img-responsive",
        button: [4],
        insertImg: ["//p[img]", 2],
        customTitle: ".blog-details-headline",
        category: "nsfw1"
    }, {
        name: "小姐姐么/妹妹图集",
        host: ["xiaojiejie.me", "www.mmtuji.com"],
        reg: [
            /^https?:\/\/xiaojiejie\.me\/\d+\/[^\/]+\/$/,
            /^https?:\/\/www\.mmtuji\.com\/\d+\.html$/
        ],
        init: () => {
            if (fun.lh.includes("mmtuji")) {
                _unsafeWindow.fuckyou = null;
                _unsafeWindow.ck = null;
                _unsafeWindow.hehe = null;
                _unsafeWindow.comprehensiveCheck = null;
                _unsafeWindow.onWindowSizeChange = null;
                _unsafeWindow.onresize = null;
                fun.clearAllTimer(3);
            }
            let p = fun.ge("#image_div>p");
            if (p) {
                let a = fun.ge("a", p);
                if (!a) {
                    tempEles.push(p);
                }
            }
        },
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            return fetch("/wp-admin/admin-ajax.php", {
                "headers": {
                    "accept": "*/*",
                    "content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                    "x-requested-with": "XMLHttpRequest"
                },
                "body": `action=chenxing_imageall&type=all&post_id=${_unsafeWindow.chenxing.PID}`,
                "method": "POST",
            }).then(res => res.text()).then(text => fun.doc(text)).then(dom => [...dom.images]);
        },
        button: [4],
        insertImg: ["#content", 2],
        insertImgAF: () => {
            if (tempEles.length > 0) {
                let x = fun.ge("#FullPictureLoadOptionsButtonParentDiv").parentNode.firstChild;
                for (let e of tempEles) {
                    insertBefore(x, e);
                }
            }
            fun.run("$(document).off()");
        },
        customTitle: () => fun.dt({
            d: [
                / – 小姐姐| - 妹妹图集/,
                /（\d+月\d+打赏群(自购)?资源）/
            ]
        }),
        category: "nsfw1"
    }, {
        name: "14MM图片网",
        host: ["www.14mm.cn"],
        reg: /^https:\/\/www\.14mm\.\w+\/\d+\.html$/,
        exclude: "//a[@rel='category tag'][text()='演出视频']",
        imgs: async () => {
            let max = fun.gt("a[title='最后页']");
            return fun.getImg("#image_div img", max, 9, [/\?x-oss-process.+$/, ""]);
            //return fun.getImg("#image_div img", max, 9);
        },
        button: [4],
        insertImg: ["#content", 2],
        insertImgAF: () => fun.run("$(document).off()"),
        customTitle: () => fun.title(" – 14MM图片网"),
        category: "nsfw1"
    }, {
        name: "最好秀色",
        host: ["www.zhxszone.com"],
        reg: /^https?:\/\/www\.zhxszone\.com\/\??\d+\.html$/,
        imgs: () => {
            let srcs = fun.getImgSrcArr("#play img");
            let srcArr = [];
            srcs.forEach(src => {
                let arr = src.split("https").filter(i => i);
                if (arr.length > 1) {
                    for (src of arr) {
                        srcArr.push("https" + src);
                    }
                } else {
                    srcArr.push(src);
                }
            });
            return srcArr;
        },
        button: [4],
        insertImg: ["#play", 2],
        customTitle: ".item_title",
        css: ".item_images_info{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "最好秀色 自動翻頁",
        reg: /^https?:\/\/www\.zhxszone\.com\//,
        autoPager: {
            ele: "#index_ajax_list",
            observer: "#index_ajax_list>li",
            next: "a.page-num-current+a:not([title])",
            re: ".pagebar",
            pageNum: "a.page-num-current"
        },
        openInNewTab: "#index_ajax_list a:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "Girl 18+/Bikini Girl",
        host: ["girl18.net", "bikiniz.net"],
        reg: /^https?:\/\/((www\.|thailand\.)?girl18\.net|(www\.)?bikiniz\.net)\/\w+\/\d+\/\d+\/\d+\//,
        imgs: "#content img",
        button: [4],
        insertImg: ["#content", 2],
        customTitle: ".item_title",
        css: ".item_images_info{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "Coser Lab",
        host: ["coserlab.io"],
        reg: /^https?:\/\/coserlab\.io\/archives\/\d+$/,
        exclude: ".card-body .error-empty",
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr("a.masonry-image img");
            fun.showMsg("fun.xhrHEA(check)...", 0);
            let xhrNum = 0;
            return fun.gau("a.masonry-image").map(u => u.replace("-scaled", "")).map(async (src, i, arr) => {
                await fun.delay(100 * i, 0);
                let res = await fun.xhrHEAD(src);
                fun.showMsg(`fun.xhrHEAD(${xhrNum+=1}/${arr.length})`, 0);
                let status = res.status;
                return status == 404 ? src.replace(/(\.[a-z]+)$/i, "-scaled$1") : src;
            });
        },
        thums: "a.masonry-image img",
        button: [4],
        insertImg: [
            [".masonry-list", 2, ".masonry-list"], 2
        ],
        customTitle: "span.current",
        category: "nsfw1"
    }, {
        name: "Zusi足丝",
        reg: () => fun.checkUrl({
            h: "zusi.net"
        }),
        init: () => [...document.getElementsByTagName("style")]?.find(s => s.textContent.includes("yuanshen.svg"))?.remove(),
        imgs: ".masonry-list a.glightbox",
        button: [4],
        insertImg: [
            [".masonry-list", 2, ".masonry-list"], 2
        ],
        customTitle: ".card-body h1",
        category: "nsfw1"
    }, {
        name: "美图坊",
        host: ["m2ph.xyz", "www.m2ph.xyz"],
        reg: () => {
            if (fun.lh.includes("m2ph.xyz")) {
                try {
                    let checkLocalStorage = ["flutter.password", "flutter.account", "flutter.HistoryImage"].every(k => k in localStorage);
                    let checkHistory = JSON.parse(JSON.parse(localStorage["flutter.HistoryImage"]))?.length > 0;
                    return checkLocalStorage && checkHistory && hasTouchEvents;
                } catch {
                    return false;
                }
            } else {
                return false;
            }
        },
        getFirstHistory: () => JSON.parse(JSON.parse(localStorage["flutter.HistoryImage"]))[0],
        getImg: () => document.querySelector("flt-glass-pane")?.shadowRoot?.querySelector("img"),
        getImgSrc: () => _this.getImg()?.src,
        getBase: () => {
            let base;
            if (_this.getImgSrc()?.includes("/cover")) {
                [base] = _this.getImgSrc()?.split("/cover");
            } else {
                base = _this.getImgSrc()?.replace(/(\/image)(\/image)?\/.+$/, "$1");
            }
            return base;
        },
        getHost: () => new URL(_this.getBase()).hostname,
        init: async () => {
            await fun.wait(() => !!_this.getImg());
            let firstImageId = _this.getFirstHistory().imageId;
            document.addEventListener("click", (event) => {
                if (event.target.nodeName === "FLUTTER-VIEW") {
                    setTimeout(async () => {
                        await fun.wait(() => !!_this.getImg());
                        let id = _this.getFirstHistory().imageId;
                        if (firstImageId != id) {
                            firstImageId = id;
                            await captureSrcB();
                            debug(`\n自定義標題：${customTitle}`);
                            debug("\n此頁JSON資料\n", siteJson);
                        }
                    }, 1000);
                }
            }, true);
        },
        imgs: () => {
            let {
                type,
                imageId
            } = _this.getFirstHistory();
            fun.showMsg(displayLanguage.str_05, 0);
            return fetch(`http://${_this.getHost()}:39002/Image/ImageUrl`, {
                "headers": {
                    "content-type": "application/json; charset=utf-8"
                },
                "body": `{\"type\":${type},\"imageId\":${imageId},\"fromMem\":true}`,
                "method": "POST"
            }).then(res => res.json()).then(json => {
                fun.hideMsg();
                siteJson = json;
                customTitle = fun.dt({
                    t: json.title
                });
                let paths = JSON.parse(json.data);
                let base = _this.getBase();
                let srcs = paths.map(p => base + p);
                return srcs;
            });
        },
        capture: () => _this.imgs(),
        SPA: true,
        customTitle: () => customTitle ?? fun.dt({
            t: _this.getFirstHistory().title
        }),
        category: "nsfw1"
    }, {
        name: "孔雀海/洛丽网/ladymao图库/懒人看图",
        host: ["www.kongquehai.net", "www.lolili.net", "www.ladymao.net", "www.lazymanpic.net"],
        reg: [
            /^https?:\/\/((www\.)?kongquehai\.net|(www\.)?lolili\.net)\/\w+\/\w+\/\w+\.html(\?btwaf=\d+)?$/i,
            /^https?:\/\/(www\.)?ladymao\.net\/[a-z]{2,3}\/\w+(\?btwaf=\d+)?$/,
            /^https?:\/\/(www\.)?lazymanpic\.net\/[a-z]{2,3}\/\w+(\?btwaf=\d+)?$/
        ],
        imgs: async () => {
            await fun.getNP(".m-list-content img", "//a[text()='下一页'][@class='next']", null, ".link_pages");
            return fun.gae(".m-list-content img");
        },
        button: [4],
        insertImg: [".m-list-content", 2],
        autoDownload: [0],
        next: ".sxpage_r>a",
        prev: ".sxpage_l>a",
        customTitle: () => fun.dt({
            s: ".m-list-tools>h2",
            d: [
                /\(\d\)/,
                /\[\d+[\s\.\+\w-\/]+\].*/,
                /全网首发|免费下载|无损图包下载|未删减版|无删减图包/g
            ]
        }),
        category: "nsfw1"
    }, {
        name: "尤物秀",
        host: ["www.youwushow.net"],
        reg: /^https?:\/\/(www\.)?youwushow\.net\/pic\/\w+\.html(\?btwaf=\d+)?$/,
        imgs: async () => {
            await fun.getNP(".entry-content>*:not(.page-links)", "span.current+a", null, ".page-links");
            return fun.gae(".entry-content img");
        },
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: "a.prev-link",
        prev: "a.next-link",
        customTitle: () => fun.dt({
            s: ".entry-title",
            d: [
                /\(\d\)/,
                /\[\d+[\s\.\+\w-\/]+\].*/,
                /全网首发|免费下载|无损图包下载|未删减版|无删减图包/g
            ]
        }),
        category: "nsfw1"
    }, {
        name: "iLegs时光印象网",
        host: ["legskr.com"],
        reg: /^https?:\/\/legskr\.com\/album\/detail\/\d+\.html$/,
        imgs: () => {
            thumbnailSrcArray = fun.gae("#lightgallery .img-fluid[data-src]").map(e => e.dataset.src ?? e.src);
            return fun.gae("#lightgallery div.col-6[data-src]");
        },
        button: [4],
        insertImg: ["#lightgallery", 2],
        customTitle: () => fun.dt({
            s: ".title",
            d: "Album name："
        }),
        category: "nsfw1"
    }, {
        name: "比思在線圖庫",
        host: ["bisipic.xyz", "bisipic.online"],
        reg: /^https?:\/\/bisipic\.(xyz|online)\/thread[\d-]+\.html$/,
        imgs: () => fun.gae("img[zoomfile]").map(e => location.origin + "/" + e.getAttribute("zoomfile")),
        button: [4],
        insertImg: ["[id^=postmessage]", 2],
        customTitle: () => fun.ge("meta[name=keywords]").content.replace(/【\d+P】.*/i, ""),
        category: "nsfw1"
    }, {
        name: "洛秀网/维秘秀",
        reg: () => fun.checkUrl({
            h: [
                /^(www\.|m\.)?loxiu\.com$/,
                /^(www\.|m\.|c\.)?counv\.com$/,
                /^(www\.|m\.)?ligui\.org$/
            ],
            p: /^\/post\/\d+\.html$/
        }),
        imgs: () => fun.getImg(".info-imtg-box>img[alt]", fun.gt(".pagebar>*:last-child", 3)),
        button: [4],
        insertImg: ["div:has(>.info-imtg-box)", 2],
        autoDownload: [0],
        next: "//a[p[text()='上一篇']]",
        prev: "//a[p[text()='下一篇']]",
        customTitle: ".info-title>h1",
        category: "nsfw1"
    }, {
        name: "第一美女套图网",
        host: ["meitu.sbs"],
        reg: () => fun.checkUrl({
            e: "//title[contains(text(),'第一美女套图网')]",
            p: /^\/artdetail\w+\.html$/
        }),
        imgs: ".ttnr img",
        button: [4],
        insertImg: [".ttnr", 2],
        //customTitle: ".breadcrumbs span",
        customTitle: () => fun.title(" - 第一美女套图网"),
        category: "nsfw1"
    }, {
        name: "遛无写真格式",
        reg: () => fun.checkUrl({
            h: [
                "www.096d.com",
                "www.0niz.com",
                "www.1nlm.com",
                "www.1plq.com",
                "www.1tu5.com",
                "www.1vtr.com",
                "www.3pxa.com",
                "www.3tck.com",
                "www.4tck.com",
                "www.54k5.com",
                "www.5pwc.com",
                "www.6evu.com",
                "www.6kpo.com",
                "www.6tck.com",
                "www.6vtr.com",
                "www.7k1a.com",
                "www.7tck.com",
                "www.7u8t.com",
                "www.09kt.com",
                "www.c0h.net",
                "www.df10.net",
                "www.eshh.net",
                "www.game1313.net",
                "www.te2zn.com",
                "www.tmm123.vip",
                "www.wangblog.net",
                "www.wjstbs.net",
                "www.wsqap.com",
                "www.zhaixiaonan.com"
            ],
            p: /^\/\d+\.html$/,
            e: "#post_content img,.article-content img,.entry-content img"
        }),
        exclude: "//a[@rel='category tag'][contains(text(),'人物简历') or contains(text(),'宅男科技') or contains(text(),'时尚玩酷') or contains(text(),'身边事') or contains(text(),'追星一族') or contains(text(),'网红头条') or contains(text(),'大众娱乐') or contains(text(),'生活热点') or contains(text(),'影评剧透') or contains(text(),'娱乐时尚') or contains(text(),'吃喝玩乐') or contains(text(),'体育') or contains(text(),'亲子宠物') or contains(text(),'番号大全') or contains(text(),'番号推荐') or contains(text(),'最新番号') or contains(text(),'素人番号')]",
        imgs: () => fun.getImgA("#post_content img,.article-content img,.entry-content img", ".pagelist a,.pagination a,.article-paging a"),
        button: [4],
        insertImg: ["#post_content,.article-content,.entry-content", 2],
        autoDownload: [0],
        next: "a[rel=prev],.article-nav-prev a",
        prev: "a[rel=next],.article-nav-next a",
        customTitle: () => fun.dt({
            s: "h1",
            d: [
                /无圣光.+$/,
                /无水印.+$/,
                /无删减.+$/,
                /高品质.+$/,
                /超高清.+$/,
            ]
        }),
        css: ".article_container{padding:10px 0px!important}#post_content{padding:0px!important}@media only screen and (max-width:640px){.container{max-width:100% !important}}",
        category: "nsfw1"
    }, {
        name: "出物社区写真网",
        host: ["www.ywsq.cc"],
        reg: /^https?:\/\/www\.ywsq\.cc\/[^\/]+\/[^.]+\.html$/,
        imgs: () => fun.getImgA("#post_content img", ".pagelist a"),
        button: [4],
        insertImg: ["#post_content", 2],
        autoDownload: [0],
        next: ".post-previous a",
        prev: ".post-next a",
        customTitle: ".article_container>h1",
        css: ".article_container{padding:10px 0px!important}#post_content{padding:0px!important}@media only screen and (max-width:640px){.container{max-width:100% !important}}",
        category: "nsfw1"
    }, {
        name: "原创妹子图/尤物私房图/极品美女图/免费私房图/私房网红图/尤物妹妹图",
        host: ["www.ycmzt.com", "www.ywsft.com", "www.jpmnt.com", "www.mfsft.com", "www.sfwht.com", "www.ywmmt.com"],
        reg: () => {
            let [a, b, c] = fun.lh.split(".");
            let checkA = (a === "www");
            let checkC = (c === "com");
            let checkP = /^\/[a-z]+\/[a-z]+\/\d+\/\d+\.html$/.test(fun.lp);
            if (!checkA || !checkC || !checkP) return false;
            let hosts = [
                "aimzt",
                "akxzt",
                "akywt",
                "axmeinv",
                "axtaotu",
                "brtaotu",
                "ddtaotu",
                "flmeitu",
                "flsft",
                "fltuku",
                "flwht",
                "flxzw",
                "ftmeinv",
                "gcmeinv",
                "gcxzt",
                "gqnmt",
                "gqsft",
                "gqtaot",
                "gqwht",
                "gqxzt",
                "hjtaotu",
                "hytaotu",
                "jcmeinv",
                "jctuk",
                "jcwht",
                "jdmnt",
                "jdtaotu",
                "jdwht",
                "jdxzt",
                "jjmeinv",
                "jjtaotu",
                "jpflt",
                "jpmnt",
                "jpmzt",
                "jpmzw",
                "jpnst",
                "jpsft",
                "jpxzt",
                "jpyouwu",
                "jpywt",
                "jrmeinv",
                "jrmnt",
                "jrmzt",
                "jstaotu",
                "mfmzt",
                "mfnmt",
                "mfsft",
                "mfxzt",
                "mgmeinv",
                "mgtaotu",
                "mnwht",
                "msmeinv",
                "mstaotu",
                "mtflt",
                "mtgqt",
                "mtmeinv",
                "mtmnt",
                "mtmnw",
                "mtmzt",
                "mtsyt",
                "mttaotu",
                "mttuku",
                "mtwht",
                "mtxzt",
                "mtywt",
                "mzmeitu",
                "mztuk",
                "nmtaotu",
                "nsmeitu",
                "nstaotu",
                "nsxiez",
                "nsxzt",
                "nsxzw",
                "plmeitu",
                "plmzt",
                "plwht",
                "plxzw",
                "pmtaotu",
                "prmeinv",
                "prmzt",
                "qjtaotu",
                "qjtuku",
                "qpmzt",
                "qtmzt",
                "sfmnt",
                "sfmtw",
                "sfmzt",
                "sfnmt",
                "sfsnt",
                "sftaotu",
                "sftuku",
                "sfwht",
                "sfxzt",
                "sfywt",
                "smtaotu",
                "snmzt",
                "spmeitu",
                "sptaotu",
                "spxzt",
                "spyouwu",
                "swmzt",
                "swtaotu",
                "symzt",
                "sytaotu",
                "sytuk",
                "thmzt",
                "threnti",
                "tptaotu",
                "tsmnt",
                "tstaotu",
                "tsxzt",
                "ugmeinv",
                "ugtaotu",
                "whtaotu",
                "wkmzt",
                "wkrenti",
                "wsgmzt",
                "wsgtu",
                "xgmeitu",
                "xgtuk",
                "xgyouwu",
                "xgywt",
                "xhtaotu",
                "xhtuku",
                "xjjmzt",
                "xjjtaotu",
                "xrmeinv",
                "xrtaotu",
                "xsmeinv",
                "xsmzt",
                "xstuk",
                "xztuk",
                "ycmeinv",
                "ycmeitu",
                "ycmzt",
                "yctaotu",
                "yctuk",
                "ycwht",
                "yhflt",
                "yhmeinv",
                "yhmeitu",
                "yhmnt",
                "yhmnw",
                "yhsft",
                "yhtaotu",
                "yhtuku",
                "yhxzt",
                "ykmeinv",
                "ywmeitu",
                "ywmmt",
                "ywmtw",
                "ywmzt",
                "ywnmt",
                "ywsft",
                "ywtaotu",
                "ywtuk",
                "ywxzt",
                "yzrenti",
                "yztaotu",
                "zbmzt",
                "zbtaotu",
                "zfmeinv",
                "zftaotu",
                "zpmzt",
                "ztmeinv",
                "zttaotu"
            ];
            return hosts.some(e => {
                let checkB = (e === b);
                return checkA && checkB && checkC;
            }) && checkP;
        },
        include: "#picg",
        init: () => {
            fun.gae(".b a").forEach(a => a.removeAttribute("target"));
            fun.gae("#picg a").forEach(a => (a.outerHTML = a.innerHTML));
            fun.remove("iframe", 2000);
        },
        imgs: async () => {
            let max = fun.gt(".pagelist font~*:last-child", 2);
            let links = [siteUrl.replace(/(_\d+)?\.html$/, "") + ".html"];
            let imgsArr = [];
            for (let i = 2; i <= max; i++) {
                links.push(siteUrl.replace(/(_\d+)?\.html$/, "") + `_${i}.html`);
            }
            for (let i = 0; i < links.length; i++) {
                let dom = await new Promise(async resolve => {
                    for (let check = 1; check <= 100; check++) {
                        let res = await fetch(links[i]);
                        if (res.status == 304 || res.status == 200) {
                            let buffer = await res.arrayBuffer();
                            let decoder = new TextDecoder(document.characterSet || document.charset || document.inputEncoding);
                            let htmlText = decoder.decode(buffer);
                            let dom = fun.doc(htmlText);
                            resolve(dom);
                            break;
                        } else {
                            fun.showMsg(`第${i + 1}頁${res.status}重試第${check}次`, 2900);
                            await fun.delay(3000, 0);
                        }
                    }
                });
                let imgs = fun.gae("#picg img[alt]", dom);
                let te = fun.gae("#picg img[alt]").at(-1);
                imgs.forEach(e => {
                    imgsArr.push(e.cloneNode(true));
                    if (i != 0) insertAfter(te, e.cloneNode(true));
                });
                if (i != 0) {
                    let ce = fun.gae("h1,.page .pagelist");
                    let re = fun.gae("h1,.page .pagelist", dom);
                    if (ce.length == re.length) {
                        ce.forEach((e, i) => (e.outerHTML = re[i].outerHTML));
                    }
                }
                await fun.delay(200, 0);
            }
            return imgsArr;
        },
        button: [4],
        insertImg: ["#picg", 2],
        autoDownload: [0],
        next: "//div[@class='b' and contains(text(),'上一')]/a",
        prev: "//div[@class='b' and contains(text(),'下一')]/a",
        customTitle: () => fun.dt({
            s: "h1",
            d: [
                /第\d+页|^- /g,
                /[\s-]+P\.\d/g,
                /：/g
            ]
        }),
        topButton: true,
        fancybox: {
            v: 3,
            insertLibrarys: 1
        },
        css: "#imgc img{margin:0px auto!important}#picg{max-width: 1110px!important;margin: 0 auto;}#picg img:hover{transform:none !important}#picg img{filter:blur(0px)!important}body>br,#apic,#bzs7,.interestline+center,center+#pic,#qpai,#d4a,#divone,#xzpap1,#divpsgx,#bdivpx,#divfts,#divftsp,#app+div,#xzappsq,div.bg-text,#divpsg,#divStayTopright2,#bdssy,#qrcode2>.erweima-text,#qrcode2>center,#qrcode2>center+div,#d5tig,#pcapicb,#google_translate_element,#d5a>*:not([id]):not([class]),.slide>a+div,.slide>img+div,#xtjpp,#divftst,.interestline+.nav~span,.interestline+.nav~br{display:none !important}",
        category: "nsfw2"
    }, {
        name: "魅狸图片网/美女私房照/看妹图",
        reg: () => fun.checkUrl({
            h: [
                "www.rosi8.com",
                "rosi8.com",
                "www.sfjpg.com",
                "sfjpg.com",
                "www.sfjpg.net",
                "sfjpg.net",
                "www.kanmeitu.net",
                "kanmeitu.net",
                "www.kanmeitu1.cc",
                "kanmeitu1.cc"
            ],
            p: /^\/\w+\/\d+\.html$/,
            e: "#picg img"
        }),
        init: () => {
            fun.gae(".b a").forEach(a => a.removeAttribute("target"));
            fun.gae("#picg a").forEach(a => (a.outerHTML = a.innerHTML));
        },
        imgs: () => {
            let max = fun.gt(".pagelist span,.pagelist a[title=Page]").match(/\/(\d+)/)[1];
            return fun.getImgO("#picg img", max, 9, null, 200, ".page .pagelist", siteUrl, 0);
        },
        button: [4],
        insertImg: ["#picg", 2],
        autoDownload: [0],
        next: "//div[@class='b' and contains(text(),'上一')]/a",
        prev: "//div[@class='b' and contains(text(),'下一')]/a",
        customTitle: "h1",
        topButton: true,
        fancybox: {
            v: 3,
            insertLibrarys: 1
        },
        css: "#imgc img{margin:0px auto!important}#picg{max-width: 1110px!important;margin: 0 auto;}#picg img:hover{transform:none !important}#picg img{filter:blur(0px)!important}body>br,.interestline+center,center+#pic,#xzpap1,#divpsgx,#bdivpx,#divfts,#divftsp,#app+div,#xzappsq,div.bg-text,#divpsg,#divStayTopright2,#bdssy,#qrcode2>center,#d5tig,#pcapicb,#pcapic,#google_translate_element,#d5a>*:not([id]):not([class]),union[id]{display:none !important}",
        category: "nsfw2"
    }, {
        name: "六色美图",
        host: ["www.06se.com"],
        reg: /^https?:\/\/www\.06se\.com\/\d+\.html/,
        imgs: ".article-content img",
        button: [4],
        insertImg: [
            [".wp-posts-content", 2, ".wp-posts-content"], 2
        ],
        autoDownload: [0],
        next: "//a[p[text()='上一篇']]",
        prev: "//a[p[text()='下一篇']]",
        customTitle: ".article-title",
        css: ".modal-open{overflow:unset!important;}#modal-system-notice,.container.fluid-widget,#zibpay_modal,#mini-imgbox,.modal-backdrop{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "女神部落",
        reg: () => fun.checkUrl({
            h: "girlsteam.club"
        }),
        imgs: "#content img",
        button: [4],
        insertImg: ["#content", 2],
        customTitle: ".item_title>h1",
        category: "nsfw1"
    }, {
        name: "丝袜客",
        host: ["siwake.cc"],
        reg: /^https?:\/\/siwake\.cc\/post\//,
        init: () => {
            let e = fun.ge(".Content>.newfujian");
            if (e) {
                tempEles.push(e);
            }
        },
        imgs: ".Content>a",
        button: [4],
        insertImg: [".Content", 2],
        insertImgAF: () => {
            if (tempEles.length > 0) {
                let x = fun.ge(".Content").firstChild;
                for (let e of tempEles) {
                    insertBefore(x, e);
                }
            }
        },
        autoDownload: [0],
        next: "a.fas",
        prev: "a.next.fas",
        customTitle: ".title",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}@media only screen and (max-width:480px){#wrapper  .single{padding:0!important}}",
        category: "nsfw1"
    }, {
        name: "丝袜客 分類自動翻頁",
        enable: 1,
        reg: /^https?:\/\/siwake\.cc\//,
        autoPager: {
            ele: "#main.gallery",
            observer: "#main.gallery>.thumb",
            next: "a.next.fas",
            re: ".pagelist"
        },
        openInNewTab: "#main.gallery a:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "爱妹子",
        reg: () => fun.checkUrl({
            h: [
                "xx.knit.bid",
                "mm.187187.xyz",
                "999888.best"
            ],
            p: /^\/([\w-]+\/)?article\/\d+\//i,
            e: ".item-image img,#img-box img"
        }),
        init: () => fun.clearAllTimer(2),
        imgs: async () => {
            await fun.getNP(".item-image", ".next-page>a", null, ".pagination");
            return fun.gae(".item-image img,#img-box img");
        },
        button: [4],
        insertImg: [
            [".item-image,#img-box", 2, ".item-image,#img-box"], 2
        ],
        customTitle: ".focusbox-title",
        css: "a{white-space:unset!important}",
        category: "nsfw1"
    }, {
        name: "爱妹子 反反廣告提示",
        reg: () => fun.checkUrl({
            h: [
                "xx.knit.bid",
                "mm.187187.xyz",
                "999888.best"
            ]
        }),
        init: () => fun.clearAllTimer(2),
        openInNewTab: ".excerpts-wrapper a:not([target=_blank])",
        category: "ad"
    }, {
        name: "美女写真",
        reg: () => fun.checkUrl({
            h: "portrait.knit.bid",
            p: /^\/\w+\/\d+$/,
            e: ".container>.container>img"
        }),
        imgs: async () => {
            let max = fun.gt("//li[a[text()='下页']]", 2);
            let links = fun.arr(max, (v, i) => siteUrl + "?page=" + (i + 1));
            return fun.getImgA(".container>.container>img", links, 300);
        },
        button: [4],
        insertImg: [
            [".container>.container>nav", 2, "nav[aria-label=pagination],.img-fluid"], 2
        ],
        customTitle: ".container h1",
        category: "nsfw1"
    }, {
        name: "美图网",
        reg: () => fun.checkUrl({
            h: "meitu.knit.bid",
            p: /^\/(beauty|handsome)\/[^\/]+$/,
            e: ".details_item>img"
        }),
        imgs: async () => {
            let [max] = fun.gau("a[href*=gotoPage]").at(-2).match(/\d+/);
            let links = fun.arr(max, (v, i) => siteUrl + "?page=" + (i + 1));
            return fun.getImgA(".details_item>img", links, 300);
        },
        button: [4],
        insertImg: [".details_item", 2],
        customTitle: () => fun.gt(".text-center>h1").replace("|", "-"),
        category: "nsfw1"
    }, {
        name: "美图网",
        reg: () => fun.checkUrl({
            h: "meitu.knit.bid",
            p: /^\/(news|street)\/\d+$/
        }),
        imgs: ".news-body img",
        customTitle: () => fun.gt(".text-center>h1").replace("|", "-"),
        category: "nsfw1"
    }, {
        name: "萌图社",
        host: ["www.446m.com", "446m.com"],
        reg: /^https?:\/\/(www\.)?446m\.com\/index\.php\/\w+\/\d+\.html$/,
        include: ".post-content",
        imgs: "span.post-item",
        button: [4],
        insertImg: [".post-content", 2],
        customTitle: () => document.title.slice(0, -6),
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw1"
    }, {
        name: "萌萝社",
        host: ["www.042l.com", "042l.com"],
        reg: /^https?:\/\/(www\.)?042l\.com\/\w+\/\d+\.html$/,
        include: "//a[text()='显示全文']",
        init: () => tempEles.push(fun.ge(".tags")),
        imgs: () => {
            let url = fun.gu("//a[text()='显示全文']");
            return fun.fetchDoc(url).then(dom => fun.gae("#lightgallery .boximg", dom));
        },
        button: [4],
        insertImg: ["#lightgallery", 2],
        insertImgAF: () => fun.ge("#lightgallery").append(...tempEles),
        autoDownload: [0],
        next: "//a[text()='上一篇']",
        prev: "//a[text()='下一篇']",
        customTitle: ".focusbox-title",
        category: "nsfw1"
    }, {
        name: "日式JK旧版",
        host: ["v2.jk.rs"],
        reg: /^https?:\/\/v2\.jk\.rs\/\d+\/\d+\/\d+\/\d+\.html$/,
        imgs: "div[data-fancybox]",
        button: [4],
        insertImg: ["#masonry", 2],
        customTitle: () => fun.title(" - 日式JK"),
        fancybox: {
            v: 3,
            css: false
        },
        css: "#masonry{position:unset!important;height:unset!important}",
        category: "nsfw1"
    }, {
        name: "日式JK新版",
        host: ["www.jk.rs"],
        reg: /^https?:\/\/www\.jk\.rs\/\d+\/\d+\/\d+\/\d+\.html$/,
        exclude: ".post-hide-content",
        imgs: "a.glightbox",
        button: [4],
        insertImg: [
            [".masonry-list", 2, ".masonry-list"], 2
        ],
        customTitle: () => fun.title(" – 日式JK"),
        css: "#masonry{position:unset!important;height:unset!important}",
        category: "nsfw1"
    }, {
        name: "妹妹美",
        host: ["mmm.red"],
        reg: /^https?:\/\/(www\.)?mmm\.red\/art\/\d+$/,
        exclude: ".login-tip",
        imgs: "div[data-fancybox][data-src]",
        autoDownload: [0],
        next: "//div[text()='上一篇']/following-sibling::a",
        prev: "//div[text()='下一篇']/following-sibling::a",
        customTitle: ".post-info-text",
        category: "nsfw1"
    }, {
        name: "胴体的诱惑/美图吧",
        host: ["dongti.blog.2nt.com", "meituba.blog.2nt.com"],
        reg: [
            /^https?:\/\/dongti\.blog\.2nt\.com\/blog-entry-\d+.html$/,
            /^https?:\/\/meituba\.blog\.2nt\.com\/blog-entry-\d+.html$/
        ],
        imgs: ".inner-contents img",
        button: [4],
        insertImg: [".inner-contents", 2],
        autoDownload: [0],
        next: "//a[div[@class='pager_entry-box next-justify']]",
        prev: "//a[div[@class='pager_entry-image-prev']]",
        customTitle: "#entry-title",
        category: "nsfw1"
    }, {
        name: "好圖屋",
        host: ["www.haotuwu.com", "m.haotuwu.com"],
        reg: /^https?:\/\/(www|m)\.haotuwu\.com\/\w+\/\d+(\/page\/\d+)?(\.html)?$/,
        include: ".suoyou",
        init: () => {
            let url = location.href;
            if (/\/page\/\d+/.test(url)) location.href = location.href.replace(/\/page\/\d+/, "");
            let a = fun.ge("#showimg a:has(img),.img-box a:has(img)");
            if (a) a.outerHTML = a.innerHTML;
        },
        imgs: () => {
            let links = [siteUrl];
            let url = siteUrl.replace(".html", "");
            let max = fun.gt(".suoyou").match(/\d+\/(\d+)/)[1];
            for (let i = 2; i <= max; i++) {
                links.push(url + "/page/" + i + ".html");
            }
            return fun.getImgA("#showimg img,.img-box img", links, 2);
        },
        button: [4],
        insertImg: ["#showimg,.img-box", 2],
        autoDownload: [0],
        next: "//div[contains(text(),'上一篇')]/a | //span[contains(text(),'上一篇')]/following-sibling::a[1]",
        prev: "//div[contains(text(),'下一篇')]/a | //span[contains(text(),'下一篇')]/following-sibling::a[1]",
        customTitle: ".showtitle>h2,.imgTitle-name",
        css: "#imgshow .flow-box:nth-child(n+1):nth-child(-n+2),union{display:none!important}",
        category: "nsfw1"
    }, {
        name: "秀色女神",
        host: ["www.xsnvshen.co"],
        reg: /^https?:\/\/www\.xsnvshen\.(co|com)\/album\/\d+/,
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr("img[id^='imglist'][data-original]");
            return thumbnailSrcArray.map(e => e.replace("thumb_600x900/", ""));
        },
        button: [4],
        insertImg: ["//li[img[@id='bigImg']]", 2],
        customTitle: "h1",
        css: ".workShow li img{max-width:100%!important}",
        category: "nsfw1"
    }, {
        name: "秀色女神M",
        host: ["m.xsnvshen.co"],
        reg: /^https?:\/\/m\.xsnvshen\.(co|com)\/album\/\d+/,
        imgs: async () => {
            let [max] = fun.gt(".pg_current").match(/\d+$/);
            thumbnailSrcArray = await fun.getImg("#arcbox img.lazy", max, 6);
            return thumbnailSrcArray.map(e => e.replace("thumb_600x900/", ""));
        },
        button: [4],
        insertImg: [
            ["#arcbox", 0, "//div[@id='arcbox']/p[img]"], 2
        ],
        customTitle: "h1>a",
        css: "#arcbox img{max-width:100%!important;margin:0px!important;min-height:50px!important;min-width:50px!important}",
        category: "nsfw1"
    }, {
        name: "秀色女神news",
        host: ["www.xsnvshen.co", "m.xsnvshen.co"],
        reg: /^https?:\/\/(www|m)\.xsnvshen\.co\/news\/\d+/,
        imgs: "#arcbox img",
        button: [4],
        insertImg: [
            ["#arcbox>*:first-child", 1, "//p[img]"], 2
        ],
        customTitle: "h1",
        css: "#arcbox img{max-width:100%!important;margin:auto!important;min-height:50px!important;min-width:50px!important}",
        category: "nsfw1"
    }, {
        name: "优图坊",
        host: ["www.anfun.cc"],
        reg: /^https?:\/\/www\.anfun\.cc\/\d+\.html$/,
        imgs: "img[bigimg]",
        button: [4],
        insertImg: [".picshow", 2],
        customTitle: ".piccontext h2",
        category: "nsfw1"
    }, {
        name: "Secret Home",
        host: ["poiblog.com"],
        reg: /^https:\/\/poiblog\.com\/archives\//,
        imgs: ".post-content img",
        customTitle: ".post-title",
        category: "nsfw1"
    }, {
        name: "HotAsiaGirl分頁模式",
        reg: () => fun.checkUrl({
            h: "hotgirl.asia",
            e: [
                ".galeria_img",
                ".pagination"
            ]
        }),
        imgs: () => fun.getImgA(".galeria_img>img", ".pagination a[href]"),
        button: [4],
        insertImg: [".mx-auto", 1],
        customTitle: "h3",
        css: ".galeria_img{display:none!important}",
        category: "nsfw2"
    }, {
        name: "HotAsiaGirl幻燈片模式",
        reg: () => fun.checkUrl({
            h: "hotgirl.asia"
        }),
        imgs: "#carouselImageIndicators img",
        button: [4],
        insertImg: [".mx-auto", 2],
        customTitle: "h3",
        css: ".galeria_img{display:none!important}",
        category: "nsfw2"
    }, {
        name: "HotGirl World",
        host: ["www.hotgirl2024.com"],
        reg: /^https?:\/\/www\.hotgirl2024\.com\/g\/\w+\.html\//,
        imgs: () => fun.getImg(".article__image-list img", fun.gt(".pagination__total") || 1),
        button: [4],
        insertImg: [".article__image-list", 2],
        go: 1,
        customTitle: ".article-header__title",
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw1"
    }, {
        name: "HotGirl World 分類自動翻頁",
        enable: 1,
        reg: [
            /^https?:\/\/www\.hotgirl2024\.com\/(\?page=\d+)?$/,
            /^https?:\/\/www\.hotgirl2024\.com\/(category|agency|tag)\/\d+\.html\/(\?page=\d+)?$/,
            /^https?:\/\/www\.hotgirl2024\.com\/search\.html\/\?(page=\d+&)?q=/
        ],
        init: () => fun.gae(".blur-image").forEach(e => e.classList.remove("blur-image")),
        autoPager: {
            ele: ".articles-grid",
            next: ".pagination__item--active+a",
            re: ".pagination",
            lazySrc: "img[data-src]",
            pageNum: ".pagination__item--active",
            aF: () => _this.init(),
            bottom: screen.height * 2
        },
        openInNewTab: ".articles-grid a:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "MaoJiuJiu/SkyBird/TightImg/SexCity",
        reg: () => fun.checkUrl({
            h: [
                "www.maojiujiu.com",
                "www.skybirdx.com",
                "www.tightimg.com",
                "www.sexscity.com"
            ],
            p: "/album/",
            e: "#item_list img"
        }),
        imgs: () => fun.getImgA("#item_list img", ".pager>a:not(.current)"),
        capture: () => _this.imgs(),
        customTitle: "h1.title",
        setFancybox: "#item_list a:has(>img)",
        category: "nsfw1"
    }, {
        name: "Photos XTAPO",
        reg: () => fun.checkUrl({
            h: "photos.xtapo.org",
            p: /^\/[^\/]+\/$/
        }),
        init: () => fun.createImgBox(".dynamic-entry-content .code-block", 1),
        imgs: ".dynamic-entry-content img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".dynamic-entry-content .code-block,.dynamic-entry-content .code-block~*"], 2
        ],
        customTitle: "article h2",
        category: "nsfw1"
    }, {
        name: "1Y Beauties",
        host: ["www.1y.is"],
        reg: /^https?:\/\/www\.1y\.is\/[\w-]+\/[^\.]+\.html$/,
        imgs: () => fun.getImgA(".entry-content img", ".page-links a"),
        capture: () => _this.imgs(),
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "BeautyLeg",
        host: ["www.beautyleg6.com"],
        reg: /^https?:\/\/www\.beautyleg6\.com\/\w+\/\d+\/\d+\.html/i,
        imgs: () => {
            let max;
            try {
                [max] = fun.gt(".page a").match(/\d+/);
            } catch {
                max = 1;
            }
            return fun.getImg(".contents img[alt]", max, 9);
        },
        button: [4],
        insertImg: [".contents", 2],
        autoDownload: [0],
        next: ".pre>a",
        prev: ".next>a",
        customTitle: ".content>h1",
        css: ".content .contents img{max-width:100%!important}",
        category: "nsfw1"
    }, {
        name: "BeautyLegM",
        host: ["m.beautyleg6.com"],
        reg: /^https?:\/\/m\.beautyleg6\.com\/view\.php\?aid=\d+/,
        imgs: async () => {
            let links = [siteUrl];
            for (let i = 2; i <= _unsafeWindow.totalpage; i++) {
                links.push(siteUrl + "&pageno=" + i);
            }
            await fun.getEle(links, "#bigImg", ".show-simg", ".show-pages");
            return fun.gae("#bigImg");
        },
        button: [4],
        insertImg: [".show-simg", 2],
        autoDownload: [0],
        next: () => {
            let next = fun.ge("a.f-r.l3");
            return next ? next.href : null;
        },
        prev: 1,
        customTitle: ".showcontbt>h1",
        category: "nsfw1"
    }, {
        name: "Asianude4u",
        host: ["www.asianude4u.net"],
        reg: /^https?:\/\/www\.asianude4u\.net\/.+\/.+\/(#small-1)?$/,
        exclude: "//a[@rel='category tag' and text()='Videos'] | //a[@rel='category tag' and text()='Madonna-AV']",
        imgs: () => fun.ge(".wp-block-image a[href*=attachment_id]") ? fun.gae(".wp-block-image img[data-id]") : fun.gae(".wp-block-image>a,.mgl-img-container>a,.gallery a").map(e => e.href),
        button: [4],
        //insertImg: ["//li[img[@id='bigImg']]", 1],
        insertImg: [
            ["div.entry>*:last-child", 2], 2
        ],
        go: 1,
        customTitle: "h1.entry-title",
        css: ".single-box,.entry-img-300{display:none!important}@media only screen and (max-width:409px){.entry{width:100%!important}}button.rmp_menu_trigger{z-index:100!important}",
        category: "nsfw1"
    }, {
        name: "NICEGIRL4U",
        host: ["nicegirl4u.cyou"],
        reg: /^https?:\/\/nicegirl4u\.cyou\/[^\/]+\/$/,
        include: ".wp-block-image>img",
        init: () => fun.remove(".ads_custom"),
        imgs: async () => {
            let pag = fun.ge(".page-links");
            if (pag) {
                let max = fun.gt(".page-links>a:last-child");
                return fun.getImg(".wp-block-image>img", max, 14);
            } else {
                return fun.gae(".wp-block-image>img");
            }
        },
        capture: () => _this.imgs(),
        //button: [4],
        //insertImg: [
        //[".responsive-tabs-wrapper,.entry-meta", 2], 2
        //],
        //insertImgAF: () => fun.gae("figure.wp-block-image").forEach(e => (e.outerHTML = "")),
        go: 1,
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "Nudegirls4u",
        host: ["nudegirls4u.com"],
        reg: /^https?:\/\/nudegirls4u\.com\/[^\/]+\/$/,
        imgs: ".rgg-imagegrid>a",
        button: [4],
        insertImg: [".rgg-container", 2],
        customTitle: ".entry-title",
        css: ".rgg-imagegrid{height:auto!important}",
        category: "nsfw1"
    }, {
        name: "Chinese Beauties",
        host: ["sxchinesegirlz.one"],
        reg: () => fun.checkUrl({
            e: "//p[@class='gridlane-site-title']/a[text()='Chinese Beauties']",
            p: /^\/[^\/]+\/$/
        }),
        imgs: () => fun.getImgA(".wp-block-image img", ".page-links>a"),
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: "h1.entry-title",
        category: "nsfw2"
    }, {
        name: "爱看 INS",
        host: ["www.ikanins.com"],
        reg: /^https?:\/\/www\.ikanins\.com\/[\w-]+\//,
        imgs: "img[srcset]",
        button: [4],
        insertImg: [
            [".entry-content", 0, "//p[img]"], 2
        ],
        go: 1,
        autoDownload: [0],
        next: "a[rel=prev]",
        prev: "a[rel=next]",
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "Jablehk",
        host: ["jablehk.com"],
        reg: () => fun.checkUrl({
            h: "jablehk.com"
        }),
        imgs: ".gallery-strips-lightbox-link>img[data-src]",
        thums: "figure.gallery-strips-item",
        button: [4],
        insertImg: [
            [".gallery-strips-wrapper", 2, ".gallery-strips-wrapper"], 2, 2000
        ],
        autoDownload: [0],
        next: ".item-pagination-link--next",
        prev: ".item-pagination-link--prev",
        go: 1,
        customTitle: "h1>strong",
        category: "nsfw1"
    }, {
        name: "True Pic",
        host: ["truepic.net"],
        reg: /^https?:\/\/truepic\.net\/[\w-]+\/$/,
        include: "//div[@class='entry-content']//p[img]",
        init: () => fun.createImgBox("//p[img]", 1),
        imgs: () => fun.getImgA("//p/img", ".pagination_split_post a"),
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "//p[img]"], 2
        ],
        go: 1,
        customTitle: ".entry-content h2",
        category: "nsfw1"
    }, {
        name: "TangMoc",
        host: ["tangmoc.com"],
        reg: /^https?:\/\/tangmoc\.com\/blog\/show\/\w+\/.+/,
        init: () => fun.remove("//span[@id='install-pwa-box'] | //div[@class='row mt-3'] | //div[ins[@class='adsbygoogle']] | //div[@class='mt-3'][@id] | //div[@class='row my-5'] | //iframe[@id]"),
        imgs: () => fun.ge(".btn-warning+.btn-secondary") ? fun.getImgA("a[href*=media]>.media-preview", "a.btn-secondary") : fun.gae("a[href*=media]>.media-preview"),
        button: [4],
        insertImg: ["//media[article]", 2],
        go: 1,
        customTitle: () => fun.dt({
            s: "h1",
            d: [
                "View - ",
                /[\s-]+$/
            ]
        }),
        category: "nsfw1"
    }, {
        name: "TangMoc去廣告",
        host: ["tangmoc.com"],
        reg: /^https?:\/\/tangmoc\.com\//,
        init: () => fun.addMutationObserver(() => fun.remove("//span[@id='install-pwa-box'] | //div[@class='row mt-3'] | //div[ins[@class='adsbygoogle']] | //div[@class='mt-3'][@id] | //div[@class='row my-5'] | //iframe[@id]")),
        category: "ad"
    }, {
        name: "Girls Collection 18+!",
        host: ["gaitrung.lovestoblog.com", "aigirl.lovestoblog.com", "gainhat.lovestoblog.com", "hotpic.lovestoblog.com"],
        reg: [
            /^https?:\/\/gaitrung\.lovestoblog\.com\/[^\/]+\/(\?i=1)?$/,
            /^https?:\/\/aigirl\.lovestoblog\.com\/[^\/]+\/(\?i=1)?$/,
            /^https?:\/\/gainhat\.lovestoblog\.com\/[^\/]+\/(\?i=1)?$/,
            /^https?:\/\/hotpic\.lovestoblog\.com\/[^\/]+\/(\?i=1)?$/
        ],
        imgs: ".entry-content img:not(.emoji,[src*=logo])",
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "Fapello",
        host: ["fapello.com"],
        reg: /^https?:\/\/fapello\.com\/[^\/]+\/$/,
        init: async () => {
            if (fun.ge("#showmore")) {
                let ele = fun.ge("#showmore");
                let max = ele.dataset.max;
                let links = [siteUrl];
                for (let i = 2; i <= max; i++) {
                    links.push(siteUrl + `page-${i}/`);
                }
                tempEles = await fun.getEle(links, "#content>div");
            } else {
                tempEles = fun.gae("#content>div");
            }
        },
        imgs: () => {
            let imgSrcs = tempEles.map(node => {
                if (fun.ge("img[src*='icon-play.svg']", node)) {
                    let videoSrc = fun.ge("img", node).src.replace("https://fapello.com/", "https://cdn.fapello.com/").replace("_300px", "").replace(/\.jpg$/i, ".mp4");
                    videoSrcArray.push(videoSrc);
                    return null;
                } else {
                    thumbnailSrcArray.push(fun.ge("img", node).src);
                    let imgSrc = fun.ge("img", node).src.replace("_300px", "");
                    return imgSrc;
                }
            }).filter(item => item).sort();
            thumbnailSrcArray.sort();
            videoSrcArray.sort();
            return imgSrcs;
        },
        capture: () => _this.imgs(),
        button: [4],
        insertImg: ["#content", 3],
        insertImgAF: () => {
            fun.run("jQuery(window).off()");
            fun.remove("#showmore,#next_page");
        },
        customTitle: () => fun.title(" - fapello"),
        downloadVideo: true,
        category: "nsfw2"
    }, {
        name: "Fapello.su",
        host: ["fapello.su"],
        reg: /^https?:\/\/fapello\.su\/[^\/]+\/$/,
        init: async () => {
            let total = Number(fun.gt("//div[strong[text()='Media']]").match(/\d+/)[0]); //媒體總數
            console.log("媒體總數", total);
            const model_bid = fun.lp.replaceAll("/", "");
            let ele = fun.ge("#showmore");
            let max = ele.dataset.max;
            fun.showMsg(displayLanguage.str_05, 0);
            let ajaxNum = 0;
            let resArr = fun.arr(max, (v, i) => new Promise(resolve => {
                $.ajax({
                    url: `/ajax/model_new/${model_bid}/page-${i + 1}/photos`,
                    dataType: "html",
                    success: (data) => {
                        fun.showMsg(`${displayLanguage.str_06}${ajaxNum+=1}/${max}`, 0);
                        resolve(data);
                    }
                });
            }));
            let tempDom1;
            let picNum;
            await Promise.all(resArr).then(async arr => {
                await fun.delay(1000, 0);
                fun.hideMsg();
                ajaxNum = 0;
                let html = "";
                arr.forEach(str => (html += str));
                tempDom1 = fun.doc(html);
                picNum = [...tempDom1.images].length; //圖片數量
                console.log("圖片數量", picNum);
                thumbnailSrcArray = [...tempDom1.images].map(e => e.dataset.src);
                console.log("縮圖地址", thumbnailSrcArray);
            });
            let videoNum = total - picNum;
            let videoPages = Math.ceil(videoNum / 16);
            fun.showMsg(displayLanguage.str_05, 0);
            let resArr2 = fun.arr(videoPages, (v, i) => new Promise(resolve => {
                $.ajax({
                    url: `/ajax/model_new/${model_bid}/page-${i + 1}/videos`,
                    dataType: "html",
                    success: (data) => {
                        fun.showMsg(`${displayLanguage.str_06}${ajaxNum+=1}/${videoPages}`, 0);
                        resolve(data);
                    }
                });
            }));
            let tempDom2;
            await Promise.all(resArr2).then(async arr => {
                await fun.delay(1000, 0);
                fun.hideMsg();
                ajaxNum = 0;
                let html = "";
                arr.forEach(str => (html += str));
                tempDom2 = fun.doc(html);
                let videoUrls = fun.gae("iframe.saint-iframe", tempDom2).map(e => e.src);
                console.log("iframeVideoUrls", videoUrls);
                fun.showMsg(displayLanguage.str_05, 0);
                let getVideoUrlsArr = videoUrls.map((url, i, arr) => {
                    return fun.xhrDoc(url).then(dom => {
                        fun.showMsg(`${displayLanguage.str_06}${ajaxNum+=1}/${arr.length}`, 0);
                        return fun.ge("source[type]", dom)?.src ?? null;
                    });
                });
                await Promise.all(getVideoUrlsArr).then(async mp4Arr => {
                    await fun.delay(1000, 0);
                    mp4Arr = mp4Arr.filter(item => item);
                    fun.hideMsg();
                    console.log("MP4地址", mp4Arr);
                    videoSrcArray = mp4Arr;
                });
            });
        },
        imgs: () => thumbnailSrcArray.map(e => e.replace(".md.", ".")),
        capture: () => _this.imgs(),
        button: [4],
        insertImg: ["#content", 3],
        insertImgAF: () => {
            fun.run("scrollMore=()=>{};");
            fun.remove("#showmore,#next_page,.content-action-buttons");
        },
        downloadVideo: true,
        category: "nsfw2"
    }, {
        name: "Fapachi",
        host: ["fapachi.com"],
        reg: /^https?:\/\/fapachi\.com\/[^\/]+$/,
        imgs: async () => {
            if (captureSrcArray.length) return captureSrcArray;
            let medias = Number(fun.gt("//p[contains(text(),'Media')]").match(/\d+/)[0]);
            if (medias > 24) {
                let max = Math.ceil(medias / 24);
                let links = fun.arr(max, (v, i) => siteUrl + "/page/" + (i + 1));
                thumbnailSrcArray = await fun.getImgA(".model-media-prew img", links).then(arr => arr.filter(src => src.includes("/models/")).sort());
                return thumbnailSrcArray.map(e => e.replace("/300px/", "/full/").replace("_300px", ""));
            } else {
                thumbnailSrcArray = fun.getImgSrcArr(".model-media-prew img").filter(src => src.includes("/models/")).sort();
                return thumbnailSrcArray.map(e => e.replace("/300px/", "/full/").replace("_300px", ""));
            }
        },
        capture: () => _this.imgs(),
        button: [4],
        insertImg: ["//div[div[contains(@class,'model-media-prew')]]", 3],
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "Faponic/Fapellas",
        host: ["faponic.com", "fapellas.com"],
        reg: /^https?:\/\/(faponic\.com|fapellas\.com)\/[^\/]+\/$/,
        init: async () => {
            if (fun.ge("#showmore")) {
                let ele = fun.ge("#showmore");
                let max = ele.dataset.max;
                let links = [siteUrl];
                for (let i = 2; i <= max; i++) {
                    links.push(siteUrl + `page-${i}/`);
                }
                tempEles = await fun.getEle(links, ".photo-item>img");
            } else {
                tempEles = fun.gae(".photo-item>img");
            }
        },
        imgs: () => tempEles.map(e => e.src).sort(),
        capture: () => _this.imgs(),
        button: [4],
        insertImg: ["#content", 3],
        insertImgAF: () => {
            fun.run("scrollMore=()=>{};");
            fun.remove("#showmore,#next_page");
        },
        customTitle: () => fun.title(" - Faponic"),
        category: "nsfw2"
    }, {
        name: "The Fappening Plus",
        host: ["thefappening.plus"],
        reg: /^https?:\/\/thefappening\.plus\/[^\/]+\/$/,
        imgs: async () => {
            await fun.getNP(".gallery__item", "//a[text()='Next']", null, ".fusion-meta-info");
            thumbnailSrcArray = fun.gae(".gallery_thumb").map(e => e.src).reverse();
            return thumbnailSrcArray.map(e => e.replace(/_s(\.\w+)$/, "$1"));
        },
        button: [4],
        insertImg: [".post-content", 2],
        customTitle: () => fun.gt(".entry-title").replaceAll("/", "-"),
        category: "nsfw2"
    }, {
        name: "TheFappening",
        host: ["thefappeningblog.com"],
        reg: /^https?:\/\/thefappeningblog\.com\/[^\/]+\/(#more-\d+)?$/,
        include: "//a[noscript][not(@class)]",
        imgs: "//a[noscript]",
        button: [4],
        insertImg: [
            ["//a[noscript]", 2, "//a[noscript]"], 2
        ],
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "TheFappening",
        host: ["thefappeningblog.com"],
        reg: /^https?:\/\/thefappeningblog\.com\/gallery\/[^\/]+\/$/,
        imgs: async () => {
            await fun.getNP(".item_content", ".nav-next>a", null, ".nav-single");
            thumbnailSrcArray = fun.gae(".item_img>img").map(e => e.src).reverse();
            return thumbnailSrcArray.map(e => e.replace(/_\d+px(\.\w+)$/, "$1"));
        },
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: () => fun.gt(".entry-title").replaceAll("/", "-"),
        category: "nsfw2"
    }, {
        name: "Fapomania",
        host: ["fapomania.com"],
        reg: /^https?:\/\/fapomania\.com\/[^\/]+\/$/,
        init: () => fun.createImgBox(".previzakosblo", 2),
        imgs: async () => {
            const last = (dom) => !fun.ge(".leftocontar .previzako", dom);
            await fun.getNP(".leftocontar .previzako", "//a[contains(text(),'Next')]", last, ".morebutaro");
            thumbnailSrcArray = fun.gae(".leftocontar .previzakoimag>img:not([src$='leaks.png'])").map(e => e.src).reverse();
            return thumbnailSrcArray.map(e => e.replace(/_\d+px(\.\w+)$/, "$1"));
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".leftocontar .previzakosblo,.morebutaro"], 2
        ],
        customTitle: () => fun.gt(".leftocontar>h1").replaceAll("/", "-"),
        fancybox: {
            v: 3,
            insertLibrarys: 1
        },
        category: "nsfw2"
    }, {
        name: "NudoStar.TV",
        host: ["nudostar.tv"],
        reg: /^https?:\/\/nudostar\.tv\/models\/[^\/]+\/$/,
        imgs: async () => {
            await fun.getNP("#list_videos_common_videos_list_items>.item", ".next>a", null, "#list_models_models_list_pagination");
            thumbnailSrcArray = fun.gae("#list_videos_common_videos_list img.thumb").map(e => e.src).reverse();
            return thumbnailSrcArray.map(e => e.replace(/_\d+px(\.\w+)$/, "$1"));
        },
        button: [4],
        insertImg: [".list-videos", 2],
        customTitle: () => fun.gt(".headline>h1").replaceAll("/", "-"),
        category: "nsfw2"
    }, {
        name: "Nudogram",
        host: ["nudogram.com"],
        reg: /^https?:\/\/nudogram\.com\/models\/[^\/]+\/$/,
        imgs: async () => {
            await fun.getNP("#list_videos_common_videos_list_items>.item", "//li[span]/following-sibling::li[1]/a", null, ".pagination");
            thumbnailSrcArray = fun.gae("#list_videos_common_videos_list div.img>img").map(e => e.src).reverse();
            return thumbnailSrcArray.map(e => e.replace(/_\d+(\.\w+)$/, "$1"));
        },
        button: [4],
        insertImg: [".list-videos", 2],
        customTitle: () => fun.gt(".headline>h2").replaceAll("/", "-"),
        category: "nsfw2"
    }, {
        name: "HentaiDude TV",
        host: ["hentaidude.tv"],
        link: "https://hentaidude.tv/category/cosplay/",
        reg: /^https?:\/\/hentaidude\.tv\/[\w-]+\/[^\/]+\/$/,
        include: [
            ".entry-content a.swipebox",
            ".entry-title"
        ],
        imgs: ".post-thumb img,.entry-content a.swipebox",
        customTitle: ".entry-title",
        setFancybox: true,
        category: "nsfw2"
    }, {
        name: "Sankaku Complex",
        host: ["www.sankakucomplex.com"],
        reg: /^https?:\/\/www\.sankakucomplex\.com\/\d+\/\d+\/\d+\/[^\/]+\/$/,
        imgs: ".post-thumb img,.entry-content a.swipebox",
        customTitle: ".entry-title",
        setFancybox: true,
        category: "nsfw2"
    }, {
        name: "Influencers GoneWild",
        host: ["influencersgonewild.com"],
        reg: /^https?:\/\/influencersgonewild\.com\/[^\/]+\/$/,
        include: [
            ".entry-title",
            ".entry-content"
        ],
        imgs: () => {
            videoSrcArray = fun.gae("video>source[type='video/mp4']").map(e => e.src);
            return fun.gae(".entry-content img[data-src]").map(e => fun.lo + e.dataset.src);
        },
        capture: () => _this.imgs(),
        customTitle: ".entry-title",
        setFancybox: ".entry-content img[data-src]",
        downloadVideo: true,
        category: "nsfw2"
    }, {
        name: "Hotleaks/Thotsbay/Hotleak/Leakedzone/BestThots/Thotporn",
        host: ["hotleaks.tv", "thotsbay.tv", "hotleak.vip", "leakedzone.com", "bestthots.com", "thotporn.tv"],
        reg: () => /^https?:\/\/(hotleaks\.tv|thotsbay\.tv|hotleak\.vip|leakedzone\.com|bestthots\.com|thotporn\.tv)\/[\w\.-]+(\/photo)?$/i.test(fun.url) && !/^\/home/.test(fun.lp),
        init: () => {
            if (location.href.split("/").length === 4 && !fun.lh.includes("bestthots")) {
                location.href = location.href + "/photo";
            } else {
                fun.ge("#photos-tab").click();
            }
        },
        imgs: async () => {
            if (/\/photo/.test(location.href)) fun.clearAllTimer();
            let ptext = fun.gt("#photos-tab");
            let [, m] = ptext.match(/\(([\d\.K]+)\)/);
            let num;
            if (/\./.test(m) && /K/.test(m)) {
                num = (Number(m.replace(/\.|K/g, "")) + 1) * 100;
            } else if (/K/.test(m)) {
                num = Number(m.replace(/K/g, "")) * 1000 + 100;
            } else {
                num = Number(m);
            }
            let pages = Math.ceil(num / 48);
            let actorName = siteUrl.split("/")[3];
            let imgsSrcArr = [];
            let fetchNum = 0;
            fun.showMsg(displayLanguage.str_05, 0);
            for (let i = 1; i <= pages; i++) {
                let json = await fetch(`/${actorName}?page=${i}&type=photos&order=0`, {
                    "headers": {
                        "x-requested-with": "XMLHttpRequest"
                    }
                }).then(res => {
                    fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${pages}`, 0);
                    return res.json();
                });
                if (json.length == 0) break;
                let images;
                if (fun.lh == "leakedzone.com") {
                    images = json.map(e => e.thumbnail.replace("_300.", "."));
                } else if (fun.lh == "bestthots.com") {
                    images = json.map(e => e.image);
                } else {
                    images = json.map(e => e.player);
                }
                let thumbnails = json.map(e => e.thumbnail);
                imgsSrcArr = imgsSrcArr.concat(images);
                thumbnailSrcArray = thumbnailSrcArray.concat(thumbnails);
                if (json.length < 48) break;
            }
            return imgsSrcArr;
        },
        button: [4],
        insertImg: ["#photos", 3],
        customTitle: ".actor-name>h1,.actor-title-port",
        category: "nsfw2"
    }, {
        name: "Hot Girl Pix",
        host: ["www.hotgirlpix.com"],
        reg: /^https?:\/\/www\.hotgirlpix\.com\/p\//,
        imgs: () => fun.getImgA("article img", "#singlePostPagination a", 300),
        button: [4],
        insertImg: ["article", 2],
        customTitle: "#singlePostTitle",
        css: "#modalAdblock,.alignCenter,.gcseSearchPlaceHolder{display:none!important}",
        category: "nsfw1"
    }, {
        name: "Hot Girl Pix AD",
        host: ["www.hotgirlpix.com"],
        reg: /^https?:\/\/www\.hotgirlpix\.com\//,
        css: "#modalAdblock{display:none!important}",
        category: "ad"
    }, {
        name: "自拍图库",
        host: ["自拍图库.com", "zipaipic.com"],
        reg: /\/content_\d+\.html$/,
        include: "//title[contains(text(),'自拍图库')]",
        init: () => fun.clearAllTimer(),
        imgs: ".showimg",
        button: [4],
        insertImg: ["#imgviewer", 2],
        go: 1,
        autoDownload: [0],
        next: "//a[text()='下一组']",
        prev: "//a[text()='上一组']",
        customTitle: () => fun.gt({
            s: ".ttle",
            d: /\n|\d+p/gi
        }),
        referer: "",
        css: "a[rel]{display:none!important}",
        category: "nsfw2"
    }, {
        name: "美拍 - 我自拍",
        host: ["5zipai.com", "7aipai.com", "9zipai.net", "global.3zipai.net"],
        reg: () => fun.checkUrl({
            h: "zipai",
            p: /^\/selfies\/\d+\/\d+\.html$/
        }),
        init: () => fun.clearAllTimer(),
        imgs: async () => {
            await fun.waitEle("#showCon img");
            videoSrcArray = fun.gae("#showCon video").map(e => /\.mp4/.test(e.src) ? e.src : null).filter(item => item);
            thumbnailSrcArray = fun.gae("#showCon img").map(e => /zipai/.test(e.src) ? e.src.replace(/&w=\d+/, "&w=100") : null).filter(item => item);
            return fun.gae("#showCon img").map(e => /zipai/.test(e.src) ? e.src.replace(/&output.+/, "") : null).filter(item => item);
        },
        button: [4],
        insertImg: ["#showCon", 2],
        go: 1,
        autoDownload: [0],
        next: ".article-nav-prev a",
        prev: 1,
        customTitle: ".item_title>h1",
        referer: "",
        css: ".affs{display:none!important}.content_left img{cursor:unset}",
        category: "nsfw2"
    }, {
        name: "52自拍",
        host: ["shaonvtu.xyz"],
        reg: /^https?:\/\/shaonvtu\.xyz\/\?d-\d+\.html$/i,
        reg: () => fun.checkUrl({
            h: "shaonvtu.xyz",
            s: "albums"
        }),
        imgs: ".images img",
        button: [4],
        insertImg: [".images", 2],
        customTitle: ".content h1",
        category: "nsfw2"
    }, {
        name: "吃瓜大队",
        host: ["cgdd.net"],
        reg: /^https?:\/\/cgdd\.net\/\d+\.html$/i,
        imgs: () => {
            videoSrcArray = fun.gae(".article-content video>source").map(e => e.src);
            return fun.gae(".article-content img");
        },
        capture: () => _this.imgs(),
        customTitle: ".article-title>a",
        setFancybox: ".article-content img",
        downloadVideo: true,
        css: ".m-navbar~*:not([id^=Full],[class^='fancybox']){display:none!important;}",
        category: "nsfw2"
    }, {
        name: "套圖TAOTU.ORG",
        host: ["taotu.org"],
        reg: /^https?:\/\/(\w{2}\.)?taotu\.org\/[\w-]+\//,
        include: "a[data-fancybox=gallery]",
        imgs: "a[data-fancybox=gallery]",
        thums: "a[data-fancybox=gallery] img",
        button: [4],
        insertImg: [
            ["#wrapper-footer", 2], 2
        ],
        autoDownload: [0],
        next: ".next a",
        prev: ".prev a",
        customTitle: ".suit_title>h1",
        go: 1,
        css: "#right-bottom,#ad,.ad{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "福利图库",
        host: ["fulituku.neocities.org"],
        reg: /^https?:\/\/fulituku\.neocities\.org\/posts\/\w+$/,
        imgs: "#gallery img",
        button: [4],
        insertImg: ["#gallery", 2],
        autoDownload: [0],
        next: "#sibling-posts>:first-child>a",
        prev: "#sibling-posts>:last-child>a",
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "福利乐园",
        host: ["www.fulily.com"],
        reg: /^https?:\/\/www\.fulily\.com\/\d+\/\d+\/\d+\/[^\/]+\/$/,
        imgs: ".article-content img",
        button: [4],
        insertImg: [".article-content", 2],
        autoDownload: [0],
        next: ".article-nav-prev a",
        prev: ".article-nav-next a",
        customTitle: ".article-title",
        category: "nsfw2"
    }, {
        name: "Taotuxp.com/www.taotucd.com",
        host: ["www.taotucc.com", "www.taotucd.com"],
        reg: /^https?:\/\/www\.taotuc(c|d)\.com\/\d+\.html/,
        imgs: () => fun.getImg("#post_content img[alt]", fun.gt(".pagelist>*:last-child"), 7),
        button: [4],
        insertImg: ["#post_content", 1],
        autoDownload: [0],
        next: "a[rel=prev]",
        prev: "a[rel=next]",
        customTitle: "h1",
        category: "nsfw1"
    }, {
        name: "推图网",
        reg: /^https?:\/\/(www|m)\.tuiimg\.com\/meinv\/\d+\//,
        link: "https://m.tuiimg.com/meinv/",
        init: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let url = fun.url.replace("www.tuiimg.com", "m.tuiimg.com");
            await fun.xhrDoc(url, {
                headers: {
                    "Referer": url,
                    "User-Agent": MobileUA
                }
            }).then(dom => {
                let [, , , max, , next] = JSON.parse(fun.gst("_pd", dom).match(/_pd[\s=]+([^;]+)/)[1]);
                let [path] = fun.ge("#content img", dom).src.match(/.+\//);
                globalImgArray = fun.arr(max, (v, i) => path + (i + 1) + ".jpg");
                if (isNumber(next)) {
                    tempNextLink = fun.url.replace(/\d+/, next);
                }
            });
        },
        imgs: () => globalImgArray,
        button: [4],
        insertImg: ["#content", 2],
        autoDownload: [0],
        next: () => tempNextLink,
        prev: 1,
        customTitle: "#main>h1,.main>h1",
        css: "#page{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "18AV",
        reg: () => fun.checkUrl({
            h: "18av.mm-cg.com",
            e: [
                "//script[contains(text(),'Large_cgurl')]",
                ".sel_enlarge_page,.sel_enlarge"
            ]
        }),
        imgs: () => _unsafeWindow.Large_cgurl,
        button: [4],
        insertImg: ["#show_cg_html,#showcg_container", 2],
        customTitle: ".archive-title>h1,h1",
        css: ".ut1_img_content{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "Xgirls",
        host: ["xgirlscollection.com", "img3xgirls.com"],
        reg: /^https?:\/\/(xgirlscollection\.com|img3xgirls\.com)\/(collection|album)\/\d+/,
        imgs: () => fun.getImg("img[id].collection-image,.album-image[data-pin-media]", (fun.gt(".pagination>*:last-child", 2) || 1)),
        button: [4],
        insertImg: ["//div[img[@data-pin-url]]", 1],
        customTitle: ".container>h1",
        category: "nsfw1"
    }, {
        name: "SexyAsianGirl",
        host: ["www.sexyasiangirl.xyz"],
        reg: /^https?:\/\/www\.sexyasiangirl\.xyz\/album\/\d+\.html/,
        init: () => fun.remove("//article/div[a[img]]"),
        imgs: () => fun.getImg("img.block", fun.gt("//a[text()='Next']", 2) || 1),
        button: [4],
        insertImg: ["//div[img[@title]]", 2],
        customTitle: "header>h2",
        category: "nsfw2"
    }, {
        name: "尤物丧志/HotAsianX/色图/亚色图库/福利姬美图/秀人图/UGIRLS/mm131美女图片/酱图图/極品妹子圖/爽图吧/涩图社/美乳小姐姐写真/三上悠亚写真图片",
        reg: () => fun.checkUrl({
            h: [
                /^youwu\.\w+$/,
                /^hotasianx\.\w+$/,
                /^setu\.\w+$/,
                /^yase\.\w+$/,
                /^fuligirl\.\w+$/,
                /^xiurentu\.\w+$/,
                /^ugirls\.\w+$/,
                "mm131.click",
                /^(www\.)?jtttututu\.top$/,
                "jipin.pics",
                "stuba.netlify.app",
                "setushe.pics",
                "meiru.neocities.org",
                "sanshang.neocities.org"
            ],
            e: [
                "img.block",
                "//div[img[@title]]",
                "#main>h1,header>h1"
            ]
        }),
        init: async () => {
            _unsafeWindow.stop();
            fun.showMsg("Clear Element Event", 0);
            fun.clearAllTimer();
            await fun.clearElementEvent();
        },
        imgs: () => fun.getImg("img.block", fun.gt("a[rel=next]", 2) || 1),
        button: [4],
        insertImg: ["//div[img[@title]]", 2],
        customTitle: () => fun.dt({
            s: "#main>h1,header>h1",
            d: [
                /\(\d+[\w\s\\\/\.+-／]+\)?|\[\d+[\w\s\\\/\.+-／]+\]?|（\d+[\w\s\\\/\.+-／]+）?|【\d+[\w\s\\\/\.+-／]+】?|\d+P/gi,
                /\s?\d+P\+?\d+V/,
                /未分类性感写真|^.+人体|AI图区/,
                /（\d+月\d+打赏群(自购)?资源）/gi,
                /🐾/g
            ]
        }),
        css: "div.my-2:has(>a[style]){display:none!important;}",
        category: "nsfw2"
    }, {
        name: "色图喵",
        host: ["setumeow.com"],
        reg: /^https?:\/\/setumeow\.com\/p\//,
        imgs: ".gallery img",
        button: [4],
        insertImg: [".gallery", 2],
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "美图鉴赏/美图鉴赏ACG",
        host: ["www.lspimg.com", "acg.lspimg.com"],
        reg: /^https?:\/\/(www|acg)\.lspimg\.com\/archives\/\d+/,
        imgs: "div[data-src]",
        button: [4],
        insertImg: ["#masonry", 2],
        customTitle: () => fun.lh === "www.lspimg.com" ? fun.title(" - 美图鉴赏") : null,
        css: "#masonry{position:unset!important;height:unset!important}#popup{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "涩涩图库/AsianSexyBody",
        host: ["sstk.neocities.org", "asiansexybody.netlify.app"],
        reg: [
            /^https?:\/\/sstk\.neocities\.org\/posts\/\w+\/$/,
            /^https?:\/\/asiansexybody\.netlify\.app\/posts\/\w+\/$/
        ],
        imgs: "#gallery img",
        button: [4],
        insertImg: ["#gallery", 2],
        autoDownload: [0],
        next: "//span[text()='Prev:']/following-sibling::a[1]",
        prev: "//span[text()='Next:']/following-sibling::a[1]",
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "秀人图吧",
        host: ["www.502x.com"],
        reg: /^https?:\/\/www\.502x\.com\/\w+\/\d+\.html/,
        //imgs: () => fun.getImg("#image_div img", (fun.gt("a.prev", 2) || 1), 9),
        imgs: () => fun.getImgA("#content img", ".post_au>a"),
        button: [4],
        insertImg: ["#image_div", 2],
        customTitle: ".item_title>h1",
        css: ".affs{display:none!important}.image_div a img{cursor:unset}",
        category: "nsfw1"
    }, {
        name: "VVCON美瞳网",
        reg: () => fun.checkUrl({
            h: "www.vvcon.cn",
            p: /^\/\d+\.html$/,
            e: "//a[@class='post-list-cat-item b2-radius'][contains(text(),'Cosplay图集')]"
        }),
        imgs: ".talk_pic img",
        button: [4],
        insertImg: [".talk_pic", 2],
        customTitle: ".entry-header>h1",
        category: "nsfw1"
    }, {
        name: "VVCON美瞳网",
        reg: () => fun.checkUrl({
            h: "www.vvcon.cn",
            p: /^\/\d+\.html$/,
            e: "//a[@class='post-list-cat-item b2-radius'][contains(text(),'Cosplay图集')]"
        }),
        imgs: ".entry-content p:has(>img)>img",
        button: [4],
        insertImg: [
            [".entry-content p:has(>img)", 1, ".entry-content p:has(>img)"], 2
        ],
        customTitle: ".entry-header>h1",
        category: "nsfw1"
    }, {
        name: "HoeHot",
        reg: () => fun.checkUrl({
            h: "hoehot.com",
            p: "/gallery/"
        }),
        imgs: async () => {
            fun.createImgBox(".infinite-scroll-component__outerdiv", 1);
            if (captureSrcArray.length > 0) {
                fun.clearAllTimer();
                return captureSrcArray;
            }
            fun.showMsg(displayLanguage.str_05, 0);
            let srcs = [];
            let [, , galleryId] = fun.lp.split("/");
            let cursorId = "";
            let loop = true;
            const getData = (cid, gid) => fetch(`/api/model-media?cursor=${cid}&galleryId=${gid}`).then(res => res.json()).then(json => {
                const num = json.medias.length;
                if (num > 0) {
                    cursorId = json.medias.at(-1).id;
                    json.medias.forEach(e => {
                        thumbnailSrcArray.push(e.urlThumb);
                        srcs.push(e.url);
                    });
                }
                if (num < 30 || num === 0) {
                    loop = false;
                }
            });
            while (loop) {
                await getData(cursorId, galleryId);
            }
            fun.clearAllTimer();
            return srcs;
        },
        capture: () => _this.imgs(),
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".infinite-scroll-component__outerdiv:has(.container-img)"], 3
        ],
        customTitle: "main .my-1>h1",
        openInNewTab: ".infinite-scroll-component a:not([target=_blank])",
        css: "main a[rel]{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "HoeHot 清除無用請求",
        reg: () => fun.checkUrl({
            h: "hoehot.com"
        }),
        init: () => fun.addMutationObserver(() => setTimeout(() => fun.clearAllTimer(), 2000)),
        openInNewTab: ".infinite-scroll-component a:not([target=_blank])",
        css: "main a[rel]{display:none!important;}",
        category: "none"
    }, {
        name: "OSOSEDKI",
        host: ["ososedki.com"],
        reg: /^https?:\/\/ososedki\.com\/([a-z]{2}\/)?photos\//,
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr("a[data-fancybox] img").sort((a, b) => a.match(/(\d+)\.\w+$/)[1] - b.match(/(\d+)\.\w+$/)[1]);
            return fun.gau("a[data-fancybox]").sort((a, b) => a.match(/(\d+)\.\w+$/)[1] - b.match(/(\d+)\.\w+$/)[1]);
        },
        button: [4],
        insertImg: ["//div[div[@id='masonry']]", 2],
        customTitle: () => fun.ge("//meta[@property='og:description']").content,
        category: "nsfw2"
    }, {
        name: "COSPLAYASIAN/COSPLAYTHOTS/COSPLAYRULE34/WAIFUBITCHES/COSPLAY BOOBS/COSPLAYLEAKS/VIPTHOTS/HENTAI BITCHES/LEAKSFANS/CHARMINGASS/LEAKS PIE/CHERRY LEAKS/SWEETLEAKS/OCOSPLAY/WEB CHARMING/COSPLAY KITTYS/TITSPIE/COSPLAY SOSEDKI",
        host: [
            "cosplayasian.com",
            "cosplaythots.com",
            "cosplayrule34.com",
            "waifubitches.com",
            "cosplayboobs.com",
            "cosplayleaks.com",
            "vipthots.com",
            "hentaibitches.com",
            "leaksfan.com",
            "charmingass.com",
            "leakspie.com",
            "cherryleaks.com",
            "sweetleaks.com",
            "ocosplay.com",
            "webcharming.com",
            "cosplaykittys.com",
            "titspie.com",
            "cosplaysosedki.com"
        ],
        reg: [
            /^https?:\/\/cosplayasian\.com\/([a-z]{2}\/)?post\/\d+/,
            /^https?:\/\/cosplaythots\.com\/([a-z]{2}\/)?p\/\d+/,
            /^https?:\/\/cosplayrule34\.com\/([a-z]{2}\/)?post\/\d+/,
            /^https?:\/\/waifubitches\.com\/([a-z]{2}\/)?gallery\/\d+/,
            /^https?:\/\/cosplayboobs\.com\/([a-z]{2}\/)?album\/\d+/,
            /^https?:\/\/cosplayleaks\.com\/([a-z]{2}\/)?photos\/\d+/,
            /^https?:\/\/vipthots\.com\/([a-z]{2}\/)?p\/\d+/,
            /^https?:\/\/hentaibitches\.com\/([a-z]{2}\/)?photos\/\d+/,
            /^https?:\/\/leaksfan\.com\/([a-z]{2}\/)?photos\/\d+/,
            /^https?:\/\/charmingass\.com\/([a-z]{2}\/)?picture\/\d+/,
            /^https?:\/\/leakspie\.com\/([a-z]{2}\/)?img\/\d+/,
            /^https?:\/\/cherryleaks\.com\/([a-z]{2}\/)?image\/\d+/,
            /^https?:\/\/sweetleaks\.com\/([a-z]{2}\/)?pic\/\d+/,
            /^https?:\/\/ocosplay\.com\/([a-z]{2}\/)?g\/\d+/,
            /^https?:\/\/webcharming\.com\/([a-z]{2}\/)?pics\/\d+/,
            /^https?:\/\/cosplaykittys\.com\/([a-z]{2}\/)?g\/\d+/,
            /^https?:\/\/titspie\.com\/([a-z]{2}\/)?photo\/\d+/,
            /^https?:\/\/cosplaysosedki\.com\/([a-z]{2}\/)?g\/\d+/
        ],
        init: () => fun.createImgBox(".grid,div.row:has(>.bg-dark)", 2),
        imgs: "a[data-fancybox],.grid-item>img,.grid-item->img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".grid,div.row:has(>.bg-dark)"], 2
        ],
        customTitle: () => fun.ge("h1.text-uppercase:not(.mt-2)").textContent.replace(/^[\w\s]+:/i, "").trim(),
        css: "noindex:has(>div>center),div:has(>center>noindex){display:none!important;}",
        category: "nsfw2"
    }, {
        name: "Packs para pobres/Pack de chicas/Hentai Senpai's Paradisec",
        host: ["packsparapobres.com", "packdechicas.net", "hentaisenpai.org", "www.hentai-senpai.org", "hentaisenpaispar-7wbws1xewq.live-website.com"],
        reg: [
            /^https?:\/\/packsparapobres\.com\/\w+\/[\w-]+\/[^\/]+\/$/,
            /^https?:\/\/packdechicas\.net\/[^\/]+\/$/,
            /^https?:\/\/hentaisenpai\.org\/\w+\/[\w-]+\/[^\/]+\/$/,
            /^https?:\/\/www\.hentai-senpai\.org\/\w+\/[\w-]+\/[^\/]+\/$/,
            /^https?:\/\/hentaisenpaispar-7wbws1xewq\.live-website\.com\/[^\/]+\/$/,
        ],
        include: ".tiled-gallery__gallery,.wp-block-video",
        init: () => {
            if (fun.lh === "packsparapobres.com") {
                fun.createImgBox(".wp-post-author-wrap", 2);
            } else if (/senpai/.test(fun.lh)) {
                fun.createImgBox(".tiled-gallery__gallery", 2);
            } else {
                fun.createImgBox(".entry.themeform");
            }
            let selectors = ["#twitch-embed", ".twitter-tweet twitter-tweet-rendered", ".twitter-tweet", "iframe", "marquee", "audio", "img[alt^='LOS NECESIT']"];
            fun.remove(selectors);
        },
        imgs: () => {
            videoSrcArray = fun.gae("video[src]").map(e => e.src);
            let imgSrcset = fun.ge(".tiled-gallery__gallery img[srcset]")
            if (!!imgSrcset) {
                return fun.getImgSrcset(".tiled-gallery__gallery img[srcset]");
            } else if (fun.ge(".tiled-gallery__gallery img[data-orig-file]") && fun.ge(".tiled-gallery__gallery img[data-medium-file]")) {
                return fun.gae(".tiled-gallery__gallery img[data-orig-file]").map(e => e.dataset.origFile);
            } else if (fun.ge(".tiled-gallery__gallery img[data-link]") && fun.ge(".tiled-gallery__gallery img[data-url]")) {
                return fun.gae(".tiled-gallery__gallery img[data-url]").map(e => e.dataset.url.replace(/-\d+x\d+(\.jpg)$/, "$1"));
            } else {
                return [];
            }
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        go: 1,
        customTitle: "h1.entry-title",
        downloadVideo: true,
        category: "nsfw2"
    }, {
        name: "Packs para pobres AD/Pack de chicas AD",
        reg: [
            /^https?:\/\/packsparapobres\.com\//,
            /^https?:\/\/packdechicas\.net\//,
            /^https?:\/\/hentaisenpai\.org\//,
            /^https?:\/\/www\.hentai-senpai\.org\//,
            /^https?:\/\/hentaisenpaispar-7wbws1xewq\.live-website\.com\//
        ],
        init: () => {
            let selectors = ["#twitch-embed", ".twitter-tweet twitter-tweet-rendered", ".twitter-tweet", "iframe", "marquee", "audio", "img[alt^='LOS NECESIT']"];
            fun.remove(selectors);
        },
        category: "ad"
    }, {
        name: "NudoStar",
        reg: () => fun.checkUrl({
            h: "nudostar.com",
            p: /^\/[^\/]+\//,
            e: [
                ".pagination-single",
                "//p/a[img]"
            ]
        }),
        init: () => fun.createImgBox(".pagination-single", 1),
        imgs: () => {
            videoSrcArray = fun.gae("video.wp-video-shortcode>source").map(e => e.src);
            return fun.gae("//p/a[img]");
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "//p[a[img]] | //div[@class='wp-video']"], 2
        ],
        go: 1,
        autoDownload: [0],
        next: "a.previous-post",
        prev: "a.next-post",
        customTitle: "h1.entry-title",
        category: "nsfw2"
    }, {
        name: "Find Her Name",
        reg: () => fun.checkUrl({
            h: "findhername.net",
            e: ".entry-after-content"
        }),
        init: () => fun.createImgBox(".entry-after-content", 1),
        imgs: () => {
            videoSrcArray = fun.gae("video.wp-video-shortcode>source").map(e => e.src);
            return fun.gae("//p/a[img]|//p/img");
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "//p[a[img]] |//p/img | //div[@class='wp-video']"], 2
        ],
        go: 1,
        autoDownload: [0],
        next: "a.g1-teaser-next",
        prev: "a.g1-teaser-prev",
        customTitle: "h1.entry-title",
        category: "nsfw2"
    }, {
        name: "ThotBook/Famous Internet Girls",
        host: ["thotbook.co", "fig.to"],
        reg: [
            /^https?:\/\/thotbook\.co\/[^\/]+\/thotbook\/[\w-]+\/$/,
            /^https?:\/\/fig\.to\/[^\/]+\/[^\/]+\//
        ],
        include: "video>source,.mace-gallery-teaser",
        imgs: () => {
            videoSrcArray = fun.gae("video>source").map(e => e.src);
            let picArr1 = fun.gae(".entry-featured-media-main[itemprop='image'] meta[itemprop='url']").map(e => e.content);
            if (fun.ge(".mace-gallery-teaser")) {
                let picArr2 = JSON.parse(fun.ge(".mace-gallery-teaser").dataset.g1Gallery).map(e => {
                    if (e.type === "image" && !/18xmob\.png$/.test(e.full)) {
                        return e.full;
                    } else {
                        return null;
                    }
                }).filter(item => item);
                return picArr1.concat(picArr2);
            } else {
                return picArr1;
            }
        },
        button: [4],
        insertImg: [
            [".entry-inner", 0, ".entry-featured-media-main,.entry-content"], 2
        ],
        autoDownload: [0],
        next: "a[rel='prev']",
        prev: "a[rel='next']",
        customTitle: ".entry-title",
        downloadVideo: true,
        category: "nsfw2"
    }, {
        name: "TNApics",
        host: ["www.tnapics.com"],
        reg: /^https:\/\/www\.tnapics\.com\/[\w-]+\/$/,
        imgs: "a[data-fslightbox]",
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "Fapdungeon",
        host: ["fapdungeon.com"],
        reg: /^https?:\/\/fapdungeon\.com\/\w+\/[^\/]+\/$/,
        include: ".entry-content img.size-full",
        init: () => fun.addMutationObserver(() => fun.remove("div[class][style*='z-index']")),
        imgs: () => {
            videoSrcArray = fun.gae("video>source").map(e => e.src);
            return fun.gae(".entry-content img.size-full").map(e => e.src);
        },
        capture: () => _this.imgs(),
        customTitle: ".entry-title",
        referer: "https://fapdungeon.com/",
        setFancybox: ".entry-content img",
        downloadVideo: true,
        category: "nsfw2"
    }, {
        name: "Ibradome",
        host: ["ibradome.com"],
        reg: /^https?:\/\/ibradome\.com\/\w+\/photos\/\d+\//i,
        imgs: () => {
            let url = fun.gu("a.gallery-view");
            return fun.fetchDoc(url).then(dom => fun.gau("a.ohidden", dom));
        },
        capture: () => _this.imgs(),
        customTitle: ".art-title",
        category: "nsfw2"
    }, {
        name: "Fapopedia",
        reg: () => fun.checkUrl({
            h: "fapopedia.net",
            p: /^\/[^\/]+\/$/,
            e: "a[name='photos']"
        }),
        init: () => fun.createImgBox(".shrt-blk", 2),
        imgs: async () => {
            await fun.getNP("//h2[i]/following-sibling::div[1][@class='shrt-blk']/div", "//a[text()='Next ']", null, ".nv-blk");
            thumbnailSrcArray = fun.gae("//h2[i]/following-sibling::div[1][@class='shrt-blk']//img").map(e => e.src).sort();
            return fun.getImgA(".lrg-pc>a", "//h2[i]/following-sibling::div[1][@class='shrt-blk']//a").then(arr => arr.sort());
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "//h2[i]/following-sibling::div[1][@class='shrt-blk']|//div[@class='nv-blk']"], 2
        ],
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "fapfappy",
        host: ["fapfappy.com"],
        reg: /^https?:\/\/fapfappy\.com\/\d+\/\d+\/\d+\/[^\/]+\/$/i,
        imgs: ".myrpf-xph img[data-lazy-src]",
        capture: () => fun.gae(".myrpf-xph img[data-lazy-src]").map(e => e.dataset.lazySrc),
        customTitle: ".entry-title",
        setFancybox: true,
        fancybox: {
            v: 3,
            insertLibrarys: 1
        },
        category: "nsfw2"
    }, {
        name: "gotanynudes.com",
        host: ["gotanynudes.com"],
        reg: /^https?:\/\/gotanynudes\.com\/[^\/]+\/$/i,
        imgs: () => {
            videoSrcArray = fun.gae("video>source").map(e => e.src);
            return fun.getImgSrcset(".entry-content  img");
        },
        capture: () => _this.imgs(),
        customTitle: ".entry-title",
        downloadVideo: true,
        setFancybox: ".entry-content img",
        referer: "https://gotanynudes.com/",
        category: "nsfw2"
    }, {
        name: "Thotslife.com",
        host: ["thotslife.com"],
        reg: /^https?:\/\/thotslife\.com\/[^\/]+\/$/i,
        imgs: () => {
            videoSrcArray = fun.gae("video>source").map(e => e.src);
            return fun.getImgSrcset(".entry-content img");
        },
        capture: () => _this.imgs(),
        customTitle: ".entry-title",
        downloadVideo: true,
        setFancybox: ".entry-content img",
        referer: "https://thotslife.com/",
        category: "nsfw2"
    }, {
        name: "Nude Cosplay Albums",
        reg: () => fun.checkUrl({
            h: "nudecosplaygirls.com",
            p: /^\/[^\/]+\/$/
        }),
        imgs: ".entry-content img.msacwl-img,#post img,.gallery-item img,figure.wp-block-image img",
        button: [4],
        insertImg: [".entry-content,#post", 2],
        customTitle: ".entry-title",
        css: ".entry-content>img{width:auto!important;height:auto!important;max-width:100%!important;display:block!important;margin:0 auto !important}#secondary{display:none!important}h1.g1-mega{text-align:center}",
        category: "nsfw2"
    }, {
        name: "Jizz to Nude Girls",
        reg: () => fun.checkUrl({
            h: "jizzy.org",
            p: /^\/[^\/]+\/$/,
            e: ".entry-content img"
        }),
        imgs: () => fun.getImgSrcArr(".entry-content img").filter(src => !src.includes("18xmob")),
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "VoyeurFlash.com",
        host: ["voyeurflash.com"],
        reg: /^https?:\/\/voyeurflash\.com\/[^\/]+\/$/,
        imgs: () => {
            let [eos, ets] = [".gallery_thumb,.wp-block-image>a>img:not([srcset])", ".wp-block-image>img[srcset]"];
            let eo = fun.ge(eos);
            let et = fun.ge(ets);
            if (!!eo) {
                return fun.gae(eos);
            } else if (!!et) {
                return fun.getImgSrcset(ets);
            } else {
                return [];
            }
        },
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "Leaked Models",
        host: ["leakedmodels.com"],
        reg: /^https?:\/\/leakedmodels\.com\/[^\/]+\/$/,
        include: "//a[span[@class='faux-button'][text()='View']][@class='more-link']",
        init: () => fun.createImgBox("#site-content", 2),
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr("img.size-large").sort();
            let links = fun.gau("//a[span[@class='faux-button'][text()='View']][@class='more-link']");
            return fun.getImgA("img.wp-image", links).then(arr => arr.sort());
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "ThotHD Albums / Thothub Albums",
        host: ["thothd.com", "thothub.to", "thothub.lol"],
        reg: [
            /^https?:\/\/thothd\.com\/([a-z]{2}\/)?albums\/\d+\/[^\/]+\/$/,
            /^https?:\/\/thothub\.(to|lol)\/albums\/\d+\/[^\/]+\/$/
        ],
        include: "a[data-fancybox-type]",
        imgs: "a[data-fancybox-type]",
        thums: "a[data-fancybox-type] .thumb",
        button: [4],
        insertImg: [".images", 2],
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "The Hentai World",
        link: "https://thehentaiworld.com/hentai-cosplay-images/",
        reg: () => fun.checkUrl({
            h: "thehentaiworld.com",
            p: /^\/[^\/]+\/[^\/]+\/$/,
            e: "#miniThumbContainer"
        }),
        init: () => fun.createImgBox("#miniThumbContainer", 2),
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr("#miniThumbContainer img[itemprop='thumbnail']");
            return thumbnailSrcArray.map(e => e.replace(/-\d+x\d+(\.\w+)/, "$1"));
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#miniThumbContainer,#doujin,div.ad"], 2
        ],
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "Cosplayers GoneWild",
        host: ["cosplayersgonewild.net"],
        reg: /^https?:\/\/cosplayersgonewild\.net\/albums\/\d+\/$/,
        init: async () => {
            await fun.waitEle("#main-carousel-list img");
            fun.createImgBox(".grid", 2);
        },
        imgs: "#main-carousel-list img",
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        customTitle: "h1.text-3xl",
        category: "nsfw1"
    }, {
        name: "Gallery Epic",
        host: ["galleryepic.com"],
        reg: /^https?:\/\/galleryepic\.com\/(zh|en)\/cosplay\/\d+$/,
        init: async () => {
            await fun.waitEle("img[variant='thumbnail']");
            await fun.wait(() => {
                let button = fun.ge("//button[text()='加载更多' or text()='More']");
                if (!!button) {
                    button.click();
                }
                return !button;
            });
        },
        imgs: "img[variant='thumbnail']",
        button: [4],
        insertImg: ["//div[@class='flex flex-col items-center'][div[div[a[img]]]] | //div[@class='flex flex-col items-center'][div[div[img]]]", 2],
        customTitle: ".justify-between h2",
        category: "nsfw1"
    }, {
        name: "Gallery Epic Cosplays 分類自動翻頁",
        reg: /^https?:\/\/galleryepic\.com\/(zh|en)\/cosplays\/\d+$/,
        autoPager: {
            ele: ".grid:has(>.relative)",
            observer: ".grid>.relative",
            next: "a[aria-label='Go to next page']:not([tabindex])",
            re: "nav[role=navigation]",
            showTitle: 0,
            bF: (dom) => {
                fun.gae(".animate-pulse", dom).forEach(e => {
                    e.nextSibling.className = "h-auto w-auto object-cover transition-all hover:scale-105 aspect-[3/4]";
                    e.nextSibling.dataset.src = e.nextSibling.src;
                    e.remove();
                });
            },
            aF: (dom) => {
                let last = fun.gae(".grid:has(>.relative)").at(-1);
                fun.gae("img[data-src]", last).forEach(img => {
                    img.src = loading_bak;
                    fun.imagesObserver.observe(img);
                });
            }
        },
        category: "autoPager"
    }, {
        name: "Gallery Epic cosers 分類自動翻頁",
        reg: /^https?:\/\/galleryepic\.com\/(zh|en)\/cosers\/\d+\??$/,
        autoPager: {
            ele: ".grid:has(>.flex)",
            observer: ".grid>.flex",
            next: "a[aria-label='Go to next page']:not([tabindex])",
            re: "nav[role=navigation]",
            showTitle: 0,
            bF: (dom) => {
                fun.gae(".animate-pulse", dom).forEach(e => {
                    e.nextSibling.removeAttribute("class");
                    e.nextSibling.dataset.src = e.nextSibling.src;
                    e.remove();
                });
            },
            aF: (dom) => {
                let last = fun.gae(".grid:has(>.flex)").at(-1);
                fun.gae("img[data-src]", last).forEach(img => {
                    img.src = loading_bak;
                    fun.imagesObserver.observe(img);
                });
            }
        },
        category: "autoPager"
    }, {
        name: "Gallery Epic Coser 分類自動翻頁",
        reg: /^https?:\/\/galleryepic\.com\/(zh|en)\/coser\/\d+\/\d+\??$/,
        autoPager: {
            ele: ".grid:has(>.relative)",
            observer: ".grid>.relative",
            next: "a[aria-label='Go to next page']:not([tabindex])",
            re: "nav[role=navigation]",
            showTitle: 0,
            bF: (dom) => {
                fun.gae(".animate-pulse", dom).forEach(e => {
                    e.nextSibling.className = "h-auto w-auto object-cover transition-all hover:scale-105 aspect-[3/4]";
                    e.nextSibling.dataset.src = e.nextSibling.src;
                    e.remove();
                });
            },
            aF: (dom) => {
                let last = fun.gae(".grid:has(>.relative)").at(-1);
                fun.gae("img[data-src]", last).forEach(img => {
                    img.src = loading_bak;
                    fun.imagesObserver.observe(img);
                });
            }
        },
        category: "autoPager"
    }, {
        name: "Nude Bird/Nude Cosplay",
        reg: () => fun.checkUrl({
            h: [
                "nudebird.biz",
                "nudecosplay.biz"
            ],
            p: /^\/[^\/]+\/$/,
            e: "//p[a[img]]",
        }),
        init: () => {
            let video = fun.ge(".online-video");
            if (video) {
                let x = fun.ge("//p[a[img]]");
                fun.gae(".online-video").forEach(e => insertBefore(x, e));
            }
        },
        imgs: ".thecontent a,.content-inner>p>a",
        button: [4],
        insertImg: ["//p[a[img]]", 2],
        customTitle: () => fun.dt({
            s: "h1",
            d: "nudecosplay.biz"
        }),
        category: "nsfw1"
    }, {
        name: "Cosplaytele",
        reg: () => fun.checkUrl({
            h: "cosplaytele.com",
            p: /^\/[^/]+\/$/,
        }),
        imgs: "figure.gallery-item a",
        button: [4],
        insertImg: [".gallery", 2],
        customTitle: "h1.entry-title",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "nsfw2"
    }, {
        name: "Cosplay18",
        reg: () => fun.checkUrl({
            h: "cosplay18.pics",
            p: /^\/[^/]+\/$/,
        }),
        imgs: ".single-page img",
        button: [4],
        insertImg: [
            [".single-page", 0, ".single-page>ul"], 2
        ],
        customTitle: "h1.entry-title",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "nsfw2"
    }, {
        name: "GR Beauty COS Album",
        reg: () => fun.checkUrl({
            h: "www.beautycosalbum.com",
            p: "/album/",
        }),
        imgs: () => fun.getImgA(".pcontent-imgbox>img", ".post-links>a"),
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: ".post-pre a",
        prev: ".post-nextv a",
        customTitle: ".entry-header>h1",
        category: "nsfw1"
    }, {
        name: "Erohere",
        reg: () => fun.checkUrl({
            h: "erohere.online",
            p: /^\/erohere\d+\/$/,
        }),
        init: () => fun.createImgBox("#album_masonry", 2),
        imgs: async () => {
            const getImgSrcs = imgArr => imgArr.map(img => fun.lo + img.getAttribute("srcset").split(",")[0].replace(/\s{1,2}\d+w$/, ""));
            let piclinks;
            let pages = fun.ge(".pagelist");
            if (pages) {
                let max = fun.gt(".pagelist .next", 2);
                let url = fun.lp;
                let pagelinks = [url];
                for (let i = 2; i <= max; i++) {
                    pagelinks.push(url + i);
                }
                let albumE = await fun.getEle(pagelinks, "#album_masonry");
                thumbnailSrcArray = albumE.map(e => fun.getImgSrcArr("img", e))?.flat();
                piclinks = albumE.map(e => fun.gau("a", e))?.flat();
            } else {
                thumbnailSrcArray = fun.getImgSrcArr("#album_masonry img");
                piclinks = fun.gau("#album_masonry a");
            }
            let imgE = await fun.getEle(piclinks, ".img_responsive>img");
            return getImgSrcs(imgE);
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#album_masonry,.pagelist-container"], 2
        ],
        customTitle: ".album_head>h1",
        category: "nsfw1"
    }, {
        name: "yoel.uno",
        reg: /^https?:\/\/yoel\.uno\/[^\/]+\/$/,
        include: "a[href*='vipr.im']",
        imgs: () => {
            let links = fun.gau("a[href*='vipr.im']");
            return fun.getImageHost(links);
        },
        eye: 0,
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "JimmysOnline.com",
        host: ["www.jimmysonline.com"],
        reg: /^https?:\/\/www\.jimmysonline\.com\/[^\/]+\/$/,
        include: "a.aigpl-img-link[data-mfp-src]",
        imgs: () => fun.gae("a.aigpl-img-link[data-mfp-src]").map(a => a.dataset.mfpSrc),
        button: [4],
        insertImg: [".aigpl-gallery", 2],
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "Quatvn/EroXXX",
        link: "https://quatvn.men/phim-sex-anh-sex",
        reg: () => fun.checkUrl({
            h: [
                "quatvn.men",
                "eroxxx.co"
            ]
        }),
        init: () => fun.createImgBox("#video>.margin-10", 1),
        imgs: "#video>.margin-10>img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#video>.margin-10"], 2
        ],
        customTitle: ".h1-title",
        css: "#popup_th,#backgroundPopupp,#popupContact,#wap_bottombanner{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "Quatvn/EroXXX AD",
        reg: () => fun.checkUrl({
            h: [
                "quatvn.men",
                "eroxxx.co"
            ]
        }),
        css: "#popup_th,#backgroundPopupp,#popupContact,#wap_bottombanner{display:none!important;}",
        category: "ad"
    }, {
        name: "Quatvn2",
        reg: () => fun.checkUrl({
            h: "quatvn.baby",
            e: ".mace-gallery-teaser-button"
        }),
        imgs: () => {
            let galleryData = JSON.parse(document.querySelector(".mace-gallery-teaser").dataset.g1Gallery);
            return galleryData.filter(item => item.type === "image").map((item, index) => {
                thumbnailSrcArray[index] = item.thumbnail;
                return item.full;
            });
        },
        capture: () => _this.imgs(),
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "gaidam18",
        host: ["gaidam18.com"],
        reg: /^https?:\/\/gaidam18\.com\/[^\/]+\/$/,
        include: "figure.gallery-item,.entry-content>div>a[href*='blogger'],.entry-content img[src*='/wp-content/uploads/']",
        imgs: () => {
            if (fun.ge(".gallery-item img")) {
                return fun.gae(".gallery-item img");
            } else if (fun.ge(".entry-content>div>a[href*='blogger']")) {
                return fun.gae(".entry-content>div>a[href*='blogger']").map(a => {
                    let url = a.href;
                    let urlArr = url.split("/");
                    urlArr[urlArr.length - 2] = "s16000";
                    return urlArr.join("/");
                });
            } else if (fun.ge(".entry-content img[src*='/wp-content/uploads/']")) {
                return fun.gae(".entry-content img[src*='/wp-content/uploads/']");
            } else {
                return [];
            }
        },
        button: [4],
        insertImg: [".gallery,.entry-content", 2],
        customTitle: () => fun.dt({
            s: "h1.entry-title",
            d: "Ảnh sex "
        }),
        css: "[class^='float']{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "Game-happy-life",
        reg: () => fun.checkUrl({
            h: "gamehappylife.top",
            p: /^\/[^\/]+\/$/,
            e: "figure.wp-block-image"
        }),
        imgs: () => fun.getImgA("figure.wp-block-image>a,figure.wp-block-image>img", ".page-links>a"),
        button: [4],
        insertImg: ["figure.wp-block-image", 2],
        autoDownload: [0],
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: "h1.entry-title",
        category: "nsfw1"
    }, {
        name: "XikXak",
        reg: () => fun.checkUrl({
            h: "www.xikxak.com",
            p: /^\/\d+$/
        }),
        imgs: ".entry-content img",
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: "h1.entry-title",
        category: "nsfw1"
    }, {
        name: "Cosplay69",
        host: ["www.cosplay69.net", "cosplay69.net"],
        reg: () => fun.checkUrl({
            h: "cosplay69.net",
            p: /^\/[^\/]+\/$/,
            e: "//a[@rel='category tag'][text()='Album']"
        }) && !["sssins.com", "nicezzz.com"].some(t => document.documentElement.innerText.includes(t)),
        init: async () => {
            await fun.waitEle(".entry-content img");
            fun.addMutationObserver(() => {
                document.documentElement.style.overflow = "";
                document.body.classList.remove("has-header-ad", "tie-popup-is-opend");
                fun.remove("#tie-popup-adblock");
            });
            let iframe = fun.ge(".iframe-container,iframe[scrolling]");
            if (iframe) {
                let x = fun.ge(".entry-content");
                fun.gae(".iframe-container,iframe[scrolling]").forEach(e => insertBefore(x, e));
            }
            if (fun.ge(".gallery")) {
                fun.createImgBox(".gallery", 1);
            } else {
                fun.createImgBox(".entry-content p:has(>img),.entry-content ul", 1);
            }
        },
        imgs: () => fun.fetchDoc(fun.url).then(dom => fun.gae("a[data-fancybox],.gallery-item a,.entry-content img[alt]:not(.crp_thumb,[src*='/banner'])", dom)),
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".gallery,.entry-content p:has(>img:not(.crp_thumb)),.entry-content ul"], 2
        ],
        autoDownload: [0],
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: "h1.entry-title",
        category: "nsfw2"
    }, {
        name: "Cosplay69",
        reg: /^https?:\/\/(www\.)?cosplay69\.net\//,
        init: () => {
            fun.addMutationObserver(() => {
                document.documentElement.style.overflow = "";
                document.body.classList.remove("has-header-ad", "tie-popup-is-opend");
                fun.remove("#tie-popup-adblock");
            });
        },
        category: "ad"
    }, {
        name: "X Cosplay",
        host: ["xcosplay.top"],
        reg: /^https?:\/\/xcosplay\.top\/[^\/]+\/$/,
        init: () => fun.createImgBox("p:has(>.g1-img-wrap)", 2),
        imgs: () => fun.gae(".g1-img-wrap>img").map(e => e.src.replace(/-\d+x\d+\.jpg$/, ".jpg")),
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "p:has(>.g1-img-wrap)"], 2
        ],
        autoDownload: [0],
        next: "a[rel=prev]",
        prev: "a[rel=next]",
        customTitle: "h1.entry-title",
        category: "nsfw1"
    }, {
        name: "Ero Cosplay",
        host: ["www.erocosplay.org"],
        reg: /^https?:\/\/www\.erocosplay\.org\/[^\/]+\/$/,
        include: "#reader",
        init: async () => await fun.waitEle("#reader img"),
        imgs: () => {
            let textCode = fun.gst("pages").match(/pages[\s=]+([^;]+)/)[1].replaceAll("\n", "");
            return fun.run(textCode);
        },
        button: [4],
        insertImg: ["#reader", 2],
        insertImgAF: () => {
            document.removeEventListener("keydown", _unsafeWindow.handleKeyboardEvent);
        },
        autoDownload: [0],
        next: () => {
            let selector = `[data-href="${fun.url}"]`;
            let currentE = fun.ge(selector);
            let next = currentE?.nextElementSibling;
            if (next?.nodeName === "OPTION") {
                return next.dataset.href;
            } else {
                return null;
            }
        },
        prev: 1,
        customTitle: ".entry-title",
        css: "#reader{width:auto!important;height:auto!important}#mode,#botmenureader{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "CG Cosplay",
        host: ["cgcosplay.org"],
        reg: /^https?:\/\/cgcosplay\.org\/\d+\/$/,
        include: [
            ".gallery",
            ".gallery a",
            ".elementor-heading-title"
        ],
        //exclude: "//a[text()='Login' or text()='Log in here']",
        init: () => {
            let video = fun.ge(".fluid_video_wrapper");
            if (video) {
                let x = fun.ge(".gallery");
                fun.gae(".fluid_video_wrapper").forEach(e => insertBefore(x, e));
            }
        },
        imgs: ".gallery .gallery-item a:has(>img:not([src$='/banner']))",
        //button: [4],
        //insertImg: [".gallery", 3],
        //autoDownload: [0],
        //next: ".nav-previous a[rel=prev]",
        //prev: ".nav-next a[rel=next]",
        customTitle: ".elementor-heading-title",
        css: "#page+[id][class]:has(.adblock_title),.code-block{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "CG Cosplay AAD",
        reg: /^https?:\/\/cgcosplay\.org\//,
        css: "#page+[id][class]:has(.adblock_title){display:none!important;}",
        category: "ad"
    }, {
        name: "Asupan",
        host: ["asupan.art", "www.korenime.org"],
        reg: /^https?:\/\/(asupan\.art|www\.korenime\.org)\/id\/\d+$/,
        init: () => fun.createImgBox(".gallery", 2),
        imgs: ".gallery img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".gallery"], 2
        ],
        customTitle: "h1>span",
        category: "nsfw1"
    }, {
        name: "AsiaOnTop",
        host: ["asiaontop.com", "asiaon.top"],
        reg: /^https?:\/\/(asiaontop\.com|asiaon\.top)\/[^\/]+\/$/,
        include: ".modula-items",
        init: () => fun.addMutationObserver(() => fun.remove("#mdpDeblocker-css")),
        imgs: "a[data-image-id]",
        button: [4],
        insertImg: [
            [".modula-items", 2, ".modula-items"], 2
        ],
        autoDownload: [0],
        next: "a#prepost",
        prev: "a#nextpost",
        customTitle: () => fun.gt(".single_post_title_main").replace(":", " -"),
        go: 1,
        category: "nsfw2"
    }, {
        name: "AsiaOnTop",
        reg: /^https?:\/\/(asiaontop\.com|asiaon\.top)\//,
        init: () => fun.addMutationObserver(() => fun.remove("#mdpDeblocker-css")),
        css: ".mdpDeblocker-wrapper,.mdpDeblocker-blackout.active{display:none!important;}[data-aos^=fade][data-aos^=fade]{opacity:1!important;transition-property:unset!important}[data-aos=fade-up]{transform:unset!important}",
        category: "ad"
    }, {
        name: "Mitaku",
        reg: () => fun.checkUrl({
            h: "mitaku.net",
            e: "a.msacwl-img-link[data-mfp-src]"
        }),
        imgs: () => fun.ge("a.msacwl-img-link[data-mfp-src]") ? fun.gae("a.msacwl-img-link[data-mfp-src]").map(a => a.dataset.mfpSrc).slice(1, -1) : fun.gae(".msacwl-img").slice(1, -1),
        button: [4],
        insertImg: [
            [".article-content", 2], 2
        ],
        go: 1,
        autoDownload: [0],
        next: ".previous>a",
        prev: ".next>a",
        customTitle: () => fun.dt({
            s: "h1.entry-title",
            d: /.[\smitaku]{6,7}\.net./
        }),
        category: "nsfw2"
    }, {
        name: "EroAsian",
        reg: () => fun.checkUrl({
            h: "eroasian.net",
            p: /^\/photo-set\//
        }),
        init: () => {
            let info = fun.ge(".wp-block-group");
            if (info) {
                let te = fun.ge(".cm-entry-summary");
                insertBefore(te, info);
            }
        },
        exclude: "a.msacwl-img-link",
        imgs: () => fun.getImgA(".cm-entry-summary img", ".pagination a"),
        button: [4],
        insertImg: [".cm-entry-summary", 2],
        autoDownload: [0],
        next: ".previous>a",
        prev: ".next>a",
        customTitle: ".cm-entry-title",
        category: "nsfw2"
    }, {
        name: "EroAsian",
        reg: () => fun.checkUrl({
            h: "eroasian.net",
            p: "/photo-set/",
            e: "a.msacwl-img-link"
        }),
        init: () => {
            let info = fun.ge(".wp-block-group");
            if (info) {
                let te = fun.ge(".cm-entry-summary");
                insertBefore(te, info);
            }
            fun.createImgBox(".cm-entry-summary", 0);
        },
        imgs: () => fun.gae("a.msacwl-img-link[data-mfp-src]").map(a => {
            if (/^http/.test(a.dataset.mfpSrc)) {
                return a.dataset.mfpSrc;
            } else {
                return fun.lo + a.dataset.mfpSrc;
            }
        }).slice(1, -1),
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0], 2
        ],
        go: 1,
        autoDownload: [0],
        next: ".previous>a",
        prev: ".next>a",
        customTitle: ".cm-entry-title",
        category: "nsfw2"
    }, {
        name: "Byoru",
        host: ["byoru.net"],
        reg: /^https?:\/\/byoru\.net\/[^\/]+\/$/,
        init: () => {
            let eles = fun.gae("//p[contains(text(),'Download')] | //p[contains(text(),'Password')]");
            if (eles.length > 0) {
                let x = fun.ge(".s-post-content");
                for (let e of eles) {
                    insertBefore(x, e);
                }
            }
        },
        imgs: () => {
            if (fun.ge(".msacwl-slide>a")) {
                return fun.gae(".msacwl-slide>a").map(a => a.dataset.mfpSrc).sort((a, b) => a.match(/(\d+)\.\w+$/)[1] - b.match(/(\d+)\.\w+$/)[1]);
            } else if (fun.ge("figure.wp-block-image img[data-src]")) {
                return fun.gae("figure.wp-block-image img[data-src]").map(e => e.dataset.src.replace(/-\d+x\d+(\.\w+)/, "$1")).sort((a, b) => {
                    try {
                        return a.match(/(\d+)\.\w+$/)[1] - b.match(/(\d+)\.\w+$/)[1];
                    } catch {
                        try {
                            return a.match(/\((\d+)\)\.\w+$/)[1] - b.match(/\((\d+)\)\.\w+$/)[1];
                        } catch {
                            return a;
                        }
                    }
                });
            } else if (fun.ge(".galeria_img>img")) {
                return fun.gae(".galeria_img>img");
            } else if (fun.ge(".s-post-content img[title][data-lazyloaded]")) {
                return fun.gae(".s-post-content img[title][data-lazyloaded]").map(e => e.src);
            } else if (fun.ge(".s-post-content img")) {
                return fun.gae(".s-post-content img");
            } else {
                return [];
            }
        },
        capture: () => _this.imgs(),
        //button: [4],
        //insertImg: [".s-post-content", 2],
        autoDownload: [0],
        next: "a.next-page-link",
        prev: "a.prev-page-link",
        customTitle: () => fun.dt({
            s: "h1.entry-title",
            d: /Byoru – | \(Cosplay\)/g
        }),
        category: "nsfw1"
    }, {
        name: "Hình ảnh gái",
        reg: () => fun.checkUrl({
            h: "hinhanhgai.com"
        }),
        imgs: () => {
            if (document.URL.includes("/image/")) {
                let id = document.URL.split("/").at(-1);
                fun.showMsg(displayLanguage.str_05, 0);
                return fetch(`/api/photo/${id}`).then(res => res.json()).then(json => {
                    fun.hideMsg();
                    return json.files.map(e => e.full_url);
                });
            } else if (document.URL.includes("/article/")) {
                return fun.gae(".content img");
            } else {
                return [];
            }
        },
        capture: () => _this.imgs(),
        SPA: () => ["/image/", "/article/"].some(p => document.URL.includes(p)),
        autoDownload: [0],
        next: () => {
            let next = fun.ge("a.next[href^='/image/']");
            return next ? next.href : null;
        },
        prev: 1,
        customTitle: () => {
            if (document.URL.includes("/image/")) {
                let id = document.URL.split("/").at(-1);
                return fetch(`/api/photo/${id}`).then(res => res.json()).then(json => fun.dt({
                    t: json.name
                }));
            } else if (document.URL.includes("/article/")) {
                return fun.dt({
                    s: "h1.title"
                });
            } else {
                return null;
            }
        },
        observerURL: true,
        css: "#m_website_float,#m_website_center,#m_image_content_title,.aside_right_ad,#p_image_content_title,#p_website_float,#p_website_center,#p_website_right_float{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "Ảnh đẹp",
        reg: () => fun.checkUrl({
            h: "tuyetnhan.com",
            p: /^\/[^\/]+\/$/
        }),
        imgs: ".entry-content img",
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".card_title",
        category: "nsfw1"
    }, {
        name: "Gai.vn",
        reg: () => fun.checkUrl({
            h: "gai.vn"
        }),
        imgs: async () => {
            if (!["#content .gai-thumb>.vn-box", "a[data-fancybox='slide']"].every(s => !!fun.ge(s))) return [];
            await fun.getNP(".gai-thumb", "li.page-item.active+li:not(.disabled)>a");
            fun.remove("//div[nav[@aria-label='Page navigation']]");
            return fun.gae("a[data-fancybox='slide']");
        },
        SPA: () => ["#content .gai-thumb>.vn-box", "a[data-fancybox='slide']"].every(s => !!fun.ge(s)) || !!fun.ge(".FullPictureLoadImage"),
        button: [4],
        insertImg: ["#content", 2],
        customTitle: ".nav-breadcrumb>.nav-breadcrumb-item:last-child",
        fancybox: {
            blacklist: 1
        },
        observerURL: true,
        category: "nsfw1"
    }, {
        name: "imgcup.com",
        host: ["imgcup.com"],
        reg: /^https?:\/\/imgcup\.com\/[^\.]+\.html$/,
        init: () => fun.createImgBox(".penci-post-gallery-container", 2),
        imgs: ".item-gallery-masonry>a",
        thums: ".item-gallery-masonry>a img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".penci-post-gallery-container"], 2
        ],
        autoDownload: [0],
        next: ".prev-post-inner>a",
        prev: ".next-post-inner>a",
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "MissKON.com",
        host: ["misskon.com"],
        reg: /^https?:\/\/misskon\.com\/[^\/]+\/$/,
        imgs: () => fun.getImg(".entry img[decoding]", fun.gt(".page-link>*:last-child"), 4),
        button: [4],
        insertImg: ["//p[img[@decoding]]", 2],
        go: 1,
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "Cosymodel",
        reg: () => fun.checkUrl({
            h: "cosymodel.com",
            p: /^\/[^\/]+\/$/
        }),
        imgs: ".tdb_single_content .tdb-block-inner img",
        button: [4],
        insertImg: [".tdb_single_content .tdb-block-inner", 2],
        autoDownload: [0],
        next: ".tdb-post-prev a",
        prev: ".tdb-post-next a",
        customTitle: ".tdb-title-text",
        category: "nsfw1"
    }, {
        name: "Xiuren",
        host: ["xiuren.biz"],
        reg: /^https?:\/\/xiuren\.biz\/[^\/]+\/$/,
        include: ".content-inner a[data-lbwps-srcsmall],.content-inner a[rel=noopener]",
        imgs: ".content-inner a[data-lbwps-srcsmall],.content-inner a[rel=noopener]",
        button: [4],
        insertImg: [".content-inner", 2],
        autoDownload: [0],
        next: "a.post.prev-post",
        prev: "a.post.next-post",
        customTitle: "h1.jeg_post_title",
        category: "nsfw1"
    }, {
        name: "Asigirl.com",
        reg: () => fun.checkUrl({
            h: "asigirl.com",
            p: /^\/[^\/]+\/$/
        }),
        init: () => fun.createImgBox("#asigirl-gallery", 1),
        imgs: "#asigirl-gallery a",
        thums: "#asigirl-gallery a>img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#asigirl-gallery"], 2
        ],
        go: 1,
        customTitle: "#content-header-title",
        fancybox: {
            v: 3,
            insertLibrarys: 1
        },
        category: "nsfw1"
    }, {
        name: "Asigirl.com 分類自動翻頁",
        enable: 1,
        reg: /^https?:\/\/asigirl\.com\//,
        autoPager: {
            ele: ".oxy-posts",
            observer: ".oxy-posts>*",
            next: "span.current+a:not(.next)",
            re: ".oxy-easy-posts-pages",
            pageNum: "span.current"
        },
        category: "autoPager"
    }, {
        name: "4KHD",
        host: ["www.4khd.com", "nofzwn.xxtt.info", "wztel.xxtt.info"],
        reg: () => fun.checkUrl({
            e: "//a[@rel='home'][text()='4KHD']",
            p: /^\/content\/\d+\/[^\.\/]+\.html$/
        }),
        imgs: async () => {
            thumbnailSrcArray = await fun.getImgA("figure.wp-block-image>a>img,#basicExample>a>img,.entry-content>p>a>img", ".page-link-box a").then(arr => arr.map(e => e.replace(/\?w=\d+$/, "?w=100")));
            let bigSrcArray = thumbnailSrcArray.map(e => e.replace(/\/w\d+-rw\//, "/w7680-rw/").replace("?w=100", ""));
            if (fun.lh === "www.4khd.com") {
                return bigSrcArray;
            } else {
                let oldImgOrigin = new URL(bigSrcArray[0]).origin;
                let newImgOrigin = "https://i0.wp.com/pic.4khd.com";
                return bigSrcArray.map(src => src.replace(oldImgOrigin, newImgOrigin));
            }
        },
        button: [4],
        insertImg: [
            [".page-link-box,.wp-block-post-content>*:last-child,#khd", 1, "#basicExample,.wp-block-image,.entry-content>p:not(#FullPictureLoadEnd),.page-link-box"], 2
        ],
        customTitle: "h3.wp-block-post-title",
        css: ".centbtd,.popup,.wp-container-13{display:none!important}.FullPictureLoadImage{max-width:100%!important}",
        category: "nsfw2"
    }, {
        name: "4KHD AAD",
        reg: () => fun.checkUrl({
            e: "//a[@rel='home'][text()='4KHD']"
        }),
        css: ".centbtd,.popup,.wp-container-13{display:none!important}",
        category: "ad"
    }, {
        name: "AsianPink",
        host: ["asianpink.net"],
        reg: /^https?:\/\/asianpink\.net\/[^\/]+\/$/,
        imgs: "a.e-gallery-item",
        button: [4],
        insertImg: ["//div[div[a[contains(@class,'e-gallery-item')]]][@class='elementor-widget-container']", 2],
        go: 1,
        autoDownload: [0],
        next: "a[rel=prev]",
        prev: "a[rel=next]",
        customTitle: "h1.elementor-heading-title",
        category: "nsfw1"
    }, {
        name: "Buon Dua/MISS BABY",
        reg: () => fun.checkUrl({
            h: [
                "buondua.com",
                "buondua.us",
                "missbaby.top"
            ],
            e: ".article-fulltext img[alt]"
        }),
        init: () => {
            fun.remove("//div[text()='Sponsored ads']");
            fun.remove(".search-form~*");
        },
        imgs: () => fun.getImg(".article-fulltext img[alt]", fun.gt(".pagination-list>span:last-child>a").match(/\d+/)[0]),
        button: [4],
        insertImg: [".article-fulltext", 2],
        customTitle: ".article-header>h1",
        category: "nsfw2"
    }, {
        name: "BaoBua.Net",
        host: ["www.baobua.net"],
        reg: /^https?:\/\/www\.baobua\.net\/post\//,
        imgs: () => fun.getImg(".wp-block-image img[alt]", (fun.gt(".nav-links>*:last-child") || 1), 6),
        button: [4],
        insertImg: [".entry-content.read-details", 2],
        customTitle: () => fun.title("|", 1),
        category: "nsfw2"
    }, {
        name: "blog.baobua.net",
        host: ["blog.baobua.net"],
        link: "https://blog.baobua.net/mlem",
        reg: () => fun.checkUrl({
            h: "baobua.net",
            e: ".article-body"
        }),
        imgs: "a.fancybox",
        button: [4],
        insertImg: [".article-body", 2],
        customTitle: () => fun.title("@BaoBua", 1),
        css: "#fix_scale img:hover{transform:none!important}",
        category: "nsfw2"
    }, {
        name: "HOTGIRLchina格式",
        host: [
            "hotgirlchina.com",
            "anhnguoimau.com",
            "anhnguoidep.com",
            "anhnguoilon.com",
            "xinh.pro",
            "anhkhieudam.com",
            "hinhsexviet.com",
            "anhmienphi.com"
        ],
        reg: [
            /^https?:\/\/hotgirlchina\.com\/.+(photos?|videos?|anh)?\/?/,
            /^https?:\/\/anhnguoimau\.com\/\d+\/[^\/]+\/$/,
            /^https?:\/\/anhnguoidep\.com\/[^\/]+\/$/,
            /^https?:\/\/anhnguoilon\.com\/[^\/]+\/$/,
            /^https?:\/\/xinh\.pro\/[^\/]+\/$/,
            /^https?:\/\/anhkhieudam\.com\/[^\/]+\/$/,
            /^https?:\/\/hinhsexviet\.com\/[^\/]+\/$/,
            /^https?:\/\/anhmienphi\.com\/[^\/]+\/$/
        ],
        include: ".entry-inner img[alt]",
        init: () => {
            let share = fun.ge(".entry.share");
            if (share) share.classList.remove("share");
        },
        imgs: () => {
            let max;
            try {
                [max] = fun.gt("span.pages").match(/\d+$/);
            } catch {
                max = 1
            }
            return fun.getImg(".entry-inner img[alt]", max, 4);
        },
        button: [4],
        insertImg: [
            [".pagination", 1, ".entry-inner>p:not(#FullPictureLoadEnd),.separator"], 2
        ],
        customTitle: () => fun.dt({
            s: ".post-title",
            d: /\(\d+\s?photos\s?\)|(\s?\(\d+\s?photos?\s?\+\s?\d+\s?videos?\))|\([0-9\s]+ảnh[0-9\s\+]+video\)|\([0-9\s]+ảnh.*\)|\/mitaku\.net\//i
        }),
        css: ".boxzilla-container,.boxzilla-overlay,.sharrre-container{display:none!important}",
        category: "nsfw1"
    }, {
        name: "HOTGIRLchina 格式 AD",
        reg: /^https?:\/\/(hotgirlchina\.com|anhnguoimau\.com|anhnguoidep|anhnguoilon\.com|xinh\.pro|anhkhieudam\.com|hinhsexviet\.com|anhmienphi\.com)\//,
        css: ".boxzilla-container,.boxzilla-overlay,.sharrre-container{display:none!important}",
        category: "ad"
    }, {
        name: "FoamGirl",
        host: ["foamgirl.net"],
        reg: /^https?:\/\/foamgirl\.net\/\d+\.html/,
        imgs: () => {
            let max;
            try {
                [, max] = fun.gt(".mbx-nav-right").match(/\d+\/(\d+)/);
            } catch {
                max = 1;
            }
            return fun.getImg("a.imageclick-imgbox", max, 9);
        },
        button: [4],
        insertImg: [
            ["#image_div>*:last-child", 1, "#image_div br,a.imageclick-imgbox"], 2
        ],
        customTitle: () => fun.dt({
            s: ".item_title>h1",
            d: /\n/g
        }),
        css: ".affs{display:none!important}",
        category: "nsfw2"
    }, {
        name: "photo.camcam.cc",
        host: ["photo.camcam.cc"],
        reg: /^https?:\/\/photo\.camcam\.cc\/[^/]+\/$/,
        init: () => fun.createImgBox(".entry-content"),
        imgs: "a.rgg-img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".rgg-container"], 2
        ],
        next: "a[rel=prev]",
        prev: "a[rel=next]",
        customTitle: ".page-title",
        category: "nsfw2"
    }, {
        name: "3600000 Beauty",
        host: ["3600000.xyz"],
        reg: /^https?:\/\/3600000\.xyz\/[^\/]+\/$/,
        imgs: () => {
            let [a, img] = ["//a[img[@file]]", ".entry-content img.ls_lazyimg[file]"];
            if (fun.ge(a)) {
                return fun.gae(a);
            } else if (fun.ge(img)) {
                return fun.gae(img).map(e => e.getAttribute("file"));
            } else {
                return [];
            }
        },
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "Big Boobs Asia",
        host: ["www.tokyobombers.com"],
        reg: /^https?:\/\/www\.tokyobombers\.com\/\d+\/\d+\/\d+\/[^\/]+\/$/,
        imgs: () => {
            if (fun.ge(".gallery img[srcset]")) {
                return fun.getImgSrcset(".gallery img[srcset]");
            } else {
                return fun.gae("a[itemprop='contentURL']");
            }
        },
        button: [4],
        insertImg: [".gallery", 2],
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "Erogirl",
        reg: () => fun.checkUrl({
            h: "erogirl.net"
        }),
        SPA: () => {
            if (document.URL.includes("/p/") && !fun.ge(".FullPictureLoadImage")) {
                isFetching = true;
                return fun.fetchDoc(document.URL).then(dom => {
                    let data = fun.gt("#__NEXT_DATA__", 1, dom);
                    let json = JSON.parse(data);
                    siteJson = json;
                    debug("\n此頁JSON資料\n", siteJson);
                    isFetching = false;
                    return json;
                });
            } else if (fun.ge(".FullPictureLoadImage")) {
                return true;
            } else {
                return false;
            }
        },
        imgs: () => {
            thumbnailSrcArray = siteJson.props.pageProps.post.content.data.map(e => e.attributes.formats.thumbnail.url);
            return siteJson.props.pageProps.post.content.data.map(e => e.attributes.formats.serving_2560.url);
        },
        button: [4],
        insertImg: [".content-img", 2],
        insertImgAF: () => {
            let loop = setInterval(() => !fun.ge(".FullPictureLoadImage") ? fun.immediateInsertImg() : null, 500);
            setTimeout(() => clearInterval(loop), 10000);
        },
        customTitle: () => siteJson?.props?.pageProps?.post?.title,
        observerURL: true,
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "nsfw2"
    }, {
        name: "jangjoo",
        host: ["jangjooart.blogspot.com"],
        reg: /^https?:\/\/jangjooart\.blogspot\.com\/\d+\/\d+\/[\w-]+\.html/,
        imgs: ".post-body img",
        button: [4],
        insertImg: [".post-body", 2],
        autoDownload: [0],
        next: ".blog-pager-older-link",
        prev: ".blog-pager-newer-link",
        customTitle: ".post_item h1",
        category: "nsfw1"
    }, {
        name: "Photo Beach",
        host: ["photobeach.blogspot.com"],
        reg: /^https?:\/\/photobeach\.blogspot\.com\/\d+\/\d+\/[\w-]+\.html/,
        imgs: ".entry-content a:has(>img),br~a,br~img",
        button: [4],
        insertImg: [
            [".entry-content a:has(>img)", 1, ".entry-content a:has(>img):not[class^='Full'],.entry-content a~br"], 2
        ],
        category: "nsfw2"
    }, {
        name: "Everia.club",
        host: ["everia.club"],
        reg: /^https?:\/\/everia\.club\/\d+\/\d+\/\d+\/[^/]+\//,
        imgs: () => {
            let [img, a] = [".wp-block-image img", ".separator>a.no-lightbox"]
            if (!!fun.ge(img)) {
                return fun.gae(img);
            } else if (!!fun.ge(a)) {
                return fun.gae(a);
            } else {
                return fun.gae(".entry-content img");
            }
        },
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "Everia club",
        host: ["www.everiaclub.com"],
        reg: () => /^https?:\/\/www\.everiaclub\.com\/(?!tags).+/.test(siteUrl) && !fun.indexOf(siteUrl, ".html"),
        imgs: ".mainleft img",
        button: [4],
        insertImg: [".mainleft", 2],
        customTitle: ".mainleft h1",
        category: "nsfw2"
    }, {
        name: "SexyGirl",
        host: ["www.sexygirl.cc", "sexygirl.cc"],
        reg: [
            /^https?:\/\/(www\.)?sexygirl\.cc\/a\/\d+\.html$/,
            /^https?:\/\/(www\.)?sexygirl\.cc\/photo\/([\w-]+\/)?a\/\d+\.html$/,
            /^https?:\/\/(www\.)?sexygirl\.cc\/(\w{2}\/)?photo\/\d+\.html$/,
        ],
        imgs: "div>img.img-f1luid,div>img.img-fluid",
        button: [4],
        insertImg: ["//div[img]", 2],
        next: "//a[text()='Previous']",
        prev: "//a[text()='Next']",
        category: "nsfw2"
    }, {
        name: "Căng Cực",
        host: ["cangcuc.com"],
        reg: /^https?:\/\/cangcuc\.com\/[^\/]+\/[^\/]+\/$/,
        imgs: ".royal_grid a",
        button: [4],
        insertImg: [
            [".royal_grid", 2, ".royal_grid"], 2
        ],
        go: 1,
        autoDownload: [0],
        next: ".widget-previous-post a",
        prev: ".widget-next-post a",
        customTitle: "h1.title",
        category: "nsfw1"
    }, {
        name: "Porn Pics",
        host: ["www.pornpics.com"],
        reg: /^https?:\/\/www\.pornpics\.\w+\/.*galleries\//,
        imgs: "#tiles a.rel-link",
        thums: "#tiles a.rel-link>img",
        button: [4],
        insertImg: ["#main", 3],
        customTitle: ".title-section h1",
        category: "nsfw2"
    }, {
        name: "HD Porn Pictures",
        host: ["hdpornpictures.net"],
        reg: /^https?:\/\/hdpornpictures\.net\/id\/\d+\//,
        imgs: () => {
            let imgs = fun.gau("#tiles a.rel-link");
            thumbnailSrcArray = imgs.map(e => e + "?w=300");
            return imgs;
        },
        button: [4],
        insertImg: ["#main", 3],
        customTitle: () => fun.title(" - HD Porn Pictures"),
        category: "nsfw2"
    }, {
        name: "Freebigtit",
        host: ["www.freebigtitpornpics.com"],
        reg: /^https?:\/\/www\.freebigtitpornpics\.com\/content\/\d+\//,
        imgs: "//ul[@id='dylan']//a[img[@data-src]]",
        thums: "ul#dylan a>img[data-src]",
        button: [4],
        insertImg: [
            ["#dylan", 2], 1
        ],
        go: 1,
        category: "nsfw2"
    }, {
        name: "NongMo.Zone",
        host: ["www.ilovexs.com", "ilovexs.com"],
        reg: [
            /^https?:\/\/(www\.)?ilovexs\.com\/post_id\/\d+\//,
            /^https?:\/\/(www\.)?ilovexs\.com\/post\/[^\/]+\//,
        ],
        imgs: ".separator img",
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "idol.gravureprincess.date",
        host: ["idol.gravureprincess.date"],
        reg: /^https?:\/\/idol\.gravureprincess\.date\/\d+\/\d+\/.+\.html/,
        imgs: ".separator img",
        button: [4],
        insertImg: [
            [".entry-content", 0], 2
        ],
        go: 1,
        autoDownload: [0],
        next: "a.blog-pager-older-link",
        prev: "a.blog-pager-newer-link",
        customTitle: ".post-title",
        category: "nsfw2"
    }, {
        name: "劍心回憶",
        host: ["kenshin.hk"],
        link: "https://kenshin.hk/category/jnews/photoalbum/",
        reg: /^https?:\/\/kenshin\.hk\/\d+\/\d+\/\d+\/[^/]+\/(#small-1)?$/,
        include: "//div[@class='entry-utility']/a[1][text()='寫真組圖'] | //div[@class='cat-tags']/a[1][text()='寫真組圖']",
        init: async () => {
            let p = fun.ge("//p[contains(text(),'寫真')]");
            if (p) {
                let tE = fun.ge(".entry-content,.post-page-content");
                insertBefore(tE, p);
            }
            let links = fun.gau("//a[button[contains(text(),'寫真')]]");
            await fun.getEle(links, ".entry-content>p>img,.post-page-content>p>img,.videoWrapper", ".entry-content,.post-page-content");
            let v = fun.ge(".videoWrapper");
            if (v) {
                let tE = fun.ge(".entry-content,.post-page-content");
                insertBefore(tE, v);
            }
        },
        imgs: ".entry-content>img,.post-page-content>img",
        button: [4],
        insertImg: [".entry-content,.post-page-content", 2],
        go: 1,
        customTitle: () => fun.dt({
            s: "h1.entry-title,h2.post-title",
            d: /【寫真】|\s?\(\d+P,片\)/gi
        }),
        category: "nsfw1"
    }, {
        name: "J M G T",
        host: ["www.qiuyeshudian.com"],
        reg: /^https?:\/\/www\.qiuyeshudian\.com\/[^\/]+\/$/,
        imgs: () => {
            thumbnailSrcArray = fun.gae(".feature-box img,.entry-content img").map(e => e.dataset.src ?? e.src);
            return thumbnailSrcArray.length > 1 ? thumbnailSrcArray.map(e => e.replace(/\?w=\d+&ssl=1/, "").replace(/\?resize.+/, "")) : [];
        },
        button: [4],
        insertImg: [".entry-content", 2],
        go: 1,
        autoDownload: [0],
        next: "a[rel=prev]",
        prev: "a[rel=next]",
        customTitle: () => fun.dt({
            s: "article h1",
            d: /（\d+Photos）\s|\（\d+Photos\)\s|\d+Photos\s|\d+\spics|\(选登\)|（选登\d+P）/
        }),
        category: "nsfw1"
    }, {
        name: "J M G T的AList",
        host: ["alist.qiuyeshudian.com"],
        reg: /^https?:\/\/alist\.qiuyeshudian\.com\/[^\/]+\/[^\/]+\/.+/,
        init: async () => {
            await fun.waitEle("div.list");
            fun.createImgBox(".body");
        },
        imgs: () => fun.getAList(),
        repeat: 1,
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 3],
        go: 1,
        observerTitle: true,
        downloadVideo: true,
        customTitle: () => fun.dt({
            d: [
                " | AList",
                /（\d+Photos）\s|\（\d+Photos\)\s|\d+Photos\s|\d+\spics|\(选登\)|（选登\d+P）/
            ]
        }),
        category: "nsfw1"
    }, {
        name: "Gravia",
        host: ["www.gravia.site", "gravia.site"],
        reg: /^https?:\/\/(www\.)?gravia\.site\/box\/show\.php\?id=\d+$/,
        init: () => fun.createImgBox(".slideshow.for_box", 2),
        imgs: ".slideshow .item>img",
        thums: ".thums img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".slideshow.for_box"], 2
        ],
        customTitle: () => fun.dt({
            s: ".container>h1",
            d: /\s?【\d+枚】/
        }),
        css: "img.small{max-width:100% !important;max-height:auto !important}.cmd_bar.wide{display:none!important}",
        category: "nsfw1"
    }, {
        name: "AI.img/AI2D",
        host: ["aiimg.fun", "ai2d.fun"],
        reg: [
            /^https?:\/\/aiimg\.fun\/note\/public\.php\?id=\d+/,
            /^https?:\/\/ai2d\.fun\/note\/public\.php\?id=\d+/,
            /^https?:\/\/ai2d\.fun\/ubox\/rom\.php\?id=\d+/
        ],
        exclude: ".not_found.small",
        init: () => fun.createImgBox(".thums", 2),
        imgs: async () => {
            await fun.getNP(".thums>.item", ".pager>a.now+a", null, ".pager");
            thumbnailSrcArray = fun.getImgSrcArr(".thums img");
            return fun.gae("div.item[org_img_url]");
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".thums,.slideshow,.pager,.search_range"], 2
        ],
        customTitle: () => fun.gt("h1").replace(/\s\(\d+枚\)/, "").replaceAll("/", "／"),
        category: "nsfw2"
    }, {
        name: "NEWSグラビアアイドル.net",
        host: ["news.idolsenka.net"],
        reg: /^https?:\/\/news\.idolsenka\.net\/archives\/\d+/,
        imgs: () => fun.gae(`
        .entry-content img:not([alt^='DMM'],[alt*='OFF'],[alt^='FANZA']),
        .blog-content img:not([alt^='DMM'],[alt*='OFF'],[alt^='FANZA'])
        `).map(img => {
            let src = img.src;
            if (src.includes("wp.com")) {
                src = src.replace(/\?resize.+$/, "") + "?ssl=1";
            }
            if (src.includes("blogger.")) {
                let srcArr = src.split("/");
                srcArr[srcArr.length - 2] = "s16000";
                src = srcArr.join("/");
            }
            return src;
        }),
        capture: () => _this.imgs(),
        //button: [4],
        //insertImg: [".entry-content", 2],
        customTitle: ".entry-title,.blog-single-title",
        setFancybox: ".entry-content a[href*='blogger.'],.blog-content a[href*='blogger.']",
        category: "nsfw1"
    }, {
        name: "グラビア週刊誌 9/グラビア週刊誌 5/グラビア週刊誌 6",
        host: ["gravurezasshi9.doorblog.jp", "magazinejapanese5.blog.jp", "magazinejapanese6.blog.jp"],
        reg: /^https?:\/\/(gravurezasshi9\.doorblog\.jp|magazinejapanese(5|6)\.blog\.jp)\/archives\/\d+\.html(\?ref=)?/,
        imgs: ".article-body-inner>a,#article-contents>a",
        thums: ".article-body-inner>a>img,#article-contents>a>img",
        button: [4],
        insertImg: [".article-body-inner,#article-contents", 2],
        autoDownload: [0],
        next: "//li[text()='前の記事： ']/a | //a[text()='前の記事']",
        prev: "//li[text()='次の記事： ']/a | //a[text()='次の記事']",
        customTitle: "h1.article-title>a,.article-header>h1",
        category: "nsfw1"
    }, {
        name: "グラビア週刊誌 9/グラビア週刊誌 5/グラビア週刊誌 6 - 分類自動翻頁",
        host: ["gravurezasshi9.doorblog.jp", "magazinejapanese5.blog.jp", "magazinejapanese6.blog.jp"],
        reg: [
            /^https?:\/\/(gravurezasshi9\.doorblog\.jp|magazinejapanese(5|6)\.blog\.jp)\/(\?p=\d+)?$/,
            /^https?:\/\/(gravurezasshi9\.doorblog\.jp|magazinejapanese(5|6)\.blog\.jp)\/archives\/([\d-]+|cat_\d+)\.html(\?p=\d+)?$/
        ],
        autoPager: {
            ele: ".autopagerize_page_element,.article-list-outer",
            observer: "article.article,.article-list-outer>li",
            next: "//li[@class='current']/following-sibling::li[1]/a | //a[span[text()='次へ']]",
            re: ".pager,.pager_fixed,.fractional-page",
            pageNum: () => nextLink.match(/\?p=(\d+)/)[1]
        },
        openInNewTab: ".autopagerize_page_element a[href]:not([target=_blank]),.article-list-outer a[href]:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "エロマニア　猿！",
        host: ["nisokudemosandal.blog.jp"],
        reg: /^https?:\/\/nisokudemosandal\.blog\.jp\/archives\/\d+\.html$/,
        imgs: ".article-body a[title]:has(>img)",
        autoDownload: [0],
        next: "//li[@class='prev']/a | //a[text()='前の記事']",
        prev: "//li[@class='next both']/a | //a[text()='次の記事']",
        customTitle: ".article-title",
        setFancybox: true,
        category: "nsfw2"
    }, {
        name: "Gravure Idols",
        host: ["gravureidols.top"],
        reg: /^https?:\/\/gravureidols\.top\/\d+\/\d+\/\d+\/[^\/]+\/$/,
        imgs: ".content-inner>div:not(.apss-social-share) a",
        button: [4],
        insertImg: [
            ["//p[a[img]]", 2, "//p[a[img]]"], 1
        ],
        go: 1,
        autoDownload: [0],
        next: ".jeg_prevnext_post a",
        prev: ".jeg_prevnext_post a",
        customTitle: ".jeg_post_title",
        category: "nsfw1"
    }, {
        name: "水着グラビア",
        host: ["www.mizugigurabia.com"],
        reg: /^https?:\/\/www\.mizugigurabia\.com\/\?p=\d+$/,
        init: () => {
            fun.clearAllTimer();
            fun.remove("#content-top");
        },
        imgs: () => fun.getImgSrcset(".article img[srcset]"),
        capture: () => _this.imgs(),
        customTitle: ".entry-title",
        setFancybox: ".article a:has(>img[srcset])",
        category: "nsfw2"
    }, {
        name: "エロ役場",
        host: ["eroyakuba.com"],
        reg: /^https?:\/\/eroyakuba\.com\/[^/]+\/(#.*)?$/,
        imgs: () => fun.getImgSrcset(".entry-thumbnail img,.flexitem_content img[srcset],.entry-content img[srcset]"),
        capture: () => _this.imgs(),
        setFancybox: ".entry-thumbnail img,.flexitem_content img[srcset],.entry-content img[srcset]",
        customTitle: "h1.entry-title",
        category: "nsfw2"
    }, {
        name: "エロ画像まとめ",
        host: ["geinou-nude.com"],
        reg: /^https?:\/\/geinou-nude\.com\/[^\/]+\/(#.*)?$/,
        imgs: ".post_thum>img,.post_content a[href*='/uploads/']",
        autoDownload: [0],
        next: "a.nav_link_l",
        prev: "a.f_row_r",
        customTitle: "h1.post_title",
        setFancybox: true,
        category: "nsfw2"
    }, {
        name: "裏ピク",
        host: ["www.urapic.com"],
        reg: /^https?:\/\/www\.urapic\.com\/blog-entry-\d+\.html$/,
        imgs: "//div[@class='entry-body']//a[img[@title]] | //div[@class='entry_body']//a[img[@title]]",
        customTitle: () => fun.gt(".entry-title,.entry_title>h1").replace(/[ｗ]+$/, ""),
        setFancybox: true,
        category: "nsfw2"
    }, {
        name: "復刻書林",
        host: ["reprint-kh.com"],
        reg: /^https?:\/\/reprint-kh\.com\/archives\/\d+$/,
        imgs: async () => {
            if (fun.ge(".gallery-row")) {
                await fun.getNP(".gallery-row", "//a[span[text()='次のページ']]");
            }
            if (fun.ge(".ngg-gallery-thumbnail-box")) {
                await fun.getNP(".ngg-gallery-thumbnail-box", "span.current+a");
            }
            thumbnailSrcArray = fun.getImgSrcArr(".tiled-gallery a img,.ngg-gallery-thumbnail-box a img");
            return fun.gae(".tiled-gallery a,.ngg-gallery-thumbnail-box a");
        },
        button: [4],
        insertImg: [
            [".single-post-main>.share,.single-post-main .content", 2], 2
        ],
        go: 1,
        autoDownload: [0],
        next: ".previous_post>a",
        prev: ".next_post>a",
        customTitle: () => fun.dt({
            s: ".single-post-title",
            d: /\d+photos/
        }),
        category: "nsfw2"
    }, {
        name: "力武靖写真集",
        host: ["lolita.lady.jp"],
        reg: /^https?:\/\/lolita\.lady\.jp\/\w+\/book\.html/,
        imgs: ".grid img",
        button: [4],
        insertImg: [
            [".grid", 1, ".grid"], 2
        ],
        autoDownload: [0],
        next: "div[align=right] a",
        prev: "div[align=left] a",
        customTitle: "#wrapper h3",
        category: "nsfw2"
    }, {
        name: "Rikitake.com",
        host: ["rikitake.com"],
        reg: /^https?:\/\/rikitake\.com\/g\/\d+$/,
        imgs: () => {
            videoSrcArray = fun.gae("video>source").map(e => e.src);
            return fun.gae("a[data-lightbox]");
        },
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: () => fun.dt({
            d: "|Rikitake.com"
        }),
        downloadVideo: true,
        category: "nsfw2"
    }, {
        name: "マブい女画像集",
        host: ["mabui-onna.com"],
        reg: /^https?:\/\/mabui-onna\.com\/blog-entry-\d+\.html/,
        init: () => {
            let texts = fun.gae("//div[@class='entry_body']//div[not(br)][not(a[img])][not(@class='fc2_footer')][not(@class='topentry_text')][not(@class='fc2button-clap')][not(@class='entry_footer')][not(@class='entry_data')]");
            if (texts.length > 0) {
                let te = fun.ge(".topentry_text,.entry_body");
                texts.forEach(e => insertBefore(te, e));
            }
            fun.createImgBox(".entry_body", 1);
        },
        imgs: ".topentry div>a:not([href*='.html'],[href*='.dmm.']),.wrapper section div>a:not([href*='.html'],[href*='.dmm.'])",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "div:has(>a[target]>img[alt]),div[id^='bnc_ad']"], 2
        ],
        insertImgAF: () => {
            let e = fun.ge("div:has(>a[href*='.dmm.'])");
            if (e) {
                let x = fun.ge(".entry_body");
                insertBefore(x, e);
            }
        },
        autoDownload: [0],
        next: "a.pager_next,.next_entry>a",
        prev: "a.pager_prev,.prev_entry>a",
        customTitle: () => fun.gt(".topentry_title span,.entry_title h1>strong").replace(/\d+枚/, "").replace(/\s\s/g, " ").trim(),
        category: "nsfw1"
    }, {
        name: "美女の集い",
        host: ["bizyonotudoi.com"],
        reg: /^https?:\/\/bizyonotudoi\.com\/d\/\d+\.html$/,
        imgs: ".thumb-img-area>img",
        button: [4],
        insertImg: [".kizi-thumb-list", 2],
        customTitle: ".page-title",
        css: "#pagemap-navi{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "ぷるるんお宝画像庫",
        link: "http://blog.livedoor.jp/pururungazou/",
        reg: /^https?:\/\/blog\.livedoor\.jp\/pururungazou\/archives\/\d+\.html$/,
        imgs: () => {
            videoSrcArray = fun.gae("video[src]").map(e => e.src);
            return fun.gae(`
            .entry-content img[src*='/pururungazou/imgs/'],
            .entry-content img[src*='/media/'],
            .article-body img[src*='/pururungazou/imgs/'],
            .article-body img[src*='/media/'],
            a[title][href*='thetv.jp/i/']
            `).map(e => {
                if (e.nodeName === "A") {
                    return e.href.replace(/\?w=.+$/, "");
                } else {
                    return e.src.replace(/-s(\.\w+)$/, "$1");
                }
            });
        },
        capture: () => _this.imgs(),
        customTitle: ".entry-title,.article-title",
        downloadVideo: true,
        category: "nsfw2"
    }, {
        name: "Love Asian Babes",
        host: ["amazon-love.com"],
        reg: /^https?:\/\/amazon-love\.com\/[^.]+\.html$/,
        imgs: () => {
            let max = fun.gt("//a[text()='Next Page »']", 2) || 1;
            return fun.getImg(".entry-content img", max, 7);
        },
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: "span.prev>a",
        prev: "span.next>a",
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "Permanent Bachelor",
        host: ["www.saladpuncher.com"],
        reg: /^https?:\/\/www\.saladpuncher\.com\/\d+\/\d+\/[^\/]+\//,
        init: () => fun.createImgBox(".entry-container", 2),
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr(".rsTmb>img");
            return thumbnailSrcArray.map(e => e.replace(/-\d+x\d+(\.\w+)$/, "$1"))
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        go: 1,
        customTitle: ".posttitle",
        category: "nsfw1"
    }, {
        name: "IVPhoto_Gravure",
        host: ["ivphoto.tistory.com"],
        reg: /^https?:\/\/ivphoto\.tistory\.com\/(m\/)?\d+/,
        imgs: ".imageblock img",
        button: [4],
        insertImg: [".entry-content,.blogview_content", 3],
        customTitle: ".tit_blogview,.hgroup h1",
        setFancybox: true,
        category: "nsfw1"
    }, {
        name: "MIC MIC IDOL",
        host: ["www.micmicidol.club"],
        reg: /^https?:\/\/www\.micmicidol\.club\/\d+\/\d+\/.+\.html$/,
        imgs: async () => {
            let imgsSrcArr = fun.gae(".entry-content a[href*=blog]").map(a => {
                let arr = a.href.split("/");
                if (arr.length === 9) {
                    arr[7] = "s16000";
                    return arr.join("/");
                } else {
                    return a.href;
                }
            });
            thumbnailSrcArray = imgsSrcArr.map(e => e.replace("/s16000/", "/w100/"));
            return imgsSrcArr;
        },
        button: [4],
        insertImg: [
            [".entry-content", 0, ".entry-content a[href*=blog]:not([data-fancybox]),.entry-content br"], 2
        ],
        customTitle: ".entry-title",
        topButton: true,
        css: ".post img{max-width:100% !important}.post-body{margin:0px!important;}",
        category: "nsfw2"
    }, {
        name: "MIC MIC IDOL - 分類自動翻頁",
        host: ["www.micmicidol.club"],
        reg: [
            /^https?:\/\/www\.micmicidol\.club\/(\?m=1)?$/,
            /^https?:\/\/www\.micmicidol\.club\/search/
        ],
        init: () => fun.run("$('.snips-image').unbind();$('.snips-image img').unbind();"),
        autoPager: {
            ele: ".blog-posts",
            next: "a.blog-pager-older-link",
            http: "https",
            observer: ".post.hentry",
            re: "#blog-pager",
            stop: (dom) => !fun.ge(".date-outer", dom),
            aF: () => {
                fun.gae("//div[@class='snips-image']/a[not(img)]").forEach(a => {
                    let script = fun.ge("script", a);
                    if (script) {
                        let code = script.innerText;
                        if (/document\.write/.test(code)) {
                            let [, url, , alt] = code.split('"');
                            let img = new Image();
                            img.src = url.replace("/s72-c/", "/w400/").replace("=s72-c", "=w400");
                            img.alt = alt;
                            insertAfter(script, img);
                        }
                    }
                });
            },
            pageNum: () => /start=/.test(nextLink) ? Number(nextLink.match(/start=(\d+)/)[1]) / 50 + 1 : 1
        },
        openInNewTab: ".date-outer a[href]:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "Kemono/Coomer",
        host: ["kemono.su", "coomer.su"],
        link: "https://kemono.su/fantia/user/17148/post/1633768",
        reg: /^https?:\/\/(kemono\.su|coomer\.su)\/.+\/post/,
        delay: 1000,
        include: "a.fileThumb.image-link",
        init: () => fun.createImgBox(".post__body", 2),
        imgs: () => {
            videoSrcArray = fun.gae("video>source").map(e => e.src);
            thumbnailSrcArray = fun.gae("a.fileThumb.image-link>img").map(e => {
                if (e.dataset.src) {
                    return /^\/\//.test(e.dataset.src) ? location.protocol + e.dataset.src : e.dataset.src;
                } else {
                    return e.src;
                }
            });
            return fun.gae("a.fileThumb.image-link");
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        go: 1,
        autoDownload: [0],
        next: "a.next",
        prev: "a.prev",
        customTitle: ".post__title",
        downloadVideo: true,
        topButton: true,
        fetch: 1,
        category: "nsfw2"
    }, {
        name: "Nekohouse",
        host: ["nekohouse.su"],
        reg: /^https?:\/\/nekohouse\.su\/.+\/post\/\d+/,
        delay: 1000,
        include: "div.fileThumb[href]",
        init: () => fun.createImgBox(".scrape__body", 2),
        imgs: () => {
            thumbnailSrcArray = fun.gae("div.fileThumb>img").map(e => {
                if (e.dataset.src) {
                    return /^\/\//.test(e.dataset.src) ? location.protocol + e.dataset.src : e.dataset.src;
                } else {
                    return e.src;
                }
            });
            return fun.gae("div.fileThumb[href]").map(e => fun.lo + e.getAttribute("href"));
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        go: 1,
        customTitle: ".scrape__title",
        topButton: true,
        fetch: 1,
        category: "nsfw2"
    }, {
        name: "套图之家",
        host: ["www.taotuhome.com", "taotuhome.com"],
        reg: /^https?:\/\/(www\.)?taotuhome\.com\/\d+\.html/i,
        imgs: () => fun.getImg(".single-content img[alt]", (fun.gt(".page-links>*:last-child", 2) || 1), 7),
        button: [4],
        insertImg: [".single-content", 2],
        autoDownload: [0],
        next: "a[rel=prev]:not([href^=j])",
        prev: "a[rel=next]:not([href^=j])",
        customTitle: () => fun.gt(".entry-title").replace("-套图之家", ""),
        category: "nsfw1"
    }, {
        name: "套图之家",
        host: ["www.taotuzj.com"],
        reg: /^https?:\/\/www\.taotuzj\.com\/\w+\/\d+\.html$/i,
        imgs: () => {
            let [, max] = fun.gu("//a[text()='尾页']").match(/_(\d+)\.html$/);
            let links = fun.arr(max, (v, i) => i == 0 ? fun.url : fun.url.replace(".html", "") + `_${i + 1}.html`);
            return fun.getImgA(".content img[alt]", links);
        },
        button: [4],
        insertImg: [".content", 2],
        customTitle: () => fun.title(/-套图之家.*$/),
        category: "nsfw1"
    }, {
        name: "套图之家M",
        host: ["m.taotuzj.com"],
        reg: /^https:\/\/m\.taotuzj\.com\/\w+\/\d+\.html$/i,
        imgs: () => {
            let [max] = fun.gt("a.allpage").match(/\d+$/);
            let links = fun.arr(max, (v, i) => i == 0 ? fun.url : fun.url.replace(".html", "") + `_${i + 1}.html`);
            return fun.getImgA(".content img[alt]", links);
        },
        button: [4],
        insertImg: [".content", 2],
        customTitle: () => fun.title(/-套图之家.*$/),
        category: "nsfw1"
    }, {
        name: "俊美图",
        host: ["www.meijuntu.com", "www.junmeitu.com", "www.jeya.de", "www.jeya.jp"],
        reg: () => fun.checkUrl({
            h: [
                /^(www\.)?meijuntu\.com$/,
                /^(www\.)?junmeitu\.com$/,
                /^(www\.)?jeya\.\w+$/,
            ],
            p: /\/([a-z]{2}\/)?\w+\/\w+\.html$/i,
            e: ".pictures img"
        }),
        imgs: async () => {
            let imgsArr = [];
            let max = fun.gt("#pages>*:last-child", 2) || 1;
            let url = siteUrl.replace(/(-\d+)?\.html$/, "");
            let links = fun.arr(max, (v, i) => url + "-" + (i + 1) + ".html");
            for (let i = 0; i < links.length; i++) {
                let dom = await new Promise(async resolve => {
                    for (let check = 1; check <= 100; check++) {
                        let res = await fetch(links[i]);
                        if (res.status == 304 || res.status == 200) {
                            let buffer = await res.arrayBuffer();
                            let decoder = new TextDecoder(document.characterSet || document.charset || document.inputEncoding);
                            let htmlText = decoder.decode(buffer);
                            let dom = fun.doc(htmlText);
                            resolve(dom);
                            break;
                        } else {
                            fun.showMsg(`第${i + 1}頁${res.status}重試第${check}次`, 2900);
                            await fun.delay(3000, 0);
                        }
                    }
                });
                let imgs = fun.gae(".pictures img", dom);
                let te = fun.gae(".pictures img").at(-1);
                imgs.forEach(e => {
                    imgsArr.push(e.cloneNode(true));
                    if (i != 0) insertAfter(te, e.cloneNode(true));
                });
                if (i != 0) {
                    let ce = fun.gae("#pages");
                    let re = fun.gae("#pages", dom);
                    if (ce.length == re.length) {
                        ce.forEach((e, i) => (e.outerHTML = re[i].outerHTML));
                    }
                }
                await fun.delay(1000, 0);
            }
            return imgsArr;
        },
        button: [4],
        insertImg: [".pictures", 1],
        autoDownload: [0],
        next: "//span[contains(text(),'下一')]/following-sibling::a",
        prev: "//span[contains(text(),'上一')]/following-sibling::a",
        customTitle: "h1.title",
        css: ".pre_picture,.next_picture{display:none!important}",
        category: "nsfw1"
    }, {
        name: "妹子图",
        host: ["mt316.com"],
        reg: /^https?:\/\/(www\.)?mt316\.com\/\w+\/\d+\.html$/,
        imgs: ".m-list-content img",
        button: [4],
        insertImg: [".m-list-content", 2],
        autoDownload: [0],
        next: ".sxpage_l>a",
        prev: 1,
        customTitle: ".m-list-tools>h2",
        css: ".m-list-content img{max-width:100%!important}",
        category: "nsfw1"
    }, {
        name: "心动美图",
        host: ["www.wai76.com", "www.wai77.com"],
        reg: /^https?:\/\/www\.wai\d{2}\.com\/[^\/]+\//,
        include: ".entry-content div[data-src]",
        imgs: async () => {
            let divDataSrcs = await fun.getImgA(".entry-content div[data-src]", ".page-links a");
            thumbnailSrcArray = divDataSrcs.map(src => {
                let arr = src.split("/");
                arr[arr.length - 1] = "thumbnail/s" + arr[arr.length - 1];
                return arr.join("/");
            });
            return divDataSrcs;
        },
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "美女集合",
        host: ["meinvjihe.cc"],
        reg: /^https?:\/\/meinvjihe\.cc\/thread-\d+\.htm$/,
        imgs: ".message>img",
        button: [4],
        insertImg: [".message", 2],
        customTitle: ".media-body>span.break-all",
        category: "nsfw1"
    }, {
        name: "美女库",
        host: ["www.meinvku.org.cn"],
        reg: /^https?:\/\/www\.meinvku\.org\.cn\/album\/\d+(\/)?(\.html)?$/,
        imgs: async () => {
            let firstImg = fun.attr("#img_src img", "src");
            let [imgDir] = firstImg.match(/.+\//);
            let [, max] = fun.gt("//span[contains(text(),'页次')]").match(/\/(\d+)/);
            let arr = fun.arr(max, (v, i) => imgDir + (i + 1) + ".jpg");
            let a = fun.ge("#img_src");
            if (a) a.outerHTML = `<div class="CustomPictureBox">${fun.ge("img", a).outerHTML}</div>`;
            return arr;
        },
        button: [4],
        insertImg: [".CustomPictureBox", 1],
        css: ".CustomPictureBox>img{max-width:100%}",
        category: "nsfw1"
    }, {
        name: "图宅网/咔咔西三/YouFreeX",
        reg: () => fun.checkUrl({
            h: [
                "www.tuzac.com",
                "www.kkc3.com",
                "www.youfreex.com"
            ],
            p: "/file/"
        }),
        imgs: async () => {
            let a = fun.ge("#the-photo-link");
            if (a) a.outerHTML = a.innerHTML;
            let max = fun.attr("#auto-play", "total");
            let [id] = fun.attr("#auto-play", "data").match(/\d+/);
            fun.showMsg(displayLanguage.str_05, 0);
            let fetchNum = 0;
            return fun.arr(max, (v, i) => fetch(`/api/?ac=get_album_images&id=${id}&num=${i + 1}`).then(res => res.json()).then(json => {
                fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${max}`, 0);
                return json.src;
            }));
        },
        button: [4],
        insertImg: ["#task,#fdp-photo,#fdp-photo-old", 2],
        customTitle: () => fun.dt({
            s: ".fc-text-content>h1",
            d: /(\[\d+P\]|\n|\(\d+P\))/gi
        }),
        css: ".content-container .content{margin-right:0px!important}.ad-container,.fdp-click-area,.ad-side-right,.footer{display:none!important}",
        category: "nsfw2"
    }, {
        name: "图宅网/咔咔西三/YouFreeX",
        reg: () => fun.checkUrl({
            h: [
                "www.tuzac.com",
                "www.kkc3.com",
                "www.youfreex.com"
            ]
        }),
        css: ".ad-container{display:none!important}",
        category: "ad"
    }, {
        name: "七仙子图片",
        host: ["www.qixianzi.com"],
        reg: /^https?:\/\/www\.qixianzi\.com\/\w+\/\d+\.html$/,
        imgs: async () => {
            let a = fun.ge(".picture_content>a");
            if (a) a.outerHTML = a.innerHTML;
            await fun.getNP(".picture_content img", "//a[text()='下一页']", null, ".pagination", 0, null, 0);
            return fun.gae(".picture_content img");
        },
        button: [4],
        insertImg: [".picture_content", 2],
        next: "//li[contains(text(),'上一篇')]/a",
        prev: "//li[contains(text(),'下一篇')]/a",
        customTitle: "h1.diy-h1",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "nsfw1"
    }, {
        name: "七仙子图片M",
        host: ["www.qixianzi.com"],
        link: "https://www.qixianzi.com/e/wap/",
        reg: /^https?:\/\/www\.qixianzi\.com\/e\/wap\/show\.php\?/,
        imgs: ".arcmain img",
        button: [4],
        insertImg: [".arcmain", 1],
        customTitle: ".header>span",
        category: "nsfw1"
    }, {
        name: "嘿～色女孩",
        host: ["heysexgirl.com"],
        reg: /^https?:\/\/heysexgirl\.com\/archives\/\d+$/,
        imgs: () => {
            let max = fun.gt(".page-links>*:last-child");
            return fun.getImg(".entry-content p>a,.entry-content p>img", max, "4");
        },
        button: [4],
        insertImg: [".entry-container", 2],
        autoDownload: [0],
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: "h1.page-title",
        category: "nsfw2"
    }, {
        name: "嘿～色女孩 分類自動翻頁",
        enable: 1,
        reg: [
            /^https?:\/\/heysexgirl\.com\/(page\/\d+)?$/,
            /^https?:\/\/heysexgirl\.com\/archives\/category\/\w+(\/page\/\d+)?$/
        ],
        init: async () => await fun.waitEle(".blog-posts-wrapper[style]"),
        autoPager: {
            mode: 1,
            waitEle: ".blog-posts-wrapper[style]",
            ele: ".blog-posts-wrapper",
            observer: ".blog-posts-wrapper",
            next: "span.current+a",
            re: ".nav-links",
            pageNum: () => nextLink.match(/\d+$/)[0]
        },
        openInNewTab: ".blog-posts-wrapper a:not([target=_blank])",
        css: ".blog-posts-wrapper article.has-post-thumbnail .entry-container{margin:0 auto 0 !important}",
        category: "autoPager"
    }, {
        name: "2LSP",
        host: ["2lsp.xyz"],
        reg: /^https?:\/\/2lsp\.xyz\/[^/]+\/$/,
        include: ".entry-content img[data-srcset]",
        exclude: ".content-hide-tips",
        init: () => fun.clearAllTimer(),
        observerClick: ".swal2-close",
        imgs: () => fun.gae(".entry-content img[data-srcset]").map(e => e.dataset.srcset),
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: ".article-nav-prev>a",
        prev: ".article-nav-next>a",
        customTitle: "h1.entry-title",
        fancybox: {
            v: 3,
            insertLibrarys: 1
        },
        category: "nsfw1"
    }, {
        name: "2LSP",
        host: ["2lsp.xyz"],
        reg: /^https?:\/\/2lsp\.xyz\//,
        observerClick: ".swal2-close",
        category: "none"
    }, {
        name: "性趣套图",
        host: ["tt.539765.xyz", "tt.xqtt.de"],
        reg: () => fun.checkUrl({
            e: [
                "//div[@class='logo']/a[text()='性趣套图']",
                ".entry img"
            ],
            p: "/e/action/ShowInfo.php"
        }),
        imgs: async () => {
            if (fun.ge("embed[src*='sendvid']")) {
                let links = fun.gae("embed").map(e => e.src);
                let resArr = links.map(url => fun.xhrDoc(url).then(dom => fun.ge("video>source", dom).src));
                videoSrcArray = await Promise.all(resArr);
            }
            return fun.getImg(".entry img", fun.gt("a[title=总数]"), 8)
        },
        button: [4],
        insertImg: ["//div[@class='entry']//img/parent::*", 1],
        autoDownload: [0],
        next: "//p[contains(text(),'上一')]/a",
        prev: "//p[contains(text(),'下一')]/a",
        customTitle: ".contitle",
        css: "aside.side{display:none!important;}.main-content{margin-left:0px!important;}body{background:#EDEDED!important;}",
        category: "nsfw2"
    }, {
        name: "苍井优图",
        host: ["34.28tyu.com", "w33.28rty.com", "33.28ery.com", "www.28wer.com", "www.028kkp.com", "sldlxz.com", "34.yuxiangcao.com", "282471.xyz", "284019.xyz"],
        reg: () => fun.checkUrl({
            e: "//div[@class='logo']/a[text()='苍井优图']",
            p: "/e/action/ShowInfo.php"
        }),
        imgs: "img[id^='aimg'],.entry img",
        button: [4],
        insertImg: [".entry", 2],
        autoDownload: [0],
        next: "//p[contains(text(),'上一')]/a",
        prev: "//p[contains(text(),'下一')]/a",
        customTitle: ".contitle",
        category: "nsfw2"
    }, {
        name: "YY美女图片/美眉大宝贝",
        host: ["www.yyzhenshun.com", "bb.meinvnews.com"],
        reg: /^https?:\/\/(www\.yyzhenshun\.com|bb\.meinvnews\.com)\/\d+\.html/i,
        imgs: () => {
            if (fun.ge(".ep-pages a")) {
                let [, max] = fun.gu("//a[text()='尾页']").match(/(\d+)\.html$/);
                return fun.getImg(".wzy_body img", max, 3);
            } else {
                return fun.gae(".wzy_body img[alt]");
            }
        },
        button: [4],
        insertImg: ["//p[img] | //p[strong[img]] | //div[@class='wzy_body']", 2],
        autoDownload: [0],
        next: "//li[contains(text(),'上一篇')]/a",
        prev: "//li[contains(text(),'下一篇')]/a",
        customTitle: ".wzy_tit",
        css: "body>section[id],a[href*=download]{display:none!important}header{margin-top:0px!important}.wzy_body{text-indent:unset!important}@media (max-width:768px){.wzy_body{margin:0px!important}}@media (max-width:768px){.neiye{margin:0px!important}}",
        category: "nsfw1"
    }, {
        name: "爱看美图网",
        host: ["www.ikmt.net", "m.ikmt.net"],
        reg: /^https?:\/\/(www|m)\.ikmt\.net\/\w+\/\w+\/\d+\/\d+\.html/i,
        imgs: () => {
            let mouse_page = fun.ge("#mouse_page");
            if (mouse_page) {
                let max = fun.gt("//li[a[text()='下一页']]", 2) || fun.gt("//a[text()='下一张']", 2).match(/\/(\d+)/)[1];
                return fun.getImg("#picBody img,.post-content img", max, 9);
            } else {
                return fun.gae("#picBody img,.post-content img");
            }
        },
        button: [4],
        insertImg: ["#picBody,.post-content", 2],
        autoDownload: [0],
        next: "//div[contains(text(),'上一篇')]/a",
        prev: "//div[contains(text(),'下一篇')]/a",
        customTitle: ".articleV2Title>h1,.mm-title",
        css: ".articleV2Body img{max-width:100% !important}",
        category: "nsfw1"
    }, {
        name: "AVJB/The AV Porn",
        host: ["avjb.com", "theavporn.com"],
        link: "https://avjb.github.io/，https://avjb.com/albums/，https://theavporn.com/albums/",
        reg: /^https?:\/\/(avjb\.com|avjb\.fun|av\d{2,3}\.fun|bav\d{2,3}\.xyz|bbav\d{3}\.com|onebookcms\.com|theavporn\.com|thedemovideos\.com|thepa\d+\.\w+|the\d+\.\w+)\/(\w{2}\/)?albums\/\d+\/[\w-]+\//i,
        init: () => {
            new MutationObserver((mutations, observer) => {
                if (fun.ge(".chatra--webkit")) {
                    fun.ge(".chatra--webkit").remove();
                    observer.disconnect();
                }
            }).observe(document.body, MutationObserverConfig);
        },
        imgs: ".images>a",
        thums: ".images>a>img",
        button: [4],
        insertImg: [
            [".images", 2, ".images"], 2
        ],
        customTitle: ".headline>h1",
        css: ".sponsor,.chatra--webkit{display:none!important}",
        category: "nsfw2"
    }, {
        name: "AVJB 去廣告",
        reg: /^https?:\/\/(avjb\.com|avjb\.fun|av\d{2}\.fun|bav\d{2}\.xyz|bbav\d{3}\.com|onebookcms\.com|theavporn\.com|thedemovideos\.com|thepa\d+\.\w+|the\d+\.\w+)\//i,
        init: () => {
            new MutationObserver((mutations, observer) => {
                if (fun.ge(".chatra--webkit")) {
                    fun.ge(".chatra--webkit").remove();
                    observer.disconnect();
                }
            }).observe(document.body, MutationObserverConfig);
        },
        css: ".sponsor,.chatra--webkit{display:none!important}",
        category: "ad"
    }, {
        name: "Asian To Lick",
        host: ["asiantolick.com"],
        reg: /^https?:\/\/asiantolick\.com\/post/,
        init: () => fun.createImgBox(".spotlight-group", 2),
        imgs: () => {
            thumbnailSrcArray = fun.gae("div[data-src]>img").map(e => e.src);
            return fun.gae("div[data-src]").map(e => e.dataset.src);
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".spotlight-group"], 2
        ],
        customTitle: "h1",
        css: "#touch_to_see{display:none!important}",
        category: "nsfw2"
    }, {
        name: "Models Vibe",
        host: ["www.modelsvibe.com"],
        reg: /^https?:\/\/www\.modelsvibe\.com\/[^/]+\/$/,
        include: ".td-post-content img",
        init: () => {
            let ele = fun.ge("//p[br and not(contains(text(),'[ad_1]'))]");
            if (!!ele) {
                ele = ele.cloneNode(true);
                fun.gae("img", ele).forEach(img => img.remove());
                let tE = fun.ge(".td-post-content");
                insertBefore(tE, ele);
            }
            let ele2 = fun.ge("//p[contains(text(),'Number of pictures')]");
            if (!!ele2) {
                if (ele2.previousSibling.tagName == "P") {
                    ele2.previousSibling.innerHTML = ele2.previousSibling.innerHTML + "<br>" + ele2.innerText;
                    let e = ele2.previousSibling;
                    let te = ele2.previousSibling.parentNode;
                    insertBefore(te, e);
                }
            }
        },
        imgs: () => {
            if (fun.ge(".page-nav")) {
                let max = fun.gt(".page-nav>*:last-child", 2);
                return fun.getImg(".td-post-content img", max, 4);
            } else if (fun.ge(".td-post-content img[srcset]")) {
                return fun.getImgSrcset(".td-post-content img");
            } else {
                return fun.gae(".td-post-content img");
            }
        },
        button: [4],
        insertImg: [".td-post-content .tdb-block-inner", 2],
        go: 1,
        customTitle: "h1.tdb-title-text",
        css: ".tdb_header_menu .tdb-menu .tdb-mega-menu-inactive,.tdb_header_menu .tdb-menu .tdb-menu-item-inactive{pointer-events:auto!important}.tdb_header_menu .tdb-menu .tdb-mega-menu-inactive > ul,.tdb_header_menu .tdb-menu .tdb-menu-item-inactive>ul{visibility:unset!important;opacity:1!important}.tdb_header_menu .tdb-normal-menu ul .tdb-menu-item{list-style-type:auto!important}",
        category: "nsfw1"
    }, {
        name: "Models Vibe - 分類自動翻頁",
        reg: /^https?:\/\/www\.modelsvibe\.com\/(albums\/.+)?(page\/\d+\/)?$/,
        init: () => {
            /page\/\d+\//.test(fun.lp) ? currentPageNum = Number(fun.lp.match(/\/page\/(\d+)/)[1]) : currentPageNum = 1;
        },
        autoPager: {
            ele: ".td_flex_block:not(.td-flex-radius),.td_block_inner.tdb-block-inner",
            observer: ".td-cpt-post",
            next: () => {
                let url = siteUrl.replace(/page\/\d+\/?/, "") + `page/${currentPageNum += 1}/`;
                return url;
            },
            re: ".page-nav,.td-load-more-wrap",
            stop: (dom) => !!fun.ge(".td-404-title", dom),
            bF: (dom) => {
                fun.gae("span[data-img-url]", dom).forEach(span => {
                    span.classList.add("td-animation-stack-type0-2");
                    span.style.backgroundImage = `url("${span.dataset.imgUrl}")`;
                });
            },
            pageNum: () => currentPageNum
        },
        openInNewTab: ".td-cpt-post a:not([target=_blank])",
        css: ".tdi_60.td-a-rec{display:none!important;}.tdb_header_menu .tdb-menu .tdb-mega-menu-inactive,.tdb_header_menu .tdb-menu .tdb-menu-item-inactive{pointer-events:auto!important}.tdb_header_menu .tdb-menu .tdb-mega-menu-inactive > ul,.tdb_header_menu .tdb-menu .tdb-menu-item-inactive>ul{visibility:unset!important;opacity:1!important}.tdb_header_menu .tdb-normal-menu ul .tdb-menu-item{list-style-type:auto!important}",
        category: "autoPager"
    }, {
        name: "Models Vibe - 修正選單CSS和去廣告",
        reg: /^https?:\/\/www\.modelsvibe\.com\//,
        css: ".tdi_60.td-a-rec{display:none!important;}.tdb_header_menu .tdb-menu .tdb-mega-menu-inactive,.tdb_header_menu .tdb-menu .tdb-menu-item-inactive{pointer-events:auto!important}.tdb_header_menu .tdb-menu .tdb-mega-menu-inactive > ul,.tdb_header_menu .tdb-menu .tdb-menu-item-inactive>ul{visibility:unset!important;opacity:1!important}.tdb_header_menu .tdb-normal-menu ul .tdb-menu-item{list-style-type:auto!important}",
        category: "ad"
    }, {
        name: "Beautiful Leg",
        host: ["www.beatifulleg.com"],
        reg: /^https?:\/\/www\.beatifulleg\.com\/[\w-]+\/\d+$/,
        imgs: ".details-box-inner img",
        button: [4],
        insertImg: [".details-box-inner", 2],
        customTitle: ".title",
        css: ".details-box-inner{padding:unset !important}.details-box-inner img{margin:0!important;}",
        category: "nsfw2"
    }, {
        name: "Digital AI Gallery",
        host: ["larose.vip"],
        reg: /^https?:\/\/larose\.vip\/[^\/]+\/$/,
        init: () => fun.createImgBox(".entry-content p:has(>img)", 1),
        imgs: ".entry-content img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".entry-content p:has(>img)"], 2
        ],
        go: 1,
        autoDownload: [0],
        next: "a[rel=prev]",
        prev: "a[rel=next]",
        customTitle: () => fun.dt({
            s: ".wp-block-post-title",
            d: " – Larose.VIP"
        }),
        category: "nsfw2"
    }, {
        name: "Goddess247/BestPrettyGirl/Girl Sweetie/Girl Dreamy/BestGirlSexy",
        reg: () => fun.checkUrl({
            h: [
                "goddess247.com",
                "bestprettygirl.com",
                "girlsweetie.com",
                "girldreamy.com",
                "bestgirlsexy.com"
            ]
        }) && !/^\/tag\/|^\/category\//.test(fun.lp),
        init: () => fun.createImgBox("//p[img] | //img[@class='aligncenter size-full']", 1),
        imgs: ".elementor-widget-container p img[alt],.elementor-widget-container img.aligncenter.size-full,.elementor-widget-theme-post-content img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "//p[img] | //img[@class='aligncenter size-full']"], 2
        ],
        go: 1,
        customTitle: () => fun.title(/ - Goddess247| - BestPrettyGirl| - Girl Sweetie| - Girl Dreamy| - BestGirlSexy/),
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw1"
    }, {
        name: "niwatori.my.id",
        link: "https://niwatori.my.id/2023/",
        reg: () => fun.checkUrl({
            h: "niwatori.my.id",
            p: /^\/\d+\/\d+\/\d+\//,
            e: ".wp-block-gallery img"
        }),
        imgs: () => fun.getImgSrcset(".wp-block-gallery img"),
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "Sexy Girl Pictures",
        reg: () => fun.checkUrl({
            h: "beautypics.org",
            p: /^\/archives\/\d+$/,
            e: ".page-content img"
        }),
        imgs: () => {
            if (fun.ge(".page-content img[srcset]")) {
                return fun.getImgSrcset(".page-content img[srcset]");
            } else {
                return fun.gae(".page-content img");
            }
        },
        button: [4],
        insertImg: [".page-content", 2],
        customTitle: () => fun.title(" – Sexy Girl Pictures"),
        category: "nsfw1"
    }, {
        name: "SexyGirl",
        host: ["sexygirl.one"],
        reg: /^https?:\/\/sexygirl\.one\/\w+\/[^\/]+\/$/,
        imgs: ".entry-content img",
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".s-title",
        category: "nsfw1"
    }, {
        name: "Danryoku",
        host: ["danryoku.com"],
        reg: /^https?:\/\/danryoku\.com\/[^\/]+\/$/,
        imgs: ".dynamic-entry-content img",
        button: [4],
        insertImg: [".dynamic-entry-content", 2],
        go: 1,
        customTitle: "h1.gb-headline",
        category: "nsfw1"
    }, {
        name: "MINISUKA",
        host: ["minisuka.top"],
        reg: /^https?:\/\/minisuka\.top\/\d+\/\d+\/\d+\/[^\/]+\/$/,
        imgs: ".wp-block-gallery img",
        button: [4],
        insertImg: [
            [".entry-content", 0, ".wp-block-gallery"], 2
        ],
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "eyval.net",
        host: ["www.eyval.net"],
        reg: /^https?:\/\/www\.eyval\.net\/\d+\/\d+\/[\w-]+\.html/,
        imgs: async () => {
            let imgsSrcArr = fun.gae(".entry-content a[href*=blog]").map(a => {
                let arr = a.href.split("/");
                if (arr.length === 9) {
                    arr[7] = "s16000";
                    return arr.join("/");
                } else {
                    return a.href;
                }
            });
            thumbnailSrcArray = imgsSrcArr.map(e => e.replace("/s16000/", "/w100/"));
            return imgsSrcArr;
        },
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "eyval.net - 分類自動翻頁",
        host: ["www.eyval.net"],
        reg: /^https?:\/\/www\.eyval\.net\//,
        autoPager: {
            mode: 1,
            ele: ".blog-posts>.date-outer",
            next: "a.blog-pager-older-link",
            observer: ".blog-posts>.date-outer",
            re: "#blog-pager",
            stop: (dom) => !fun.ge(".date-outer", dom),
            pageNum: () => (currentPageNum += 1)
        },
        openInNewTab: ".date-outer a[href]:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "PhimVu/Kutekorean.Com",
        host: ["m.phimvuspot.com", "m.kutekorean.com"],
        reg: [
            /^https?:\/\/m\.phimvuspot\.com\/\w+\/\w+\.cfg/i,
            /^https?:\/\/m\.kutekorean\.com\/[^\.]+\.html/i
        ],
        imgs: async () => {
            let max;
            try {
                [max] = fun.gt("h1.post-title").match(/\d+$/);
            } catch {
                max = 1;
            }
            return /\?m=1/.test(siteUrl) ? await fun.getImg(".post-content img", max, "8") : await fun.getImg(".post-content img", max);
        },
        button: [4],
        insertImg: [".post-content", 2],
        customTitle: () => fun.dt({
            s: ".post-title",
            d: [
                /[\s\|]+Page[\s\d\/]+/,
                "E-CUP"
            ]
        }),
        category: "nsfw2"
    }, {
        name: "Poringa!",
        host: ["www.poringa.net", "m.poringa.net"],
        reg: /^https?:\/\/(www|m)\.poringa\.net\/posts\//i,
        imgs: ".post-content img,.content-post-img>img",
        button: [4],
        insertImg: [".post-content,.content.short", 3],
        customTitle: ".post-title,h1.title",
        category: "nsfw2"
    }, {
        name: "HayVn.Net",
        reg: () => fun.checkUrl({
            h: "www.hayvn.net",
            p: /^\/\d+\/\d+\/[^\.]+\.html$/,
            e: ".separator>a"
        }),
        imgs: () => fun.gau(".separator>a").map(u => u.replace("/s1600/", "/s16000/")),
        button: [4],
        insertImg: [
            [".separator", 1, ".separator"], 2
        ],
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "HayVn.Net",
        reg: () => fun.checkUrl({
            h: "www.hayvn.net"
        }),
        imgs: ".entry-content img",
        customTitle: ".entry-title",
        setFancybox: true,
        category: "nsfw1"
    }, {
        name: "YeuGai.Net",
        host: ["yeugai.org"],
        reg: /^https?:\/\/yeugai\.org\/[^\/]+\/$/i,
        init: async () => {
            await fun.waitEle(".mirror-image img");
            fun.run("jQuery(document).off();");
            let e = fun.ge(".relpost-thumb-wrapper");
            let f = fun.ge(".penci-entry-footer");
            if (e && f) {
                insertBefore(f, e);
            }
        },
        imgs: () => {
            videoSrcArray = fun.gau("video>source[type='video/mp4']+a[href*='.mp4']");
            if (fun.ge(".mirror-image img[src*=blog]")) {
                let imgsSrcArr = fun.gae(".mirror-image img[src*=blog]").map(e => {
                    let arr = e.src.split("/");
                    if (arr.length === 9) {
                        arr[7] = "s16000";
                        return arr.join("/");
                    } else {
                        return e.src;
                    }
                });
                thumbnailSrcArray = imgsSrcArr.map(e => e.replace("/s16000/", "/w100/"));
                return imgsSrcArr;
            } else {
                return fun.gae(".mirror-image img");
            }
        },
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: () => fun.dt({
            s: ".entry-title",
            d: /^Ảnh.+Xinh\s|^Clip.+Em\s/
        }),
        downloadVideo: true,
        category: "nsfw2"
    }, {
        name: "sekushipic",
        host: ["sekushipic.blogspot.com"],
        reg: /^https?:\/\/sekushipic\.blogspot\.com\/\d+\/\d+\/[^\.]+\.html/,
        imgs: ".separator>a",
        thums: ".separator img",
        button: [4],
        insertImg: [
            [".separator", 1, ".separator,.separator~br"], 2
        ],
        autoDownload: [0],
        next: "a.blog-pager-older-link",
        prev: "a.blog-pager-newer-link",
        customTitle: ".entry-title",
        css: ".post-header{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "IDOL AREA",
        host: ["idolarea.blogspot.com"],
        reg: /^https?:\/\/idolarea\.blogspot\.com\/\d+\/\d+\/[^\.]+\.html/,
        imgs: ".separator>a",
        thums: ".separator img",
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "Nude Models",
        reg: () => !hasTouchEvents && fun.lh === "blognudemodels.blogspot.com",
        init: async () => await fun.waitEle("#gadget-dock"),
        imgs: ".separator>a",
        capture: ".separator>a",
        SPA: () => document.URL.includes(".html"),
        customTitle: "title",
        observerTitle: true,
        category: "nsfw2"
    }, {
        name: "Nude Models",
        reg: /^https?:\/\/blognudemodels\.blogspot\.com\/\d+\/\d+\/[^\.]+\.html\?m=1$/,
        init: async () => await fun.waitEle(".separator img"),
        imgs: ".separator>a",
        button: [4],
        insertImg: [
            [".separator", 1, ".separator,.separator~br"], 2
        ],
        customTitle: "title",
        category: "nsfw2"
    }, {
        name: "Curvy Asian",
        host: ["curvyasian.blogspot.com"],
        reg: /^https?:\/\/curvyasian\.blogspot\.com\/\d+\/\d+\/[^\.]+\.html/,
        imgs: "#blogger-gallery a.item-link",
        thums: "#blogger-gallery a.item-link img",
        button: [4],
        insertImg: ["#blogger-gallery", 2],
        autoDownload: [0],
        next: "a.blog-pager-older-link",
        prev: "a.blog-pager-newer-link",
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "500 Brothers",
        host: ["500brothersfun.blogspot.com"],
        reg: /^https?:\/\/500brothersfun\.blogspot\.com\/\d+\/\d+\/[^\.]+\.html/,
        init: () => fun.createImgBox(".separator", 1),
        imgs: () => fun.gau(".separator>a").map(u => u.replace("/s1600/", "/s16000/")),
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".separator~br,.separator"], 2
        ],
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "min: archive/True Pic",
        host: ["min-bin.blogspot.com", "truepichk.blogspot.com"],
        reg: /^https?:\/\/(min-bin|truepichk)\.blogspot\.com\/\d+\/\d+\/[^\.]+\.html/,
        imgs: () => fun.gau(".separator>a").map(u => u.replace("/s1600/", "/s16000/")),
        button: [4],
        insertImg: [".post-body", 2],
        autoDownload: [0],
        next: "a.blog-pager-older-link",
        prev: "a.blog-pager-newer-link",
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "Tabakus Gallery",
        reg: /^https?:\/\/tabakus\.blogspot\.com\/\d+\/\d+\/[^\.]+\.html/,
        init: async () => {
            await fun.waitEle(".separator img");
            fun.createImgBox(".separator:has(>a>img[height])", 1);
        },
        imgs: ".separator>a:has(>img[height])",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".separator:has(>a>img),.separator~br"], 2
        ],
        customTitle: ".post_item>h1",
        category: "nsfw2"
    }, {
        name: "Graphis",
        host: ["20sanctuary-grahpis.blogspot.com"],
        reg: /^https?:\/\/20sanctuary-grahpis\.blogspot\.com\/\d+\/\d+\/[^\.]+\.html/,
        imgs: () => {
            thumbnailSrcArray = fun.gae(".separator>a img").map(e => e.src.replace("/s320/", "/w100/"));
            return fun.gau(".separator>a").map(u => u.replace("/s1600/", "/s16000/"));
        },
        button: [4],
        insertImg: [".post-body", 2],
        customTitle: ".post_item>h1,.entry-titleS",
        category: "nsfw2"
    }, {
        name: "Asia Idols",
        host: ["asiaidols.wordpress.com"],
        reg: /^https?:\/\/asiaidols\.wordpress\.com\/\d+\/\d+\/\d+\/[^\/]+\/$/,
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr("img[alt='image host']");
            let imageHostLinks = fun.gau("//a[img[@alt='image host']]");
            return fun.getImageHost(imageHostLinks);
        },
        button: [4],
        insertImg: [".entry-content", 3],
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "Asia Porn Photo/Asses Photo/Nuded Photo",
        host: ["www.asiapornphoto.com", "www.assesphoto.com", "www.nudedxxx.com"],
        reg: /^https?:\/\/www\.(asiapornphoto|assesphoto|nudedxxx)\.com\/[^\.]+\.shtml$/,
        init: () => fun.createImgBox(".image-container", 1),
        imgs: ".image-container img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".image-container"], 2
        ],
        customTitle: ".container h1",
        category: "nsfw2"
    }, {
        name: "BingMM",
        reg: () => fun.checkUrl({
            h: "bingmm.com"
        }),
        imgs: async () => {
            fun.createImgBox(".entry-content p:has(>img)", 1);
            return fun.gae(".entry-content img");
        },
        SPA: () => document.URL.includes(".html"),
        observerURL: true,
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".entry-content p:has(>img)"], 2
        ],
        autoDownload: [0],
        next: () => fun.gu("a[rel=prev]"),
        prev: 1,
        customTitle: "#post-title",
        category: "nsfw1"
    }, {
        name: "Chinese Nude Art Photos",
        host: ["chinesenudeart.blogspot.com"],
        reg: /^https?:\/\/chinesenudeart\.blogspot\.com\/\d+\/\d+\/[\w-]+\.html/i,
        imgs: ".entry-content a[href]",
        thums: ".entry-content a[href]>img",
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: "a.blog-pager-older-link",
        prev: "a.blog-pager-newer-link",
        customTitle: () => fun.dt({
            s: ".entry-title",
            d: [
                "Chinese beautiful model Amanda -",
                "Beautiful Chinese girl -",
                "Beautiful Chinese girl ",
                "Chinese Beautiful girl -",
                " |18+ Nude model Amateur"
            ]
        }),
        css: "@media only screen and (max-width:479px){#outer-wrapper{margin:0px!important;width:100%!important}}",
        category: "nsfw1"
    }, {
        name: "CUTE GIRLS ADDICT",
        host: ["cutegirlsaddict.blogspot.com"],
        reg: /^https?:\/\/cutegirlsaddict\.blogspot\.com\/\d+\/\d+\/[a-z0-9-]+\.html/i,
        imgs: async () => {
            thumbnailSrcArray = fun.gae(".separator>a>img").map(e => {
                let arr = e.src.split("/");
                arr[7] = "w100";
                return arr.join("/");
            });
            let srcArr = fun.gau(".separator>a");
            let firstSrcArr = srcArr[0].split("/");
            if (firstSrcArr.length === 9) {
                firstSrcArr[7] = "s16000";
                let testMaxSrc = firstSrcArr.join("/");
                let obj = await fun.checkImgStatus(testMaxSrc);
                debug("\n確認圖片狀態\n", obj);
                if (obj.ok) {
                    srcArr = srcArr.map(src => {
                        let arr = src.split("/");
                        arr[7] = "s16000";
                        return arr.join("/");
                    });
                    return srcArr;
                } else {
                    return srcArr;
                }
            } else {
                return srcArr;
            }
        },
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: "h1.post-title,h3.entry-title",
        category: "nsfw1"
    }, {
        name: "4KUP",
        host: ["4kup.net"],
        reg: /^https?:\/\/4kup\.net\/(?!getlink)[^\/]+\/$/,
        exclude: "//button[text()='Click here to continue']",
        imgs: "a.thumb-photo",
        thums: "a.thumb-photo>img",
        button: [4],
        insertImg: ["#gallery", 2],
        go: 1,
        autoDownload: [0],
        next: "a[rel=prev]",
        prev: "a[rel=next]",
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "Space of Miss Beautiful",
        reg: () => fun.checkUrl({
            h: "spacemiss.com",
            e: [
                ".td-post-content .tdb-block-inner.td-fix-index",
                ".tdb-title-text"
            ]
        }),
        init: async () => {
            let img = await fun.waitEle(".td-post-content .tdb-block-inner.td-fix-index img");
            let video = fun.ge(".td-post-content .tdb-block-inner.td-fix-index>center:has(>iframe)");
            let p = fun.ge("p.has-text-align-center");
            if (p) {
                tempEles.push(p.cloneNode(true));
            }
            if (img && video) {
                tempEles.push(video);
            }
        },
        imgs: () => {
            videoSrcArray = fun.gae("video>source[type='video/mp4']").map(e => e.src);
            return fun.gae(".td-post-content .tdb-block-inner.td-fix-index img").map(e => decodeURIComponent(e.src));
        },
        button: [4],
        insertImg: [".td-post-content .tdb-block-inner.td-fix-index", 2, 1000],
        insertImgAF: () => {
            if (tempEles.length > 0) {
                let x = fun.ge(".td-post-content .tdb-block-inner.td-fix-index").firstChild;
                for (let e of tempEles) {
                    insertBefore(x, e);
                }
            }
        },
        go: 1,
        customTitle: () => fun.gt(".tdb-title-text").replace(/\d+P[\d\s]+V|\d+P([\d\s\+P]+)?/, "").replaceAll("|", "-").trim(),
        css: ".td-a-ad{display:none!important;}",
        //downloadVideo: true,
        category: "nsfw1"
    }, {
        name: "呦糖社",
        host: ["www.nicesss.com"],
        reg: /^https?:\/\/www\.nicesss\.com\/archives\/[\w-]+\/([\w-]+\/)?\d+\.html$/i,
        init: () => fun.createImgBox(".entry-content>img[data-srcset],.entry-content>p>img[data-srcset]", 1),
        imgs: () => fun.gae(".entry-content>img[data-srcset],.entry-content>p>img[data-srcset]").map(e => e.dataset.srcset),
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".entry-content>img[data-srcset],.entry-content>p:has(>img[data-srcset])"], 2
        ],
        customTitle: ".entry-title>a",
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw1"
    }, {
        name: "呦糖社C+",
        host: ["www.nicezzz.com", "www.nicekkk.com"],
        reg: [
            /^https?:\/\/www\.nicezzz\.com\/archives\/[\w-]+\/([\w-]+\/)?\d+\.html$/i,
            /^https?:\/\/www\.nicekkk\.com\/archives\/[\w-]+\/[\w-]+\.html$/i
        ],
        init: () => fun.createImgBox(".wp-posts-content>img,.wp-posts-content>p>img", 1),
        imgs: ".wp-posts-content>img,.wp-posts-content>p>img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".wp-posts-content>img,.wp-posts-content>p:has(>img)"], 2
        ],
        customTitle: ".article-title>a",
        fancybox: {
            v: 3,
            insertLibrarys: 1
        },
        category: "nsfw1"
    }, {
        name: "Fliporn",
        host: ["fliporn.biz"],
        reg: /^https?:\/\/fliporn\.biz\/videos\//,
        include: "//span[@class='entry-category']/a[text()='亚洲贴图' or text()='写真' or text()='动漫贴图' or text()='性感贴图' or text()='欧美贴图' or text()='网友自拍']",
        init: () => fun.createImgBox("//center[img] | //center[p[img]] | //div[@id='conttpc' and img] | //div[@id='conttpc' and p[img]] | //div[@class='entry-content']//p[img] | //div[figure[div[img]]]", 1),
        imgs: () => fun.gae(".entry-content img").map(e => e.dataset.src ? e.dataset.src.replace(/\?w=858(&ssl=1)?/, "") : e.src.replace("%3C/center%3E%3C/p%3E%3Cdiv%20class=", "").replace(/\?w=858(&ssl=1)?/, "")),
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "//center[img] | //center[p[img]] | //div[@id='conttpc' and img] | //div[@id='conttpc' and p[img]] | //div[@class='entry-content']//p[img] | //div[figure[div[img]]]"], 2
        ],
        customTitle: () => fun.dt({
            s: ".entry-title",
            d: /\n|[\s\d]+$/g
        }),
        category: "nsfw2"
    }, {
        name: "91图录",
        host: ["www.91tulu.com"],
        reg: /^https?:\/\/www\.91tulu\.com\/\d+\.html$/,
        imgs: ".wp-posts-content img",
        button: [4],
        insertImg: [".wp-posts-content", 2],
        autoDownload: [0],
        next: "//a[p[text()='上一篇']]",
        prev: "//a[p[text()='下一篇']]",
        customTitle: ".article-title",
        css: ".wp-posts-content{max-height:unset!important}",
        category: "nsfw1"
    }, {
        name: "91HD视频",
        host: ["91hd.com"],
        reg: /^https?:\/\/www\.91hd\w+\.\w+\/[^\/]+\/$/,
        link: "https://www.91hdzq.cc/category/%E6%88%90%E4%BA%BA%E8%89%B2%E5%9B%BE/",
        include: ".image-container",
        imgs: () => fun.getImgA(".image-container img", ".post-nav-links>a"),
        button: [4],
        insertImg: [".post-content", 2],
        customTitle: ".post-title",
        css: ".tuadx,body>*[id][style]:has(>img){display:none!important;}body{padding:unset!important}.sidebar-secondary{top:70px!important}",
        category: "nsfw2"
    }, {
        name: "91HD视频 AD",
        reg: /^https?:\/\/www\.91hd\w+\.\w+\//,
        css: ".tuad,.tuadx,body>*[id][style]:has(>img){display:none!important;}body{padding:unset!important}.sidebar-secondary{top:70px!important}",
        category: "ad"
    }, {
        name: "淫淫小说写真馆",
        host: ["books.xxgirls.vip"],
        reg: () => fun.checkUrl({
            h: "xxgirls",
            p: "artdetail"
        }),
        imgs: "#read_tpc img,.hl-article-content img",
        button: [4],
        insertImg: ["#read_tpc,.hl-article-content", 2],
        autoDownload: [0],
        next: ".hl-next",
        prev: ".hl-prev",
        customTitle: () => fun.dt({
            s: ".hl-article-title",
            d: /-[\d\s]+P?$|\(\d+P\)?.*$|【\d+P】$/i
        }),
        category: "nsfw2"
    }, {
        name: "成人图片 Qinimg",
        host: ["www.qinimg.com"],
        reg: /^https?:\/\/www\.qinimg\.com\/image\/\d+\.html$/,
        imgs: () => {
            thumbnailSrcArray = fun.gae("#image a>img").map(e => e.getAttribute("img") != "" ? e.getAttribute("img") : e.src);
            return fun.gae("#image a");
        },
        button: [4],
        insertImg: [
            ["#image", 2], 2
        ],
        go: 1,
        customTitle: ".box>h1",
        category: "nsfw2"
    }, {
        name: "Elite Babes格式",
        host: ["www.elitebabes.com", "pmatehunter.com", "www.jperotica.com", "www.metarthunter.com", "www.femjoyhunter.com"],
        reg: /^https?:\/\/(www\.)?(elitebabes|pmatehunter|jperotica|metarthunter|femjoyhunter)\.com\/.+\//,
        exclude: "#content video",
        imgs: ".list-gallery a[data-fancybox]",
        thums: ".list-gallery a[data-fancybox]>img",
        button: [4, "23%"],
        insertImg: [
            [".list-gallery", 2], 2
        ],
        go: 1,
        customTitle: "#content>p",
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw2"
    }, {
        name: "Naked Women Pics/VIEW GALS/Hot Pussy Pics/Busty Women Pics",
        host: ["nakedwomenpics.com", "viewgals.com", "hotpussypics.com", "bustypassion.com"],
        reg: [
            /^https?:\/\/nakedwomenpics\.com\/pics\/[^\/]+\/$/,
            /^https?:\/\/viewgals\.com\/pics\/[^\/]+\/$/,
            /^https?:\/\/hotpussypics\.com\/pics\/[^\/]+\/$/,
            /^https?:\/\/bustypassion\.com\/pics\/[^\/]+\/$/,
        ],
        imgs: "a.ss-image",
        button: [4],
        insertImg: [".m-content-con", 2],
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "TeenPussyPics.com",
        host: ["teenpussypics.com"],
        reg: /^https?:\/\/teenpussypics\.com\/images\/\d+\/$/,
        imgs: "//div[@id='lucrezia']//a[img[@data-src]]",
        button: [4],
        insertImg: ["#lucrezia", 2],
        customTitle: "h1",
        css: "#lucrezia{height:auto!important}",
        category: "nsfw2"
    }, {
        name: "NSFWalbum",
        host: ["nsfwalbum.com"],
        reg: /^https?:\/\/nsfwalbum\.com\/album\/\d+$/,
        init: () => fun.createImgBox(".album", 2),
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr(".albumPhoto");
            fun.showMsg(displayLanguage.str_05, 0);
            let fetchNum = 0;
            return fun.gae(".album .item>a").map(async (a, i, arr) => {
                let img = fun.ge("img", a);
                let src = img.dataset.src ?? img.src;
                if (/imx\.to/.test(src)) {
                    return src.replace("/t/", "/i/");
                } else {
                    await fun.delay(100 * i, 0);
                    return fetch(a.href).then(res => res.text()).then(text => {
                        let id = a.href.split("/").at(-1);
                        let spirit = fun.run(text.match(/var\sspirit\s?=\s?([^;]+);/)[1]);
                        let api = `/backend.php?&spirit=${spirit}&photo=${id}`;
                        return fetch(api).then(res => res.json()).then(json => {
                            fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${arr.length}`, 0);
                            return json[0];
                        });
                    });
                }
            });
        },
        button: [4, "24%", 3],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".album"], 2
        ],
        customTitle: () => fun.dt({
            s: ".gallery_name",
            d: /\sx\d{1,4}.*|-\sx\d{1,4}.*|-\s\d{1,4}x.*|-[\d\s]+pic.+| - \d{2}.\d{2}.\d{4}.*|\(x\d+\).*|[\d\s]+pics.*|\([\w\s\.\+,]+\)|\|[\s\dx]+\|.*/i
        }),
        category: "nsfw2"
    }, {
        name: "Adult photo sets",
        host: ["adultphotosets.best"],
        reg: /^https?:\/\/adultphotosets\.best\/index\.php\?newsid=\d+$/i,
        include: "//a[img[@data-src][@data-maxwidth]]",
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr("//img[@data-src][@data-maxwidth]");
            let URLs = fun.gau("//a[img[@data-src][@data-maxwidth]]");
            return fun.getImageHost(URLs);
        },
        button: [4],
        insertImg: [
            ["//a[img[@data-src][@data-maxwidth]]", 2, "//a[img[@data-src][@data-maxwidth]]"], 2
        ],
        customTitle: ".title",
        category: "nsfw2"
    }, {
        name: "Pics-X",
        host: ["pics-x.com"],
        reg: /^https?:\/\/pics-x\.com\/gallery\/\d+\//i,
        init: async () => await fun.waitEle("#images-container img"),
        imgs: "#images-container img",
        button: [4],
        insertImg: ["#images-container", 2],
        customTitle: () => fun.title(" | Pics-X"),
        category: "nsfw2"
    }, {
        name: "Redpics",
        host: ["www.redpics.top"],
        reg: /^https?:\/\/www\.redpics\.top\/(japanese|korean|chinese|hardcore|softcore|lesbian)\/[\w-]+$/,
        imgs: () => {
            let aEles = fun.gae(".post-content a");
            thumbnailSrcArray = aEles.map(a => fun.ge("img", a).src);
            let URLs = aEles.map(a => a.href);
            return fun.getImageHost(URLs);
        },
        button: [4],
        insertImg: ["#post-content", 3],
        autoDownload: [0],
        next: () => fun.gu("//div[text()='Next Post']/following-sibling::div[1]/a"),
        prev: 1,
        customTitle: "#photoset-title",
        category: "nsfw2"
    }, {
        name: "SXYPIX",
        host: ["sxypix.com"],
        reg: /^https?:\/\/sxypix\.com\/w\/\w+$/i,
        init: () => fun.createImgBox(".gallgrid", 2),
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let pid = fun.ge("div.grid-item").dataset.photoid;
            let aid = fun.gu(".gall_info_panel a.tdn").split("/").at(-1);
            let ghash = fun.ge(".gall_cp[data-ghash]").dataset.ghash;
            let total = Number(fun.gt(".ip_count"));
            let pages = Math.ceil(total / 36);
            let headers = {
                "content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                "x-requested-with": "XMLHttpRequest"
            };
            let resArr = fun.arr(pages, (v, i) => fetch("/php/apg.php", {
                "headers": headers,
                "body": `mode=w&param={"page":${(i + 1)},"ghash":"${ghash}"}`,
                "method": "POST"
            }).then(res => res.json()).then(json => json.r));
            thumbnailSrcArray = await Promise.all(resArr).then(data => data.flat()).then(arr => {
                let html = arr.join("");
                let dom = fun.doc(html);
                return fun.gae(".gall_cover", dom).map(e => e.dataset.src ?? e.src);
            });
            return fetch("/php/gall.php", {
                "headers": headers,
                "body": `x=x&pid=${pid}&aid=${aid}&ghash=${ghash}&width=1920`,
                "method": "POST"
            }).then(res => res.json()).then(json => {
                let arr = json.r;
                let html = arr.join("");
                let dom = fun.doc(html);
                return fun.gae("div.gall_pix_el", dom);
            });
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".grid"], 2
        ],
        customTitle: ".gall_title",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "nsfw2"
    }, {
        name: "ЯУстал",
        reg: () => fun.checkUrl({
            h: "yaustal.com"
        }) && fun.lp !== "/",
        exclude: "#bottom-nav",
        imgs: "a.highslide",
        customTitle: ".blog_tit",
        category: "nsfw2"
    }, {
        name: "МЕДИА ТРЕНД",
        link: "https://jb5.ru/shoubiz/onlyfans-sliv/",
        reg: () => fun.checkUrl({
            h: "jb5.ru",
            e: ".entry-content img[srcset]"
        }),
        imgs: () => fun.getImgSrcset(".gallery-item a,span[itemprop=image]>img,.entry-content img[srcset]"),
        capture: () => _this.imgs(),
        customTitle: ".entry-title>h1",
        category: "nsfw2"
    }, {
        name: "alt Goddess",
        reg: () => fun.checkUrl({
            h: "altgoddess.com"
        }),
        init: () => {
            if ("adde_modal_detector" in _unsafeWindow) {
                _unsafeWindow.adde_modal_detector(false);
            }
        },
        imgs: "a[data-fancybox],.mpc-grid-images img",
        autoDownload: [0],
        next: ".mk-post-next",
        prev: ".mk-post-prev",
        customTitle: ".page-title",
        observerClick: ".adde_modal_detector-action-btn-close",
        category: "nsfw2"
    }, {
        name: "alt Goddess",
        reg: () => fun.checkUrl({
            h: "altgoddess.com"
        }),
        init: () => {
            if ("adde_modal_detector" in _unsafeWindow) {
                _unsafeWindow.adde_modal_detector(false);
            }
        },
        observerClick: ".adde_modal_detector-action-btn-close",
        category: "ad"
    }, {
        name: "Фото идеи и картинки",
        reg: () => fun.checkUrl({
            h: "fotoslava.ru",
            e: ".entry-title"
        }),
        imgs: ".gallery-item img",
        customTitle: () => fun.dt({
            s: ".entry-title",
            d: /\([\d\s]+фото\)|\(\d+[\sфотfots]+\)|\d+[\sфотfots]+/
        }),
        category: "nsfw1"
    }, {
        name: "Картинки и фото",
        reg: () => fun.checkUrl({
            h: "cojo.ru",
            e: ".entry-title"
        }),
        imgs: ".wp-block-image img",
        customTitle: () => fun.dt({
            s: ".entry-title",
            d: /\([\d\s]+фото\)|\(\d+[\sфотfots]+\)|\d+[\sфотfots]+/
        }),
        setFancybox: true,
        category: "nsfw1"
    }, {
        name: "geekfan.site",
        reg: () => fun.checkUrl({
            h: "geekfan.site",
            e: [
                ".sgb-data,.entry-content img",
                ".entry-title"
            ]
        }),
        imgs: () => {
            let data = fun.ge(".sgb-data");
            if (data) {
                return fun.gae(".sgb-data").flatMap(data => {
                    let text = data.textContent;
                    let json = JSON.parse(text);
                    return json.images.map(e => e.url.replace("-scaled", ""));
                });
            } else {
                return fun.gae(".entry-content img");
            }
        },
        capture: () => _this.imgs(),
        customTitle: () => fun.dt({
            s: ".entry-title",
            d: /\(\d+[\sфотfots]+\)|\d+[\sфотfots]+/
        }),
        category: "nsfw1"
    }, {
        name: "TIỆM TẠP HÓA KỲ DIỆU",
        reg: () => fun.checkUrl({
            h: "clannadhouse.com",
            p: /^\/[^\/]+\/$/
        }),
        imgs: "a.fox-lightbox-gallery-item",
        customTitle: ".post-title",
        category: "nsfw1"
    }, {
        name: "Sex Pics Space",
        reg: () => fun.checkUrl({
            h: "www.sex-pics.xyz",
            p: "/view/"
        }),
        init: () => fun.remove("div:has(>.sticky-top)"),
        imgs: "#photos img",
        button: [4],
        insertImg: ["#photos", 2],
        customTitle: "h1",
        css: ".col-12{flex:0 0 100%!important;max-width:100%!important}",
        category: "nsfw1"
    }, {
        name: "Nevsepic",
        host: ["nevsepic.com.ua"],
        reg: () => fun.checkUrl({
            h: "nevsepic",
            e: [
                "//div[@class='full-comms']/a[text()='18+']",
                ".full-text img,a.highslide",
                ".share_widget"
            ]
        }),
        init: () => fun.createImgBox(".share_widget", 1),
        imgs: async () => {
            let srcs;
            let pages = fun.ge(".bottom-nav");
            if (pages) {
                let last = fun.ge(".navigation>a:last-child");
                let max = last.innerText;
                let url = last.pathname;
                let links = [fun.url];
                for (let i = 2; i <= max; i++) {
                    let link = url.replace(/(\/page\,)(\d+\,)/, `$1${i + ","}`);
                    links.push(link);
                }
                srcs = await fun.getImgA("a.highslide,.full-text img", links);
            } else {
                srcs = fun.getImgSrcArr("a.highslide,.full-text img");
            }
            return srcs.filter(src => !src.includes("/thumbs/") && !src.includes("attach.png"));
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".full-text img:not(.FullPictureLoadImage,[src$='attach.png']),.full-text img:not(.FullPictureLoadImage,[src$='attach.png'])~br,a.highslide,a.highslide~br,.bottom-nav"], 2
        ],
        customTitle: ".f-page-title",
        category: "nsfw2"
    }, {
        name: "Nevsepic",
        host: ["nevsepic.com.ua"],
        reg: () => fun.checkUrl({
            h: "nevsepic",
            e: [
                ".full-text img,a.highslide",
                ".share_widget"
            ]
        }),
        imgs: async () => {
            let srcs;
            let pages = fun.ge(".bottom-nav");
            if (pages) {
                let last = fun.ge(".navigation>a:last-child");
                let max = last.innerText;
                let url = last.pathname;
                let links = [fun.url];
                for (let i = 2; i <= max; i++) {
                    let link = url.replace(/(\/page\,)(\d+\,)/, `$1${i + ","}`);
                    links.push(link);
                }
                srcs = await fun.getImgA("a.highslide,.full-text img", links);
            } else {
                srcs = fun.getImgSrcArr("a.highslide,.full-text img");
            }
            return srcs.filter(src => !src.includes("/thumbs/") && !src.includes("attach.png"));
        },
        capture: () => _this.imgs(),
        button: [4],
        customTitle: ".f-page-title",
        category: "nsfw2"
    }, {
        name: "DTF",
        reg: () => fun.checkUrl({
            h: "dtf.ru"
        }),
        imgs: () => {
            let post = fun.gae(".content__blocks")[0];
            if (post) {
                fun.createImgBox(".content", 1);
                //let medias = Object.values(JSON.parse(_unsafeWindow.__INITIAL_STATE__)).find(obj => !!obj.blocks)?.blocks.filter(item => item.type === "media");
                //return medias?.map(e => "https://leonardo.osnova.io/" + e.data.items[0].image.data.uuid);
                let imgs = fun.gae(".block-wrapper.block-wrapper--media img", post);
                return imgs.map(e => {
                    let id = e.src.split("/")[3];
                    return "https://leonardo.osnova.io/" + id;
                });
            } else {
                return [];
            }
        },
        capture: () => _this.imgs(),
        SPA: () => !!fun.ge(".comments"),
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 3],
        customTitle: async () => {
            await fun.delay(1000, 0);
            return fun.dt({
                d: " — О, порно на DTF"
            });
        },
        observerURL: true,
        category: "nsfw2"
    }, {
        name: "uCrazy",
        reg: () => fun.checkUrl({
            h: "ucrazy.org"
        }),
        init: () => fun.addMutationObserver(() => fun.remove(".banner:has(>#advideo_adv_container)")),
        imgs: ".news__content_wrapper img:not(.news__tags-more-icon)",
        capture: () => fun.gae(".news__content_wrapper img:not(.news__tags-more-icon)"),
        SPA: () => !!fun.ge("#addcomment"),
        button: [4],
        customTitle: async () => {
            await fun.delay(1000, 0);
            return fun.dt({
                d: [
                    " | uCrazy.org",
                    " | girls.uCrazy.org"
                ]
            });
        },
        observerURL: true,
        category: "nsfw2"
    }, {
        name: "URLGalleries",
        host: ["urlgalleries.net"],
        reg: /^https?:\/\/[^\.]+\.urlgalleries\.net\/porn-gallery-\d+\//,
        imgs: async () => {
            let links = fun.gau(".gallerybody a[href*='?p=']");
            links = [...new Set(links)];
            await fun.getEle(links, "#wtf>a", ["#wtf", 0]);
            thumbnailSrcArray = fun.gae("#wtf>a>img").map(img => img.src);
            return fun.getImgCorsA("img.pic", "#wtf>a");
        },
        button: [4],
        insertImg: [
            ["#wtf", 2, "#wtf"], 2
        ],
        customTitle: ".galleryhead>h3>a",
        category: "nsfw2"
    }, {
        name: "wikiFeet",
        host: ["www.wikifeet.com"],
        reg: /^https?:\/\/www\.wikifeet\.com\/[^\/]+$/,
        imgs: async () => {
            await fun.waitEle(".pic>a");
            const {
                messanger
            } = _unsafeWindow;
            let imgDir = fun.gu(".pic>a").match(/[^\d]+/)[0];
            thumbnailSrcArray = messanger.gdata.map(e => "https://thumbs.wikifeet.com/" + e.pid + ".jpg");
            return messanger.gdata.map(e => imgDir + e.pid + ".jpg");
        },
        button: [4],
        insertImg: ["#thepics", 2],
        customTitle: "#content h1",
        category: "nsfw1"
    }, {
        name: "VK",
        host: ["vk.com"],
        link: "https://vk.com/album-74498063_255021373",
        reg: /^https?:\/\/vk\.com\/album-[\d_]+$/,
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let list = window.location.pathname.split("/")[1];
            let picsNum = document.querySelector(".ui_crumb_count").innerText;
            let max = Math.ceil(picsNum / 10);
            let fetchNum = 0;
            let resArr = [];
            for (let i = 0; i < picsNum; i += 10) {
                let res = fetch("https://vk.com/al_photos.php?act=show", {
                    "headers": {
                        "content-type": "application/x-www-form-urlencoded",
                        "x-requested-with": "XMLHttpRequest"
                    },
                    "body": `act=show&al=1&direction=1&list=${list}&offset=${i}`,
                    "method": "POST"
                }).then(res => res.json()).then(json => {
                    fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${max}`, 0);
                    return json.payload[1][3].map(e => e.w_src ?? e.z_src);
                });
                resArr.push(res);
            };
            return Promise.all(resArr).then(data => data.flat());
        },
        capture: () => _this.imgs(),
        customTitle: ".photos_album_intro>h1",
        category: "nsfw2"
    }, {
        name: "CyberDrop",
        host: ["cyberdrop.me"],
        reg: /^https?:\/\/cyberdrop\.me\/a\//,
        init: () => fun.createImgBox("#table", 2),
        imgs: async () => {
            let srcs = [];
            let fileIds = fun.gau("a.image").map(u => u.split("/").at(-1));
            fun.showMsg(displayLanguage.str_05, 0);
            let fetchNum = 0;
            let resArr = [];
            for (let id of fileIds) {
                let api = `https://api.cyberdrop.me/api/file/info/${id}`
                let res = fetch(api, {
                    "headers": {
                        "accept": "application/json, text/plain, */*",
                    },
                }).then(res => res.json()).then(json => {
                    let isV = /^video/.test(json.type);
                    let isI = /^image/.test(json.type);
                    let isO = json.type === "application/octet-stream";
                    if (isV || isI || isO) {
                        return fetch(json.auth_url, {
                            "headers": {
                                "accept": "application/json, text/plain, */*",
                            }
                        }).then(res => res.json()).then(obj => {
                            fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${fileIds.length}`, 0);
                            if (isV) {
                                return {
                                    v: obj.url
                                }
                            } else {
                                return {
                                    i: obj.url
                                }
                            }
                        });
                    } else {
                        fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${fileIds.length}`, 0);
                        return {
                            n: null
                        }
                    }

                });
                resArr.push(res);
            }
            await Promise.all(resArr).then(data => {
                videoSrcArray = data.filter(obj => "v" in obj)?.map(e => e.v);
                srcs = data.filter(obj => "i" in obj)?.map(e => e.i);
            });
            return srcs;
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 3],
        go: 1,
        customTitle: "#title",
        downloadVideo: true,
        category: "nsfw2"
    }, {
        name: "Bunkr bunkr.si",
        link: "https://bunkr-albums.io/",
        reg: () => fun.checkUrl({
            h: "bunkr",
            p: /^\/a\/[\w#]+$/i,
            e: ".grid-images"
        }),
        init: () => fun.createImgBox(".grid-images", 2),
        imgs: async () => {
            fun.showMsg(displayLanguage.str_01, 0);
            let xhrNum = 0;
            let links = fun.gau(".grid-images_box a[href*='/i/']");
            let resArr = [];
            for (let url of links) {
                let res = fun.xhrDoc(url).then(dom => {
                    fun.showMsg(`${displayLanguage.str_02}${xhrNum+=1}/${links.length}`, 0);
                    let img = dom.querySelector(".lightgallery>img");
                    return img ? img.src : null;
                });
                resArr.push(res);
            }
            let videoLinks = fun.gau(".grid-images_box a[href*='/v/']");
            let videoResArr = [];
            for (let url of videoLinks) {
                let res = fun.xhrDoc(url).then(dom => {
                    let video = dom.querySelector("#player>source");
                    return video ? video.src : null;
                });
                videoResArr.push(res);
            }
            videoSrcArray = await Promise.all(videoResArr).then(data => data.filter(item => item));
            return Promise.all(resArr);
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 3],
        go: 1,
        customTitle: "h1.text-dark",
        referer: "https://bunkr.si/",
        category: "nsfw2"
    }, {
        name: "Bunkr 列表自動翻頁",
        host: ["bunkr-albums.io"],
        reg: /^https?:\/\/bunkr-albums\.io\//,
        autoPager: {
            ele: "main .grid:has(>[data-repeat])",
            next: "nav a.btn-main+a",
            re: "main nav",
            observer: "main .grid:has(>[data-repeat])",
            pageNum: "main nav a.btn-main"
        },
        openInNewTab: "main .grid:has(>[data-repeat]) a:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "Good Sex Porn",
        host: ["goodsexporn.org"],
        reg: /^https?:\/\/goodsexporn\.org\/galleries\/\d+\.html$/,
        init: () => {
            fun.gae("#gallery>*:not(#galleryImages)").forEach(e => {
                let x = e.parentNode.parentNode.parentNode.nextElementSibling;
                insertBefore(x, e);
            });
        },
        imgs: () => {
            thumbnailSrcArray = [...fun.gae("#galleryImages>.blockItem img")].map(e => e.dataset.src ?? e.src).sort((a, b) => a.match(/(\d+)\.\w+$/)[1] - b.match(/(\d+)\.\w+$/)[1]);
            return thumbnailSrcArray.map(e => e.replace("thumbs/", ""));
        },
        button: [4],
        insertImg: [".content", 2],
        customTitle: ".player-title",
        css: "@media only screen and (max-width:450px){.related-block .block .blockItem.blockItemBox{width:120px !important}.block .blockItem{display:inline-block !important}}",
        category: "nsfw2"
    }, {
        name: "FitNakedGirls",
        host: ["fitnakedgirls.com"],
        reg: /^https?:\/\/fitnakedgirls\.com\/photos\/gallery\/[^\/]+\/$/,
        imgs: () => {
            let srcs;
            let [a, b] = [".wp-block-image img[data-src]", ".entry-content img"];
            if (!!fun.ge(a)) {
                srcs = fun.gae(a).map(e => e.dataset.src.replace(/-\d+x\d+(\.\w+)$/, "$1"));
            } else {
                srcs = fun.gae(b).map(e => e.dataset.src ?? e.src);
            }
            return srcs.filter(src => !src.includes("18xmob.png"));
        },
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".entry-title",
        css: ".g1-column-2of3{width:100%!important}#secondary{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "R18hub",
        host: ["r18hub.com"],
        link: "https://r18hub.com/photos",
        reg: /^https?:\/\/r18hub\.com\/photo\/[\w-]+/,
        imgs: () => {
            let eles = fun.gae("#photos>li");
            thumbnailSrcArray = eles.map(e => e.dataset.thumb);
            return eles.map(e => e.dataset.src);
        },
        button: [4],
        insertImg: ["#photos", 2],
        customTitle: () => fun.title(" - R18hub"),
        category: "nsfw2"
    }, {
        name: "ZzUp.Com",
        host: ["www.zzup.com", "zzup.com"],
        link: "https://zzup.com/user-album/3338/petmer/index.html",
        reg: /^https?:\/\/(www\.)?zzup\.com\/content\/.+index\.html/i,
        init: () => {
            fun.remove("//iframe|//div[div[center[script[contains(text(),'juicy')]]]][@class='container']|//font[b[contains(text(),'ads')]]");
            fun.createImgBox("//div[div[div[@class='picbox']]]", 2);
        },
        imgs: async () => {
            let max;
            try {
                [, max] = fun.gu(".imgpagebar>a:last-child").match(/page-(\d+)/);
            } catch {
                max = 1;
            }
            if (max > 1) {
                let links = [];
                let url = siteUrl.replace("index.html", "");
                for (let i = 2; i <= max; i++) {
                    links.push(url + "page-" + i + ".html");
                }
                await fun.getEle(links, "//div[div[@class='picbox']]", ["//div[div[div[@class='picbox']]]", 0]);
            }
            thumbnailSrcArray = fun.gae(".picbox img").map(img => img.src);
            let links = fun.gau(".picbox>a");
            return fun.getImgA("//main//a[img]", links, 100);
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "//div[div[div[@class='picbox']]]"], 2
        ],
        customTitle: () => fun.dt({
            d: " - ZzUp.Com"
        }),
        category: "nsfw2"
    }, {
        name: "ZzUp.Com 分類自動翻頁",
        enable: 1,
        reg: /^https?:\/\/(www\.)?zzup\.com\//,
        init: () => fun.remove("iframe[src*='ad']"),
        autoPager: {
            ele: "//div[div[@class='picbox'][not(script)]]",
            observer: "//div[div[@class='picbox']]",
            next: "//a[h3[span[@class='glyphicon glyphicon-arrow-right']]]",
            re: "//div[div[@class='imgpagebar']]",
            pageNum: () => nextLink.match(/page-(\d+)/)[1]
        },
        category: "autoPager"
    }, {
        name: "FreeXcafe",
        host: ["www.freexcafe.com"],
        reg: /^https?:\/\/www\.freexcafe\.com\/erotica\/[\w-]+\/[\w-]+\/index\.php/,
        init: () => fun.createImgBox("#content>*:last-child", 2),
        imgs: () => fun.getImgA("#imagelink>img,#bigphoto>img", ".thumbs>a", 500),
        thums: ".thumbs>a>img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 2, ".thumbs"], 2
        ],
        category: "nsfw2"
    }, {
        name: "TUPIC.TOP",
        host: ["www.tupic.top"],
        reg: /^https?:\/\/www\.tupic\.top\/\w+\/\w+\/\d+\.html$/,
        init: () => fun.createImgBox("#metadata_qrcode", 2),
        imgs: ".gallery_img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".spotlight-group,#touch_to_see"], 2
        ],
        customTitle: () => fun.ge("#post_content h1").textContent.replaceAll("\n", "").trim(),
        category: "nsfw2"
    }, {
        name: "EPORNER Photo",
        host: ["www.eporner.com"],
        link: "https://www.eporner.com/profile/namaiki/，https://www.eporner.com/profile/janekhansen/",
        reg: /^https?:\/\/\w{2,3}\.eporner\.com\/gallery\/.+\//,
        init: () => fun.createImgBox(".photosgrid", 2),
        imgs: () => {
            thumbnailSrcArray = fun.gae("#container img").map(e => e.src);
            return thumbnailSrcArray.map(e => e.replace("_296x1000", ""));
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 2, ".photosgrid"], 2
        ],
        customTitle: "#galleryheader>h1",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "nsfw2"
    }, {
        name: "Asian Porn",
        host: ["asianporn.li"],
        link: "https://asianporn.li/photos/",
        reg: /^https?:\/\/asianporn\.li\/photo\/\d+\/[^\/]+\/$/i,
        init: () => fun.createImgBox(".photos", 2),
        imgs: async () => {
            await fun.getNP(".cell.photo", "li.active+li>a", null, ".pagination", 0, "img[data-src]");
            thumbnailSrcArray = fun.gae(".photos img.thumb").map(e => e.dataset.src ?? e.src);
            return fun.getImgA("#image .img-reponsive", ".photos a");
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 2, ".photos"], 2
        ],
        customTitle: ".content-title",
        category: "nsfw2"
    }, {
        name: "Xasiat",
        host: ["www.xasiat.com", "areegator.net", "snapmoms.com"],
        link: "https://www.xasiat.com/albums/",
        reg: () => fun.checkUrl({
            h: [
                /^www\.xasiat\.com$/,
                /^(www\.)?areegator\.net$/,
                /^(www\.)?snapmoms\.com$/
            ],
            p: /^\/([\w]{2}\/)?albums\/\d+\/[\w-]+\/$/
        }),
        init: () => {
            fun.gae("img.thumb[data-original]").forEach(img => (img.src = img.dataset.original));
            fun.remove(".sponsor,.footer-margin");
            fun.createImgBox(".images", 2);
        },
        imgs: ".images>a",
        thums: ".images>a>img[data-original]",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".images"], 2
        ],
        customTitle: ".headline>h1",
        css: "#FullPictureLoadEnd{color:rgb(255,255,255)}.block-album{display:block !important}.block-album>.table,.top,.footer~*:not([id^='pv-'],[class^='pv-'],#comicRead,#fab,#FullPictureLoadOptions,#FullPictureLoadFixedMenu,.FullPictureLoadFixedBtn,.FullPictureLoadMsg,*[class^=fancybox]){display:none !important}",
        category: "nsfw2"
    }, {
        name: "Xasiat 自動翻頁",
        reg: () => fun.checkUrl({
            h: [
                /^www\.xasiat\.com$/,
                /^(www\.)?areegator\.net$/,
                /^(www\.)?snapmoms\.com$/
            ],
            p: /^\/([\w]{2}\/)?albums\/(\d+\/)?/
        }),
        init: () => {
            setInterval(() => {
                fun.remove("//div[iframe] | //iframe");
                if (document.body.getAttribute("class").length > 13) document.body.setAttribute("class", "big-container");
            }, 500);
            fun.remove(".footer~*", 2000);
        },
        autoPager: {
            ele: "#list_albums_common_albums_list_items",
            observer: "#list_albums_common_albums_list_items>.item",
            next: () => {
                let [num] = fun.attr(".load-more>a", "data-parameters")?.match(/\d+$/);
                let [p] = fun.lp.match(/^\/([\w]{2}\/)?albums\//);
                return num ? `${p}${num}/` : null;
            },
            re: ".load-more>a",
            pageNum: () => nextLink.match(/\d+/)[0],
            lazySrc: "img[data-original]"
        },
        openInNewTab: "#list_albums_common_albums_list_items a:not([target=_blank])",
        css: ".footer~*{display:none!important}",
        category: "autoPager"
    }, {
        name: "Erotic Pics",
        host: ["erotic.pics"],
        reg: /^https?:\/\/erotic\.pics\/[^\/]+\/$/,
        include: ".entry-content img",
        imgs: ".entry-content img",
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: () => fun.dt({
            s: ".entry-title",
            d: /\s–\s\d+\spics/
        }),
        category: "nsfw2"
    }, {
        name: "Erotic Pics 分類自動翻頁",
        enable: 1,
        reg: /^https?:\/\/erotic\.pics\//,
        autoPager: {
            ele: "#masonry",
            observer: "#masonry>article",
            next: "span.current+a",
            re: ".wp-pagenavi",
            pageNum: "span.current"
        },
        openInNewTab: "a.entry-thumbnail:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "xHamster gallery",
        host: ["xhamster.com"],
        link: "https://zh.xhamster.com/users/eros721_official/photos",
        reg: /xhamster\.com\/photos\/gallery\/[^/]+$/,
        include: ".gallery-section",
        imgs: async () => {
            await fun.getNP("#initials-script", "//div[@class='gallery-section']//li[a[contains(@class,'active')]]/following-sibling::li[1]/a", null, ".gallery-section .pager-section");
            let photos = fun.gae("#initials-script").map(script => {
                let json = JSON.parse(script.innerText.replace(/window.initials=|;/g, ""));
                return json.photosGalleryModel.photos;
            }).flat();
            thumbnailSrcArray = photos.map(e => e.thumbURL);
            return photos.map(e => e.imageURL);
        },
        init: "fun.remove('.mixed-list>.flex-element')",
        button: [4],
        insertImg: [
            ["main>article", 2, "main>article,.gallery-controls"], 2
        ],
        customTitle: ".page-title h1",
        css: "div[data-role=promo-messages-wrapper]{display:none!important}",
        category: "nsfw2"
    }, {
        name: "xHamsterM gallery M",
        host: ["xhamster.com"],
        reg: /xhamster\.com\/photos\/gallery\/[^/]+$/,
        imgs: async () => {
            await fun.getNP(".items[data-role='gallery-photos']>.item-container", "//ol[@class='page-list']/li[@class='page-button' and a[@class='page-button-link page-button-link--active']]/following-sibling::li[1]/a", null, "//ol[@class='page-list']");
            return fun.getImgA("#photoCurr", "a.item.slided", 1, null, 0);
        },
        button: [4],
        insertImg: [".items[data-role=gallery-photos]", 1],
        customTitle: "h1.page-title",
        css: ".items[data-role=gallery-photos]>.item-container{width:100%!important}aside[data-role=yld-mdtop],.yld-md--bottom,.yld-pc--bottom,aside[data-role=yld-pctop],div[data-role=promo-messages-wrapper]{display:none!important}",
        category: "nsfw2"
    }, {
        name: "PornHub photo", //很容易會被短暫封IP
        host: ["pornhub.com"],
        link: "https://pornhub.com/albums",
        enable: 1,
        reg: /pornhub\.com\/album\/\d+$/,
        imgs: () => fun.getImgA("#photoImageSection img", ".js_lazy_bkg a", 200),
        button: [4],
        insertImg: [
            [".photoBlockBox .clear", 1], 1
        ],
        go: 1,
        customTitle: ".photoAlbumTitleV2",
        category: "nsfw2"
    }, {
        name: "BITCHES GIRLS",
        host: ["bitchesgirls.com"],
        reg: /^https?:\/\/bitchesgirls\.com\/[^\/]+\/[^\/]+\/[^\/]+\/$/,
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            const getUrls = (dom = document, pageUrl = siteUrl) => {
                let text = fun.gst("@context", dom);
                let json = JSON.parse(text.replace(/\n/g, "").replace(/\s+/g, " "));
                debug("\n此頁JSON資料\n", {
                    url: pageUrl,
                    json: json
                });
                let {
                    image,
                    video
                } = json;
                image = image?.filter(e => e["@type"] === "ImageObject");
                video = video?.filter(e => e["@type"] === "VideoObject");
                if (video.length > 0) {
                    video.forEach(e => videoSrcArray.push(e.url));
                }
                if (image.length > 0) {
                    let thumbnailUrls = image.map(e => e.thumbnailUrl);
                    let srcs = image.map(e => e.url);
                    thumbnailUrls = thumbnailUrls.filter(e => !e.includes("/logos/"));
                    srcs = srcs.filter(e => !e.includes("/logos/"));
                    thumbnailSrcArray = thumbnailSrcArray.concat(thumbnailUrls);
                    return image.map(e => e.url);
                } else {
                    return [];
                }
            }
            const max = _unsafeWindow.adConstants.pagesAmount;
            if (max > 1) {
                let links = [siteUrl];
                for (let i = 2; i <= max; i++) {
                    links.push(siteUrl + `${i}/`);
                }
                let fetchNum = 0;
                let resArr = [];
                for (let i = 0; i < max; i++) {
                    let res = await fun.fetchDoc(links[i]).then(dom => {
                        fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${max}`, 0);
                        return getUrls(dom, links[i]);
                    });
                    resArr.push(res);
                }
                return Promise.all(resArr).then(data => data.flat());
            } else {
                return getUrls();
            }
        },
        button: [4],
        insertImg: [
            [".button-container", 2, ".albumgrid,.popup-container"], 2
        ],
        go: 1,
        css: "a#loadMore,.my-girls-popup-element{display:none!important}",
        category: "nsfw2"
    }, {
        name: "X-video",
        host: ["x-video.tube"],
        reg: /^https?:\/\/x-video\.tube\/albums\/\d+\//i,
        init: () => fun.createImgBox(".album-view", 2),
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let max = fun.attr("a[data-total]", "data-total");
            let fetchNum = 0;
            const getFn = url => {
                return fetch(url, {
                    "headers": {
                        "accept": "text/html, */*; q=0.01",
                        "x-requested-with": "XMLHttpRequest"
                    }
                }).then(res => res.text()).then(text => fun.doc(text)).then(dom => {
                    fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${max}`, 0);
                    return {
                        thumbsArr: fun.gae("a.grid-item img", dom).map(e => e.dataset.src),
                        originalsArr: fun.gae("a.grid-item", dom)
                    }
                });
            };
            let firstArr = [getFn(fun.url + "?mode=async&function=get_block&block_id=album_view_album_view")];
            let pagesArr = fun.arr(max, (v, i) => getFn(fun.url + "?mode=async&function=get_block&block_id=album_view_album_view&load=more&from=" + (i + 1)));
            let resArr = firstArr.concat(pagesArr);
            return Promise.all(resArr).then(data => {
                thumbnailSrcArray = data.map(e => e.thumbsArr).flat();
                return data.map(e => e.originalsArr).flat();
            });
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".album-view"], 2
        ],
        customTitle: ".title",
        category: "nsfw2"
    }, {
        name: "jimpicotphotography.com",
        reg: () => fun.checkUrl({
            h: "jimpicotphotography.com"
        }),
        imgs: ".con>img,#post-navigation img",
        customTitle: () => fun.dt({
            d: " - jimpicotphotography.com"
        }),
        category: "nsfw2"
    }, {
        name: "EroMe",
        host: ["www.erome.com"],
        reg: () => fun.checkUrl({
            h: "erome.com",
            p: "/a/",
            e: "div[id^='album'].page-content"
        }),
        imgs: () => {
            videoSrcArray = fun.gae(".video source[type='video/mp4']").map(e => e.src);
            return hasTouchEvents ? fun.gae(".img>img[data-src]") : fun.gae("div.img[data-src]");
        },
        button: [4],
        insertImg: ["div[id^='album'].page-content", 2],
        customTitle: ".page-content h1",
        category: "nsfw2"
    }, {
        name: "EroMe",
        reg: () => fun.checkUrl({
            h: "erome.fan",
            p: "/a/",
            e: ".entry-content"
        }),
        imgs: () => {
            videoSrcArray = fun.gae(".video source[type='video/mp4']").map(e => e.src);
            return hasTouchEvents ? fun.gae(".img>img[data-src]").map(e => e.currentSrc) : fun.gae("div.img[data-src]");
        },
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "Amateur Likes",
        host: ["amateurlikes.com"],
        reg: /^https?:\/\/amateurlikes\.com\/\w\/[^\/]+\/\d+$/i,
        imgs: "#gallery img",
        button: [4],
        insertImg: ["#gallery .masonry", 2],
        customTitle: () => fun.dt({
            s: ".full_h1",
            d: /\([\d\s]+Photos\)/i
        }),
        css: "#gallery .masonry{display:block!important}",
        category: "nsfw2"
    }, {
        name: "Nakedsex",
        host: ["nakedsex.pics"],
        reg: /^https?:\/\/nakedsex\.pics\/.+\.php$/i,
        imgs: ".gallerycontent a",
        button: [4],
        insertImg: [
            [".tags", 2], 2
        ],
        go: 1,
        customTitle: () => fun.title(" - Best adult videos and photos"),
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "nsfw2"
    }, {
        name: "ThotHub Leaks",
        host: ["thothub.vip"],
        reg: /^https?:\/\/thothub\.vip\/album\/\d+\//,
        imgs: ".images a",
        thums: ".images a img",
        button: [4],
        insertImg: [".images", 2],
        customTitle: ".title",
        category: "nsfw2"
    }, {
        name: "ThotHub Leaks",
        reg: () => fun.checkUrl({
            h: "thothub.vip",
            e: ".entry-title"
        }),
        imgs: ".entry-content img",
        customTitle: () => fun.dt({
            s: ".entry-title",
            d: /\([\d\s]+Photos\)/i
        }),
        category: "nsfw2"
    }, {
        name: "MrDeepFakes",
        host: ["mrdeepfakes.com"],
        reg: /^https?:\/\/mrdeepfakes\.com\/photo\/\d+\//,
        init: () => {
            fun.remove(".player-adv");
            fun.ge(".page-columns").classList.remove("page-columns");
        },
        imgs: () => {
            if (fun.ge("#album_view_album_view_pagination")) {
                fun.showMsg(displayLanguage.str_05, 0);
                let max = Number(fun.gt("//li[@class='next action-item']/preceding-sibling::li[@class='page action-item'][1]//span[@class='text']"));
                let fetchNum = 0;
                let resArr = fun.arr(max, (v, i) => {
                    let url = siteUrl + "?mode=async&function=get_block&block_id=album_view_album_view&sort_by=&from=" + (i + 1);
                    return fun.fetchDoc(url).then(dom => {
                        fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${max}`, 0);
                        return fun.gae("a[data-fancybox-type=image]", dom).map(a => {
                            let img = fun.ge("img", a);
                            return {
                                original: a.href,
                                thumbnail: img.dataset.original ?? img.src
                            }
                        });
                    });
                });
                return Promise.all(resArr).then(arr => {
                    thumbnailSrcArray = arr.flat().map(e => e.thumbnail);
                    return arr.flat().map(e => e.original);
                });
            } else {
                thumbnailSrcArray = fun.gae(".content img.thumb").map(e => e.dataset.original ?? e.src);
                return fun.gae("a[data-fancybox-type=image]");
            }
        },
        button: [4],
        insertImg: ["#album_view_album_view", 2],
        customTitle: ".player-title",
        category: "nsfw2"
    }, {
        name: "PicHunter",
        host: ["www.pichunter.com"],
        reg: /^https?:\/\/www\.pichunter\.com\/gallery\/\d+\//,
        imgs: () => {
            if (fun.ge(".flex-images figure>a>img")) {
                thumbnailSrcArray = fun.gae(".flex-images figure>a>img").map(e => e.getAttribute("xs"));
            } else {
                thumbnailSrcArray = fun.gae("#main-grid a img").map(e => e.src);
            }
            return fun.gae(".flex-images figure>a,#main-grid a");
        },
        button: [4],
        insertImg: [
            [".flex-images,#main-grid", 2], 1
        ],
        go: 1,
        customTitle: "h1",
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw2"
    }, {
        name: "Pictoa",
        host: ["www.pictoa.com"],
        reg: /^https?:\/\/www\.pictoa\.com\/(thumbs|albums)\/.+\.html$/i,
        imgs: () => fun.getImgA("#player img", ".thumb-nav-img a"),
        thums: ".thumb-nav-img img",
        button: [4],
        insertImg: ["#player", 2],
        customTitle: ".title>h1",
        css: "#gallery #player{cursor:unset!important}.ad-placement{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "PimpAndHost",
        host: ["pimpandhost.com"],
        link: "https://pimpandhost.com/site/trending",
        reg: /^https?:\/\/pimpandhost\.com\/(image|album)\/\d+/,
        init: () => {
            if (/image/.test(location.href)) location.href = fun.ge("a[title=Album]").href;
            fun.remove(".flex-block-1,.flex-block-2,#comments,.ano_po");
        },
        imgs: async () => {
            await fun.getNP("#album-images>.image-block", "li.active+li:not(.next)>a", null, ".pagination");
            return fun.gae("#album-images .image-block a[data-src]");
        },
        button: [4],
        insertImg: [
            [".summary", 2], 2
        ],
        go: 1,
        customTitle: ".author-header__album-name",
        category: "nsfw2"
    }, {
        name: "PimpAndHost 隱藏廣告",
        reg: /^https?:\/\/pimpandhost\.com\//,
        init: "fun.remove('.flex-block-1,.flex-block-2,#comments,.ano_po')",
        css: ".list-view:not(#main-list-view) .item:not(.image-block){display:none!important}",
        category: "ad"
    }, {
        name: "Pornpaw 圖片清單頁",
        host: ["www.pornpaw.com"],
        reg: /^https?:\/\/www\.pornpaw\.com\/gallery\/[\w-]+\.html$/i,
        delay: 500,
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr("img[data-src]");
            return thumbnailSrcArray.map(e => e.replace("x160.", "."));
        },
        button: [4],
        insertImg: [
            [".container>.row", 2], 2
        ],
        go: 1,
        customTitle: "h1",
        css: "div:has(>ins){display:none!important;}",
        category: "nsfw2"
    }, {
        name: "ImageFap 圖片清單頁",
        reg: /^https?:\/\/www\.imagefap\.com\/(gallery|pictures)\/\d+/i,
        init: () => fun.getNP("//tr[td[@id]]", "b+a.link3", null, "#gallery>font>span", 100, null, 0),
        category: "autoPager"
    }, {
        name: "ImageFap",
        host: ["www.imagefap.com"],
        reg: /^https?:\/\/www\.imagefap\.com\/photo\/\d+\//i,
        init: () => {
            fun.remove("//td[div[@id='main']]/following-sibling::td[1] | //div[iframe]");
            fun.ge("#main").removeAttribute("style");
            fun.ge("//table[@width='750']").width = "1000";
        },
        imgs: async () => {
            let max = Number(fun.attr("div[data-total]", "data-total"));
            let pages = Math.ceil(max / 24);
            let pid = fun.ge("#imageid_input").value;
            let gid = fun.ge("#galleryid_input").value;
            let resArr = [];
            let fetchNum = 0;
            fun.showMsg(displayLanguage.str_05, 0);
            for (let i = 0; i < max; i += 24) {
                let url = `/photo/${pid}/?gid=${gid}&idx=${i}&partial=true`;
                let res = await fun.fetchDoc(url).then(dom => {
                    fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${pages}`, 0);
                    if (!fun.ge(".thumbs a", dom)) {
                        alert("Encountered human-machine verification");
                        window.location.href = siteUrl;
                    }
                    return fun.gae(".thumbs a", dom).map(a => {
                        let original = a.href;
                        let thumb = fun.attr("img", "src", a);
                        return {
                            original: original,
                            thumb: thumb
                        }
                    });
                });
                resArr.push(res);
                await fun.delay(1000, 0);
            }
            return Promise.all(resArr).then(data => data.flat()).then(arr => {
                let thumbs = arr.map(e => e.thumb);
                thumbnailSrcArray = thumbs;
                let originals = arr.map(e => e.original);
                return originals;
            });
        },
        button: [4],
        insertImg: ["//td[div[@id='slideshow']]", 2],
        customTitle: "#main h1",
        category: "nsfw2"
    }, {
        name: "Fuskator 圖片清單頁",
        host: ["fuskator.com"],
        reg: /^https?:\/\/fuskator\.com\/thumbs\/[\w-~]+\/[\w-~]+\.html$/i,
        init: async () => {
            fun.showMsg(displayLanguage.str_04, 0);
            await fun.waitEle(".pic_pad");
        },
        imgs: "#thumbimages a,.swipebox a",
        thums: "#thumbimages a>img,.swipebox a>img",
        button: [4],
        insertImg: [
            ["//a[text()='View full images']", 2], 2
        ],
        go: 1,
        category: "nsfw2"
    }, {
        name: "Fuskator 大圖頁",
        host: ["fuskator.com"],
        reg: /^https?:\/\/fuskator\.com\//i,
        include: "//a[text()='View gallery thumbnails']",
        imgs: "img.full",
        button: [4],
        insertImg: ["#fullimages", 2, 1000],
        category: "nsfw2"
    }, {
        name: "TOKYO Motion",
        host: ["www.tokyomotion.net"],
        link: "https://www.tokyomotion.net/albums",
        reg: /^https?:\/\/www\.tokyomotion\.net\/album\/\d+\/.+/,
        imgs: async () => {
            await fun.getNP("div[id^=album_photo]", ".pagination li.active+li>a", null, ".pagination");
            thumbnailSrcArray = fun.gae(".thumb-overlay img").map(e => e.src);
            return thumbnailSrcArray.map(e => e.replace("tmb/", ""));
        },
        button: [4],
        insertImg: [
            ["//div[div[div[contains(@id,'album_photo')]]]", 0], 2
        ],
        go: 1,
        customTitle: () => fun.gae(".pull-left")[2].innerText.trim(),
        category: "nsfw2"
    }, {
        name: "JavBangers",
        reg: () => fun.checkUrl({
            h: "javbangers.com",
            p: "/albums/",
            e: ".album-info"
        }),
        imgs: ".images a",
        thums: ".images img",
        button: [4],
        insertImg: [
            [".album-info", 2, ".images"], 2
        ],
        go: 1,
        customTitle: ".headline>h1",
        category: "nsfw2"
    }, {
        name: "multi.xnxx.com",
        host: ["multi.xnxx.com"],
        reg: /^https?:\/\/multi\.xnxx\.com\/gallery\//,
        imgs: ".galleryPage .boxImg",
        button: [4],
        insertImg: [
            [".originalLink", 2], 1
        ],
        go: 1,
        category: "nsfw2"
    }, {
        name: "色情圖片網",
        reg: () => fun.checkUrl({
            h: "www.photos18.com",
            p: "/v/"
        }),
        imgs: ".imgHolder a[data-fancybox]",
        button: [4],
        insertImg: ["#content", 2],
        customTitle: "h1.title",
        fancybox: {
            v: 3,
            css: false
        },
        css: ".no-gutters{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "趣事館",
        host: ["17sex.vip"],
        link: "https://17sex.vip/list/4858",
        reg: /^https?:\/\/17sex\.vip\/pic\/\d+$/i,
        imgs: () => {
            let max = fun.gt(".count-pageindex") || 1;
            return fun.getImg(".page>img", max, "4");
        },
        button: [4],
        insertImg: [
            [".page", 0], 2
        ],
        go: 1,
        customTitle: "h3",
        css: ".topzanpage{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "久久热/GavPorn",
        reg: () => fun.checkUrl({
            h: [
                "www.99re.com",
                "cav103.com"
            ],
            p: "/albums/"
        }),
        imgs: "a[data-fancybox-type]",
        button: [4],
        insertImg: [".sponsor,.images", 2],
        customTitle: ".headline>h1",
        css: ".top{display:none!important}",
        category: "nsfw2"
    }, {
        name: "X1HUB",
        reg: () => fun.checkUrl({
            h: "x1hub.com",
            p: "/albums/",
            e: ".album-info"
        }),
        imgs: ".images a",
        thums: ".images img",
        button: [4],
        insertImg: [".images", 2],
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "Hentai Image 單張",
        host: ["hentai-img.com", "hentai-cosplays.com", "porn-images-xxx.com", "porn-gravure-idol.com"],
        reg: /(hentai-img|hentai-cosplays|porn-images-xxx|porn-gravure-idol)\.com\/image\/[^/]+\//,
        include: "//a[text()='DETAIL PAGE' or text()='DETAIL HALAMAN' or text()='詳細へ' or text()='详细信息页面' or text()='Страница сведений' or text()='상세 페이지' or text()='página de detalles' or text()='หน้ารายละเอียด' or text()='TRANG CHI TIẾT']",
        imgs: async () => {
            let [max] = document.title.split("/").at(-1).match(/\d+/);
            let url = siteUrl.replace(/\/\d+\/$/, "");
            let links = fun.arr(max, (v, i) => url + `/${(i + 1)}/`);
            let imgSrcArray = await fun.getImgA("#display_image_detail a,#detail_list a", links, 100);
            thumbnailSrcArray = imgSrcArray.map(e => {
                let arr = e.split("/");
                arr[arr.length - 1] = "p=305/" + arr[arr.length - 1];
                return arr.join("/");
            });
            return imgSrcArray;
        },
        button: [4],
        insertImg: ["#display_image_detail,#detail_list", 2],
        customTitle: () => fun.dt({
            s: "#title>h2,#page h3",
            d: /\s?Photo\s?\d+P|\s?-\s?\d+\/\d+\s?|\([0-9\s]+ảnh\)/i
        }),
        css: "#display_image_detail img{max-width:100% !important}",
        category: "nsfw2"
    }, {
        name: "Hentai Image",
        host: ["hentai-img.com", "hentai-cosplays.com", "porn-images-xxx.com", "porn-gravure-idol.com"],
        reg: /(hentai-img|hentai-cosplays|porn-images-xxx|porn-gravure-idol)\.com\/image\/[^/]+\/(page\/\d+\/)?$/,
        init: () => {
            let ele = fun.ge("//div[span[a]]");
            if (ele) {
                let tE = fun.ge("#display_image_detail,#detail_list");
                insertBefore(tE, ele);
            }
        },
        imgs: async () => {
            let max = fun.gt("#paginator>*:last-child", 3) || fun.gt(".paginator_page[rel=next]", 2) || 1;
            let url = siteUrl.replace(/page\/\d+\/$/, "");
            let links = fun.arr(max, (v, i) => url + `page/${(i + 1)}/`);
            thumbnailSrcArray = await fun.getImgA(".icon-overlay img,#display_image_detail img", links, 100);
            thumbnailSrcArray = thumbnailSrcArray.map(e => {
                let arr = e.split("/");
                arr[arr.length - 2] = "p=305";
                return arr.join("/");
            });
            return thumbnailSrcArray.map(e => e.replace(/\/p=(700|305)/, ""));
        },
        button: [4],
        insertImg: ["#display_image_detail,#detail_list", 2],
        autoDownload: [0],
        next: () => {
            let next = fun.ge("//a[text()='Prev Article' or text()='前の記事' or text()='前一篇']");
            return next ? next.href : null;
        },
        prev: "//a[text()='Next Article' or text()='次の記事' or text()='下一篇文章']",
        customTitle: () => fun.dt({
            s: "#title>h2,#page h3",
            d: /\s?Photo\s?\d+P|\s?-\s?\d+\/\d+\s?|\([0-9\s]+ảnh\)/i
        }),
        css: "#display_image_detail img{max-width:100% !important}",
        category: "nsfw2"
    }, {
        name: "Fapator 圖片清單頁",
        host: ["www.fapator.com"],
        reg: /^https?:\/\/www\.fapator\.com\/\?content_id=/i,
        init: () => fun.remove("//div[@class='img' and a[@target and img]]"),
        imgs: "a[data-lightbox]",
        thums: "a[data-lightbox]>img",
        button: [4],
        insertImg: [".fcon+.fapad", 1],
        next: "//a[contains(text(),'next photos')]",
        prev: 1,
        go: 1,
        css: ".fapad{width:auto !important;height:auto !important}",
        category: "nsfw2"
    }, {
        name: "SMUTPOND",
        host: ["www.smutpond.com"],
        reg: /^https?:\/\/www\.smutpond\.com\/gallery-pics\/\?uid=/i,
        init: async () => await fun.delay(2000, 0),
        imgs: () => {
            thumbnailSrcArray = fun.gae(".viewerPreview img").slice(5).map(e => e.dataset.lazy ?? e.src);
            thumbnailSrcArray = [...new Set(thumbnailSrcArray)];
            return fun.gae("img[alt=Pic]");
        },
        button: [4],
        insertImg: [".viewerBox", 2],
        customTitle: "h2.sectionTitleLeft",
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw2"
    }, {
        name: "DirtyShip.com",
        host: ["dirtyship.com"],
        reg: /^https?:\/\/dirtyship\.com\/gallery\/[^\/]+\/$/,
        imgs: () => fun.getImgSrcset(".gallery_grid img,.gallery_grid~img"),
        thums: ".gallery_grid img,.gallery_grid~img",
        button: [4],
        insertImg: [
            [".gallery_grid", 0, ".gallery_grid img:not(.FullPictureLoadImage),.gallery_grid~img"], 2
        ],
        customTitle: () => fun.title(" - DirtyShip.com"),
        category: "nsfw2"
    }, {
        name: "ᑕ❶ᑐ Onlyfans +18",
        host: ["www.tiktaks.de"],
        reg: /^https?:\/\/www\.tiktaks\.de\/onlyfans\/[^\/]+\/$/,
        imgs: "figure.wp-block-image>img",
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".title",
        category: "nsfw2"
    }, {
        name: "SexyThots.com",
        host: ["sexythots.com"],
        reg: /^https?:\/\/sexythots\.com\/gallery\/[^\/]+\/$/,
        imgs: () => fun.getImgSrcset(".gallery_grid img"),
        thums: ".gallery_grid img",
        button: [4],
        insertImg: [".gallery_grid", 2],
        customTitle: () => fun.title(" - SexyThots.com"),
        category: "nsfw2"
    }, {
        name: "SexyGirlsPics",
        host: ["sexygirlspics.com"],
        reg: /^https?:\/\/sexygirlspics\.com\/pics\/[\w-]+\//i,
        imgs: "a.ss-image",
        thums: "a.ss-image>img",
        button: [4],
        insertImg: [
            [".sponsor-button", 2], 1
        ],
        go: 1,
        category: "nsfw2"
    }, {
        name: "PornPic",
        host: ["www.pornpic.com", "pornpic.com"],
        reg: /^https?:\/\/(www\.)?pornpic\.com\/gallery\/[\w-]+/i,
        imgs: ".gallery-grid a.item-link[data-fancybox]",
        thums: ".gallery-grid a.item-link[data-fancybox] img",
        button: [4],
        insertImg: [
            [".gallery-info", 2], 1
        ],
        go: 1,
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw2"
    }, {
        name: "Girlsreleased",
        reg: () => fun.checkUrl({
            h: "girlsreleased.com",
            p: "/set/"
        }),
        init: async () => {
            await fun.waitEle(".images .imageContainer .image img");
            fun.createImgBox(".images", 2);
        },
        imgs: async () => {
            let selector = ".images .imageContainer .image img";
            await fun.waitEle(selector);
            thumbnailSrcArray = fun.gae(selector).map(e => e.src);
            let src = fun.attr(selector, "src");
            let images = fun.gae(selector);
            if (/imx\.to/.test(src)) {
                let tempSrc = src.replace("https://imx.to/u/t/", "https://i.imx.to/i/");
                return new Promise(async resolve => {
                    let obj = await fun.checkImgStatus(tempSrc);
                    if (obj.ok && obj.width > 200) {
                        resolve(images.map(e => e.src.replace("https://imx.to/u/t/", "https://i.imx.to/i/")));
                    } else {
                        resolve(images.map(e => e.src.replace("/t/", "/i/")));
                    }
                });
            } else if (/imgadult\.com/.test(src)) {
                return images.map(e => e.src.replace("small-medium/", "big/"));
            } else if (/pixhost\.to/.test(src)) {
                return images.map(e => e.src.replace("https://t", "https://img").replace("/thumbs/", "/images/"));
            } else if (/imagevenue/.test(src)) {
                return fun.getImgCorsA("#main-image", "a[target=imageView]");
            } else {
                return [];
            }
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0], 2
        ],
        go: 1,
        referer: "src",
        css: "@media only screen and (max-width:1920px){#FullPictureLoadMainImgBox{width:100%;max-width:1400px;margin:0 auto}}",
        category: "nsfw2"
    }, {
        name: "Girlsreleased 載入更多",
        reg: () => fun.checkUrl({
            h: "girlsreleased.com"
        }),
        observerClick: "//button[text()='more']",
        openInNewTab: ".content .main a",
        category: "autoPager"
    }, {
        name: "Eropics", // vipr.im,Imagetwist.com圖床無法外連但可以下載
        host: ["eropics.to"],
        reg: /^https?:\/\/eropics\.\w+\/\d+\/\d+\/\d+\//i,
        init: () => {
            document.addEventListener("keydown", event => {
                if (event.ctrlKey && event.altKey && event.code === "KeyC") {
                    event.preventDefault();
                    let arr = fun.gau(".entry-content a");
                    let str = arr.join("\n");
                    console.log(str);
                    copyToClipboard(str);
                    fun.showMsg(displayLanguage.str_11);
                }
            });
        },
        imgs: async () => {
            let aEles = fun.gae(`
            .entry-content a[href^='//imgspice.com/'],
            .entry-content a[href^='//imagetwist.com/'],
            .entry-content a[href*='postimg.cc'],
            .entry-content a[href*='fastpic.org'],
            .entry-content a[href*='vipr.im'],
            .entry-content a[href*='pixhost.to']:not([href*='/gallery/']),
            .entry-content a[href*='turboimagehost'],
            .entry-content a[href*='imgbox.com'],
            .entry-content a[href*='imagevenue'],
            .entry-content a[href*='imx.to'],
            .entry-content a[href*='imagebam']
            `);
            thumbnailSrcArray = aEles.map(a => fun.ge("img", a).src);
            let URLs = aEles.map(a => a.href);
            return fun.getImageHost(URLs);
        },
        button: [4],
        insertImg: [
            [".entry-footer", 2], 3
        ],
        go: 1,
        customTitle: "h1.entry-title",
        category: "nsfw2"
    }, {
        name: "ViperGirls/PornCoven/ErotiCity",
        link: "https://viper.to/threads/10623260-Coser-UmekoJ-NieR-2B",
        host: ["vipergirls.to", "viper.to", "viperohilia.art", "vipervault.link", "viperbb.rocks", "viperkats.eu", "planetviper.club", "porncoven.com", "eroticity.net"],
        reg: () => !hasTouchEvents && /^https?:\/\/(vipergirls\.to|viper\.to|viper\w+\.\w+|planetviper\.club|porncoven\.com|eroticity\.net)\/threads\//i.test(fun.url),
        include: ".postdetails",
        init: () => {
            document.addEventListener("click", event => {
                if (event.target.className === "postdetails") {
                    let links = [];
                    if (event.target.querySelector("a[href$='.jpg']:not([href^='http://imagetwist.com/'])")) {
                        links = [...event.target.querySelectorAll("a[href$='.jpg']")].map(a => a.href);
                    } else {
                        links = [...event.target.querySelectorAll(`
                            a[href^='https://imgspice.com/'],
                            a[href*='imx.to']:not([href*='/u/i/']),
                            a[href*='pixhost.to'],
                            a[href^='http://imagetwist.com/'],
                            a[href*='postimg.cc'],
                            a[href*='fastpic.org'],
                            a[href*='vipr.im'],
                            a[href*='turboimagehost'],
                            a[href*='imgbox.com'],
                            a[href*='imagevenue'],
                            a[href*='imagebam']
                            `)].map(a => a.href);
                    }
                    captureLinksArray = links;
                    fun.showMsg(`Capture ${links.length} Links`);
                    debug("captureLinksArray", captureLinksArray);
                }
            });
        },
        imgs: () => fun.getImageHost(),
        repeat: 1,
        category: "nsfw2"
    }, {
        name: "Kitty Kats Forum",
        host: ["kitty-kats.net"],
        reg: () => !hasTouchEvents && /^https?:\/\/kitty-kats\.net\/threads\//i.test(fun.url),
        init: () => {
            document.addEventListener("click", event => {
                if (event.target.className === "message-cell message-cell--user") {
                    let links = [];
                    if (event.target.parentNode.querySelector("a[href$='.jpg']:not([href^='http://imagetwist.com/'])")) {
                        links = [...event.target.parentNode.querySelectorAll("a[href$='.jpg']")].map(a => a.href);
                    } else {
                        links = [...event.target.parentNode.querySelectorAll(`
                        a[href^='https://imgspice.com/'],
                        a[href*='imx.to']:not([href*='/u/i/']),
                        a[href*='pixhost.to'],
                        a[href^='http://imagetwist.com/'],
                        a[href*='postimg.cc'],
                        a[href*='fastpic.org'],
                        a[href*='vipr.im'],
                        a[href*='turboimagehost'],
                        a[href*='imgbox.com'],
                        a[href*='imagevenue'],
                        a[href*='imagebam']
                        `)].map(a => a.href);
                    }
                    captureLinksArray = links;
                    fun.showMsg(`Capture ${links.length} Links`);
                    debug("captureLinksArray", captureLinksArray);
                }
            });
        },
        imgs: () => fun.getImageHost(),
        repeat: 1,
        category: "nsfw2"
    }, {
        name: "Teen Photos",
        host: ["teenphotos.forumes.ru"],
        link: "https://teenphotos.forumes.ru/viewtopic.php?id=324",
        reg: () => !hasTouchEvents && /^https?:\/\/teenphotos\.forumes\.ru\/viewtopic\.php\?id=\d+/.test(fun.url),
        init: () => {
            document.addEventListener("click", event => {
                if (event.target.className === "container") {
                    let links = [...event.target.querySelectorAll(`
                    a[href^='https://imgspice.com/'],
                    a[href*='imx.to']:not([href*='/u/i/']),
                    a[href*='pixhost.to'],
                    a[href^='http://imagetwist.com/'],
                    a[href*='postimg.cc'],
                    a[href*='fastpic.org'],
                    a[href*='vipr.im'],
                    a[href*='turboimagehost'],
                    a[href*='imgbox.com'],
                    a[href*='imagevenue'],
                    a[href*='imagebam']
                    `)].map(a => a.href);
                    captureLinksArray = links;
                    fun.showMsg(`Capture ${links.length} Links`);
                    debug("captureLinksArray", captureLinksArray);
                }
            });
        },
        imgs: () => fun.getImageHost(),
        repeat: 1,
        category: "nsfw2"
    }, {
        name: "XONLY",
        host: ["xonly8.com"],
        link: "https://xonly8.com/index.php?topic=229069.0",
        reg: () => !hasTouchEvents && /^https?:\/\/xonly\d?\.com\/index\.php\?topic=/.test(fun.url),
        init: () => {
            document.addEventListener("click", event => {
                if (event.target.className === "post_wrapper") {
                    let links = [...event.target.querySelectorAll(`
                    a[href^='https://imgspice.com/'],
                    a[href*='imx.to']:not([href*='/u/i/']),
                    a[href*='pixhost.to'],
                    a[href^='http://imagetwist.com/'],
                    a[href*='postimg.cc'],
                    a[href*='fastpic.org'],
                    a[href*='vipr.im'],
                    a[href*='turboimagehost'],
                    a[href*='imgbox.com'],
                    a[href*='imagevenue'],
                    a[href*='imagebam']
                    `)].map(a => a.href);
                    captureLinksArray = links;
                    fun.showMsg(`Capture ${links.length} Links`);
                    debug("captureLinksArray", captureLinksArray);
                }
            });
        },
        imgs: () => fun.getImageHost(),
        repeat: 1,
        category: "nsfw2"
    }, {
        name: "imx.to gallery",
        host: ["imx.to"],
        reg: /^https?:\/\/imx\.to\/g\/\w+$/i,
        imgs: () => fun.gae("img.imgtooltip").map(e => e.src.replace("/u/t/", "/u/i/")),
        button: [4],
        insertImg: [
            ["#content", 2], 2
        ],
        go: 1,
        category: "nsfw2"
    }, {
        name: "imx.to",
        host: ["imx.to"],
        reg: /^https?:\/\/imx\.to\/i\/\w+$/i,
        autoClick: ".button.blue.large,#continuebutton,a[title='Show gallery']",
        category: "none"
    }, {
        name: "亚洲色吧",
        host: ["yazhouseba.com"],
        reg: /^https?:\/\/yazhouseba\.com\/meinv\/img-\d+\.html/,
        include: "#next-url",
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let pid = fun.ge("#next-url").rel;
            let json = await new Promise(resolve => {
                $.post("ajax.php", {
                    "action": "src",
                    "pid": pid
                }, data => resolve(data), "json");
            });
            return json.error_code == "0" ? json.urls.map(e => _unsafeWindow.img_dir + e) : [];
        },
        button: [4],
        insertImg: [".content>.image", 2],
        customTitle: ".content>h1",
        category: "nsfw2"
    }, {
        name: "1000艺术摄影/169图片大全",
        host: ["www.1000yishu.com", "www.169tp.com", "wap.169tp.com"],
        reg: /^https?:\/\/(www\.1000yishu\.com|www\.169tp\.com|wap\.169tp\.com)\/\w+\/\d+\/\d+\/\d+\.html/,
        imgs: () => {
            let max;
            try {
                [max] = fun.gt(".pagelist a").match(/\d+/);
            } catch {
                max = 1;
            }
            return fun.getImg(".big-pic img,.inside_box img", max, 9);
        },
        button: [4],
        insertImg: [".big-pic,.inside_box", 2],
        autoDownload: [0],
        next: ".fenxianga a,.pre_arct a",
        prev: ".fenxianga a:last-child,.next_arct a",
        css: ".ad,union{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "1T图库格式",
        reg: () => {
            let hosts1 = [
                "www.0b23.com",
                "www.1taz.com",
                "www.2cra.com",
                "www.3ktu.com",
                "www.714g.com",
                "www.aizibang.com",
                "www.cdnecs.com",
                "www.diu5.com",
                "www.edu-zytc.com",
                "www.gkiev.com",
                "www.hsudhf.com",
                "www.iduobi.com",
                "www.jnnmm.com",
                "www.jsjfgkgs.com",
                "www.mash120.com",
                "www.mmokok.com",
                "www.nanitu.com",
                "www.opks.cc",
                "www.php-art.com",
                "www.qo6q.com",
                "www.qyjafk.com",
                "www.rodwy.com",
                "www.rzjyz.com",
                "www.sqhyyz.com",
                "www.sy-sme.com",
                "www.wjjlf.com",
                "www.woxiutu.com",
                "www.wt768.com",
                "www.y521.com"
            ];
            let hosts2 = [
                "www.7tul.com"
            ];
            return hosts1.some(h => h === fun.lh) && /\/\w+\/\d+\.html$/.test(fun.lp) || hosts2.some(h => h === fun.lh) && /\/tu\d+\.html$/.test(fun.lp);
        },
        include: "#showimg img,.img-box img",
        imgs: () => {
            let max;
            try {
                [, max] = fun.gu(".endpage").match(/-(\d+)\.html/);
            } catch {
                max = 1;
            }
            return fun.getImgO("#showimg img,.img-box img", max, 5, null, 0, "#pageNum");
        },
        button: [4],
        insertImg: ["#showimg,.img-box", 2],
        autoDownload: [0],
        next: "a[title='上一篇']",
        prev: "a[title='下一篇']",
        category: "nsfw1"
    }, {
        name: "仿紳士漫畫UI寫真圖庫 簡介頁",
        reg: () => fun.checkUrl({
            e: [
                "//ul[@id='album_tabs']/li/a[@title='寫真圖庫'][text()='寫真圖庫']",
                ".png.bread a[title='寫真圖庫']",
                "//a[@class='btn'][text()='開始閱讀']"
            ]
        }),
        init: () => {
            fun.clearAllTimer();
            fun.createImgBox("#bodywrap", 2);
        },
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let url = fun.ge("//a[@class='btn'][text()='開始閱讀']").href;
            return fun.fetchDoc(url).then(dom => fun.gae("#photo_body img", dom));
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        customTitle: "#bodywrap>h2",
        css: "#FullPictureLoadMainImgBox{max-width:1170px;margin-left:auto;margin-right:auto}",
        category: "nsfw1"
    }, {
        name: "仿紳士漫畫UI寫真圖庫 閱讀頁",
        reg: () => fun.checkUrl({
            p: "/read/id/",
            e: [
                "//ul[@id='album_tabs']/li/a[@title='寫真圖庫'][text()='寫真圖庫']",
                ".png.bread a[title='寫真圖庫']"
            ]
        }),
        imgs: "#photo_body img",
        button: [4],
        insertImg: ["#photo_body", 2],
        customTitle: () => fun.title(/閱讀內頁.+/),
        css: "#photo_body{max-width:1170px;margin-left:auto;margin-right:auto}",
        category: "nsfw1"
    }, {
        name: "坏哥哥旧站",
        reg: () => fun.checkUrl({
            e: [
                "#content_news img",
                "#page"
            ]
        }) && !fun.lp.includes("/index"),
        init: () => fun.setStyleSheet(),
        imgs: () => {
            let [max] = fun.gt("#page>*:last-child").match(/\d+/);
            let links = fun.arr(max, (v, i) => i === 0 ? fun.url : fun.url + "index" + (i + 1) + ".html");
            return fun.getImgA("#content_news img", links);
        },
        button: [4],
        insertImg: ["#content_news", 2],
        customTitle: ".title h1",
        css: "div:has(>img[src^='/template/']),div:has(>img[src*='/HtmlS/']){display:none!important;}",
        category: "nsfw2"
    }, {
        name: "坏哥哥旧站M",
        reg: () => fun.checkUrl({
            p: /\.html$/,
            e: [
                ".fed-arti-content img",
                "//a[text()='尾页']"
            ]
        }),
        init: () => fun.setStyleSheet(),
        imgs: () => {
            let [, max] = fun.gu("//a[text()='尾页']").match(/-(\d+)\.html$/);
            let url = fun.url.replace(/(-\d+)?\.html$/, "");
            let links = fun.arr(max, (v, i) => url + "-" + (i + 1) + ".html");
            return fun.getImgA(".fed-arti-content img", links);
        },
        button: [4],
        insertImg: [".fed-arti-content", 2],
        customTitle: ".fed-arti-head h2",
        css: "div:has(>img[src^='/template/']),div:has(>img[src*='/HtmlS/']){display:none!important;}",
        category: "nsfw2"
    }, {
        name: "坏哥哥旧站M",
        reg: () => fun.checkUrl({
            e: [
                ".fed-arti-content img",
                ".fed-page-info"
            ]
        }) && !fun.lp.includes("/index"),
        init: () => fun.setStyleSheet(),
        imgs: () => {
            let [max] = fun.gt(".fed-page-info>*:last-child").match(/\d+/);
            let links = fun.arr(max, (v, i) => i === 0 ? fun.url : fun.url + "index" + (i + 1) + ".html");
            return fun.getImgA(".fed-arti-content img", links);
        },
        button: [4],
        insertImg: [".fed-arti-content", 2],
        customTitle: ".fed-arti-head h2",
        css: "div:has(>img[src^='/template/']),div:has(>img[src*='/HtmlS/']){display:none!important;}",
        category: "nsfw2"
    }, {
        name: "坏哥哥新站",
        reg: () => fun.checkUrl({
            e: [
                ".single-video-info-content img",
                ".pagination"
            ]
        }),
        imgs: async () => {
            await fun.getNP(".single-video-info-content>*", ".pagination li.active+li>a:not([title='下一页'])", null, ".pagination");
            return fun.gae(".single-video-info-content img");
        },
        button: [4],
        insertImg: [".single-video-info-content", 2],
        customTitle: ".single-video-title h2",
        css: "div:has(>img[src^='/template/']),div:has(>img[src*='/HtmlS/']){display:none!important;}",
        category: "nsfw2"
    }, {
        name: "坏哥哥M_AD",
        reg: () => fun.checkUrl({
            e: [
                ".fed-nav-logo,.navbar-brand",
                "//div[@class='fed-nav-left']/a[text()='美女美图' or text()='美图区'] | //div[@class='m-footer']"
            ]
        }) && hasTouchEvents,
        css: "div:has(>img[src^='/template/']),div:has(>img[src*='/HtmlS/']){display:none!important;}",
        category: "ad"
    }, {
        name: "万德美图屋/蚂蚁图库",
        reg: () => fun.checkUrl({
            h: [
                "www.wind5.com",
                "www.mayihz.com"
            ],
            p: /^\/tu\d+\.html$/,
            e: "#portfolio img"
        }),
        imgs: () => {
            let max;
            try {
                [, max] = fun.gu("a[title=尾页]").match(/-(\d+)\.html/);
            } catch {
                max = 1;
            }
            return fun.getImgO("#portfolio img", max, 5);
        },
        button: [4],
        insertImg: ["#portfolio", 2],
        autoDownload: [0],
        next: "a[title='上一篇']",
        prev: "a[title='下一篇']",
        customTitle: "h1.fed-swip-head",
        category: "nsfw1"
    }, {
        name: "每天乐图片网",
        host: ["www.mtianle.com"],
        reg: /^https?:\/\/www\.mtianle\.com\/\w+\/\d+\.html$/,
        imgs: () => {
            let [, max] = fun.gu("//a[text()='尾页']").match(/_(\d+)\.html/);
            return fun.getImgO(".pic-main img", max, 9);
        },
        button: [4],
        insertImg: [".pic-main", 2],
        autoDownload: [0],
        next: "a#pre-page",
        prev: "a#next-page",
        customTitle: "h1",
        category: "nsfw1"
    }, {
        name: "每天乐图片网M",
        host: ["m.mtianle.com"],
        reg: /^https?:\/\/m\.mtianle\.com\/\w+\/\d+\.html$/,
        imgs: () => {
            let [max] = fun.gt(".num-page").match(/\d+$/);
            return fun.getImgO(".pic-m img", max, 9);
        },
        button: [4],
        insertImg: [".pic-m", 2],
        autoDownload: [0],
        next: "//a[text()='上一组图'][@href]",
        prev: "//a[text()='下一组图'][@href]",
        customTitle: ".tit-m h1",
        css: "div[style]:has(>ul){display:none!important;}",
        category: "nsfw1"
    }, {
        name: "亿秀美女",
        host: ["www.itu11.com", "m.itu11.com"],
        reg: /^https?:\/\/(www|m)\.i?tu11\.com\/\w+\/(\d+\/)?\d+\/\d+\.html$/i,
        include: "#showimg img,.img-box img",
        imgs: async () => {
            await fun.getNP("#showimg img,.img-box img", "a.curpage+a:not(.prepage)", null, "#paginationEle", 0, null, 0, 0);
            return fun.gae("#showimg img,.img-box img");
        },
        button: [4],
        insertImg: ["#showimg,.img-box", 2],
        autoDownload: [0],
        next: "//div[contains(text(),'上一篇')]/a | //a[text()='上一篇']",
        prev: "//div[contains(text(),'下一篇')]/a | //a[text()='下一篇']",
        category: "nsfw1"
    }, {
        name: "爱美女网",
        host: ["www.aimeinv6.com"],
        reg: /^https?:\/\/www\.aimeinv6\.com\/\w+\/\d+\.html$/,
        init: () => {
            let a = fun.ge("a[href*=dPlayNext]");
            a.outerHTML = `<div class="imgBox">${a.innerHTML}</div>`;
        },
        imgs: () => {
            let max;
            try {
                [max] = fun.gt("//a[contains(text(),'共')]").match(/\d+/);
            } catch {
                max = 1;
            }
            return fun.getImg("#bigimg", max, 9);
        },
        button: [4],
        insertImg: [".imgBox", 2],
        autoDownload: [0],
        next: "//span[contains(text(),'上一篇')]/a",
        prev: "//span[contains(text(),'下一篇')]/a",
        category: "nsfw1"
    }, {
        name: "JJGirls",
        reg: () => fun.checkUrl({
            h: "jjgirls.com",
            e: [
                ".L664 a:has(>img:not([src^='/thumbs/']))",
                ".L664 a>img:not([src^='/thumbs/'])"
            ]
        }),
        init: () => fun.createImgBox(".L664"),
        imgs: () => {
            let pagesE = fun.ge(".matchlinks");
            let pages = /\/\d+\/$/.test(fun.lp);
            if (pagesE && pages) {
                let url = fun.lp.replace(/\/\d+\/$/, "");
                let max;
                let link = fun.gu(".matchlinks>a:has(+img)");
                if (/more$/.test(link)) {
                    max = fun.gt(".matchlinks>a+b");
                } else {
                    [, max] = link.match(/\/(\d+)\/$/);
                }
                let links = fun.arr(max, (v, i) => `${url}/${(i + 1)}/`);
                return fun.getImgA(".L664 a:has(>img:not([src^='/thumbs/']))", links);
            } else {
                return fun.gae(".L664 a:has(>img:not([src^='/thumbs/']))");
            }
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        go: 1,
        category: "nsfw2"
    }, {
        name: "JJGirls M",
        reg: () => fun.checkUrl({
            h: "jjgirls.com"
        }) && hasTouchEvents,
        init: () => fun.createImgBox("div.p222308", 2),
        imgs: "div.p222308>a:has(>img:not([src^='/temp'])):has(>img:not([src^='/thumbs']))",
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        go: 1,
        category: "nsfw2"
    }, {
        name: "JavTube/PureJapanese/ThumbNow/69DV/JapaneseThumbs/AsiaUncensored",
        reg: () => fun.checkUrl({
            h: [
                "javtube.com",
                "purejapanese.com",
                "thumbnow.com",
                "69dv.com",
                "japanesethumbs.com",
                "asiauncensored.com"
            ],
            e: [
                ".L664 a:has(>img:not([src^='/thumbs/']))",
                ".L664 a>img:not([src^='/thumbs/'])"
            ]
        }),
        init: () => fun.createImgBox(".L664"),
        imgs: () => {
            let pagesE = fun.ge(".matchlinks");
            let pages = /\/\d+\/$/.test(fun.lp);
            if (pagesE && pages) {
                let url = fun.lp.replace(/\/\d+\/$/, "");
                let max;
                let last = fun.ge("//div[@class='matchlinks']/a[text()='Last']");
                if (last) {
                    let link = fun.gu("//div[@class='matchlinks']/a[text()='Last']");
                    [, max] = link.match(/\/(\d+)\/$/);
                } else {
                    max = fun.gt(".matchlinks>a:last-child", 2);
                }
                let links = fun.arr(max, (v, i) => `${url}/${(i + 1)}/`);
                return fun.getImgA(".L664 a:has(>img:not([src^='/thumbs/']))", links);
            } else {
                return fun.gae(".L664 a:has(>img:not([src^='/thumbs/']))");
            }
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        go: 1,
        category: "nsfw2"
    }, {
        name: "欧洲人体艺术套图网/亚洲人体艺术/日本人体艺术/美女人体艺术/一千美女",
        reg: () => fun.checkUrl({
            h: [
                /^(www\.)?ozrt\.live$/,
                /^(www\.)?yzrt\.live$/,
                /^(www\.)?rbrt\.live$/,
                /^(www\.)?mnrt\.live$/,
                /^(www\.)?yqmn\.live$/
            ],
            s: "action-imagelist-uid-"
        }),
        imgs: async () => {
            await fun.getNP(".imglist>*,.m_aana>ul,.main_column_pic,.pic-list>ul", "strong+a:not(.next)", null, ".pages");
            return fun.getImgA(".bigimg img,#articlebody img,.content_pic img,#big-pic img", ".imglist a,.m_aana a,.main_column_pic a,.pic-list a");
        },
        button: [4],
        insertImg: [".imglist,.m_aana,.main_column,.pic-list", 2],
        customTitle: () => {
            let selector = ".title>div[style],.imgWrap a,.name>a";
            let r = /\(\d+p\)|\s?\(.+\)\s?/i;
            if (fun.ge(selector)) {
                return fun.dt({
                    s: selector,
                    d: r
                });
            } else {
                return fun.dt({
                    t: fun.ge(".main_column_pic img").alt,
                    d: r
                });
            }
        },
        category: "nsfw2"
    }, {
        name: "中国人体艺术模特网/好312图库/空图美女网",
        reg: () => fun.checkUrl({
            h: [
                "www.crtys.net",
                "crtys.net",
                "www.hao312.live",
                "hao312.live",
                "www.kongtu.com",
                "kongtu.com"
            ],
            p: /^\/post\/\d+$/
        }),
        init: () => {
            fun.clearAllTimer();
            fun.createImgBox(".viewall_plugin", 2);
        },
        imgs: ".LightGallery_Item",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".viewall_plugin"], 2
        ],
        autoDownload: [0],
        next: ".prev>a",
        prev: ".next>a",
        customTitle: "h1.tit",
        category: "nsfw2"
    }, {
        name: "上流时尚人体艺术",
        host: ["www.6643.live", "6643.live"],
        reg: /^https?:\/\/(www\.)?6643\.live\/html\/\d+\/n-\d+\.html$/,
        imgs: async () => {
            await fun.getNP("#d_BigPic", "strong+a:not(.next)", null, ".pages");
            return fun.gae("#d_BigPic img");
        },
        button: [4],
        insertImg: ["#efpBigPic", 2],
        autoDownload: [0],
        next: "#efpNextTxt>a",
        prev: "#efpPreTxt>a",
        customTitle: "#d_picTit",
        category: "nsfw2"
    }, {
        name: "Girl Girl Go",
        reg: /^https?:\/\/(\w{2}\.)?(girlgirlgo|girlygirlpic)\.(org|net|xyz|icu|com|biz|top)\/a\/\w+/,
        imgs: ".figure-link",
        button: [4],
        insertImg: [".post-media-body", 2],
        next: async () => {
            await fun.waitEle("a[rel=next]", 30);
            let next = fun.ge("a[rel=next]");
            return next ? next.href : null;
        },
        prev: "a[rel=prev]",
        customTitle: async () => {
            await fun.waitEle(".figure-link");
            return fun.gt(".entry-title a").split(" No.")[0].trim();
        },
        category: "nsfw1"
    }, {
        name: "QGirlz/CuteLadyPic",
        reg: () => fun.checkUrl({
            e: [
                ".main-image",
                "//a[@data-title and picture/source]",
                ".next",
                ".main-title"
            ]
        }),
        imgs: () => fun.getImg("//a[@data-title and picture/source]", (fun.gt(".next", 2) || 1), 16),
        button: [4],
        insertImg: [".main-image", 2],
        customTitle: () => fun.gt(".main-title").split(" No.")[0].trim(),
        category: "nsfw1"
    }, {
        name: "QGirlz/CuteLadyPic M",
        reg: () => fun.checkUrl({
            p: "/m/",
            e: [
                ".place-padding+.place-padding",
                "//a[@data-title and picture/source]",
                ".prev-next-page",
                ".blog-title",
                "#post-tag"
            ]
        }),
        init: () => fun.createImgBox("#post-tag", 1),
        imgs: () => {
            let [, max] = fun.gt(".prev-next-page").match(/\d+/g);
            return fun.getImg("//a[@data-title and picture/source]", max, "4");
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#content>div:first-child[style],#content>article,#content>.place-padding:not([id])"], 2
        ],
        customTitle: () => fun.gt(".blog-title").split(" No.")[0].trim(),
        category: "nsfw1"
    }, {
        name: "cn.angirlz.com", //SPA
        reg: /^https?:\/\/\w{2}\.angirlz\.com\/album\/\w+/,
        imgs: async () => await fun.waitEle(".loading[style$=hidden]") ? fun.gae("#divGallery a") : [],
        button: [4],
        insertImg: ["div[key=album_main]", 2],
        customTitle: "h1",
        category: "nsfw2"
    }, {
        name: "KawaiiX系列 一 分頁",
        reg: () => fun.checkUrl({
            p: /^\/[^/]+\/\w+/,
            e: [
                ".separator>a[href]",
                ".album-post-body .clear,.album-post-share-wrap",
                ".nav-links"
            ]
        }),
        imgs: () => fun.getImg(".separator>a[href]", (fun.gt(".nav-links>*:last-child", 2) || 1), 16),
        button: [4],
        insertImg: [
            [".album-post-body .clear,.album-post-share-wrap", 1, "div[itemprop='description articleBody'],.album-post-body>*:not(.album-post-inner):not(.album-post-share-wrap):not(#FullPictureLoadOptionsButtonParentDiv,.FullPictureLoadImage,a[data-fancybox]):not(#FullPictureLoadEnd)"], 2
        ],
        customTitle: ".breadcrumbs>span:last-child",
        css: "#openRss{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "KawaiiX系列 一",
        reg: () => fun.checkUrl({
            e: ".album-post-inner,.album-postmeta-primarypix"
        }),
        imgs: ".separator>a[href]",
        button: [4],
        insertImg: [
            [".album-post-inner,.album-postmeta-primarypix", 2, ".separator"], 2
        ],
        customTitle: ".breadcrumbs>span:last-child",
        css: "#openRss{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "KawaiiX系列 二 分頁",
        reg: () => fun.checkUrl({
            e: [
                "//a[@data-title and picture/source]",
                ".hero+.hero,.entry-content,.d-flex>.col-24,.album-post",
                ".entry-title,.album-title,.album-post-title,.col-12>h1,.album-h1",
                ".nav-links"
            ]
        }),
        imgs: () => {
            let max;
            fun.ge(".current-page") ? max = fun.gt(".current-page").match(/\d+$/)[0] : max = fun.gt(".nav-links>*:last-child", 2) || 1;
            return fun.getImg("//a[@data-title and picture/source]", max, 16);
        },
        button: [4],
        insertImg: [".hero+.hero,.entry-content,.d-flex>.col-24,.album-post", 2],
        customTitle: () => fun.gt(".entry-title,.album-title,.album-post-title,.col-12>h1,.album-h1").split(" No.")[0].trim(),
        css: ".flex-grid:not(.masonry){display:block!important;}#openRss,div.loading[style]{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "KawaiiX系列 二",
        reg: () => fun.checkUrl({
            e: [
                ".hero+.hero,.entry-content,.d-flex>.col-24,.album-post",
                ".entry-title,.album-title,.album-post-title,.col-12>h1,.album-h1",
                "//a[@data-title and picture/source]"
            ]
        }),
        imgs: "//a[@data-title and picture/source]",
        button: [4],
        insertImg: [".hero+.hero,.entry-content,.d-flex>.col-24,.album-post,.album-h1", 2],
        customTitle: () => fun.title(/\s-\s[\w\.]+$/i).replace(/\s?\(\d+\s?photos\)/, "").trim(),
        css: "#openRss,div.loading[style]{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "壹纳网",
        host: ["yinaw.com"],
        reg: /^https?:\/\/yinaw\.com\/\d+\.html$/,
        include: ".article-content img:not([src*='yinaw.png'])",
        init: async () => {
            let baiduApi = "https://image.baidu.com/search/down?thumburl=https://baidu.com&url=";
            let links = fun.gau(".fenye>a");
            if (links.length > 0) {
                links = [...new Set(links)];
                await fun.getEle(links, ".article-content>*:not(.open-message,.fenye,.article-social)", [".open-message", 1], ".fenye");
            }
            let imgs = fun.gae(".article-content img:not([src*='yinaw.png'])");
            imgs.forEach(img => {
                if (/^https?:\/\/\w+\.sinaimg\.cn\//.test(img.src)) {
                    img.dataset.src = img.src.replace(/^(https?:\/\/\w+\.sinaimg\.cn\/)/, `${baiduApi}$1`).replace("/mw690/", "/large/");
                } else if (/^https?:\/\/i\d\.wp\.com\//.test(img.src)) {
                    img.dataset.src = img.src.replace("/mw690/", "/large/").replace(/\?w=.+$/, "").replace(/^https?:\/\/i\d\.wp\.com\//, `${baiduApi}https://`);
                } else {
                    img.dataset.src = img.src.replace("/mw690/", "/large/");
                }
            });
            if (setYinawSinaOriginalURL == 1) {
                imgs.forEach(img => (img.dataset.src = img.dataset.src.replace(baiduApi, "")));
            }
            imgs.forEach(img => {
                img.src = loading_bak;
                fun.imagesObserver.observe(img);
            });
        },
        imgs: ".article-content img:not([src*='yinaw.png'])",
        autoDownload: [0],
        next: ".article-nav-prev>a",
        prev: ".article-nav-next>a",
        customTitle: ".article-title",
        referer: "https://weibo.com/",
        category: "nsfw1"
    }, {
        name: "D哥新聞",
        host: ["dbro.news"],
        link: "https://dbro.news/category/p0-%e5%a5%97%e5%9c%96%e7%b3%bb%e5%88%97",
        reg: () => fun.checkUrl({
            h: "dbro.news"
        }),
        imgs: ".pic_center>img,.content_left img,.container img.mt-1,.wp-block-gallery img,a.jig-link,.pages img,.post-content img",
        customTitle: ".post-title",
        category: "nsfw2"
    }, {
        name: "流量密碼",
        host: ["jo106.com"],
        link: "https://jo106.com/beauty-photo/",
        reg: /^https?:\/\/jo106\.com\/\d+\/$/i,
        include: "//div[@class='cat-links']/a[text()='美女圖片'][@rel='category tag']",
        imgs: ".entry-content .col-md-12>img",
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".entry-title",
        category: "nsfw1"
    }, {
        name: "R18成人站-流量密碼",
        host: ["r18.jo106.com"],
        reg: /^https?:\/\/r18\.jo106\.com\/\d+\/$/i,
        include: "//div[@class='cat-links']/a[text()='成人漫畫' or text()='清涼寫真' or  text()='歐美寫真' or  text()='性感激情' or  text()='絲襪美腿'][@rel='category tag']",
        imgs: ".entry-content .col-md-12>img",
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: () => fun.dt({
            s: ".entry-title",
            d: /– 貼圖 –.+/
        }),
        category: "nsfw2"
    }, {
        name: "尼克成人網 人體寫真",
        host: ["nick20.com"],
        link: "https://nick20.com/pic/index.html",
        reg: /^https?:\/\/nick20\.com\/pic\/pic\d+\.html$/i,
        imgs: () => {
            thumbnailSrcArray = _unsafeWindow.Large_cgurl.filter(item => item);
            return thumbnailSrcArray.map(e => e.replace("https://thumbs", "https://images").replace("_t.", "_o."));
        },
        button: [4],
        insertImg: ["//center[img]", 2],
        customTitle: ".bbs_entry_wrapper>h2",
        category: "nsfw2"
    }, {
        name: "尼克成人網 成人漫畫",
        reg: /^https?:\/\/nick20\.com\/bbs2\/index\.cgi\?read=\d+/i,
        imgs: "a[id][onclick]",
        button: [4],
        insertImg: ["p.img", 2],
        customTitle: ".bbs_entry_wrapper>h2",
        category: "nsfw2"
    }, {
        name: "尼克成人網 成人貼圖 本土自拍 走光偷拍",
        reg: /^https?:\/\/nick20\.com\/bbs(3|5)?\/\d+\.html/i,
        imgs: "p#img>img",
        button: [4],
        insertImg: ["p#img", 2],
        customTitle: ".bbs_entry_wrapper>h2",
        category: "nsfw2"
    }, {
        name: "尼克成人網M",
        host: ["m.nick20.com"],
        link: "https://nick20.com/pic/index.html",
        reg: [
            /^https?:\/\/m\.nick20\.com\/pic\/index\.(html|cgi)\?read=\d+$/i,
            /^https?:\/\/m\.nick20\.com\/bbs(2|3|5)?\/\d+\.html$/i
        ],
        imgs: () => {
            let [bp] = fun.gae(".bbs_pictures");
            let imgs = fun.gae("img", bp);
            return fun.getImgSrcArr(imgs).filter(src => !/\/images\/share|\/add\/|aav999/.test(src));
        },
        button: [4],
        insertImg: [".bbs_pictures", 2],
        customTitle: ".entryBlock>strong",
        category: "nsfw2"
    }, {
        name: "小濕妹圖庫",
        host: ["xsmpic.com"],
        reg: /^https?:\/\/xsmpic\.com\/\d+\/$/,
        imgs: ".entry-content img:not([data-src])",
        customTitle: "h1.entry-title",
        category: "nsfw2"
    }, {
        name: "五歌的开心网",
        host: ["happy.5ge.net"],
        reg: /^https?:\/\/happy\.5ge\.net\/archives\/\d+\.html$/,
        include: "//ul[@class='joe_bread__bread']//a[contains(text(),'图册')]",
        imgs: ".joe_detail__article img",
        button: [4],
        insertImg: [".joe_detail__article", 2],
        customTitle: ".joe_detail__title",
        fancybox: {
            v: 3,
            css: false
        },
        css: "div:has(>center>a>img){display:none!important;}",
        category: "nsfw2"
    }, {
        name: "漫画精品",
        host: ["xxxxn.click"],
        reg: /^https?:\/\/xxxxn\.click\/index\.php\/art\/detail\/id\/\d+\.html$/,
        imgs: ".photoList img",
        button: [4],
        insertImg: [".photoList", 2],
        customTitle: ".title",
        css: "div:has(>div[title=Close]),div:has(>span[onclick]){display:none!important;}",
        category: "nsfw2"
    }, {
        name: "漫画精品 AD",
        reg: /^https?:\/\/xxxxn\.click\//,
        css: ".colPhotoList:has(>div>a>img[style]),div:has(>div[title=Close]),div:has(>span[onclick]){display:none!important;}",
        category: "ad"
    }, {
        name: "我們的性愛日誌",
        host: ["www.sexdiary1769.com"],
        reg: /^https?:\/\/www\.sexdiary1769\.com\/article\/\d+$/,
        include: "//div[@class='category']/a[contains(text(),'寫真館')]",
        imgs: "#article-content img",
        button: [4],
        insertImg: ["#article-content", 2],
        customTitle: ".top-info h1",
        category: "nsfw2"
    }, {
        name: "湿女吧",
        host: ["shinv.pics"],
        reg: /^https?:\/\/shinv\.\w+\/posts\/\w+\/$/i,
        imgs: "//div[@class='p-1 col-span-12 md:col-span-9']//img[@class='block my-2 mx-auto']",
        button: [4],
        insertImg: ["//div[@class='p-1 col-span-12 md:col-span-9']", 2],
        customTitle: "h1.text-xl",
        category: "nsfw2"
    }, {
        name: "粉色家园",
        host: ["www.top888.com", "top888.com"],
        reg: /^https?:\/\/(www\.)?top888\.com\/thread\/\d+/i,
        init: async () => {
            await fun.waitEle(".card-body");
            let code = fun.gst("author");
            let json = JSON.parse(code);
            siteJson = json;
            debug("\n此頁JSON資料\n", siteJson);
            await fun.waitEle("iframe[src*='sendvid']", 50);
        },
        imgs: () => siteJson.image,
        capture: () => siteJson.image,
        customTitle: () => siteJson.headline,
        category: "nsfw2"
    }, {
        name: "好视角",
        host: ["shijiao.meinvnews.com"],
        reg: () => fun.checkUrl({
            e: ".logo img[alt=好视角]",
            p: /^\/\w+\.html$/
        }),
        imgs: ".tit+.text img:not([onerror]),.tit+.pic img:not([onerror])",
        button: [4],
        insertImg: [".tit+.text,.tit+.pic", 2],
        autoDownload: [0],
        next: "//p[contains(text(),'上一篇')]/a",
        prev: "//p[contains(text(),'下一篇')]/a",
        customTitle: ".tit>h1,.grjs h1",
        css: ".tit+.text img{width:100%!important}.tit+.pic img{margin:auto!important}.mbx_nav~div:not([class]),body>em{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "哔咔庇护所v2",
        host: ["ios.zzgo810.top"],
        reg: () => fun.checkUrl({
            e: "//title[contains(text(),'哔咔庇护所')]",
            s: "&catid="
        }),
        exclude: "#dplayer.dplayer",
        init: async () => {
            fun.remove("//div[@class='row'][div/a/img]");
            await fun.waitEle("#lightbox~img");
        },
        imgs: () => fun.ge("#lightbox a") ? fun.gae("#lightbox a") : fun.gae("#lightbox~img"),
        button: [4],
        insertImg: ["//div[div[@id='lightbox']]", 2],
        customTitle: "#comic-view-main .text-center",
        category: "nsfw2"
    }, {
        name: "G-AVSTAR",
        reg: () => fun.checkUrl({
            h: "g-avstar.com",
            p: /^\/\d+\/\d+\/\d+\/[^\/]+\/$/,
            e: "//p[contains(text(),'更多美图')]"
        }),
        init: () => fun.createImgBox(".ngg-galleryoverview", 1),
        imgs: async () => {
            await fun.getNP(".ngg-gallery-thumbnail-box", ".ngg-navigation>span.current+a:not(.prev)", null, ".ngg-navigation");
            return fun.gae(".ngg-gallery-thumbnail a")
        },
        thums: ".ngg-gallery-thumbnail img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".ngg-galleryoverview,.ngg-navigation"], 2
        ],
        customTitle: ".entry-title",
        category: "nsfw2"
    }, {
        name: "瓜老師の鉴赏课",
        reg: () => fun.checkUrl({
            h: "photo.lovegua.com",
            p: /^\/\d+\.html$/
        }),
        init: () => fun.createImgBox("p:has(>img)", 1),
        imgs: "p:has(>img)>img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "p:has(>img)"], 2
        ],
        autoDownload: [0],
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: ".title.single",
        category: "nsfw2"
    }, {
        name: "XO福利圖",
        links: [
            "https://kb1.a7xofulitu.com/%E5%84%BF%E6%AD%8C%E4%B8%89%E7%99%BE%E9%A6%96/",
            "https://www.xofulitu521.xyz/xoxo",
            "https://www.xofulitu9ok999.xyz/xoxo",
            "https://diedk1123-ake33i.xofulitu2za222.sbs/xoxo",
            "https://ponds-attract-ducks.xofulitu1qqq111.xyz/xoxo"
        ],
        reg: () => fun.checkUrl({
            h: "xofulitu",
            e: [
                "//title[contains(text(),'XO福利圖')]",
                ".picture-wrap img"
            ],
            p: /\/art\/pic\/id\/\d+\/$/i
        }),
        imgs: () => fun.getImgSrcArr(".picture-wrap img").filter(src => !src.includes("loading")),
        button: [4],
        insertImg: [".container.clearfix", 2],
        go: 1,
        customTitle: () => fun.dt({
            d: [
                / - XO福利圖.+$/,
                /[\/\s]?[\(\[（【“]\d+[\w\s\\\/\.+-／]+[\)\]）】”]|\s?\d+p[\+\s]+\d+v|\s?\d+p\d+v|\s?\d+P|\(\d\)/gi,
                /[\s-]+$/
            ]
        }),
        css: ".custom_link-wrapper,div:has(>#floating-ad){display:none!important;}",
        category: "nsfw2"
    }, {
        name: "XO福利圖 分類自動翻頁",
        enable: 1,
        reg: () => fun.checkUrl({
            h: "xofulitu",
            e: "//title[contains(text(),'XO福利圖')]",
            p: /^\/arttype\//i
        }),
        autoPager: {
            ele: ".container.clearfix",
            observer: ".container.clearfix .album",
            next: ".paging-item--current+a",
            re: ".pagging-div",
            lazySrc: "img[data-src]",
            pageNum: ".paging-item--current"
        },
        openInNewTab: ".picture-list a:not([target=_blank])",
        css: ".custom_link-wrapper,div:has(>#floating-ad){display:none!important;}",
        category: "autoPager"
    }, {
        name: "XO福利圖AD",
        reg: () => fun.checkUrl({
            h: "xofulitu",
            e: "//title[contains(text(),'XO福利圖')]"
        }),
        css: ".custom_link-wrapper,div:has(>#floating-ad){display:none!important;}",
        category: "ad"
    }, {
        name: "ONS漂亮MM图库",
        host: ["ons.ooo"],
        link: "https://www.rb1.es/momotk/",
        reg: /^https?:\/\/ons\.ooo\/article\/\d+\/$/,
        imgs: ".article-content img",
        button: [4],
        insertImg: [".article-content", 2],
        customTitle: ".focusbox-title",
        category: "nsfw1"
    }, {
        name: "XXAV",
        host: ["www.xxav.one", "www.xxav2235.com"],
        reg: /^https?:\/\/(www\.xxav\.one|www\.xxav\d+\.com)\/view\/\d+\/\d+\/\d+\.html$/,
        init: () => fun.createImgBox("article:has(>img)", 1),
        imgs: "article>img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "article:has(>img)"], 2
        ],
        autoDownload: [0],
        next: "//em[text()='上一篇:']/a",
        prev: "//em[text()='下一篇:']/a",
        customTitle: () => fun.title("-XXAV"),
        css: ".suspend{display:none!important;}",
        category: "nsfw1"
    }, {
        name: "性福里",
        host: ["sexfull.av9238.com"],
        reg: () => fun.checkUrl({
            h: "sexfull",
            p: /^\/img\/detail_\d+\.html$|^\/manhua\/chapter_[\d_]+\.html$/
        }),
        imgs: ".left .image img",
        button: [4],
        insertImg: [".image", 2],
        autoDownload: [0],
        next: "//a[h2[contains(text(),'下一话')]]",
        prev: "//a[h2[contains(text(),'上一话')]]",
        customTitle: ".left h2",
        css: ".container:has(>#advlist){display:none!important;}",
        category: "nsfw2"
    }, {
        name: "性福里 AD",
        reg: () => fun.checkUrl({
            h: "sexfull",
            e: "#advlist"
        }),
        css: ".container:has(>#advlist){display:none!important;}",
        category: "ad"
    }, {
        name: "MOMO图库",
        host: ["www.momotk.com", "momotk5.uno", "www.momotk7.es"],
        link: "https://www.rb1.es/momotk/",
        reg: [
            /^https?:\/\/(www\.)?momotk\.com\/\d+\.html$/i,
            /^https?:\/\/(www\.)?momotk\d\.\w+\/\d+\.html$/i
        ],
        include: ".ngg-gallery-thumbnail-box",
        imgs: async () => {
            await fun.getNP(".ngg-gallery-thumbnail-box", "span.current+a", null, ".ngg-navigation");
            let as = fun.gae(".ngg-gallery-thumbnail-box a");
            thumbnailSrcArray = as.map(a => a.dataset.thumbnail);
            return as.map(a => a.dataset.src);
        },
        button: [4],
        insertImg: [".article-content", 2],
        customTitle: ".article-title",
        css: ".asst-single-header{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "魅影画廊",
        host: ["www.wc1.es", "myhl5.uno", "www.jb9.es"],
        link: "https://wc2.es/myhl",
        reg: /^https?:\/\/(www\.wc1\.es|myhl\d.uno|www\.jb\d\.es)\/\d+\.html$/i,
        imgs: () => {
            thumbnailSrcArray = fun.gau(".gallery a");
            let xhrNum = 0;
            fun.showMsg("fun.xhrHEAD...", 0);
            return thumbnailSrcArray.map(async (e) => {
                let src = e.replace("-scaled", "");
                let res = await fun.xhrHEAD(src);
                fun.showMsg(`fun.xhrHEAD(${xhrNum+=1}/${thumbnailSrcArray.length})`, 0);
                let status = res.status;
                return status == 404 ? e : src;
            });
        },
        button: [4],
        insertImg: [
            [".gallery", 2, ".gallery"], 2
        ],
        autoDownload: [0],
        next: ".article-nav-prev>a",
        prev: ".article-nav-next>a",
        customTitle: ".article-title",
        fancybox: {
            v: 3,
            css: false
        },
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "nsfw2"
    }, {
        name: "色色图库",
        host: ["www.sstuku13.xyz", "sstuku6.xyz", "sstuku7.xyz", "sstuku8.xyz", "sstuku9.xyz", "sstuku10.xyz", "sstuku11.xyz", "sstuku12.xyz", "sstuku13.xyz", "sstuku14.xyz", "sstuku15.xyz"],
        reg: /^https?:\/\/(www\.)?sstuku\d+\.xyz\/artshow-\d+\.html$/i,
        imgs: ".entry-media img",
        button: [4],
        insertImg: [".entry-content", 2],
        go: 1,
        customTitle: () => fun.dt({
            s: ".single-post-detail",
            d: "😋 "
        }),
        category: "nsfw1"
    }, {
        name: "美女写真图集",
        host: ["www.112ze.com", "112ze.com"],
        reg: /^https?:\/\/(www\.)?112ze\.com\/index\.php\/\w+\/\d+\.html$/i,
        imgs: ".post-content img",
        button: [4],
        insertImg: [".post-content", 2],
        customTitle: ".mdui-text-black",
        fancybox: {
            v: 3,
            css: false
        },
        category: "nsfw1"
    }, {
        name: "聚姬集",
        host: ["18jjj.cyou", "18jjj.xyz"],
        reg: /^https?:\/\/18jjj\.\w+\/chapter\/\d+$/i,
        include: "#enc_img img",
        init: () => {
            fun.clearAllTimer();
            fun.remove("//div[@class='comicpage']/a[img[@alt]] | //div[@class='comicpage']/div[script] | //div[@id='cp_img']/a[img[@alt]] | //div[@id='cp_img']/div[script]");
        },
        imgs: async () => {
            await fun.getNP("#enc_img>div,#enc_img>img", "//a[text()='下一页'][@href]", null, ".fanye,.view-bottom-bar");
            return fun.gae("#enc_img img");
        },
        button: [4],
        insertImg: ["#enc_img", 2],
        customTitle: () => {
            if (fun.ge(".comic-name")) {
                return fun.gt(".comic-name");
            } else {
                let text = fun.gst("bookInfo").match(/bookInfo[\s=]+([^;]+)/)[1];
                let bookInfo = fun.run(text);
                return bookInfo.book_name;
            }
        },
        css: "#pubcdnModal{display:none!important;}img{opacity:1!important;}",
        category: "nsfw1"
    }, {
        name: "adultspic色情成人圖片",
        host: ["adultspic.com"],
        reg: /^https?:\/\/adultspic\.com\/\d+\.html$/i,
        imgs: async () => {
            await fun.getNP(".wp-block-image", "//a[text()='下一頁']");
            return fun.gae(".wp-block-image img").map(e => e.src);
        },
        button: [4],
        insertImg: [".article-content", 2],
        autoDownload: [0],
        next: ".article-nav-prev>a",
        prev: ".article-nav-next>a",
        customTitle: ".article-title",
        css: ".ssr-content{display:none!important;}",
        category: "nsfw2"
    }, {
        name: "中国街拍",
        host: ["www.cnjiepai.xyz"],
        reg: /^https?:\/\/www\.cnjiepai\.xyz\/\d+\/[\w-]+\.html$/i,
        imgs: "a[data-fancybox]",
        button: [4],
        insertImg: [
            ["//p[a[img]]", 2, "//p[a[img]]"], 2
        ],
        customTitle: "article>h1",
        fancybox: {
            v: 3,
            css: false
        },
        css: "@media only screen and (max-width:480px){article{width:100%!important}}",
        category: "nsfw1"
    }, {
        name: "美图收藏夹",
        host: ["sifang.app"],
        reg: /^https?:\/\/sifang\.app\/node\/\d+$/i,
        imgs: "a[data-fancybox]",
        button: [4],
        insertImg: [
            ["//p[a[img]]", 2, "//p[a[img]]"], 2
        ],
        customTitle: ".page-title",
        fancybox: {
            v: 3,
            css: false
        },
        css: "@media only screen and (max-width:480px){article{width:100%!important}}",
        category: "nsfw1"
    }, {
        name: "名腿网",
        host: ["www.mingtuiw.com", "mingtui.net"],
        reg: /^https?:\/\/(www\.mingtuiw\.com|mingtui\.net)\/archives\/\d+$/,
        exclude: ".swpm-more-tag-not-logged-in,.swpm-more-tag-restricted-msg",
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr(".entry-content img");
            return thumbnailSrcArray.map(e => e.replace(/-\d+x\d+(\.\w+)$/, "$1"))
        },
        button: [4],
        insertImg: [".entry-content>p", 2],
        autoDownload: [0],
        next: ".nav-previous>a[rel=prev]",
        prev: ".nav-next>a[rel=next]",
        customTitle: () => fun.dt({
            s: ".entry-title",
            d: /（\d+图）/
        }),
        category: "nsfw1"
    }, {
        name: "名腿网",
        host: ["www.mingtuiw.com"],
        reg: () => {
            if (/^https?:\/\/www\.mingtuiw\.com\/archives\/\d+$/.test(siteUrl)) {
                let [, num] = fun.gt(".entry-title").match(/（(\d+)图）/);
                let tImgsNum = fun.gae(".entry-content img").length;
                if (num == tImgsNum) return true;
            }
            return false;
        },
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr(".entry-content img");
            return thumbnailSrcArray.map(e => e.replace(/-\d+x\d+(\.\w+)$/, "$1"))
        },
        button: [4],
        insertImg: [".entry-content>p", 2],
        autoDownload: [0],
        next: ".nav-previous>a[rel=prev]",
        prev: ".nav-next>a[rel=next]",
        customTitle: () => fun.dt({
            s: ".entry-title",
            d: /（\d+图）/
        }),
        category: "nsfw1"
    }, {
        name: "名腿网",
        host: ["www.mingtuiw.com"],
        reg: /^https?:\/\/www\.mingtuiw\.com\/archives\/\d+\/.+$/,
        exclude: "#div_img_vip",
        imgs: async () => {
            let links = fun.gau("#thumb_imglist>a");
            let imgSrcs = await fun.getImgA(".entry-content img.attachment-large", links);
            return imgSrcs.map(e => e.replace(/-\d+x\d+(\.\w+)$/, "$1"))
        },
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: () => fun.dt({
            d: /（\d+\/\d+）.+/
        }),
        category: "nsfw1"
    }, {
        name: "Ai19 Art/Ai art nude/Hentaimama",
        host: ["ai19.art", "ainudesporn.art", "hentaimama.xyz"],
        reg: /^https?:\/\/(ai19\.art|ainudesporn\.art|hentaimama\.xyz)\/news\//,
        imgs: ".entry-content img",
        button: [4],
        insertImg: [
            ["//p[img]", 2, "//p[img]"], 2
        ],
        customTitle: () => fun.gt(".entry-header").replaceAll("|", "-"),
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "nsfw1"
    }, {
        name: "Kungfutv/Series Donghua",
        host: ["kungfutv.net", "seriesdonghua.net"],
        reg: [
            /^https?:\/\/kungfutv\.net\/cosplay\/[^\/]+\//,
            /^https?:\/\/seriesdonghua\.net\/cosplay\/[^\/]+\//
        ],
        imgs: "#readerarea img",
        button: [4],
        insertImg: [
            ["#readerarea img", 1, ".ts-main-image"], 2
        ],
        customTitle: ".entry-title",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "nsfw1"
    }, {
        name: "18Kami.com",
        host: ["18kami.com", "www.18kami.com"],
        reg: /^https?:\/\/(www\.)?18kami\.com\/photo\/\d+/,
        imgs: ".thumb-overlay-albums img",
        button: [4],
        insertImg: [".thumb-overlay-albums", 2],
        customTitle: ".panel-heading>.pull-left",
        fetch: 1,
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        observerClick: "#chk_cover",
        category: "hcomic"
    }, {
        reg: /^https?:\/\/(www\.)?18kami\.com\//,
        observerClick: "#chk_cover",
        category: "ad"
    }, {
        name: "逆次元逆ACG",
        host: ["www.nicohentai.com", "www.freeacg.org", "www.freeacg2.org", "acg.taipei", "nico.yt"],
        reg: () => fun.checkUrl({
            e: "#Comic_Top_Nav img[alt=logo][src$='_nico.png']",
            p: /^\/(moeupup-\d-\d+\.html|showinfo-\d+-\d+-\d\.html)$/
        }),
        init: async () => await fun.getNP(".row.thumb-overlay-albums img", ".pagination li.active+li>a:not(.prevnext)"),
        imgs: ".row.thumb-overlay-albums img",
        button: [4],
        insertImg: [".row.thumb-overlay-albums", 2],
        next: "//a[span[text()='下一页']][@href]",
        prev: 1,
        customTitle: async () => {
            let text = await fun.fetchDoc(fun.gu("//a[span[text()='漫畫簡介']]")).then(albumDoc => {
                let comicName = fun.gt(".panel-heading h1", 1, albumDoc);
                let episode = fun.ge(".episode", albumDoc);
                return episode ? comicName + " - " + fun.gt(".panel-heading>.pull-left") : comicName;
            });
            return text.replace(/\(\d+[\w\s\.\+-]+\)/i, "").replace(/［\d+[\w\s\.\+-]+］/i, "").trim();
        },
        category: "hcomic"
    }, {
        name: "Comic18H",
        host: ["www.comic18h.com"],
        reg: /^https:\/\/www\.comic18h\.com\/chapter\/\d+\.html$/,
        imgs: async () => {
            if (hasTouchEvents) {
                await fun.getNP("#readerarea>div", "//ul[@class='pagination']//a[text()='Next»']");
            } else {
                await fun.getNP("#readerarea>div", ".pagination li.active+li>a:not(.prevnext)");
            }
            return fun.gae("#readerarea img");
        },
        button: [4],
        insertImg: ["#readerarea", 2],
        next: "//a[text()='Next Article»'][contains(@href,'.html')]",
        prev: "//a[text()='«Previous Chapter'][contains(@href,'.html')]",
        customTitle: ".entry-title",
        css: ".hidden-xs:has(>.pagination){display:none!important;}",
        observerClick: "#chk_cover",
        category: "hcomic"
    }, {
        reg: /^https?:\/\/www\.comic18h\.com\//,
        observerClick: "#chk_cover",
        category: "ad"
    }, {
        name: "Doujindesu.XXX",
        reg: () => fun.checkUrl({
            h: "doujindesu.tv",
            e: "#reader>.main"
        }),
        init: async () => {
            await fun.waitEle("#reader>.main img");
            for (const sheet of document.styleSheets) {
                if (sheet.href?.includes("doujindesu.css")) {
                    for (const rule of sheet.rules) {
                        if (rule.selectorText === ".darkmode input, .darkmode button") {
                            rule.style.setProperty("color", "#fff");
                            return;
                        }
                    }
                }
            }
        },
        imgs: () => fun.gae("#reader>.main img"),
        button: [4],
        insertImg: ["#reader>.main", 2],
        next: "a:has(>.fa-chevron-right):not([href='#'])",
        prev: "a:has(>.fa-chevron-left):not([href='#'])",
        customTitle: "#reader h1",
        category: "hcomic"
    }, {
        name: "Doujindesu",
        reg: () => fun.checkUrl({
            h: "doujindesu.click"
        }),
        imgs: "#readerarea img",
        button: [4],
        insertImg: ["#readerarea", 2],
        next: ".ch-next-btn:not(.disabled)",
        prev: ".ch-prev-btn:not(.disabled)",
        customTitle: ".entry-title",
        css: ".blox.mlb.kln{display:none!important;}",
        category: "hcomic"
    }, {
        name: "熱辣漫畫",
        reg: () => fun.checkUrl({
            h: [
                /^(www\.)?relamanhua\.org$/,
                "www.2024manga.com"
            ],
            e: [
                ".disData[contentKey]",
                ".comicContent-list"
            ]
        }) && comicInfiniteScrollMode != 1,
        init: async () => {
            await fun.waitVar("webpackJsonp");
            fun.copymangaUI();
            fun.createImgBox(".comicContent-list", 1);
        },
        imgs: (dom = document) => {
            let contentKey = fun.attr(".disData", "contentKey", dom);
            return fun.cm_decrypt(contentKey).map(e => e.url.replace("800x.", "1500x."));
        },
        button: [4, "24%", 2],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".comicContent-list"], 2
        ],
        next: "//a[text()='下一話'][starts-with(@href,'/')]",
        prev: "//a[text()='上一話'][starts-with(@href,'/')]",
        customTitle: (dom = document) => fun.dt({
            t: dom.title,
            d: / - 熱辣漫畫.+$/
        }),
        preloadNext: true,
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "熱辣漫畫 自動翻頁",
        reg: () => fun.checkUrl({
            h: [
                /^(www\.)?relamanhua\.org$/,
                "www.2024manga.com"
            ],
            e: [
                ".disData[contentKey]",
                ".comicContent-list"
            ]
        }) && comicInfiniteScrollMode == 1,
        getSrcs: (dom) => {
            let contentKey = fun.attr(".disData", "contentKey", dom);
            let srcs = fun.cm_decrypt(contentKey).map(e => e.url.replace("800x.", "1500x."));
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            await fun.waitVar("webpackJsonp");
            fun.copymangaUI();
            let tE = fun.createImgBox(".comicContent-list", 1);
            let imgs = _this.getImgs();
            tE.innerHTML = "";
            tE.append(...imgs);
            fun.remove(".comicContent-list");
            await fun.lazyload();
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#FullPictureLoadMainImgBox", 0],
            observer: "#FullPictureLoadMainImgBox>img",
            next: "//a[text()='下一話'][starts-with(@href,'/')]",
            title: (dom) => dom.title.replace(/ - 熱辣漫畫.+$/, ""),
            re: ".header,.footer",
            preloadNextPage: 1
        },
        category: "comic autoPager"
    }, {
        name: "熱辣漫畫M",
        reg: () => fun.checkUrl({
            h: [
                "m.relamanhua.org",
                "m.2024manga.com"
            ],
            p: "/v2h5/comicContent/"
        }) && comicInfiniteScrollMode != 1,
        xhrJson: (url = siteUrl) => {
            let split = url.split("/");
            let word = split.at(-2);
            let id = split.at(-1);
            let api = `https://mapi.fgjfghkk.club/api/v3/comic/${word}/chapter/${id}?platform=1&_update=true`;
            return fetch(api).then(res => res.json());
        },
        init: async () => {
            fun.clearAllTimer(3);
            if ("aboutBlank" in _unsafeWindow) _unsafeWindow.aboutBlank = null;
            siteJson = await _this.xhrJson();
            debug("\n此頁JSON資料\n", siteJson);
            let word = siteUrl.split("/").at(-2);
            let url = `/v2h5/details/comic/${word}`;
            let hUrl = "/v2h5/index";
            const addHtml = (url, text) => {
                let str = `<div style="padding: 10px 0; text-align: center;"><a href="${url}"style="width: 100%;font-size: 26px;line-height: 50px;height: 50px;text-align: center;">${text}</a></div>`;
                fun.ge("#comicContentMain").insertAdjacentHTML("afterend", str);
            };
            addHtml(hUrl, "首頁");
            addHtml(url, "目錄");
            let nUrl = _this.next();
            if (nUrl) addHtml(nUrl, "點選進入下一話");
        },
        imgs: (json = siteJson) => json.results.chapter.contents.map(e => e.url),
        button: [4],
        insertImg: ["#comicContentMain", 2],
        next: () => {
            let next = siteJson.results.chapter.next;
            return next ? siteUrl.replace(/[\w-]+$/, "") + next : null;
        },
        customTitle: () => siteJson.results.comic.name + " - " + siteJson.results.chapter.name,
        preloadNext: (nextDoc, obj) => {
            obj.xhrJson(nextLink).then(json => {
                let srcs = obj.imgs(json);
                let title = json.results.comic.name + " - " + json.results.chapter.name;
                fun.picPreload(srcs, title, "next");
            });
        },
        fancybox: {
            blacklist: 1
        },
        infiniteScroll: true,
        css: ".comicFixed{display:none!important}.comicContentPopup #comicContentMain{position:unset!important}",
        category: "comic"
    }, {
        name: "熱辣漫畫M 自動翻頁",
        reg: () => fun.checkUrl({
            h: [
                "m.relamanhua.org",
                "m.2024manga.com"
            ],
            p: "/v2h5/comicContent/"
        }) && comicInfiniteScrollMode == 1,
        getData: () => {
            let split = document.URL.split("/");
            let word = split.at(-2);
            let id = split.at(-1);
            let api = `https://mapi.fgjfghkk.club/api/v3/comic/${word}/chapter/${id}?platform=1&_update=true`;
            return fetch(api).then(res => res.json()).then(json => {
                globalImgArray = json.results.chapter.contents.map(e => e.url);
                customTitle = json.results.chapter.name;
                let next = json.results.chapter?.next;
                console.log("\n熱辣漫畫M_JSON\n", json, globalImgArray, customTitle, next);
                if (!!next) {
                    tempNextLink = document.URL.replace(/[^\/]+$/, "") + next;
                } else {
                    tempNextLink = null;
                }
            });
        },
        init: async () => {
            fun.showMsg(displayLanguage.str_135, 0);
            await _this.getData();
            let imgs = fun.createImgArray(globalImgArray);
            let tE = fun.ge("#comicContentMain");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
            fun.clearAllTimer(3);
            if ("aboutBlank" in _unsafeWindow) _unsafeWindow.aboutBlank = null;
            fun.hideMsg();
            let word = siteUrl.split("/").at(-2);
            let url = `/v2h5/details/comic/${word}`;
            let hUrl = "/v2h5/index";
            const addHtml = (url, text) => {
                let str = `<div style="padding: 10px 0; text-align: center;"><a href="${url}"style="width: 100%;font-size: 26px;line-height: 50px;height: 50px;text-align: center;">${text}</a></div>`;
                fun.ge("#comicContentMain").insertAdjacentHTML("afterend", str);
            };
            addHtml(hUrl, "首頁");
            addHtml(url, "目錄");
        },
        autoPager: {
            ele: () => fun.createImgArray(globalImgArray),
            pos: ["#comicContentMain", 0],
            observer: "#comicContentMain>img",
            next: () => tempNextLink,
            wait: async () => await _this.getData(),
            title: () => customTitle
        },
        css: ".comicFixed{display:none!important}.comicContentPopup #comicContentMain{position:unset!important}",
        category: "comic autoPager"
    }, {
        name: "熱辣漫畫 清除不給開啟開發人員工具",
        reg: () => fun.checkUrl({
            h: [
                /^(www\.|m.)?relamanhua\.org$/,
                /^(www\.|m.)?2024manga.com$/
            ],
        }),
        init: () => {
            if ("aboutBlank" in _unsafeWindow) _unsafeWindow.aboutBlank = null;
            setTimeout(() => fun.clearAllTimer(3), 1000);
        },
        category: "ad"
    }, {
        name: "禁漫天堂",
        reg: () => fun.checkUrl({
            h: [
                "18comic.vip",
                "18comic.org",
                "jmcomic.me",
                "jmcomic1.me",
                "18comic-c104.xyz",
                "18comic-zzz.xyz",
                "18comic-c104.vip"
            ],
            p: /^\/photo\/\d+/
        }),
        init: () => fun.remove("//div[contains(text(),'插件')] | //div[@class='col-xs-6'][div[@data-group]] | //div[@class='panel-body']//div[@data-group] | //div[@class='row'][div[div[@data-group]]] | //div[@class='div_sticky2 hidden-lg']"),
        imgs: async () => {
            await fun.getNP(".scramble-page", ".pagination li.active+li>a:not(.prevnext)");
            fun.showMsg(displayLanguage.str_01, 0);
            const {
                aid,
                scramble_id,
                get_num
            } = _unsafeWindow;
            let arr = [];
            let fetchNum = 0;
            let imgs = fun.gae(".scramble-page img[id],.owl-item .center img[id]");
            for (let i = 0; i < imgs.length; i++) {
                let getRedraw = new Promise(async resolve => {
                    const url = imgs[i].dataset.original ?? imgs[i].dataset.src;
                    let error = false;
                    if (url.includes(".gif") || aid < scramble_id) {
                        resolve(url);
                    } else {
                        const blob = await fetch(url).then(res => res.blob());
                        const fileName = new URL(url).pathname.split("/").at(-1);
                        const [id, ex] = fileName.split(".");
                        const img = new Image();
                        await new Promise(load => {
                            img.onload = load;
                            img.onerror = () => {
                                error = true;
                                resolve(null);
                            }
                            img.src = URL.createObjectURL(blob);
                        });
                        if (error) return;
                        const imgWidth = img.naturalWidth;
                        const imgHeight = img.naturalHeight;
                        const canvas = new OffscreenCanvas(imgWidth, imgHeight);
                        const canvas_2d = canvas.getContext("2d");
                        const num = get_num(btoa(aid), btoa(id));
                        const cropHeight = Number(imgHeight % num);
                        const sHeight = Math.floor(imgHeight / num);
                        let sy = imgHeight - cropHeight - sHeight;
                        let dy = cropHeight;
                        canvas_2d.drawImage(img, 0, sy, imgWidth, cropHeight + sHeight, 0, 0, imgWidth, cropHeight + sHeight);
                        for (let i = 1; i < num; ++i) {
                            canvas_2d.drawImage(img, 0, sy -= sHeight, imgWidth, sHeight, 0, dy += sHeight, imgWidth, sHeight);
                        }
                        URL.revokeObjectURL(img.src);
                        canvas.convertToBlob({
                            type: blob.type,
                            quality: 0.9
                        }).then(blob => {
                            fun.showMsg(`DrawImage ${fetchNum+=1}/${imgs.length}`, 0);
                            resolve(URL.createObjectURL(blob));
                        });
                    }
                });
                arr.push(getRedraw);
                await fun.delay(100, 0);
            }
            return arr;
        },
        button: [4, "24%", 1],
        insertImg: ["//div[@class='panel-body'][div[@class='row thumb-overlay-albums']]", 0],
        next: "//a[span[text()='下一話']][@href]",
        prev: 1,
        customTitle: () => {
            return fun.fetchDoc(fun.gu("//a[span[text()='漫畫簡介']]")).then(albumDoc => {
                let comicName = fun.gt(".panel-heading h1", 1, albumDoc).replaceAll("/", "").replace(/\s?\[禁漫漢化組\]/, "");
                let episode = fun.ge(".episode", albumDoc);
                if (episode) {
                    let id = fun.lp.match(/\d+/)[0];
                    let selector = `.episode a[data-album="${id}"]`;
                    let text = fun.gt(selector, 1, albumDoc);
                    let chapterName = text.split("\n").filter(item => item)[0];
                    return comicName + " - " + chapterName.replace(/\[\d+[\w\s\.\+-]+\]/i, "").trim();
                } else {
                    return comicName.replace(/\[\d+[\w\s\.\+-]+\]/i, "").trim();
                }
            });
        },
        fetch: 1,
        css: ".hidden-lg:not(.panel)[style*='z-index']{display:none!important;}",
        observerClick: ["#chk_cover", "#chk_guide"],
        category: "hcomic"
    }, {
        name: "禁漫天堂",
        reg: () => fun.checkUrl({
            h: [
                "18comic.vip",
                "18comic.org",
                "jmcomic.me",
                "jmcomic1.me",
                "18comic-c104.xyz",
                "18comic-zzz.xyz",
                "18comic-c104.vip"
            ]
        }),
        init: () => {
            let selectors = [
                "//div[contains(text(),'插件')]",
                "//div[@class='col-xs-6'][div[@data-group]]",
                "//div[@class='panel-body']//div[@data-group]",
                "//div[@class='row'][div[div[@data-group]]][not(div[@id='album_photo_cover'])][not(div[*[@class='panel panel-default']])][not(div[@class='col-xs-12 col-md-9 col-sm-8' and div[@class='well well-sm']])]",
                "//div[@class='div_sticky2 hidden-lg']"
            ]
            fun.remove(selectors);
        },
        css: ".hidden-lg:not(.panel)[style*='z-index']{display:none!important;}",
        observerClick: ["#chk_cover", "#chk_guide"],
        category: "ad"
    }, {
        name: "E-Hentai圖片清單頁",
        reg: () => fun.checkUrl({
            h: [
                "e-hentai.org",
                "exhentai.org"
            ],
            p: /^\/g\/\d+\/\w+\/$/
        }),
        exclude: "//h1[text()='Content Warning']",
        imgs: async () => {
            await fun.getNP(".gdtm,.gdtl", ".ptds+td>a", null, "//tr[td[@class='ptds']]");
            if (options.fancybox == 1 && !isDownloading) {
                //預覽縮圖網址需要裁剪難弄...
                if (fun.ge(".gdtm img[style],.gdtl img[style]")) {
                    let thumbnailsHeightData = [...document.querySelectorAll(".gdtm img,.gdtl img")].map(e => Number(e.style.height.match(/\d+/)[0]));
                    let thumbnailUrls = [...document.querySelectorAll(".gdtm>div,.gdtl>div")].map(div => div.getAttribute("style").split("url(")[1].split(")")[0]);
                    thumbnailUrls = [...new Set(thumbnailUrls)];
                    let getThumbnai = 0;
                    fun.showMsg("Get Thumbnailsing...", 0);
                    let blobs = thumbnailUrls.map((url, i, arr) => {
                        return fun.xhr(url, {
                            responseType: "blob"
                        }).then(blob => {
                            fun.showMsg(`Get Thumbnails ${getThumbnai += 1}/${arr.length}`, 0);
                            return blob;
                        });
                    });
                    let heightIndex = 0;
                    let crop = 0;
                    await Promise.all(blobs).then(async blobArr => {
                        fun.hideMsg();
                        for (let blob of blobArr) {
                            fun.showMsg(`Thumbnails Crop ${crop += 1}/${blobArr.length}`, 0);
                            //console.log(`預覽縮圖裁切第${crop}張`);
                            let img = new Image();
                            await new Promise((resolve, reject) => {
                                img.onload = resolve;
                                img.onerror = reject;
                                img.src = URL.createObjectURL(blob);
                            });
                            for (let w = 0; w < img.width; w += 100) {
                                let canvas = document.createElement("canvas");
                                canvas.height = thumbnailsHeightData[heightIndex];
                                canvas.width = 100;
                                canvas.getContext("2d").drawImage(img, -Math.abs(w), 0);
                                let dataURL = canvas.toDataURL("image/webp", 0.5);
                                let thumbnailBlobURL = fun.dataURLtoBlobURL(dataURL);
                                thumbnailSrcArray.push(thumbnailBlobURL);
                                //console.log(thumbnailBlobURL);
                                heightIndex++;
                            }
                        }
                    });
                } else {
                    thumbnailSrcArray = [...document.querySelectorAll(".gdtm img,.gdtl img")].map(e => e.src);
                }
            }
            if (E_HENTAI_LoadOriginalImage == 1) {
                fun.showMsg(displayLanguage.str_01, 0);
                let fetchNum = 0;
                return fun.gae(".gdtm a,.gdtl a").map(async (a, i, arr) => {
                    await fun.delay(100 * i, 0);
                    return fun.fetchDoc(a.href).then(async (dom) => {
                        fun.showMsg(`${displayLanguage.str_02}${fetchNum+=1}/${arr.length}`, 0);
                        let fullimg = fun.ge("a[href*=fullimg]", dom);
                        let img = fun.ge("#img", dom);
                        if (fullimg) {
                            let url = fullimg.href;
                            let res = await fun.xhrHEAD(url);
                            let finalUrl = res.finalUrl;
                            return /login\.php/.test(finalUrl) ? img.src : url;
                        } else {
                            return img.src;
                        }
                    });
                });
            } else {
                return fun.getImgA("#img", ".gdtm a,.gdtl a", 100);
            }
        },
        button: [4],
        insertImg: [
            ["#gdt", 0], 3
        ],
        go: 1,
        customTitle: () => {
            let t = fun.gt("#gj").replace(/\/|\[\d+[\w\.\+\s-]+\]/i, "");
            return t.length > 0 ? t : fun.gt("#gn").replace(/\|.+|\[\d+[\w\.\+\s-]+\]/i, "").trim();
        },
        topButton: true,
        category: "hcomic"
    }, {
        name: "E-Hentai圖片清單頁",
        host: ["e-hentai.org"],
        link: "https://e-hentai.org/lofi/",
        reg: /^https?:\/\/e-hentai\.org\/lofi\/g\/\w+\/\w+\//,
        imgs: async () => {
            await fun.getNP(".gi", "//a[text()='Next Page >' or text()='下一页 >']", null, "#ia")
            return fun.getImgA("#sm", ".gi>a", 100);
        },
        button: [4],
        insertImg: [
            ["#ia", 2], 3
        ],
        customTitle: () => fun.title(" - E-Hentai", 1).replace(/\|.+/, "").replace(/\//, "").trim(),
        go: 1,
        topButton: true,
        category: "hcomic"
    }, {
        name: "nhentai圖片清單頁",
        reg: () => fun.checkUrl({
            h: [
                "nhentai.net",
                "nyahentai.red",
                "www.hentai.name",
                "nhentai.xxx",
                "nhentai.to",
                "nhentai.website",
                "simplyhentai.org"
            ],
            p: /^\/g\/\d+\/?$/
        }),
        imgs: async () => {
            thumbnailSrcArray = fun.getImgSrcArr("a.gallerythumb>img");
            if (fun.lh === "nhentai.net") {
                const hostArray = ["i", "i3", "i5", "i7"];
                const randomHost = arr => {
                    let choose = Math.floor(Math.random() * Math.floor(arr.length));
                    let rValue = arr[choose];
                    return rValue;
                };
                return _unsafeWindow._gallery.images.pages.map((e, i) => `https://${randomHost(hostArray)}.nhentai.net/galleries/${_unsafeWindow.gallery.media_id}/${i + 1}.${fun.ex(e.t)}`);
            } else if (fun.lh === "nyahentai.red") {
                fun.showMsg(displayLanguage.str_05, 0);
                let [imgDir] = fun.ge(".gallerythumb>img").src.match(/.+\//);
                let url = fun.gu("a.gallerythumb");
                return fun.iframeVar(url, "images_ext").then(w => w.images_ext.map((e, i) => `${imgDir}${(i + 1)}.${fun.ex(e)}`));
            } else if (fun.lh === "nhentai.xxx") {
                fun.showMsg(displayLanguage.str_05, 0);
                let [max] = fun.gt(".pages").match(/\d+/);
                let img = fun.ge(".gallery_thumbs img");
                let src = img.dataset.src ?? img.src;
                let [imgDir] = src.match(/.+\//);
                let url = fun.gu(".gallery_thumbs a");
                let iframe = await fun.iframeVar(url, "g_th");
                return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}.${fun.ex(iframe.g_th.fl[(i + 1)][0])}`);
            } else if (fun.lh === "nhentai.to" || fun.lh === "nhentai.website") {
                fun.showMsg(displayLanguage.str_05, 0);
                let url = fun.gu("a.gallerythumb");
                return fun.iframeVar(url, "reader").then(frame => {
                    const {
                        gallery,
                        image_cache
                    } = frame.reader;
                    const k = "1";
                    const [path] = image_cache[k].image.src.match(/^.+\//);
                    return gallery.images.pages.map((e, i) => `${path}${(i + 1)}.${fun.ex(e.t)}`);
                });
            } else if (fun.lh === "simplyhentai.org") {
                return fun.gae(".thumbs img,.thumb-container img").map(e => e.dataset.src ? e.dataset.src.replace(/t(\.\w+)$/, "$1") : e.src.replace(/t(\.\w+)$/, "$1"));
            } else if (fun.lh === "www.hentai.name") {
                return fun.gae(".thumb-container img").map(e => e.src.replace(/_thumb(\.\w+)$/, "$1"));
            }
        },
        button: [4],
        insertImg: [
            [".thumbs,#thumbnail-container,.outer_thumbs", 0], 2
        ],
        customTitle: () => {
            if (fun.lh === "nhentai.net") {
                const {
                    gallery
                } = _unsafeWindow;
                return gallery.title.japanese ?? gallery.title.english;
            } else {
                let h2 = fun.gt("h2.title,h2");
                return h2.length > 4 ? h2 : fun.gt("h1.title,h1");
            }
        },
        go: 1,
        topButton: true,
        css: ".advt{display:none!important}",
        category: "hcomic"
    }, {
        name: "nhentai閱讀頁",
        host: ["nhentai.net"],
        reg: /^https?:\/\/nhentai\.net\/g\/\d+\/\d+\/$/,
        imgs: () => {
            const {
                _gallery
            } = _unsafeWindow;
            const hostArray = ["i", "i3", "i5", "i7"];
            const randomHost = arr => {
                let choose = Math.floor(Math.random() * Math.floor(arr.length));
                let rValue = arr[choose];
                return rValue;
            };
            return _gallery.images.pages.map((e, i) => `https://${randomHost(hostArray)}.nhentai.net/galleries/${_gallery.media_id}/${i + 1}.${fun.ex(e.t)}`);
        },
        button: [4],
        insertImg: ["#image-container", 2],
        customTitle: () => {
            const {
                _gallery
            } = _unsafeWindow;
            return _gallery.title.japanese ?? _gallery.title.english;
        },
        category: "hcomic"
    }, {
        name: "nyahentai.red閱讀頁",
        reg: /^https?:\/\/nyahentai\.red\/g\/\d+\/\d+\/$/,
        imgs: () => {
            let [imgDir] = fun.ge("#image-container img").src.match(/.+\//);
            return _unsafeWindow.images_ext.map((e, i) => `${imgDir}${(i + 1)}.${fun.ex(e)}`);
        },
        button: [4],
        insertImg: ["#image-container", 2],
        customTitle: () => fun.title(" » ", 1),
        category: "hcomic"
    }, {
        name: "www.hentai.name閱讀頁",
        reg: /^https?:\/\/www\.hentai\.name\/g\/\d+\/\d+\/$/,
        imgs: () => {
            let max = fun.gt(".num-pages");
            let [, imgDir, ex] = fun.ge("#image-container img").src.match(/(.+\/)\d+(\.\w+)$/);
            return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}${ex}`);
        },
        button: [4],
        insertImg: ["#image-container", 2],
        customTitle: () => fun.title(" - Hentai.name"),
        category: "hcomic"
    }, {
        name: "simplyhentai.org閱讀頁",
        reg: /^https?:\/\/simplyhentai\.org\/g\/\d+\/\d+\/$/,
        imgs: () => {
            let max = fun.gt(".num-pages");
            let [, imgDir, ex] = fun.ge("#image-container img").src.match(/(.+\/)\d+(\.\w+)$/);
            return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}${ex}`);
        },
        button: [4],
        insertImg: ["#image-container", 2],
        customTitle: () => fun.title(" » ", 1),
        category: "hcomic"
    }, {
        name: "Yabai!",
        host: ["yabai.si"],
        reg: /^https?:\/\/yabai\.si\/g\/\w+$/i,
        init: async () => {
            await fun.waitEle(".grid img");
            fun.showMsg(displayLanguage.str_05, 0);
            let pageData = JSON.parse(document.querySelector("#app").dataset.page);
            let {
                version
            } = pageData;
            let token = decodeURIComponent(document.cookie.replace("XSRF-TOKEN=", ""));
            let readApi = fun.url + "/read";
            let fetchJson = await fetch(readApi, {
                "headers": {
                    "accept": "text/html, application/xhtml+xml",
                    "x-inertia": "true",
                    "x-inertia-version": version,
                    "x-requested-with": "XMLHttpRequest",
                    "x-xsrf-token": token
                }
            }).then(res => res.json());
            debug("\n此頁JSON資料\n", fetchJson);
            siteJson = fetchJson;
            fun.createImgBox(".article>:last-child", 2);
        },
        imgs: () => {
            let {
                code,
                hash,
                head,
                rand,
                root,
                type
            } = siteJson.props.pages.data.list;
            let srcs = [];
            head.forEach((e, i) => (srcs[Number(e) - 1] = `${root}/${code}/${e.padStart(4, "0")}-${hash[i]}-${rand[i]}.${type[i]}`));
            return srcs;
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0], 2
        ],
        go: 1,
        customTitle: () => siteJson.props.post.data.name,
        category: "hcomic"
    }, {
        name: "Sukidesu.moe",
        host: ["sukidesu.moe"],
        reg: /^https?:\/\/sukidesu\.moe\/g\/\d+$/i,
        init: async () => {
            await fun.waitEle(".preview-imgs img");
            fun.showMsg(displayLanguage.str_05, 0);
            let [id] = fun.lp.match(/\d+/);
            let readApi = `https://sukidesu.moe/spa/manga/${id}/read`;
            let fetchJson = await fetch(readApi, {
                "headers": {
                    "accept": "application/json, text/plain, */*"
                }
            }).then(res => res.json());
            debug("\n此頁JSON資料\n", fetchJson);
            siteJson = fetchJson;
            fun.createImgBox(".preview-imgs", 2);
        },
        imgs: () => {
            const {
                server,
                chapter_content
            } = siteJson.chapter_detail;
            let dom = fun.doc(chapter_content);
            return fun.gae("[data-srcset]", dom).map(e => server + e.dataset.srcset);
        },
        thums: ".preview-imgs img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0], 2
        ],
        go: 1,
        customTitle: () => siteJson.chapter_detail.manga_name,
        category: "hcomic"
    }, {
        name: "akuma.moe",
        reg: /^https?:\/\/akuma\.moe\/g\/\w+$/i,
        init: async () => await fun.waitEle("#pages"),
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            const {
                pag,
                ajx
            } = _unsafeWindow;
            if (options.fancybox == 1 && !isDownloading) {
                let pages = pag.cnt;
                if (pages > 40) {
                    let max = Math.ceil(pages / 20);
                    let resArr = fun.arr(max, (v, i) => fetch(pag.act, {
                        "headers": {
                            "accept": "*/*",
                            "content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                            "x-csrf-token": ajx.hdr["X-CSRF-TOKEN"],
                            "x-requested-with": "XMLHttpRequest"
                        },
                        "body": `index=${i}`,
                        "method": "POST",
                    }).then(res => res.text()).then(text => fun.doc(text)).then(dom => [...dom.images]));
                    thumbnailSrcArray = await Promise.all(resArr).then(data => fun.getImgSrcArr(data.flat()));
                } else {
                    thumbnailSrcArray = fun.getImgSrcArr("#pages img");
                }
            }
            let url = fun.gu("#pages a");
            let imgDir = await fun.iframeVar(url, "img_prt").then(w => w.img_prt + "/");
            return fetch(siteUrl, {
                "headers": {
                    "accept": "*/*",
                    "x-csrf-token": ajx.hdr["X-CSRF-TOKEN"],
                    "x-requested-with": "XMLHttpRequest"
                },
                "body": null,
                "method": "POST"
            }).then(res => res.json()).then(arr => arr.map(e => imgDir + e));
        },
        button: [4],
        insertImg: [
            ["#pages", 0], 2
        ],
        go: 1,
        customTitle: () => fun.ge(".entry-header>span") ? fun.gt(".entry-header>span") : fun.gt(".entry-title"),
        category: "hcomic"
    }, {
        name: "Koharu",
        host: ["koharu.to"],
        enable: 1,
        reg: /^https?:\/\/koharu\.to\//i,
        imgs: () => {
            const [, , g_id, g_key] = location.pathname.split("/");
            const detailApi = `https://api.koharu.to/books/detail/${g_id}/${g_key}`;
            fun.showMsg(displayLanguage.str_05, 0);
            return fetch(detailApi).then(res => res.json()).then(detailJson => {
                debug("\ndetailJson\n", detailJson);
                const {
                    created_at,
                    updated_at,
                    data,
                    thumbnails
                } = detailJson;
                const {
                    base,
                    entries
                } = thumbnails;
                const thumbs = entries.map(e => base + e.path);
                thumbnailSrcArray = thumbs;
                const [maxKey] = Object.keys(data).sort((a, b) => b - a);
                const {
                    id,
                    public_key
                } = data[maxKey];
                const dataApi = `https://api.koharu.to/books/data/${g_id}/${g_key}/${id}/${public_key}?v=${updated_at ?? created_at}&w=${maxKey}`;
                return fetch(dataApi).then(res => res.json()).then(dataJson => {
                    const {
                        base,
                        entries
                    } = dataJson;
                    debug("\ndataJson\n", dataJson);
                    let xhrNum = 0;
                    const srcs = entries.map(async (e, i, arr) => {
                        await fun.delay(i * 500, 0);
                        return new Promise(resolve => {
                            const xhr = new XMLHttpRequest;
                            xhr.responseType = "blob";
                            xhr.open("GET", base + e.path + `?w=${maxKey}`);
                            xhr.onload = () => {
                                fun.showMsg(`${displayLanguage.str_06}${xhrNum+=1}/${arr.length}`, 0);
                                resolve(URL.createObjectURL(xhr.response));
                            };
                            xhr.send();
                        });
                    });
                    return srcs;
                });
            });
        },
        button: [4],
        insertImg: ["#previews,main>.group", 0],
        customTitle: () => fun.getText(["#title>h2", "#title>h1"]),
        SPA: () => document.URL.includes("/g/"),
        observerURL: true,
        fetch: 1,
        category: "hcomic"
    }, {
        name: "AnimeH",
        reg: () => fun.checkUrl({
            h: "animeh.to"
        }),
        imgs: () => {
            if (!fun.ge("//div[span[text()='Page:']]")) {
                return [];
            }
            let url = fun.ge("link[data-hid]").href + "?tab=reading";
            let [max] = fun.gt("//div[span[text()='Page:']]").match(/\d+/);
            return fun.fetchDoc(url).then(dom => {
                let [, imgDir, ex] = fun.ge("#pictureViewer img", dom).dataset.src.match(/^(.+\/)\d+(\.\w+)$/i);
                return fun.arr(max, (v, i) => imgDir + (i + 1) + ex);
            });
        },
        SPA: () => !!fun.ge("//div[span[text()='Page:']]"),
        capture: () => _this.imgs(),
        customTitle: async () => {
            await fun.delay(1000, 0);
            return fun.dt({
                s: "main h1",
                d: "Hentai Manga"
            });
        },
        observerURL: true,
        category: "hcomic"
    }, {
        name: "Cathentai/Hentaibeeg/Hentaicolor/Nyahentai/圖片清單頁",
        reg: () => fun.checkUrl({
            h: [
                "cathentai.net",
                "hentaibeeg.com",
                "hentaicolor.net",
                "nyahentai.info"
            ],
            p: /^\/[^/]+\/(#collapse)?$/
        }),
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let url = fun.gu("//a[span[text()='List Read']]");
            return fun.fetchDoc(url).then(dom => fun.run(fun.gt("#listImgH", 1, dom)));
        },
        button: [4],
        insertImg: [
            ["#thumbnail-container", 2], 2
        ],
        go: 1,
        customTitle: () => fun.getText(["#info>h4", "#info>h1"]),
        category: "hcomic"
    }, {
        name: "Cathentai/Hentaibeeg/Hentaicolor/Nyahentai/List Read頁",
        reg: () => fun.checkUrl({
            h: [
                "cathentai.net",
                "hentaibeeg.com",
                "hentaicolor.net",
                "nyahentai.info"
            ],
            p: /^\/read\/\d+\.html$/
        }),
        imgs: () => fun.run(fun.gt("#listImgH")),
        button: [4],
        insertImg: ["#image-container", 2],
        customTitle: () => fun.title(/ - Cathentai| - Hentaicolor| - Hentaibeeg| - Nyahentai.info/, 1),
        category: "hcomic"
    }, {
        name: "3hentai圖片清單頁",
        host: ["3hentai.net"],
        reg: /^https?:\/\/3hentai\.net\/d\/\d+$/,
        imgs: async () => {
            thumbnailSrcArray = fun.getImgSrcArr(".single-thumb>a>img");
            fun.showMsg(displayLanguage.str_05, 0);
            let url = fun.gu(".single-thumb>a");
            let json = await fun.fetchDoc(url).then(dom => {
                let code = fun.gst("readerPages", dom);
                let jsonCode = code.match(/JSON[^;]+/)[0];
                return fun.run(jsonCode);
            });
            let max = json.lastPage;
            let imgDir = json.baseUriImg.replace("%s", "");
            return fun.arr(max, (v, i) => imgDir + json.pages[(i + 1)].f);
        },
        button: [4],
        insertImg: [
            ["#thumbnail-gallery", 0], 2
        ],
        customTitle: () => fun.gt("#main-info>h1,#main-info>h2").replace("|", "-"),
        go: 1,
        topButton: true,
        //css: "#header-ban-agsy,#middle-ban-agsy,#footer-ban-agsy{display:none!important}.single-thumb-col{padding:0px!important;width:100%!important}",
        category: "hcomic"
    }, {
        name: "3hentai閱讀頁",
        host: ["3hentai.net"],
        reg: /^https?:\/\/3hentai\.net\/d\/\d+\/\d+$/,
        imgs: () => {
            const {
                readerPages
            } = _unsafeWindow;
            let max = readerPages.lastPage;
            let imgDir = readerPages.baseUriImg.replace("%s", "");
            return fun.arr(max, (v, i) => imgDir + readerPages.pages[(i + 1)].f);
        },
        button: [4],
        insertImg: [".reader-image", 2],
        customTitle: () => fun.gt(".reader-title").replace("|", "-"),
        category: "hcomic"
    }, {
        name: "山寨3hentai圖片清單頁",
        host: ["www.hentai321.top"],
        reg: /^https?:\/\/www\.hentai321\.top\/\?d\/\d+$/,
        init: () => {
            fun.createImgBox("#thumbnail-gallery", 2);
            fun.remove("#header-ban-agsy,#middle-ban-agsy");
        },
        imgs: () => fun.getImgA(".js-main-img", ".single-thumb>a"),
        thums: ".single-thumb img",
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        customTitle: ".middle-title",
        go: 1,
        css: "#FullPictureLoadMainImgBox{max-width:1140px;margin-left:auto;margin-right:auto}ins,#doujin-page-footer-ban-agsy,#main-content+div~*:not([id^='pv-'],[class^='pv-'],#comicRead,#fab,#FullPictureLoadOptions,#FullPictureLoadFixedMenu,.FullPictureLoadFixedBtn,.FullPictureLoadMsg,*[class^=fancybox]){display:none!important;}",
        category: "hcomic"
    }, {
        name: "HentaiFox圖片清單頁",
        host: ["hentaifox.com"],
        reg: /^https?:\/\/hentaifox\.com\/gallery\/\d+\/$/,
        include: "//a[text()=' Read Online']",
        init: async () => {
            await fun.waitEle(".gallery_thumb img");
            await fun.waitVar("g_th");
            fun.createImgBox(".gallery_bottom");
        },
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let u_id = fun.ge("#gallery_id").value;
            let g_id = fun.ge("#load_id").value;
            let img_dir = fun.ge("#load_dir").value;
            let total_pages = fun.ge("#load_pages").value;
            thumbnailSrcArray = await fetch("/includes/thumbs_loader.php", {
                "headers": {
                    "content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                    "x-requested-with": "XMLHttpRequest"
                },
                "body": `u_id=${u_id}&g_id=${g_id}&img_dir=${img_dir}&visible_pages=0&total_pages=${total_pages}&type=2`,
                "method": "POST"
            }).then(res => res.text()).then(text => fun.doc(text)).then(dom => [...dom.images].map(e => e.dataset.src ?? e.src));
            let [max] = fun.gt(".pages").match(/\d+/);
            let img = fun.ge(".gallery_thumb img");
            let src = img.dataset.src ?? img.src;
            let [imgDir] = src.match(/.+\//);
            return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}.${fun.ex(_unsafeWindow.g_th[(i + 1)][0])}`);
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        customTitle: () => fun.gt(".info>h1").replace("|", "-"),
        go: 1,
        topButton: true,
        category: "hcomic"
    }, {
        name: "HentaiFox閱讀頁",
        host: ["hentaifox.com"],
        reg: /^https?:\/\/hentaifox\.com\/g\/\d+\/\d+\/$/,
        imgs: async () => {
            let max = fun.ge("#pages").value;
            let img = fun.ge("#gimg");
            let src = img.dataset.src ?? img.src;
            let [imgDir] = src.match(/.+\//);
            return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}.${fun.ex(_unsafeWindow.g_th[(i + 1)][0])}`);
        },
        button: [4],
        insertImg: [".full_image", 2],
        customTitle: () => fun.title(/ - Page \d+ - HentaiFox/).replace("|", "-"),
        category: "hcomic"
    }, {
        name: "HentaiZap圖片清單頁",
        host: ["hentaizap.com"],
        reg: /^https?:\/\/hentaizap\.com\/gallery\/\d+\/$/,
        inti: async () => {
            await fun.waitEle(".gp_th img");
            await fun.waitVar("g_th");
        },
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let _token = fun.attr('meta[name="csrf-token"]', "content");
            let server = fun.ge("#load_server").value;
            let u_id = fun.ge("#gallery_id").value;
            let g_id = fun.ge("#load_id").value;
            let img_dir = fun.ge("#load_dir").value;
            let total_pages = fun.ge("#load_pages").value;
            thumbnailSrcArray = await fetch("/inc/thumbs_loader.php", {
                "headers": {
                    "content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                    "x-requested-with": "XMLHttpRequest"
                },
                "body": `_token=${_token}&server=${server}&u_id=${u_id}&g_id=${g_id}&img_dir=${img_dir}&visible_pages=0&total_pages=${total_pages}&type=2`,
                "method": "POST"
            }).then(res => res.text()).then(text => fun.doc(text)).then(dom => [...dom.images].map(e => e.dataset.src ?? e.src));
            fun.createImgBox("#comments_div");
            let max = fun.gt(".info_pg").match(/\d+/)[0];
            let img = fun.ge(".gp_th img");
            let src = img.dataset.src ?? img.src;
            let imgDir = src.match(/.+\//)[0];
            return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}.${fun.ex(_unsafeWindow.g_th[(i + 1)][0])}`);
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0], 2
        ],
        customTitle: () => fun.gt(".gp_top_right>h1").replace("|", "-"),
        go: 1,
        category: "hcomic"
    }, {
        name: "HentaiZap閱讀頁",
        host: ["hentaizap.com"],
        reg: /^https?:\/\/hentaizap\.com\/g\/\d+\/\d+\/$/,
        init: async () => await fun.waitVar("g_th"),
        imgs: async () => {
            let max = fun.ge("#pages").value;
            let img = fun.ge("#fimg");
            let src = img.dataset.src ?? img.src;
            let imgDir = src.match(/.+\//)[0];
            return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}.${fun.ex(_unsafeWindow.g_th[(i + 1)][0])}`);
        },
        button: [4],
        insertImg: [".mid_rd", 2],
        customTitle: () => fun.title(/ - Page \d+ - HentaiZap/).replace("|", "-"),
        category: "hcomic"
    }, {
        name: "HentaiRead閱讀頁",
        host: ["hentairead.com"],
        reg: /^https?:\/\/hentairead\.com\/hentai\/[^\/]+\/english\/p\/\d+\/$/,
        init: async () => {
            await fun.waitVar("chapter_preloaded_images");
            fun.remove(".page-link-hover,.bottom-nav,.ad");
        },
        imgs: () => _unsafeWindow.chapter_preloaded_images.map(e => e.src.replace(/\?quality=.+$/, "")),
        insertImg: ["#imagesList", 2],
        customTitle: () => fun.title(/ Page \d.+$/).trim(),
        category: "hcomic"
    }, {
        name: "HentaiRox圖片清單頁",
        host: ["HentaiRox.com"],
        reg: /^https?:\/\/hentairox\.com\/gallery\/\d+\/$/,
        include: "#append_thumbs",
        init: () => fun.createImgBox("#comments_div", 0),
        imgs: async () => {
            fun.showMsg(displayLanguage.str_04, 0);
            await fun.waitEle("#append_thumbs img");
            fun.hideMsg();
            fun.showMsg(displayLanguage.str_05, 0);
            let server = fun.ge("#load_server").value;
            let u_id = fun.ge("#gallery_id").value;
            let g_id = fun.ge("#load_id").value;
            let img_dir = fun.ge("#load_dir").value;
            let total_pages = fun.ge("#load_pages").value;
            thumbnailSrcArray = await fetch("/inc/thumbs_loader.php", {
                "headers": {
                    "content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                    "x-requested-with": "XMLHttpRequest"
                },
                "body": `server=${server}&u_id=${u_id}&g_id=${g_id}&img_dir=${img_dir}&visible_pages=0&total_pages=${total_pages}&type=2`,
                "method": "POST"
            }).then(res => res.text()).then(text => fun.doc(text)).then(dom => [...dom.images].map(e => e.dataset.src ?? e.src));
            let [max] = fun.gt(".pages").match(/\d+/);
            let img = fun.ge(".gthumb img");
            let src = img.dataset.src ?? img.src;
            let [imgDir] = src.match(/.+\//);
            return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}.${fun.ex(_unsafeWindow.g_th[(i + 1)][0])}`);
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        customTitle: () => fun.ge(".subtitle") ? fun.gt(".subtitle") : fun.gt("h1"),
        go: 1,
        topButton: true,
        category: "hcomic"
    }, {
        name: "HentaiRox閱讀頁",
        host: ["HentaiRox.com"],
        reg: /^https?:\/\/hentairox\.com\/view\/\d+\/\d+\/$/,
        imgs: async () => {
            let max = fun.ge("#pages").value;
            let img = fun.ge("#gimg");
            let src = img.dataset.src ?? img.src;
            let [imgDir] = src.match(/.+\//);
            return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}.${fun.ex(_unsafeWindow.g_th[(i + 1)][0])}`);
        },
        button: [4],
        insertImg: [".pre_img", 2],
        customTitle: () => fun.title(/ - Page \d+ - HentaiRox/).replace("|", "-"),
        css: ".pre_img{max-height:unset!important}",
        category: "hcomic"
    }, {
        name: "HentaiEnvy圖片清單頁",
        host: ["hentaienvy.com"],
        reg: /^https?:\/\/hentaienvy\.com\/gallery\/\d+\/$/,
        include: ".gallery_thumbs",
        init: () => fun.createImgBox(".gallery_thumbs", 0),
        imgs: async () => {
            fun.showMsg(displayLanguage.str_04, 0);
            await fun.waitEle("#thumbs_box img");
            fun.hideMsg();
            fun.showMsg(displayLanguage.str_05, 0);
            let _token = fun.attr('meta[name="csrf-token"]', "content");
            let server = fun.ge("#load_server").value;
            let u_id = fun.ge("#gallery_id").value;
            let g_id = fun.ge("#load_id").value;
            let img_dir = fun.ge("#load_dir").value;
            let total_pages = fun.ge("#load_pages").value;
            thumbnailSrcArray = await fetch("/inc/thumbs_loader.php", {
                "headers": {
                    "content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                    "x-requested-with": "XMLHttpRequest"
                },
                "body": `_token=${_token}&server=${server}&u_id=${u_id}&g_id=${g_id}&img_dir=${img_dir}&visible_pages=0&total_pages=${total_pages}&type=2`,
                "method": "POST"
            }).then(res => res.text()).then(text => fun.doc(text)).then(dom => [...dom.images].map(e => e.dataset.src ?? e.src));
            let [max] = fun.gt("//ul[span[text()='Pages:']]").match(/\d+/);
            let img = fun.ge(".th_gp img");
            let src = img.dataset.src ?? img.src;
            let [imgDir] = src.match(/.+\//);
            await fun.waitVar("g_th");
            return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}.${fun.ex(_unsafeWindow.g_th[(i + 1)][0])}`);
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        customTitle: () => fun.ge(".subtitle") ? fun.gt(".subtitle") : fun.gt("h1"),
        go: 1,
        topButton: true,
        category: "hcomic"
    }, {
        name: "HentaiEnvy閱讀頁",
        host: ["hentaienvy.com"],
        reg: /^https?:\/\/hentaienvy\.com\/g\/\d+\/\d+\/$/,
        imgs: async () => {
            await fun.waitVar("g_th");
            let max = fun.ge("#pages").value;
            let img = fun.ge("#fimg");
            let src = img.dataset.src ?? img.src;
            let [imgDir] = src.match(/.+\//);
            return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}.${fun.ex(_unsafeWindow.g_th[(i + 1)][0])}`);
        },
        button: [4],
        insertImg: [".rd_fimg", 2],
        customTitle: () => fun.title(/ - Page \d+ - HentaiEnvy/).replace("|", "-"),
        css: ".rd_fimg{width:auto!important;max-height:unset!important}",
        category: "hcomic"
    }, {
        name: "lhentai.com/simplyhentai.red圖片清單頁",
        host: ["lhentai.com", "simplyhentai.red"],
        reg: /^https?:\/\/(lhentai\.com|simplyhentai\.red)\/g\/\d+$/,
        imgs: async () => {
            thumbnailSrcArray = fun.getImgSrcArr(".gallerythumb img");
            fun.showMsg(displayLanguage.str_05, 0);
            let url = fun.gu("a.gallerythumb");
            let iframe = await fun.iframeVar(url, "images_ext");
            let [imgDir] = fun.ge(".fit-horizontal", iframe.document).src.match(/.+\//);
            return iframe.images_ext.map((e, i) => `${imgDir}${(i + 1)}.${fun.ex(e)}`);
        },
        button: [4],
        insertImg: [
            [".thumbs", 2], 2
        ],
        go: 1,
        customTitle: () => fun.getText(["#info>h2", "#info>h1"]),
        category: "hcomic"
    }, {
        name: "lhentai.com/simplyhentai.red閱讀頁",
        host: ["lhentai.com", "simplyhentai.red"],
        reg: /^https?:\/\/(lhentai\.com|simplyhentai\.red)\/g\/\d+\/\d+\/$/,
        imgs: () => {
            let [imgDir] = fun.ge(".fit-horizontal").src.match(/.+\//);
            return _unsafeWindow.images_ext.map((e, i) => `${imgDir}${(i + 1)}.${fun.ex(e)}`);
        },
        button: [4],
        insertImg: ["#page-container", 2],
        category: "hcomic"
    }, {
        name: "EAHentai",
        host: ["eahentai.com"],
        reg: /^https?:\/\/eahentai\.com\/a\/\d+$/,
        init: async () => {
            let id = fun.lp.match(/\d+/)[0];
            let fetchJson = await fetch(`/api/image/album/${id}`).then(res => res.json()).then(arr => arr[0]);
            siteJson = fetchJson;
            await fun.waitEle(".gallery-img");
            fun.createImgBox(".gallery-container", 2);
        },
        imgs: () => {
            thumbnailSrcArray = siteJson.images.map(e => "https://i.eahentai.com/file/ea-gallery/" + e.thumbnailUri);
            return siteJson.images.map(e => "https://i.eahentai.com/file/ea-gallery/" + e.imageUri);
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        go: 1,
        customTitle: () => siteJson.title,
        category: "hcomic"
    }, {
        name: "Fhentai圖片清單頁",
        reg: () => fun.checkUrl({
            h: "fhentai.net",
            p: "/f/"
        }),
        imgs: async () => {
            thumbnailSrcArray = fun.getImgSrcArr(".rounded-md:has(>.grid) img");
            return thumbnailSrcArray.map(e => e.replace("/thumb/", "/raw/"));
        },
        button: [4],
        insertImg: [".rounded-md:has(>.grid)", 2],
        go: 1,
        customTitle: "main h1",
        category: "hcomic"
    }, {
        name: "Fhentai閱讀頁",
        reg: () => fun.checkUrl({
            h: "fhentai.net",
            p: "/read/"
        }),
        imgs: "main .rounded-md img",
        button: [4],
        insertImg: ["main .rounded-md", 2],
        customTitle: "main h1",
        category: "hcomic"
    }, {
        name: "M-Hentai圖片清單頁",
        host: ["m-hentai.net"],
        reg: /^https?:\/\/m-hentai\.net\/gallery\?id=\d+$/,
        init: () => fun.createImgBox(".bookthumbnailcontainer", 2),
        imgs: async () => {
            thumbnailSrcArray = fun.getImgSrcArr(".bookthumbnail .lazyloadimage");
            fun.showMsg(displayLanguage.str_05, 0);
            let url = fun.gu(".bookthumbnail>a");
            return fun.iframeVar(url, "displayimagelist").then(w => w.displayimagelist.map(e => e.image_url));
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        go: 1,
        customTitle: () => fun.getText([".gallerysubtitle", ".gallerytitle"]),
        category: "hcomic"
    }, {
        name: "M-Hentai閱讀頁",
        host: ["m-hentai.net"],
        reg: /^https?:\/\/m-hentai\.net\/read\?index=\d+/,
        imgs: () => _unsafeWindow.displayimagelist.map(e => e.image_url),
        button: [4],
        insertImg: [".imagereadercontainer", 2],
        insertImgAF: () => fun.run("$(document).off()"),
        customTitle: () => fun.title(/ - Page .+/),
        category: "hcomic"
    }, {
        name: "HentaiNexus圖片清單頁",
        host: ["hentainexus.com"],
        reg: /^https?:\/\/hentainexus\.com\/view\/\d+$/,
        init: () => fun.createImgBox(".box:has(>.is-multiline)", 2),
        imgs: async () => {
            thumbnailSrcArray = fun.getImgSrcArr(".card-image img");
            fun.showMsg(displayLanguage.str_05, 0);
            let url = fun.gu("//a[div[@class='card']]");
            let iframe = await fun.iframeVar(url, "pageData");
            let CDN_Srcs = iframe.pageData.map(e => e.image);
            let siteSrcs = CDN_Srcs.map(e => e.replace(/i\d\.wp\.com\/|\?filter=null/g, ""));
            fun.showMsg(displayLanguage.str_56, 0);
            let status = await fun.xhrHEAD(siteSrcs[0]).then(res => res.status);
            return status === 200 ? siteSrcs : CDN_Srcs;
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        go: 1,
        customTitle: ".title",
        category: "hcomic"
    }, {
        name: "HentaiNexus閱讀頁",
        host: ["hentainexus.com"],
        reg: /^https?:\/\/hentainexus\.com\/read\/\d+/,
        imgs: async () => {
            let CDN_Srcs = _unsafeWindow.pageData.map(e => e.image);
            let siteSrcs = CDN_Srcs.map(e => e.replace(/i\d\.wp\.com\/|\?filter=null/g, ""));
            fun.showMsg(displayLanguage.str_56, 0);
            let status = await fun.xhrHEAD(siteSrcs[0]).then(res => res.status);
            return status === 200 ? siteSrcs : CDN_Srcs;
        },
        button: [4],
        insertImg: ["#pageChangeSnap", 2],
        customTitle: () => _unsafeWindow.baseTitle.replace(" :: HentaiNexus", ""),
        category: "hcomic"
    }, {
        name: "HentaiLoop圖片清單頁",
        host: ["hentailoop.com"],
        reg: /^https?:\/\/hentailoop\.com\/manga\/[^\/]+\/$/,
        init: () => fun.createImgBox(".preview", 2),
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            thumbnailSrcArray = await fetch("/wp-admin/admin-ajax.php", {
                "headers": {
                    "content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                    "x-requested-with": "XMLHttpRequest"
                },
                "body": `action=loadpreviews&postID=${_unsafeWindow.ajaxData.postID}`,
                "method": "POST"
            }).then(res => res.text()).then(text => fun.doc(text)).then(dom => [...dom.images].map(e => e.src));
            let url = fun.gu(".previews>a");
            return fun.iframeVar(url, "ajax").then(w => {
                let html = w.ajax.pages.join("");
                let dom = fun.doc(html);
                return [...dom.images].map(e => e.dataset.src ?? e.src);
            });
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        go: 1,
        customTitle: "//meta[@content='4']/preceding-sibling::span[1]",
        category: "hcomic"
    }, {
        name: "HentaiLoop閱讀頁",
        host: ["hentailoop.com"],
        reg: /^https?:\/\/hentailoop\.com\/manga\/[^\/]+\/read/,
        init: () => fun.createImgBox(".manga-read-wrapp", 2),
        imgs: () => {
            let html = _unsafeWindow.ajax.pages.join("");
            let dom = fun.doc(html);
            return [...dom.images].map(e => e.dataset.src ?? e.src);
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".manga-read-buttons,.manga-read-wrapp"], 2
        ],
        customTitle: () => fun.title(/Page \d+ of | - Hentai.+|\(by[\w\s]+\)/ig).trim(),
        category: "hcomic"
    }, {
        name: "nhentai.xxx閱讀頁",
        host: ["nhentai.xxx"],
        reg: /^https?:\/\/nhentai\.xxx\/g\/\d+\/\d+\/$/,
        imgs: () => {
            let img = fun.ge("#fimg");
            let src = img.dataset.src ?? img.src;
            let [imgDir] = src.match(/.+\//);
            let max = fun.ge("#pages").value;
            return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}.${fun.ex(_unsafeWindow.g_th.fl[(i + 1)][0])}`);
        },
        button: [4],
        insertImg: [".reader_overlay", 2],
        category: "hcomic"
    }, {
        name: "nhentai.to/nhentai.website閱讀頁",
        host: ["nhentai.to", "nhentai.website"],
        reg: /^https?:\/\/nhentai\.(to|website)\/g\/\d+\/\d+$/,
        init: async () => await fun.waitVar("reader"),
        imgs: () => {
            const {
                reader
            } = _unsafeWindow;
            let imgDir = reader.media_url + "/galleries/" + reader.gallery.media_id + "/";
            return reader.gallery.images.pages.map((e, i) => `${imgDir}${(i + 1)}.${fun.ex(e.t)}`);
        },
        button: [4],
        insertImg: ["#image-container", 2],
        customTitle: () => {
            const {
                reader
            } = _unsafeWindow;
            return reader.gallery.title.japanese ?? reader.gallery.title.english;
        },
        category: "hcomic"
    }, {
        name: "TMOHentai圖片清單頁",
        host: ["tmohentai.com"],
        reg: /^https?:\/\/tmohentai\.com\/contents\/\w+$/i,
        imgs: async () => {
            await fun.waitEle("div[style*='background']");
            let div = fun.ge("div[style*='background']");
            let src = div.style.background.split('"')[1];
            let [imgDir] = src.match(/.+\//);
            let max = fun.gae("div[style*='background']").length;
            return fun.arr(max, (v, i) => imgDir + String(i).padStart(3, "0") + ".webp");
        },
        button: [4],
        insertImg: [
            ["//div[div[@class='well']]", 2], 2
        ],
        go: 1,
        customTitle: ".panel-title h3",
        category: "hcomic"
    }, {
        name: "TMOHentai閱讀頁",
        host: ["tmohentai.com"],
        reg: /^https?:\/\/tmohentai\.com\/reader\/\w+\/paginated\//i,
        imgs: async () => {
            await fun.waitEle("img.content-image");
            let img = fun.ge("img.content-image");
            let src = img.dataset.original ?? img.src;
            let [imgDir] = src.match(/.+\//);
            let max = fun.gae("#select-page option").length;
            return fun.arr(max, (v, i) => imgDir + String(i).padStart(3, "0") + ".webp");
        },
        button: [4],
        insertImg: [".reader-info+.text-center", 2],
        customTitle: ".reader-title",
        category: "hcomic"
    }, {
        name: "Download Doujin",
        host: ["cin.cx", "cin.mom"],
        reg: /^https?:\/\/cin\.(cx|mom)\/v\/\d+$/i,
        reg: () => fun.checkUrl({
            h: "cin",
            p: /^\/v\/\d+$/,
            e: "#doujin-page"
        }),
        init: async () => {
            await fun.waitEle("#doujin-page img");
            fun.createImgBox("#doujin-page", 2);
        },
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let srcs = _unsafeWindow.__NEXT_DATA__.props.pageProps.data.images.pages.map(e => e.t);
            let fetchNum = 0;
            return srcs.map(async (src, i, arr) => {
                await fun.delay(i * 200, 0);
                return fetch(src).then(res => res.blob()).then(blob => {
                    fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${arr.length}`, 0);
                    return URL.createObjectURL(blob);
                });
            });
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0], 3
        ],
        insertImgAF: () => fun.css("#doujin-page{display:none!important;}"),
        customTitle: () => fun.dt({
            s: "[class^='styles_info']>div",
            d: [
                "🇨🇳 ",
                "🇯🇵 ",
                "🇬🇧 "
            ]
        }),
        fetch: 1,
        category: "hcomic"
    }, {
        name: "Pururin圖片清單頁",
        host: ["pururin.to"],
        reg: /^https?:\/\/pururin\.to\/gallery\/\d+\/.+/,
        imgs: () => {
            let url = fun.gu(".gallery-preview>a");
            return fun.fetchDoc(url).then(dom => {
                let ele = fun.ge(".img-viewer", dom);
                let svr = ele.dataset.svr;
                let data = JSON.parse(ele.dataset.img);
                let arr = data.images.sort((a, b) => a.page - b.page);
                arr = arr.map(e => svr + "/" + data.directory + "/" + e.filename);
                thumbnailSrcArray = arr.map(e => e.replace(/(\.\w+)$/, "t$1"));
                return arr;
            });
        },
        button: [4],
        insertImg: [
            [".gallery-preview", 2], 2
        ],
        go: 1,
        insertImgAF: () => {
            if (options.icon == 1 || siteData.icon == 1) addFullPictureLoadButton();
            if (!hasTouchEvents && ShowFullPictureLoadFixedMenu === 1) addFullPictureLoadFixedMenu();
        },
        customTitle: () => fun.ge("[placeholder=Japanese]")?.value || fun.ge("[placeholder='Alternative names']")?.value,
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "none"
    }, {
        name: "Pururin閱讀頁",
        host: ["pururin.to"],
        reg: /^https?:\/\/pururin\.to\/read\/\d+\/\d+\/.+/,
        imgs: () => {
            let ele = fun.ge(".img-viewer");
            let svr = ele.dataset.svr;
            let data = JSON.parse(ele.dataset.img);
            //按頁數排列
            let arr = data.images.sort((a, b) => a.page - b.page);
            arr = arr.map(e => svr + "/" + data.directory + "/" + e.filename);
            thumbnailSrcArray = arr.map(e => e.replace(/(\.\w+)$/, "t$1"));
            return arr;
        },
        button: [4],
        insertImg: [".img-viewer", 2],
        customTitle: () => fun.ge("[placeholder=Japanese]")?.value || fun.ge("[placeholder='Alternative names']")?.value,
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}.box.img-reader .img-viewer{position:unset!important;white-space:unset!important}",
        category: "hcomic"
    }, {
        name: "9hentai圖片清單頁",
        host: ["9hentai.com"],
        reg: /^https?:\/\/9hentai\.\w+\/g\/\d+\/$/,
        init: async () => {
            let json = await fetch("/api/getBookByID", {
                method: "POST",
                body: JSON.stringify({
                    id: Number(/\d+/.exec(fun.lp).at(0) ?? 0)
                }),
                headers: {
                    "Content-Type": "application/json"
                }
            }).then(res => res.json());
            debug("\n此頁JSON資料\n", json);
            siteJson = json;
        },
        imgs: () => {
            let arr = fun.arr(siteJson.results.total_page, (v, i) => `${siteJson.results.image_server + siteJson.results.id}/${i + 1}.jpg`);
            thumbnailSrcArray = arr.map(e => e.replace(/(\d+)(\.\w+)$/, "preview/$1t$2"));
            return arr;
        },
        button: [4],
        insertImg: [
            [".pt-0 .card-body", 2], 2
        ],
        go: 1,
        customTitle: () => siteJson.results.alt_title ?? siteJson.results.title,
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "9hentai閱讀頁",
        host: ["9hentai.com"],
        reg: /^https?:\/\/9hentai\.\w+\/g\/\d+\/\d+\/$/,
        init: async () => {
            let json = await fetch("/api/getBookByID", {
                method: "POST",
                body: JSON.stringify({
                    id: Number(/\d+/.exec(fun.lp).at(0) ?? 0)
                }),
                headers: {
                    "Content-Type": "application/json"
                }
            }).then(res => res.json());
            debug("\n此頁JSON資料\n", json);
            siteJson = json;
        },
        imgs: () => {
            let arr = fun.arr(siteJson.results.total_page, (v, i) => `${siteJson.results.image_server + siteJson.results.id}/${i + 1}.jpg`);
            thumbnailSrcArray = arr.map(e => e.replace(/(\d+)(\.\w+)$/, "preview/$1t$2"));
            return arr;
        },
        button: [4],
        insertImg: [".image-viewer", 2],
        customTitle: () => siteJson.results.alt_title ?? siteJson.results.title,
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "Manga Mischief圖片清單頁",
        host: ["xmanga.org"],
        reg: /^https?:\/\/xmanga\.org\/album\/[\w-]+\/$/,
        init: async () => {
            let [, , albumId] = fun.lp.split("/");
            let api = `https://mangamischief.com/backend/image?albumId=${albumId}`;
            let json = await fetch(api).then(res => res.json());
            debug("\n此頁JSON資料\n", json);
            siteJson = json;
            await fun.waitEle("div:has(>.max-w-gallery) img");
        },
        imgs: () => siteJson.data.map(e => e.url),
        button: [4],
        insertImg: ["div:has(>.max-w-gallery)", 2],
        customTitle: "h1.text-lg",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "AsmHentai圖片清單頁",
        host: ["asmhentai.com"],
        reg: /^https?:\/\/asmhentai\.com\/g\/\d+\/$/,
        init: () => fun.createImgBox(".gallery"),
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let _token = fun.attr('meta[name="csrf-token"]', "content");
            let id = fun.ge("#load_id").value;
            let dir = fun.ge("#load_dir").value;
            let t_pages = fun.ge("#t_pages").value;
            thumbnailSrcArray = await fetch("/inc/thumbs_loader.php", {
                "headers": {
                    "content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                    "x-requested-with": "XMLHttpRequest"
                },
                "body": `_token=${_token}&id=${id}&dir=${dir}&visible_pages=0&t_pages=${t_pages}&type=2`,
                "method": "POST"
            }).then(res => res.text()).then(text => fun.doc(text)).then(dom => [...dom.images].map(e => e.dataset.src ?? e.src));
            return thumbnailSrcArray.map(e => e.replace("t.", "."));
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        go: 1,
        customTitle: () => fun.getText([".info>h2", ".info>h1"]),
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "AsmHentai閱讀頁",
        host: ["asmhentai.com"],
        reg: /^https?:\/\/asmhentai\.com\/gallery\/\d+\/\d+\/$/,
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let _token = fun.attr('meta[name="csrf-token"]', "content");
            let id = fun.ge("#gallery_id").value;
            let dir = fun.ge("#image_dir").value;
            let t_pages = fun.ge("#pages").value;
            thumbnailSrcArray = await fetch("/inc/thumbs_loader.php", {
                "headers": {
                    "content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                    "x-requested-with": "XMLHttpRequest"
                },
                "body": `_token=${_token}&id=${id}&dir=${dir}&visible_pages=0&t_pages=${t_pages}&type=2`,
                "method": "POST"
            }).then(res => res.text()).then(text => fun.doc(text)).then(dom => [...dom.images].map(e => e.dataset.src ?? e.src));
            return thumbnailSrcArray.map(e => e.replace("t.", "."));
        },
        button: [4],
        insertImg: [".rd_fimg", 2],
        customTitle: () => fun.title(" Page", 1),
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}.preloader{text-indent:unset !important}",
        category: "hcomic"
    }, {
        name: "MultPorn閱讀頁",
        reg: () => fun.checkUrl({
            h: "multporn.net",
            e: "//script[contains(text(),'configUrl')]"
        }),
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let url = fun.gst("configUrl").match(/configUrl":"[^,]+/g)[0].slice(12, -1).replaceAll("\\", "");
            return fetch(url).then(res => res.text()).then(text => {
                let xml = fun.xml(text);
                let imgs = fun.gae("image", xml);
                thumbnailSrcArray = imgs.map(e => e.getAttribute("thumbURL"));
                return imgs.map(e => e.getAttribute("linkURL"));
            });
        },
        button: [4],
        insertImg: [
            [".juicebox-parent", 2], 2
        ],
        go: 1,
        autoDownload: [0],
        next: "//a[text()='Next Part']",
        prev: "//a[text()='Previous Part']",
        customTitle: "#page-title",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "KingComiX閱讀頁",
        host: ["kingcomix.com"],
        reg: /^https?:\/\/kingcomix\.com\/[^\/]+\/$/,
        imgs: "figure img, .entry-content img.lazy",
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: () => fun.gt("h1.singleTitle-h1").replace(" – Kingcomix", ""),
        category: "hcomic"
    }, {
        name: "HENTAISET.COM閱讀頁 / HENTAIVID.NET閱讀頁",
        host: ["www.hentaiset.com", "hentaivid.net"],
        reg: [
            /^https?:\/\/www\.hentaiset\.com\/\w+\/\w+\//i,
            /^https?:\/\/hentaivid\.net\/photo\/\w+\/[^\/]+\/$/i
        ],
        init: () => fun.createImgBox("#lightgallery", 2),
        imgs: "#lightgallery li.thumb,#lightgallery div.thumb",
        thums: "#lightgallery img[is='lazyload-image']",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#lightgallery"], 2
        ],
        customTitle: ".main-container h1",
        category: "hcomic"
    }, {
        name: "Neko Hentai閱讀頁",
        host: ["neko-hentai.net"],
        reg: /^https?:\/\/neko-hentai\.net\//i,
        include: "#manga-content img",
        imgs: "#manga-content img",
        button: [4],
        insertImg: ["#manga-content", 2],
        customTitle: () => fun.title(/ - Neko Hentai.*$/),
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "Super Hentai閱讀頁",
        host: ["superhentai.blog"],
        reg: /^https?:\/\/superhentai\.blog\/[^\/]+\/$/i,
        include: ".gallery",
        imgs: ".gallery img",
        button: [4],
        insertImg: [".gallery", 2],
        customTitle: "#single h1",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "HENTAICELEB.COM閱讀頁",
        host: ["www.hentaiceleb.com"],
        reg: /^https?:\/\/www\.hentaiceleb\.com\/\w+\/\w+\/[^\.]+\.html$/i,
        imgs: ".gallery-thumbs a[data-src]",
        button: [4],
        insertImg: [".media-bg", 2],
        customTitle: ".full-main-col h1",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "HENTAIVSMANGA.COM圖片清單頁",
        host: ["hentaivsmanga.com"],
        reg: /^https?:\/\/hentaivsmanga\.com\/content\/\w+\/[^\/]+\/$/i,
        imgs: () => fun.getImgA("#image-container img", "#thumbnail-container a"),
        thums: "#thumbnail-container img[is='lazyload-image']",
        button: [4],
        insertImg: [
            ["#thumbnail-container", 2], 2
        ],
        go: 1,
        customTitle: () => fun.getText(["#info>h2", "#info>h1"]),
        category: "hcomic"
    }, {
        name: "HENTAIVSMANGA.COM閱讀頁",
        host: ["hentaivsmanga.com"],
        reg: /^https?:\/\/hentaivsmanga\.com\/content\/\w+\/[^\/]+\/\d+\/$/i,
        imgs: () => {
            let max = fun.gt(".num-pages");
            let url = fun.url.replace(/\d+\/$/, "");
            let links = fun.arr(max, (v, i) => url + (i + 1) + "/");
            return fun.getImgA("#image-container img", links);
        },
        button: [4],
        insertImg: ["#image-container", 2],
        customTitle: () => fun.title(" XXX Manga and Hentai"),
        category: "hcomic"
    }, {
        name: "HENTAICREDO.COM圖片清單頁",
        host: ["www.hentaicredo.com"],
        reg: /^https?:\/\/www\.hentaicredo\.com\/content\/\w+\/[^\/]+\/$/i,
        imgs: () => {
            let [thumbs] = fun.gae(".thumbs");
            let imgs = fun.gae("img", thumbs);
            let links = fun.gau("a", thumbs);
            thumbnailSrcArray = fun.getImgSrcArr(imgs);
            return fun.getImgA(".big-picture>img", links);
        },
        button: [4],
        insertImg: [".thumbs", 2],
        customTitle: "h2",
        category: "hcomic"
    }, {
        name: "HentaiHere閱讀頁",
        host: ["hentaihere.com"],
        reg: /^https?:\/\/hentaihere\.com\/m\/\w+\/\d+\/\d+\/$/i,
        init: async () => {
            await fun.waitVar("rff_imageList");
            await fun.waitVar("jQuery");
            setTimeout(() => fun.run("jQuery(document).off();"), 1000);
        },
        imgs: () => _unsafeWindow.rff_imageList.map(e => "https://hentaicdn.com/hentai" + e),
        button: [4],
        insertImg: ["#reader-content", 2],
        autoDownload: [0],
        next: "//li[a[@class='bg-info']]/following-sibling::li[1]/a",
        prev: 1,
        customTitle: () => fun.gt("#detail span") + " - " + fun.gt("#chapter span"),
        css: ".afs_ads,[data-type]{display:none!important}",
        category: "hcomic"
    }, {
        name: "HentaiPaw圖片清單頁/Hentai-One圖片清單頁",
        reg: () => fun.checkUrl({
            h: [
                "hentaipaw.com",
                "ch.hentai-one.com"
            ],
            p: "/articles/"
        }),
        init: async () => {
            await fun.waitEle("next-route-announcer");
            await fun.waitEle(".grid .group>img");
        },
        imgs: async () => {
            fun.createImgBox(".container:has(>.grid)");
            fun.showMsg("獲取數據中...", 0);
            let url = fun.gu(".container:has(>.grid) a");
            return fun.fetchDoc(url).then(dom => {
                let code = fun.gst("slides", dom);
                let arr = JSON.parse(code.match(/\\"slides\\":([^\]]+\])/)[1].replaceAll("\\", ""));
                return arr.map(e => e.src);
            });
        },
        thums: ".grid .group>img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "//div[@id='FullPictureLoadMainImgBox']/preceding-sibling::div[1]"], 2, 2000
        ],
        insertImgAF: () => {
            let loop = setInterval(() => {
                if (!fun.ge(".FullPictureLoadImage")) {
                    fun.immediateInsertImg();
                }
            }, 500);
            setTimeout(() => clearInterval(loop), 10000);
        },
        customTitle: () => {
            if (fun.lh === "ch.hentai-one.com") {
                let text = fun.gt("h1.text-wrap");
                return text.includes("|") ? text.split("|")[1].trim() : text;
            } else {
                return fun.gt("h1.text-wrap").replace(/\/|\|/g, " ");
            }
        },
        css: "#article-details+.mx-auto,.container:has(>div>script),#button-group a{display:none!important;}#article-details{margin-top:5rem!important}",
        category: "hcomic"
    }, {
        name: "色图喵h漫画圖片清單頁",
        reg: /^https?:\/\/www\.setumeow\.com\/c\//,
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr(".thumbsdiv img");
            return thumbnailSrcArray.map(src => src.replace("/t/", "/i/").replace("t.", "."));
        },
        button: [4],
        insertImg: [".thumbsdiv", 2],
        customTitle: "#info h1",
        category: "hcomic"
    }, {
        name: "HDpornComics圖片清單頁",
        host: ["hdporncomics.com"],
        reg: /^https?:\/\/hdporncomics\.com\/[^/]+\/([^/]+\/)?$/i,
        include: ".my-gallery.scrollmenu",
        imgs: ".my-gallery a[data-size]",
        thums: ".my-gallery a[data-size] img",
        button: [4],
        insertImg: [
            [".postContent>.items-center,#likeDislikeVue", 2], 2
        ],
        go: 1,
        customTitle: () => fun.dt({
            s: "#infoBox>h1",
            d: [
                " – Gay Manga",
                " Comic Porn"
            ]
        }),
        category: "hcomic"
    }, {
        name: "HDpornComics閱讀頁",
        host: ["hdporncomics.com"],
        reg: /^https?:\/\/hdporncomics\.com\/manhwa\/[^/]+\/chapter/i,
        imgs: "#imageContainer>img",
        button: [4],
        insertImg: ["#imageContainer", 2],
        autoDownload: [0],
        next: "//a[contains(text(),'Next')]",
        prev: "//a[contains(text(),'Prev')]",
        customTitle: () => fun.gt(".list-reset li:nth-child(5)>a") + " - " + fun.gt("option[selected]"),
        category: "hcomic"
    }, {
        name: "Doujins圖片清單頁",
        host: ["doujins.com"],
        reg: /^https?:\/\/doujins\.com\/.+\/.+/i,
        include: "#thumbnails",
        init: async () => await fun.waitEle(".doujin"),
        imgs: () => {
            thumbnailSrcArray = fun.gae("div[data-hash]").map(e => "https://static.doujins.com/t-" + e.dataset.hash + ".jpg");
            return fun.gae(".doujin[data-file]").map(e => e.dataset.file);
        },
        button: [4],
        insertImg: [
            ["#thumbnails", 2], 2
        ],
        go: 1,
        customTitle: ".folder-title>a:last-child",
        category: "hcomic"
    }, {
        name: "Simply Hentai閱讀頁",
        host: ["www.simply-hentai.com"],
        reg: /^https?:\/\/www.simply-hentai.com\/[^\/]+\/[^\/]+\/page\/\d+/i,
        init: async () => {
            await fun.waitEle("#__NEXT_DATA__");
            let json = JSON.parse(fun.gt("#__NEXT_DATA__"));
            debug("\n此頁JSON資料\n", json);
            siteJson = json;
        },
        imgs: () => {
            thumbnailSrcArray = siteJson.props.pageProps.data.pages.map(e => e.sizes.small_thumb);
            return siteJson.props.pageProps.data.pages.map(e => e.sizes.full)
        },
        button: [4],
        insertImg: ["#reader-image", 2],
        insertImgAF: () => {
            let loop = setInterval(() => !fun.ge(".FullPictureLoadImage") ? fun.immediateInsertImg() : null, 500);
            setTimeout(() => clearInterval(loop), 10000);
        },
        customTitle: () => siteJson.props.pageProps.data.title.replace(/\/|\|/g, "-"),
        category: "hcomic"
    }, {
        name: "Hanime1圖片清單頁",
        host: ["hanime1.me"],
        link: "https://hanime1.me/comics",
        reg: /^https?:\/\/hanime1\.me\/comic\/\d+$/,
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let url = fun.gu(".comics-thumbnail-wrapper>a");
            return fun.fetchDoc(url).then(dom => {
                let imgDir = fun.ge("#current-page-image", dom).dataset.prefix;
                let code = fun.gst("extensions", dom);
                let extensions = fun.run(code.match(/\[.+\]/)[0].replaceAll("&quot;", '"'));
                return extensions.map((e, i) => {
                    if (imgDir.includes("nhentai")) {
                        return `${imgDir}${(i + 1)}.${fun.ex(e)}`;
                    } else {
                        return imgDir + e + ".jpg";
                    }
                });
            });
        },
        button: [4],
        insertImg: [".comics-thumbnail-wrapper", 2],
        go: 1,
        customTitle: "h4.title",
        referer: "src",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "Hanime1閱讀頁",
        host: ["hanime1.me"],
        link: "https://hanime1.me/comics",
        reg: /^https?:\/\/hanime1\.me\/comic\/\d+\/\d+$/,
        imgs: async () => {
            let imgDir = fun.ge("#current-page-image").dataset.prefix;
            return _unsafeWindow.extensions.map((e, i) => {
                if (imgDir.includes("nhentai")) {
                    return `${imgDir}${(i + 1)}.${fun.ex(e)}`;
                } else {
                    return imgDir + e + ".jpg";
                }
            });
        },
        button: [4],
        insertImg: ["#comic-content-wrapper", 2],
        customTitle: () => fun.dt({
            t: fun.ge("//meta[@property='og:title']").content,
            d: /第\d+頁 - /
        }),
        referer: "src",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "My Hentai Gallery圖片清單頁",
        host: ["myhentaigallery.com"],
        reg: /^https?:\/\/myhentaigallery\.com\/g\/\d+$/,
        imgs: () => {
            thumbnailSrcArray = fun.gae(".comic-thumb>img").map(e => e.src);
            return thumbnailSrcArray.map(e => e.replace("thumbnail", "original"));
        },
        button: [4],
        insertImg: [
            ["//div[@class='comic-listing'][center[center[ul[@class='comics-grid clear']]]]", 0], 2
        ],
        go: 1,
        customTitle: ".comic-description>h1",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "XYZ PORN COMICS圖片清單頁",
        host: ["xyzcomics.com"],
        reg: /^https?:\/\/xyzcomics\.com\/[^\/]+\/$/,
        include: ".jig-link>img",
        imgs: ".jig-link",
        thums: ".jig-link>img",
        button: [4],
        insertImg: [
            [".entry-content", 0], 2
        ],
        go: 1,
        customTitle: ".entry-title",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "IMHentai圖片清單頁",
        host: ["imhentai.xxx"],
        reg: /^https?:\/\/imhentai\.xxx\/gallery\/\d+\//,
        init: async () => {
            await fun.waitVar("g_th");
            fun.createImgBox("#comments_div", 0);
        },
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let server = fun.ge("#load_server").value;
            let u_id = fun.ge("#gallery_id").value;
            let g_id = fun.ge("#load_id").value;
            let img_dir = fun.ge("#load_dir").value;
            let total_pages = fun.ge("#load_pages").value;
            thumbnailSrcArray = await fetch("/inc/thumbs_loader.php", {
                "headers": {
                    "content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                    "x-requested-with": "XMLHttpRequest"
                },
                "body": `server=${server}&u_id=${u_id}&g_id=${g_id}&img_dir=${img_dir}&visible_pages=0&total_pages=${total_pages}&type=2`,
                "method": "POST"
            }).then(res => res.text()).then(text => fun.doc(text)).then(dom => [...dom.images].map(e => e.dataset.src ?? e.src));
            return fun.getImhentaiSrc();
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        customTitle: async () => {
            let t = fun.gt(".subtitle");
            return t.length > 0 ? t : fun.gt("h1").replace(/\||\+/g, "");
        },
        go: 1,
        topButton: true,
        category: "hcomic"
    }, {
        name: "IMHentai閱讀頁",
        host: ["imhentai.xxx"],
        reg: /^https?:\/\/imhentai\.xxx\/view\/\d+\/\d+\//,
        init: "setTimeout(()=>{fun.ge('.pre_img').removeAttribute('style');$('a.next_img').unbind('click');},1000)",
        imgs: () => fun.getImhentaiSrc(),
        button: [4],
        insertImg: [".pre_img", 2],
        customTitle: () => fun.title("-", 1),
        category: "hcomic"
    }, {
        name: "HentaiEra圖片清單頁",
        host: ["hentaiera.com"],
        reg: /^https?:\/\/hentaiera\.com\/gallery\/\d+\/$/,
        include: "#append_thumbs",
        init: async () => {
            await fun.waitVar("g_th");
            fun.createImgBox("#thumbs_gallery_div", 2);
        },
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let server = fun.ge("#load_server").value;
            let u_id = fun.ge("#gallery_id").value;
            let g_id = fun.ge("#load_id").value;
            let img_dir = fun.ge("#load_dir").value;
            let total_pages = fun.ge("#load_pages").value;
            thumbnailSrcArray = await fetch("/inc/thumbs_loader.php", {
                "headers": {
                    "content-type": "application/x-www-form-urlencoded; charset=UTF-8",
                    "x-requested-with": "XMLHttpRequest"
                },
                "body": `server=${server}&u_id=${u_id}&g_id=${g_id}&img_dir=${img_dir}&visible_pages=0&total_pages=${total_pages}&type=2`,
                "method": "POST"
            }).then(res => res.text()).then(text => fun.doc(text)).then(dom => [...dom.images].map(e => e.dataset.src ?? e.src));
            let max = fun.ge("#load_pages").value;
            let img = fun.ge(".gthumb img");
            let src = img.dataset.src ?? img.src;
            let [imgDir] = src.match(/^.+\//);
            return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}.${fun.ex(_unsafeWindow.g_th[(i + 1)][0])}`);
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        go: 1,
        customTitle: () => fun.getText([".subtitle", "h1"]),
        category: "hcomic"
    }, {
        name: "HentaiEra閱讀頁",
        host: ["hentaiera.com"],
        reg: /^https?:\/\/hentaiera\.com\/view\/\d+\/\d+\/$/,
        init: async () => {
            await fun.waitVar("g_th");
            let html = fun.ge(".pre_img img").outerHTML;
            fun.ge(".pre_img").outerHTML = `<div class="imgBox">${html}</div>`;
        },
        imgs: () => {
            let max = fun.ge("#pages").value;
            let img = fun.ge("#gimg");
            let src = img.dataset.src ?? img.src;
            let [imgDir] = src.match(/.+\//);
            return fun.arr(max, (v, i) => `${imgDir}${(i + 1)}.${fun.ex(_unsafeWindow.g_th[(i + 1)][0])}`);
        },
        button: [4],
        insertImg: [".imgBox", 2],
        customTitle: () => fun.title(/ - Page \d+ - HentaiEra/),
        category: "hcomic"
    }, {
        name: "TSUMINO圖片清單頁",
        host: ["www.tsumino.com"],
        reg: /^https?:\/\/www\.tsumino\.com\/entry\/\d+/,
        include: "#thumbnails-container",
        delay: 300,
        imgs: async () => {
            let prges = fun.ge("div[data-pages]").dataset.pages;
            fun.showMsg(displayLanguage.str_05, 0);
            let imgDir;
            let key = await fun.fetchDoc(fun.gu("#thumbnails-container a")).then(dom => {
                let url = fun.ge("div[data-cdn]", dom).dataset.cdn;
                let newUrl = new URL(url);
                imgDir = newUrl.origin + newUrl.pathname.replace("[PAGE]", "");
                return newUrl.search;
            });
            return fun.arr(prges, (v, i) => imgDir + (i + 1) + key);
        },
        button: [4],
        insertImg: [
            ["#thumbnails-container", 2, "#thumbnails-container"], 2
        ],
        go: 1,
        customTitle: () => {
            let title = fun.gt(".book-data");
            if (/ \/ /.test(title)) {
                return title.split(" / ").at(-1);
            } else if (/ \| /.test(title)) {
                let s = title.split(" | ");
                return s.length == 2 ? s.at(-1) : title;
            }
            return title;
        },
        category: "hcomic"
    }, {
        name: "TSUMINO閱讀頁",
        host: ["www.tsumino.com"],
        reg: /^https?:\/\/www\.tsumino\.com\/Read\/Index\/\d+\?page=\d+$/,
        imgs: async () => {
            await fun.waitEle(".reader-img");
            let [max] = fun.gt("//h1[span[@id='pageNumberText']]").match(/\d+$/);
            let url = fun.ge("div[data-cdn]").dataset.cdn;
            let newUrl = new URL(url);
            let imgDir = newUrl.origin + newUrl.pathname.replace("[PAGE]", "");
            let key = newUrl.search;
            return fun.arr(max, (v, i) => imgDir + (i + 1) + key);
        },
        button: [4],
        insertImg: [".reader-page", 2],
        category: "hcomic"
    }, {
        name: "nHentai圖片清單頁/HentaiHand圖片清單頁",
        host: ["nhentai.com", "hentaihand.com"],
        reg: /^https?:\/\/(nhentai\.com|hentaihand\.com)\/en\/comic\/[^\/]+$/,
        init: async () => {
            let comic = fun.lp.split("/").at(3);
            let csrfToken = fun.ge("meta[name='csrf-token']").content;
            let xsrfToken = document.cookie.match(/XSRF-TOKEN=(\w+)/)[1];
            let json = await fetch(`/api/comics/${comic}/images`, {
                "headers": {
                    "accept": "application/json, text/plain, */*",
                    "x-csrf-token": csrfToken,
                    "x-requested-with": "XMLHttpRequest",
                    "x-xsrf-token": xsrfToken
                }
            }).then(res => res.json());
            debug("\n此頁JSON資料\n", json);
            siteJson = json;
        },
        imgs: async () => {
            await fun.waitEle(".comic-gallery img");
            thumbnailSrcArray = siteJson.images.map(e => e.thumbnail_url);
            return siteJson.images.map(e => e.source_url);
        },
        button: [4],
        insertImg: [
            ["//div[div[contains(@class,'comic-gallery')]]", 0, ".box-header,.comic-gallery"], 2, 1000
        ],
        go: 1,
        customTitle: () => siteJson.comic.alternative_title ?? siteJson.comic.title,
        category: "hcomic"
    }, {
        name: "nHentai閱讀頁/HentaiHand閱讀頁",
        host: ["nhentai.com", "hentaihand.com"],
        reg: /^https?:\/\/(nhentai\.com|hentaihand\.com)\/\w+\/comic\/[^/]+\/reader\//i,
        init: async () => {
            let comic = fun.lp.split("/").at(3);
            let csrfToken = fun.ge("meta[name='csrf-token']").content;
            let xsrfToken = document.cookie.match(/XSRF-TOKEN=(\w+)/)[1];
            let json = await fetch(`/api/comics/${comic}/images`, {
                "headers": {
                    "accept": "application/json, text/plain, */*",
                    "x-csrf-token": csrfToken,
                    "x-requested-with": "XMLHttpRequest",
                    "x-xsrf-token": xsrfToken
                }
            }).then(res => res.json());
            debug("\n此頁JSON資料\n", json);
            siteJson = json;
        },
        imgs: async () => {
            await fun.waitEle(".vertical-image img[data-src]");
            thumbnailSrcArray = siteJson.images.map(e => e.thumbnail_url);
            return siteJson.images.map(e => e.source_url);
        },
        button: [4],
        insertImg: [".reader", 2],
        customTitle: () => siteJson.comic.alternative_title ?? siteJson.comic.title,
        category: "hcomic"
    }, {
        name: "同人エロ漫画・エロ同人誌ならエロコミックハンター",
        host: ["ero-comic-hunter.net"],
        reg: /^https?:\/\/ero-comic-hunter\.net\/\d+\.html$/,
        imgs: "#single-more_wid~a[href*='/wp-content/uploads/']",
        customTitle: ".kijibox_title a",
        category: "hcomic"
    }, {
        name: "エロ漫画コング｜無料エロマンガ",
        host: ["eromanga-kong.com"],
        reg: /^https?:\/\/eromanga-kong\.com\/[^\/]+\/[^\/]+\/$/,
        include: "#article",
        imgs: "//article[@id='article']//a[img]",
        customTitle: "header>h2",
        category: "hcomic"
    }, {
        name: "Hentai2Read",
        host: ["hentai2read.com"],
        reg: /^https?:\/\/hentai2read\.com\/\w+\/\d+\/(\d+\/)?$/,
        imgs: () => _unsafeWindow.gData.images.map(e => "https://static.hentai.direct/hentai" + e),
        button: [4],
        insertImg: ["#js-reader", 2],
        autoDownload: [0],
        next: "//li[a[contains(@class,'bg-info')]]/preceding-sibling::li[1]/a",
        prev: 1,
        customTitle: () => fun.gt(".reader-left-text.text-ellipsis").replace(/\//g, "-"),
        category: "hcomic"
    }, {
        name: "XlecX",
        host: ["xlecx.one"],
        reg: /^https?:\/\/xlecx\.one\/[\w-]+\.html$/,
        imgs: () => fun.getImgSrcArr(".ug-thumb-image,img[data-src]").map(e => e.replace("thumbs/", "")),
        button: [4],
        insertImg: [
            [".page__col-left", 0], 2
        ],
        go: 1,
        customTitle: ".page__col-left>h1",
        category: "hcomic"
    }, {
        name: "HentaiPal.com",
        host: ["hentaipal.com"],
        reg: /^https?:\/\/hentaipal\.com\/content\/[^\/]+\/[^\/]+\/index\.html$/,
        init: () => fun.remove("iframe[src*='ad'],font[color=red],div:has(>div.row a[href='switch.html'])"),
        imgs: async () => {
            let max;
            try {
                [, max] = fun.gu(".imgpagebar>a:last-child").match(/page-(\d+)/);
            } catch {
                max = 1;
            }
            if (max > 1) {
                let links = [];
                let url = siteUrl.replace("index.html", "");
                for (let i = 2; i <= max; i++) {
                    links.push(url + "page-" + i + ".html");
                }
                await fun.getEle(links, "div:has(>.picbox)", ["div:has(>div>.picbox)", 0]);
            }
            return fun.getImgA("main img[style^=m]", ".picbox>a");
        },
        button: [4],
        insertImg: ["div:has(>div>.picbox)", 2],
        customTitle: () => fun.title(" - HentaiPal.Com"),
        category: "hcomic"
    }, {
        name: "HentaiPal.com 分類自動翻頁",
        enable: 1,
        reg: /^https?:\/\/hentaipal\.com\//,
        init: () => fun.remove("iframe[src*='ad']"),
        autoPager: {
            ele: "div:has(>div>div>.picbox)",
            observer: "div:has(>.picbox)",
            next: ".imgpagebar a:has(.glyphicon-arrow-right)",
            re: ".imgpagebar",
            pageNum: () => nextLink.match(/page-(\d+)/)[1]
        },
        css: ".autoPagerTitle{width:100%!important}",
        category: "autoPager"
    }, {
        name: "HentaiPorns",
        host: ["hentaiporns.net"],
        reg: /^https?:\/\/hentaiporns\.net\/[^\/]+\/$/,
        include: ".gallery",
        init: () => fun.createImgBox(".gallery", 2),
        imgs: ".gallery-item a",
        thums: ".gallery-item a>img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".gallery"], 2, 1000
        ],
        customTitle: () => fun.getText(["#gn+h1", "#gn,.entry-title"]),
        fancybox: {
            v: 3,
            css: false
        },
        category: "hcomic"
    }, {
        name: "8muses",
        host: ["comics.8muses.com"],
        reg: /^https?:\/\/comics\.8muses\.com\/comics\/album\/[\w-]+\/[\w-]+\//i,
        include: ".gallery",
        exclude: ".image-title>.title-text",
        imgs: () => {
            let srcs = fun.gae("img[data-src]").map(e => e.dataset.src.replace("/image/th/", "https://comics.8muses.com/image/fl/"));
            let xhrNum = 0;
            fun.showMsg("fun.xhrHEAD...", 0);
            return srcs.map(async src => {
                let res = await fun.xhrHEAD(src);
                fun.showMsg(`fun.xhrHEAD(${xhrNum+=1}/${srcs.length})`, 0);
                let status = res.status;
                return status == 404 ? src.replace("/fl/", "/fm/") : src;
            });
        },
        button: [4],
        insertImg: [
            [".gallery", 2], 1
        ],
        go: 1,
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "Manga18.club/hanman18.com/18PornComic/Doujin18.net/CNdoujin.net",
        init: async () => {
            await fun.waitVar("jQuery");
            fun.run("jQuery(document).off();");
        },
        reg: () => fun.checkUrl({
            h: [
                "manga18.club",
                "hanman18.com",
                "18porncomic.com",
                "doujin18.net",
                "cndoujin.net"
            ],
            e: "//script[contains(text(),'slides_p_path')]"
        }),
        imgs: () => _unsafeWindow.slides_p_path.map(e => atob(e)),
        capture: () => _this.imgs(),
        autoDownload: [0],
        next: () => _unsafeWindow.next_chapter === "" ? null : _unsafeWindow.next_chapter,
        prev: 1,
        customTitle: () => {
            if (fun.lh === "manga18.club" || fun.lh === "hanman18.com" || fun.lh === "18porncomic.com") {
                return document.title;
            } else {
                return fun.gt(".story_name>h1");
            }
        },
        category: "hcomic"
    }, {
        name: "Hentai.bang14.com",
        host: ["hentai.bang14.com"],
        reg: /^https?:\/\/hentai\.bang14\.com\/[^\/]+\/$/,
        include: ".entry-content",
        imgs: ".entry-content img",
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: ".nav-previous a[rel=prev]",
        prev: ".nav-previous a[rel=next]",
        customTitle: "h1.entry-title",
        category: "hcomic"
    }, {
        name: "MANGA DISTRICT",
        host: ["mangadistrict.com"],
        reg: /^https?:\/\/mangadistrict\.com\/read-scan\/[\w-]+\/[\w-]+\/$/,
        imgs: ".reading-content img",
        button: [4],
        insertImg: [".reading-content", 2],
        autoDownload: [0],
        next: "a.next_page",
        prev: "a.prev_page",
        customTitle: "#chapter-heading",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "AllPornComic",
        host: ["allporncomic.com"],
        reg: /^https?:\/\/allporncomic\.com\/porncomic\/[^\/]+\/[^\/]+\/$/i,
        include: ".read-container",
        imgs: ".wp-manga-chapter-img",
        button: [4],
        insertImg: [".read-container", 2],
        autoDownload: [0],
        next: "a.next_page",
        prev: "a.prev_page",
        customTitle: "#chapter-heading",
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "Hachirumi.com",
        host: ["hachirumi.com"],
        reg: /^https?:\/\/hachirumi.com\/read\/manga\/[^\/]+\/.+/,
        init: async () => await fun.waitVar("Reader"),
        imgs: () => {
            const chapters = Object.values(_unsafeWindow.Reader.current.chapters);
            return chapters.map(e => Object.values(e.images)[0]).flat().map(url => fun.lo + url);
        },
        capture: () => _this.imgs(),
        customTitle: () => _unsafeWindow.Reader.current.title,
        category: "hcomic"
    }, {
        name: "7mmtvH漫畫貼圖",
        reg: () => fun.checkUrl({
            h: "7mmtv.sx",
            p: "hcomic",
            e: "//script[contains(text(),'Large_cgurl')]"
        }),
        imgs: () => {
            const {
                Large_cgurl
            } = _unsafeWindow;
            let arr = Large_cgurl.map(e => /imgur/.test(e) ? e : null).filter(item => item);
            return arr.length == 0 ? Large_cgurl : arr;
        },
        button: [4],
        insertImg: ["#show_cg_html", 2],
        insertImgAF: () => fun.remove("iframe"),
        customTitle: () => fun.dt({
            t: fun.title(" - 7mmtv.sx", 1)
        }),
        css: ".ut1_img_content_js,.ut_cg1_top{display:none!important}",
        category: "hcomic"
    }, {
        name: "18H",
        host: ["18h.mm-cg.com"],
        reg: /^https?:\/\/18h\.mm-cg\.com\/(zh\/?)\w+_content\/\d+\/content\.html$/i,
        imgs: () => _unsafeWindow.Large_cgurl,
        button: [4],
        insertImg: ["#show_cg_html", 2],
        customTitle: () => fun.title("-", 1),
        category: "hcomic"
    }, {
        name: "H 次元",
        host: ["h-ciyuan.com"],
        reg: /^https?:\/\/h-ciyuan\.com\/\d+\/\d+\/.+\//,
        include: "a[data-fancybox],.rl-gallery-container a",
        imgs: "a[data-fancybox],.rl-gallery-container a",
        thums: "a[data-fancybox] img,.rl-gallery-container a img",
        button: [4],
        //insertImg: [".entry-content", 2],
        insertImg: [
            [".entry-content,.rl-gallery-container", 2], 2
        ],
        go: 1,
        next: ".nav-previous>a",
        prev: ".nav-next>a",
        customTitle: ".post-title",
        category: "hcomic"
    }, {
        name: "淫漫画",
        host: ["www.yinmh.com", "www.yinmh.top", "www.yinmh.xyz"],
        reg: /^https?:\/\/www\.yinmh\.(com|top|xyz)\/\d+\.html$/,
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            return fun.fetchDoc(siteUrl).then(dom => fun.gae(".left>.image img.lazy", dom).map(e => e.getAttribute("img") ?? e.src));
        },
        button: [4],
        insertImg: [".left>.image", 2],
        customTitle: ".box>h1",
        category: "hcomic"
    }, {
        name: "漫畫車",
        host: ["www.manhuache.com", "m.manhuache.com"],
        reg: /^https?:\/\/(www|m)\.manhuache\.com\/chapter\/\d+/,
        init: async () => {
            let chapterName = fun.gt(".text-center.mt-3.mb-4");
            if (!/^第\d+話$/.test(chapterName)) {
                await fun.getNP("picture img", "//a[span[text()='下一章']][contains(@href,'chapter')]");
            }
        },
        imgs: "picture img",
        button: [4],
        insertImg: ["picture", 2],
        next: "//a[span[text()='下一章']][contains(@href,'chapter')]",
        prev: "//a[span[text()='上一章']]",
        customTitle: () => fun.title(/\s-\d+/).replace(/\(\d+P\)|第.章/gi, "").replace(/[\s-]+$/, "").trim(),
        category: "hcomic"
    }, {
        name: "漫畫聯合國",
        host: ["www.comicun.com"],
        reg: /^https?:\/\/www\.comicun\.com\/index-look(-cid)?-name-.+/,
        FixURL: url => {
            if (/index-look-cid-name-/.test(url)) {
                let arr = url.split("-");
                let str = "";
                for (let i = 0; i < arr.length; i++) {
                    if (i == 7) {
                        str += arr[i];
                    } else if (i == 5) {
                        str += "cid-" + arr[i] + "-";
                    } else if (i != 2) {
                        str += arr[i] + "-";
                    }
                }
                return decodeURIComponent(str);
            } else {
                return decodeURIComponent(url);
            }
        },
        init: () => {
            fun.run("$(document).unbind('click');");
            if (/index-look-cid-name-/.test(siteUrl)) location.href = _this.FixURL(siteUrl);
            fun.gae("//a[text()='下一章'] | //a[text()='上一章']").forEach(a => (a.href = _this.FixURL(a.href)));
        },
        imgs: (url = siteUrl, dom, msg = 1, request = 0) => fun.getImg("#ComicPic", fun.ge("#total", dom).value, 20, null, 20, url, msg, request),
        button: [4, "24%", 1],
        insertImg: [".e", 2],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: 1,
        customTitle: (dom) => {
            let arr = fun.gt(".b", 1, dom).split("-");
            return arr[2].trim() + " - " + arr[3].trim();
        },
        preloadNext: async (nextDoc, obj) => fun.picPreload(await obj.imgs(nextLink, nextDoc, 0, 1), obj.customTitle(nextDoc), "next"),
        css: "body{overflow:unset!important}.awesome970{display:none!important;}",
        category: "comic"
    }, {
        name: "丽图·污漫画",
        host: ["litu100.xyz"],
        reg: /^https?:\/\/litu\d+\.xyz\/comic\/id-\w+\/\d+\.html$/,
        imgs: ".article.comic img",
        button: [4],
        insertImg: [".article.comic", 2],
        autoDownload: [0],
        next: "a.next",
        prev: "a.prev",
        customTitle: () => fun.dt({
            s: ".breadcrumb span:nth-child(2)",
            d: "首页"
        }),
        css: ".banner_ad{display:none!important;}",
        category: "hcomic"
    }, {
        name: "漫小肆",
        host: ["www.mxsweb.cc"],
        reg: () => fun.checkUrl({
            h: [
                "www.jjmhw.cc",
                "www.ikanmh.xyz",
                "www.ikanhm.xyz",
                "www.92hm.life",
                /^www\.mxs\d{1,2}\.cc$/
            ],
            p: "chapter"
        }),
        init: () => fun.remove("//body/div[div[@id][@style][a]]|//body/div[div[@id][@style]][a[@id][@style]]"),
        imgs: "img[data-original]",
        button: [4],
        insertImg: [".comicpage,#cp_img", 2],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: "//a[text()='上一章']",
        customTitle: () => {
            if (fun.ge(".title")) {
                return fun.gt(".title");
            } else {
                return fun.ge("meta[name='Description']")?.content?.replace("当前阅读的是", "");
            }
        },
        referer: "src",
        category: "hcomic"
    }, {
        name: "Avbebe",
        host: ["avbebe.com"],
        link: "https://avbebe.com/archives/category/%e6%88%90%e4%ba%bah%e6%bc%ab%e7%95%ab",
        reg: /^https?:\/\/avbebe\.com\/archives\/\d+/,
        include: "//a[@rel='category tag' and text()='成人漫畫']",
        imgs: ".elementor-widget-container>p>img,.content-inner>p>img",
        button: [4],
        insertImg: [
            ["//p[img]", 2, "//p[img]"], 2
        ],
        customTitle: ".jeg_post_title",
        fancybox: {
            v: 3,
            css: false
        },
        category: "hcomic"
    }, {
        name: "ACG漫画网",
        host: ["acgmhx.com", "acgxmh.com", "acgsmh.com", "h-mangas.com", "porn-comic.com"],
        reg: () => fun.checkUrl({
            h: [
                /^(www\.)?acg[a-z]mh\.com$/,
                /^(www\.)?acgmh[a-z]\.com$/,
                /^(www\.)?h-mangas\.com$/,
                /^(www\.)?porn-comic\.com$/
            ],
            p: /^\/([\w-]+\/)?(h|hentai|cos|webtoon|western)\/\d+\.html$/
        }),
        //imgs: () => fun.getImg(".manga-page img,.main-picture img", fun.gt("#pages>*:last-child", 2), 5),
        imgs: async () => {
            await fun.getNP(".manga-page img,.main-picture img", "#pages span+a:not(.a1)", null, "#pages", 200);
            return fun.gae(".manga-page img,.main-picture img");
        },
        button: [4],
        insertImg: [".manga-page,.main-picture", 2],
        autoDownload: [0],
        next: ".next_pics>.fr>a[href$=html],.post-next a",
        prev: ".next_pics>.fl>a[href$=html],.post-pre a",
        customTitle: "h2.title,h1.title,.entry-header>h1",
        css: ".pre_picture,.next_picture,[class^=ad300],[class^=ad900]{display:none!important;}",
        category: "hcomic"
    }, {
        name: "ACG漫画网",
        host: ["www.acgnbus.com", "acgnbus.com"],
        reg: /^https?:\/\/(www\.)?acgnbus\.com\/\w+\/\d+\.html$/,
        include: ".main-picture",
        //imgs: () => fun.getImg(".main-picture img", fun.gt("//a[text()='下一页'][@class='a1']", 2), 5),
        imgs: async () => {
            await fun.getNP(".main-picture", "#pages span+a:not(.a1)", null, "#pages", 200);
            return fun.gae(".main-picture img");
        },
        button: [4],
        insertImg: [".entry-content", 2],
        next: ".post-next a",
        prev: ".post-pre a",
        customTitle: ".entry-header>h1",
        css: ".pre_picture,.next_picture,.tips,.adbox{display:none!important;}",
        category: "hcomic"
    }, {
        name: "天黑漫画",
        host: "tianhei-acg.com",
        reg: /^https?:\/\/tianhei-acg\.com\/[^\/]+\/$/,
        imgs: ".wp-posts-content img[data-src]",
        button: [4],
        insertImg: [".wp-posts-content", 2],
        autoDownload: [0],
        next: "//a[p[text()='上一篇']]",
        prev: "//a[p[text()='下一篇']]",
        customTitle: "h1.article-title",
        fancybox: {
            blacklist: 1
        },
        category: "nsfw1"
    }, {
        name: "NiceCat",
        host: "web.nicecat.cc",
        reg: /^https?:\/\/web\.nicecat\.cc\//,
        comicUid: () => document.URL.match(/\/id\.(.+)$/)[1],
        getHeaders: () => {
            let touristId = document.cookie.match(/tourist-id=([^;]+)/)[1];
            return {
                "n-application-type": "web",
                "tourist-id": touristId
            }
        },
        imgs: (msg = 1) => {
            if (/\/ComicDetailed\//.test(document.URL)) {
                fun.createImgBox("#recommend-info-body", 1);
                if (msg === 1) fun.showMsg(displayLanguage.str_05, 0);
                let formData = new FormData();
                formData.append("comicUid", _this.comicUid());
                formData.append("sort", "0");
                formData.append("dateKey", "iK+V3tWQvj/c6glSy76DKhDvuXwvRFf+ZtclSbNc+Dg=");
                return fetch("/api/ComicOrder/getComicOrder", {
                    "headers": _this.getHeaders(),
                    "body": formData,
                    "method": "POST"
                }).then(res => res.json()).then(json => json.data.imageData.map(e => e.imageUrl));
            } else {
                return [];
            }
        },
        SPA: () => document.URL.includes("/ComicDetailed/"),
        capture: () => _this.imgs(0),
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 3],
        customTitle: () => {
            if (/\/ComicDetailed\//.test(document.URL)) {
                let formData = new FormData();
                formData.append("uid", _this.comicUid());
                return fetch("/api/ComicInfo/info", {
                    "headers": _this.getHeaders(),
                    "body": formData,
                    "method": "POST"
                }).then(res => res.json()).then(json => json.data.comicData.name_two ?? json.data.comicData.name_one).then(str => str.replaceAll("/", "∕"));
            } else {
                return null;
            }
        },
        observerURL: true,
        category: "hcomic"
    }, {
        name: "紳士漫畫 圖片清單頁",
        link: "https://wnacg.date/，https://wnacg01.org/",
        reg: () => fun.checkUrl({
            h: [
                /^(www\.)?wnacg\.com$/,
                /^(www\.)?hentaicomic\.ru$/,
                /^(www\.)?hm\d{1,2}\.lol$/,
                /^(www\.)?wn\d{1,2}\.cc$/
            ],
            p: "/photos-index-aid-"
        }),
        init: async () => {
            fun.remove(".dlh,iframe:not(#FullPictureLoadIframe)");
            fun.remove("//body/div[a[img]] | //div[@class='Introduct']/a[div[img]] | //div[a[img[@alt='Game Tip']]]");
            fun.addMutationObserver(() => fun.remove(".dlh,iframe:not(#FullPictureLoadIframe)"));
        },
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let [galleryId] = fun.lp.match(/\d+/);
            let galleryUrl = `/photos-gallery-aid-${galleryId}.html`;
            return fetch(galleryUrl).then(res => res.text()).then(text => text.match(/\/\/[\w\.]+\/data\/[^"'\\]+/gi));
        },
        button: [4],
        insertImg: [
            [".gallary_wrap,.Introduct", 0, ".gallary_wrap>.cc"], 2
        ],
        customTitle: () => fun.dt({
            d: / - 紳士漫畫.*$| - 绅士漫画.*$|-紳士漫畫.*$|-绅士漫画.*$/
        }),
        category: "hcomic"
    }, {
        name: "紳士漫畫 下拉閱讀頁",
        reg: () => fun.checkUrl({
            h: [
                /^(www\.)?wnacg\.com$/,
                /^(www\.)?hentaicomic\.ru$/,
                /^(www\.)?hm\d{1,2}\.lol$/,
                /^(www\.)?wn\d{1,2}\.cc$/
            ],
            p: /^\/photos-(slide|slidelow|list|slist)-aid-\d+\.html$/
        }),
        imgs: () => _unsafeWindow.imglist.map(e => e.url),
        button: [4],
        insertImg: ["#img_list", 2],
        customTitle: () => fun.dt({
            d: " - 列表"
        }),
        css: "div[align=center],#control_block{display:none!important;}",
        category: "hcomic"
    }, {
        name: "紳夜漫畫",
        reg: () => fun.checkUrl({
            h: "syacomic",
            e: "//title[contains(text(),'紳夜漫畫')]"
        }),
        SPA: () => {
            if (document.URL.includes("/detail/")) {
                isFetching = true;
                let [id] = new URL(document.URL).pathname.match(/\d+/);
                return fetch(`https://api.nftbaoyi.com/comic/${id}`).then(res => res.json()).then(async json => {
                    siteJson = json;
                    debug("\n此頁JSON資料\n", siteJson);
                    await fun.waitEle(".grid img");
                    fun.createImgBox(".grid", 1);
                    isFetching = false;
                    return json;
                });
            } else {
                return false;
            }
        },
        observerURL: true,
        imgs: () => siteJson?.book_pages?.map(e => e.img_url) || [],
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".grid,a.justify-center,div:has(>a.block),div:has(>.custom-pagination)"], 2
        ],
        customTitle: () => fun.dt({
            t: siteJson?.name
        }),
        css: "body>ins{display:none!important;}",
        category: "hcomic"
    }, {
        name: "Comics",
        host: ["pixiv.app"],
        reg: /^https?:\/\/pixiv\.app\/[\w-]+\/comics\/\w+$/i,
        init: async () => await fun.waitEle("footer[class]"),
        SPA: () => document.URL.includes("/comics/"),
        observerURL: true,
        imgs: ".bg-slate-100 img,.shadow-md img",
        customTitle: "h1",
        category: "hcomic"
    }, {
        name: "头牌漫画网/顶点漫画/第一漫画网",
        link: "https://xs8.me/，https://mh8.in/",
        reg: () => fun.checkUrl({
            h: [
                /^(www\.)?x88du\.com$/,
                /^(www\.)?toupai8\.(com|top)$/,
                /^(www\.)?toupaimh\.(com|top)$/,
                /^(www\.)?81tsw\.com$/,
                /^(www\.)?81xxs\.com$/,
                /^(www\.)?mttoon\.com$/,
                /^(www\.)?biqu\.in$/,
                /^(www\.)?dybqg\.com$/,
                /^(www\.)?tpmhw\.com$/,
                /^(www\.)?toonmh\.com$/,
                /^(www\.)?dmmtu\.com$/,
                /^(www\.)?dmmpic\.com$/,
                /^(www\.)?dymmt\.com$/,
                /^(www\.)?kkmnt\.com$/,
                /^(www\.)?mmxzt\.com$/
            ],
            p: /^\/chapter\/\d+\.html$/
        }),
        init: async () => {
            await fun.getNP(".mip-box-body img", "//a[text()='下一页']", null, ".info");
            fun.createImgBox(".info", 2);
        },
        imgs: ".mip-box-body img",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".mip-box-body>img"], 2
        ],
        autoDownload: [0],
        next: "a[title='下一章']",
        prev: "a[title='上一章']",
        customTitle: ".mip-box-heading",
        fancybox: {
            blacklist: 1
        },
        css: "body>div[class][style]{display:none!important;}",
        category: "hcomic"
    }, {
        name: "VN漫画网 下拉阅读",
        host: ["www.vnacg.com"],
        reg: /^https?:\/\/(www|m)\.vnacg\.com\/show\/\d+\.html/,
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let api = `/e/extend/api/show.php?id=${_unsafeWindow.info.id}&page=`;
            let max = await fetch(`${api}1`).then(res => res.json()).then(res => res.pages);
            let fetchNum = 0;
            let resArr = fun.arr(max, (v, i) => fetch(`${api + (i + 1)}`).then(res => res.json()).then(json => {
                fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${max}`, 0);
                return json.data;
            }));
            return Promise.all(resArr).then(data => data.flat().map(e => e.src));
        },
        button: [4],
        insertImg: [".show,.read", 2],
        customTitle: () => fun.title("_免费阅读", 1),
        category: "hcomic"
    }, {
        name: "VN漫画网 清單頁",
        host: ["www.vnacg.com"],
        reg: /^https?:\/\/www\.vnacg\.com\/detail\/\d+\.html/,
        observerClick: ".layui-flow-more>a",
        category: "autoPager"
    }, {
        name: "TWHentai/台灣成人H漫/十八禁成人H漫 圖片清單頁",
        host: ["twhentai.com", "mttang.club", "hentai.desi"],
        reg: /^https?:\/\/(twhentai\.com|mttang\.club|(\w+\.)?hentai\.desi)\/\??(hentai_manga|hentai_doujin|hentai_western)\/\d+\/$/,
        imgs: async () => {
            await fun.getNP("//div[div[a[@class='thumbnail'][img]]]", ".pagination li.active+li:not(.disabled)>a", null, ".pagination");
            thumbnailSrcArray = fun.getImgSrcArr(".recommended img");
            return thumbnailSrcArray.map(e => e.replace("-thumb265x385", ""));
        },
        button: [4],
        insertImg: [
            [".footer", 1], 2
        ],
        go: 1,
        customTitle: () => {
            if (/twhentai|mttang/.test(fun.lh)) {
                return fun.gt(".recommended-info h3");
            } else {
                let h3s = fun.gae(".recommended-info h3");
                return h3s.length > 1 ? h3s[1].innerText : h3s[0].innerText;
            }
        },
        category: "hcomic"
    }, {
        name: "松鼠症倉庫 閱讀頁",
        host: ["ahri8.top"],
        reg: () => fun.checkUrl({
            e: "//div[@id='logo-group']//a[contains(text(),'松鼠症倉庫') or contains(text(),'松鼠症仓库')]",
            p: "readOnline"
        }),
        imgs: () => {
            const {
                Original_Image_List,
                HTTP_IMAGE
            } = _unsafeWindow;
            return Original_Image_List.map(e => HTTP_IMAGE + e.new_filename + "_w1500." + e.extension);
        },
        button: [4],
        insertImg: ["#Big_Image", 2],
        customTitle: () => fun.dt({
            s: ".page-header",
            d: "線上閱讀"
        }),
        css: "#content>.col-lg-12,[id^=read_online_ads_area],#Big_Image~*{display:none!important}",
        category: "hcomic"
    }, {
        name: "松鼠症倉庫 詳情頁",
        host: ["ahri8.top"],
        reg: () => fun.checkUrl({
            e: "//div[@id='logo-group']//a[contains(text(),'松鼠症倉庫') or contains(text(),'松鼠症仓库')]",
            p: "/post",
            s: "ID="
        }),
        init: () => {
            let e = fun.ge("//a[text()='預覽圖片']");
            e.innerText = "圖片";
        },
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let url = fun.gu("#more-information1 a:has(i.fa-book)");
            await fun.getCode(url, {
                mode: "dom",
                key: "Original_Image_List"
            });
            const {
                Original_Image_List,
                HTTP_IMAGE
            } = _unsafeWindow;
            return Original_Image_List.map(e => HTTP_IMAGE + e.new_filename + "_w1500." + e.extension);
        },
        button: [4],
        insertImg: ["#more-information1>div:has(img)", 2],
        category: "hcomic"
    }, {
        name: "Caitlin.top/Ahri Gallery分機 閱讀頁",
        host: ["caitlin.top", "ahri-gallery-xfjd-2024-04-25.top"],
        reg: () => fun.checkUrl({
            h: "caitlin.top",
            p: "index",
            s: "readOnline"
        }) || fun.checkUrl({
            e: "//a[text()='Ahri Gallery分機']",
            p: "index",
            s: "reader"
        }),
        imgs: () => {
            const {
                Image_List,
                IMAGE_SERVER,
                image_server_id,
                IMAGE_FOLDER
            } = _unsafeWindow;
            const getExtension = ext => {
                switch (ext) {
                    case "gif":
                        return "gif";
                    case "webp":
                        return "webp";
                    default:
                        return "jpg";
                }
            };
            let counter = 0;
            let max = Image_List.length;
            let srcArr = [];
            for (let i = 0; i < max; i++) {
                let ext = getExtension(Image_List[i].extension.toLowerCase());
                let src = IMAGE_SERVER[image_server_id][counter] + IMAGE_FOLDER + Image_List[i].sort + "." + ext;
                srcArr.push(src);
                counter += 1;
                if (counter >= Object.keys(IMAGE_SERVER[image_server_id]).length) {
                    counter = 0;
                }
            }
            return srcArr;
        },
        button: [4],
        insertImg: ["#Big_Image", 2],
        customTitle: ".page-header,.gallery_title",
        css: "#content>.col-lg-12,[id^=read_online_ads_area],#Big_Image~*{display:none!important}",
        category: "hcomic"
    }, {
        name: "Caitlin.top/Ahri Gallery分機 詳情頁",
        host: ["caitlin.top", "ahri-gallery-xfjd-2024-04-25.top"],
        reg: () => fun.checkUrl({
            h: "caitlin.top",
            p: "index",
            s: "article"
        }) || fun.checkUrl({
            e: "//a[text()='Ahri Gallery分機']",
            p: "index",
            s: "article"
        }),
        init: () => {
            if (fun.ge("//a[text()='Read']")) {
                fun.createImgBox(".container:has(.gallery_card)");
            } else {
                fun.createImgBox("#more-information1>div.row:has(img)", 2);
            }
            _unsafeWindow.onscroll = null;
        },
        imgs: async () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let url;
            if (fun.ge("//a[text()='Read']")) {
                url = fun.gu("//a[text()='Read']");
            } else {
                url = fun.gu("#more-information1 a:has(i.fa-book)");
            }
            await fun.getCode(url, {
                mode: "dom",
                key: "Image_List"
            });
            const {
                Image_List,
                IMAGE_SERVER,
                image_server_id,
                IMAGE_FOLDER
            } = _unsafeWindow;
            const getExtension = ext => {
                switch (ext) {
                    case "gif":
                        return "gif";
                    case "webp":
                        return "webp";
                    default:
                        return "jpg";
                }
            };
            let counter = 0;
            let max = Image_List.length;
            let srcArr = [];
            for (let i = 0; i < max; i++) {
                let ext = getExtension(Image_List[i].extension.toLowerCase());
                let src = IMAGE_SERVER[image_server_id][counter] + IMAGE_FOLDER + Image_List[i].sort + "." + ext;
                srcArr.push(src);
                counter += 1;
                if (counter >= Object.keys(IMAGE_SERVER[image_server_id]).length) {
                    counter = 0;
                }
            }
            return srcArr;
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#more-information1>div.row:has(img)"], 2
        ],
        customTitle: () => fun.getText([".row>.col-xs-12>h2", "div.name>h2", ".gallery_title", ".gallery_title2"]),
        category: "hcomic"
    }, {
        name: "蚂蚁搬运网/紳士泛漫畫",
        host: ["www.antbyw.com", "www.itsacg.com"],
        link: "https://hacg.antbyw.com/plugin.php?id=jameson_manhua",
        reg: () => !hasTouchEvents && /^https?:\/\/(www\.antbyw\.com|www\.itsacg\.com)\/plugin\.php\?id=\w+(&c=index)?&a=read&zjid=\d+$/.test(fun.url),
        imgs: ".uk-zjimg img",
        button: [4],
        insertImg: [".uk-zjimg", 2],
        autoDownload: [0],
        next: "//a[contains(text(),'下一章')]",
        prev: "//a[contains(text(),'上一章')]",
        customTitle: () => {
            let ct = fun.gt(".uk-breadcrumb>li:nth-child(4)");
            let nt = fun.gt(".uk-breadcrumb>li:nth-child(5)");
            if (ct.includes("｜")) {
                ct = ct.split("｜")[0].trim();
            }
            ct = ct.replace(/【.+】/g, "").trim();
            if (nt === "阅读浏览") {
                return ct;
            } else {
                return ct + " - " + nt;
            }
        },
        category: "comic"
    }, {
        name: "蚂蚁搬运网M/紳士泛漫畫M",
        host: ["www.antbyw.com", "www.itsacg.com"],
        link: "https://hacg.antbyw.com/plugin.php?id=jameson_manhua",
        reg: () => hasTouchEvents && /^https?:\/\/(www\.antbyw\.com|www\.itsacg\.com)\/plugin\.php\?id=\w+(&c=index)?&a=read&zjid=\d+$/.test(fun.url),
        imgs: ".zjimg>img",
        button: [4],
        insertImg: [
            [".zjimg", 1, ".zjimg"], 2
        ],
        customTitle: () => fun.dt({
            t: fun.title("_", 3),
            d: [
                /【.+】/g,
                "_阅读浏览"
            ]
        }),
        category: "comic"
    }, {
        name: "ACG糖",
        host: ["acgotang.com"],
        reg: () => fun.checkUrl({
            e: "//div[@class='content']//a[text()='ACG糖']",
            p: /^\/\w+\/\w+\.html$/
        }),
        imgs: () => {
            let max = fun.gt("//a[text()='下一页']", 2);
            return fun.getImg(".manga-picture img", max, 5);
        },
        button: [4],
        insertImg: [".manga-page", 2],
        autoDownload: [0],
        next: ".next-toon a",
        prev: ".pre-toon a",
        customTitle: ".title",
        category: "hcomic"
    }, {
        name: "Roku Hentai",
        host: ["rokuhentai.com"],
        reg: /^https?:\/\/rokuhentai\.com\/\w+$/,
        include: ".site-page-card__media",
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let url = fun.url + "/0";
            return fun.fetchDoc(url).then(dom => fun.getImgSrcArr(".site-reader__image", dom));
        },
        button: [4],
        insertImg: [
            [".site-manga-info+.mdc-layout-grid", 2], 2
        ],
        go: 1,
        customTitle: () => fun.title(" - Roku Hentai"),
        css: ".site-bottom-ad-slot{display:none!important}",
        fetch: 1,
        category: "hcomic"
    }, {
        name: "Roku Hentai",
        host: ["rokuhentai.com"],
        reg: /^https?:\/\/rokuhentai\.com\/\w+\/\d+$/,
        imgs: ".site-reader__image",
        button: [4],
        insertImg: [".site-reader", 2],
        css: ".site-reader--right-to-left,.site-reader--left-to-right{overflow-x:auto!important;overflow-y:auto!important}.site-reader{padding-bottom:0px!important}.site-reader{display:block!important;}.site-bottom-ad-slot{display:none!important}",
        fetch: 1,
        category: "hcomic"
    }, {
        name: "177 漫画/XXIAV寫真館",
        reg: () => fun.checkUrl({
            h: [
                "www.177pica.com",
                "www.177picyy.com",
                "www.xxiav.com"
            ],
            p: /^\/html\/\d+\/\d+\/\d+\.html$/
        }),
        imgs: () => fun.getImg(".single-content img[data-lazy-src]", (fun.gt(".page-links>*:last-child", 2) || 1), 10),
        button: [4],
        insertImg: [".single-content", 2],
        autoDownload: [0],
        next: "a[rel=prev]",
        prev: 1,
        customTitle: ".entry-title",
        category: "hcomic"
    }, {
        name: "18H 宅宅愛動漫",
        host: ["18h.animezilla.com"],
        reg: /^https?:\/\/18h\.animezilla\.com\/manga\/\d+/,
        imgs: () => {
            let max;
            try {
                max = fun.gu(".last").split("/").at(-1);
            } catch {
                max = 1;
            }
            return fun.getImgO("#comic", max, "4", null, 0, ".entry-title,.wp-pagenavi", siteUrl, 0);
        },
        button: [4],
        insertImg: ["#page-current", 1],
        customTitle: () => fun.dt({
            s: "h1.entry-title",
            d: /\s?\[\d+P\](\s?-\s?\d+\/\d+\s?)?/i
        }),
        category: "hcomic"
    }, {
        name: "色漫网",
        reg: () => fun.checkUrl({
            h: "www.cartoon18.com",
            p: "/v/",
            e: ".title+div>a>i.fa-play"
        }),
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let url = fun.gu(".title+div>a");
            return fun.fetchDoc(url).then(dom => fun.ge("img[data-src]", dom) ? fun.gae("img[data-src]", dom) : fun.gae("#lightgallery a,.gallary a", dom));
        },
        button: [4],
        insertImg: ["//div[a[img]]", 2],
        insertImgAF: () => {
            fun.ge("#FullPictureLoadOptionsButtonParentDiv").parentNode.className = "";
            let modalOpen = fun.ge(".modal-open");
            if (modalOpen) modalOpen.classList.remove("modal-open");
        },
        fancybox: {
            v: 3,
            css: false
        },
        css: "#chromeModal,.modal-backdrop{display:none!important;}",
        category: "hcomic"
    }, {
        name: "色漫网",
        host: ["www.cartoon18.com"],
        reg: /^https?:\/\/www\.cartoon18\.com\/([\w-]+\/)?story\/\d+\/full/,
        imgs: () => fun.ge("img[data-src]") ? fun.gae("img[data-src]") : fun.gae("#lightgallery a,.gallary a"),
        button: [4],
        insertImg: ["#lightgallery,.gallary", 2],
        fancybox: {
            v: 3,
            css: false
        },
        category: "hcomic"
    }, {
        name: "凹凸漫/X漫/肉漫天堂 閱讀頁",
        host: ["atm333.com", "xman5.com", "rmtt6.com"],
        reg: () => fun.checkUrl({
            h: /atm|xman|rmtt/,
            p: "read/",
            e: [
                "center>h1",
                "center>h2"
            ]
        }),
        init: () => fun.clearAllTimer(),
        imgs: "img.lazyload[data-original]",
        button: [4],
        insertImg: ["center:has(>div>img.lazyload[data-original])", 2],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: "//a[text()='上一章']",
        customTitle: () => fun.gt("center>h1") + " - " + fun.gt("center>h2"),
        category: "hcomic"
    }, {
        name: "凹凸漫/X漫/肉漫天堂 目錄頁",
        host: ["atm333.com", "xman5.com", "rmtt6.com"],
        reg: () => fun.checkUrl({
            h: /atm|xman|rmtt/,
            p: "detail/",
            e: [
                ".hot_banner",
                ".playlist_full"
            ]
        }),
        init: () => {
            fun.clearAllTimer();
            if ("showlist" in _unsafeWindow) {
                _unsafeWindow.showlist();
            }
            fun.createImgBox(".hot_banner", 2);
        },
        imgs: () => {
            let links = fun.gau(".playlist_full .content_playlist a");
            return fun.getImgA("img.lazyload[data-original]", links);
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 3],
        customTitle: "h1.title",
        category: "hcomic"
    }, {
        name: "韓漫射/绅士同人H漫",
        reg: () => fun.checkUrl({
            h: [
                "h-webtoon.com",
                "h-doujinshi.xyz"
            ]
        }),
        init: "setTimeout(()=>{fun.gae('.g1-nav-single a').forEach(e=>{e.removeAttribute('target')})},2000)",
        imgs: ".g1-content-narrow p img",
        button: [4],
        insertImg: [".g1-content-narrow", 2],
        autoDownload: [0],
        next: "#content .g1-teaser-next",
        prev: "#content .g1-teaser-prev",
        customTitle: "h1.entry-title",
        css: "#simple-banner,.touchy-wrapper,.touchy-wrapper~*:not([id^='pv-'],[class^='pv-'],[id^='pagetual'],[class^='pagetual'],#comicRead,#fab,[id^='FullPictureLoad'],[class^='FullPictureLoad'],*[class^=fancybox]),.code-block,#secondary{display:none!important}",
        category: "hcomic"
    }, {
        name: "18H漫画",
        host: ["18hmanga.com", "18hmanga.cyou"],
        reg: /^https?:\/\/(18hmanga\.(com|cyou))\/[^\/]+\/$/,
        init: () => fun.remove(".code-block,#secondary,body>div[id][class][style]"),
        imgs: ".entry-content>img,.entry-content>p>img,.entry-content>div>img",
        button: [4],
        insertImg: [".entry-content", 2],
        autoDownload: [0],
        next: "#content .g1-teaser-prev",
        prev: "#content .g1-teaser-next",
        customTitle: ".entry-title",
        css: ".g1-column-2of3{width:100%!important}",
        category: "hcomic"
    }, {
        name: "18H漫画",
        reg: () => fun.checkUrl({
            h: "18hmanga",
            e: "//a[contains(text(),'Read More')]"
        }),
        init: () => fun.remove("body>div[id][class][style]"),
        imgs: () => {
            fun.showMsg(displayLanguage.str_01, 0);
            let fetchNum = 0;
            let resArr = fun.gau("//a[contains(text(),'Read More')]").map((url, i, arr) => {
                return fun.fetchDoc(url).then(dom => {
                    fun.showMsg(`${displayLanguage.str_02}${fetchNum+=1}/${arr.length}`, 0);
                    return fun.gae(".entry-content>img,.entry-content>p>img,.entry-content>div>img", dom);
                });
            })
            return Promise.all(resArr).then(arr => arr.flat());
        },
        button: [4],
        insertImg: [
            ["#primary", 0], 2
        ],
        go: 1,
        customTitle: ".g1-breadcrumbs-item>span[itemprop=name]",
        category: "hcomic"
    }, {
        name: "老司機禁漫 目錄頁",
        host: ["laosiji6.com", "laosiji52.com"],
        reg: () => fun.checkUrl({
            h: "laosiji",
            p: /^\/comic\/\d+$/i
        }),
        init: () => fun.createImgBox(".detail", 2),
        imgs: () => {
            let links = fun.gau(".vol-item a").reverse();
            return fun.getImgA("img.lazy", links);
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0], 3
        ],
        customTitle: ".detail h1",
        category: "hcomic"
    }, {
        name: "老司機禁漫 閱讀頁",
        host: ["laosiji6.com", "laosiji52.com"],
        reg: () => fun.checkUrl({
            h: "laosiji",
            p: /^\/comic\/\d+\/\w+$/i
        }),
        init: () => fun.createImgBox("img.lazy", 1),
        imgs: "img.lazy",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "img.lazy"], 2
        ],
        insertImgAF: () => {
            if (nextLink && !fun.ge("//a[text()='章節目錄']")) {
                fun.addUrlHtml(nextLink, ".container-fluid", 2);
                fun.css(".positionFooter{display:none!important;}");
            }
        },
        autoDownload: [0],
        next: () => {
            let chapterId = fun.lp.split("/").at(-1);
            let comicUrl = fun.gu(".breadcrumb-item:nth-child(2)>a");
            let nextXPath = `//div[div[div[label[span[a[contains(@href,'${chapterId}')]]]]]]/preceding-sibling::div[1]//a`;
            return fun.fetchDoc(comicUrl).then(dom => {
                let next = fun.ge(nextXPath, dom, dom);
                return next ? next.href : null;
            });
        },
        prev: 1,
        customTitle: () => fun.gt(".breadcrumb-item:nth-child(2) a").trim() + " - " + fun.gt(".breadcrumb-item.active").trim(),
        category: "hcomic"
    }, {
        name: "18漫畫",
        host: ["18mh.org"],
        reg: [
            /^https?:\/\/badynews\.com\/[^\/]+$/i,
            /^https?:\/\/18mh\.org\/manga\/[\w-]+\/[\d-]+/
        ],
        init: async () => {
            await fun.waitEle(".touch-manipulation img");
            fun.remove(".flex.flex-row.space-x-2.px-2.py-4");
        },
        imgs: ".touch-manipulation img",
        button: [4],
        insertImg: [".touch-manipulation", 2],
        autoDownload: [0],
        next: "#nextChapterLink",
        prev: "#preChapterLink",
        customTitle: () => fun.gt("ol.inline-flex>li:nth-child(2) a").trim() + " - " + fun.gt("ol.inline-flex>li:nth-child(3) a").trim(),
        category: "hcomic"
    }, {
        name: "Hitomi.la",
        host: ["hitomi.la"],
        reg: /^https?:\/\/hitomi\.la\/reader\/\d+\.html/,
        init: "setTimeout(()=>{$(document).unbind('keydown');$(document).unbind('click')},1000)",
        imgs: async () => {
            await fun.waitEle("#mobileImages .lillie", 11);
            const {
                galleryinfo,
                url_from_url_from_hash,
                our_galleryinfo
            } = _unsafeWindow;
            fun.ge("#comicImages").setAttribute("class", "fitVertical");
            fun.ge("#mobileImages").setAttribute("class", "hidden");
            if (options.fancybox == 1) {
                fun.showMsg("Get Thumbnailsing...");
                let url = fun.gu("//a[text()='Gallery Info']");
                let dom = await fun.iframeDoc(url, ".gallery-preview img");
                thumbnailSrcArray = fun.gae(".gallery-preview img", dom).map(e => e.dataset.src ?? e.src);
            }
            return galleryinfo.files.map((e, i) => url_from_url_from_hash(galleryinfo.id, our_galleryinfo[i], "webp", undefined, "a"));
        },
        button: [4],
        insertImg: ["#comicImages", 2],
        customTitle: () => fun.title("|", 1),
        css: "body{overflow:unset!important}#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "hcomic"
    }, {
        name: "HO5HO",
        host: ["www.ho5ho.com"],
        reg: /^https?:\/\/www\.ho5ho\.com\/.+\/.+\/server.+\//,
        include: "//script[contains(text(),'chapter_preloaded_images')]",
        imgs: () => _unsafeWindow.chapter_preloaded_images,
        button: [4],
        insertImg: [".entry-content", 2],
        customTitle: ".breadcrumb>li:nth-child(2)",
        category: "hcomic"
    }, {
        name: "成人漫画 圖片清單頁",
        host: ["bad.news"],
        link: "https://bad.news/mh",
        reg: /^https?:\/\/bad\.news\/mh\/\w+\/id-\d+$/,
        imgs: () => {
            let link = [fun.gu("a.post-thumb")];
            return fun.getImgA("img.img-responsive", link);
        },
        thums: "img.img-responsive",
        button: [4],
        insertImg: [
            ["//div[div[article[div[div[a[img[@class='img-responsive']]]]]]]", 2], 2
        ],
        go: 1,
        category: "hcomic"
    }, {
        name: "成人漫画 閱讀頁",
        host: ["bad.news"],
        link: "https://bad.news/mh",
        reg: /^https?:\/\/bad\.news\/mh\/view\/id-\d+/,
        imgs: ".img-responsive",
        button: [4],
        insertImg: ["//div[img[@class='img-responsive']]", 2],
        category: "hcomic"
    }, {
        name: "H漫画",
        host: ["a.123548.xyz"],
        reg: () => fun.checkUrl({
            e: "//div[@class='logo']/a[text()='H漫画']",
            p: "/e/action/ShowInfo.php"
        }),
        imgs: ".entry img",
        button: [4],
        insertImg: [".entry", 1],
        autoDownload: [0],
        next: "//p[contains(text(),'上一')]/a",
        prev: "//p[contains(text(),'下一')]/a",
        customTitle: ".contitle",
        category: "hcomic"
    }, {
        name: "JComic",
        host: ["jcomic.net"],
        reg: /^https?:\/\/jcomic\.net\/page\/[^\/]+$/,
        imgs: ".comic-view,.comic-thumb",
        button: [4],
        insertImg: ["//div[img[@class='img-responsive comic-thumb']]", 2],
        customTitle: "//ol/li[2]/a",
        category: "hcomic"
    }, {
        name: "JComic",
        host: ["jcomic.net"],
        reg: /^https?:\/\/jcomic\.net\/page\/[^\/]+\/[0-9\.]+$/,
        imgs: ".comic-view,.comic-thumb",
        button: [4],
        insertImg: ["//div[img[@class='img-responsive comic-thumb']]", 2],
        autoDownload: [0],
        next: () => {
            let next = fun.ge("//a[button[text()='下一章']]");
            return next && next.href != siteUrl ? next.href : null;
        },
        prev: 1,
        customTitle: () => fun.gt("//ol/li[2]/a") + " - " + fun.gt("//ol/li[3]"),
        category: "hcomic"
    }, {
        name: "一之涩漫画/哈塔兹漫画/布罗塔漫画/物二漫画",
        host: [
            "1zse.com",
            "hatazi.com",
            "www.bulota.com",
            "522160.xyz"
        ],
        reg: /^https?:\/\/(1zse\.com|hatazi\.com|www\.bulota\.com|52216\d\.xyz)\/index\.php\/\d+\.html/,
        init: () => {
            fun.addMutationObserver(() => fun.remove("#eruda,.__chobitsu-hide__,#lightboxOverlay,#lightbox"));
            fun.clearAllTimer();
        },
        imgs: () => fun.getImg(".context img", fun.gt(".pages").match(/\d+/g)[1], 7),
        button: [4],
        insertImg: [".context", 2],
        autoDownload: [0],
        next: ".post-previous a",
        prev: ".post-next a",
        customTitle: () => fun.dt({
            s: "#content h1",
            d: /\[\d+P\]|〈|〉/gi
        }),
        css: "body>*:not(#head,.container,#footer,#tbox,[id^='pv-'],[class^='pv-'],#comicRead,#fab,#FullPictureLoadOptions,#FullPictureLoadFixedMenu,.FullPictureLoadFixedBtn,.FullPictureLoadMsg,*[class^=fancybox]){display:none!important;}",
        category: "hcomic"
    }, {
        name: "那露漫画",
        host: ["naluhd.com"],
        reg: /^https?:\/\/naluhd\.com\/index\.php\/\d+\.html/,
        imgs: () => fun.getImgA(".article-content img", "a.post-page-numbers"),
        button: [4],
        insertImg: [".article-content", 2],
        autoDownload: [0],
        next: "//a[p[text()='上一篇'] and not(starts-with(@href,'java'))]",
        prev: "//a[p[text()='下一篇'] and not(starts-with(@href,'java'))]",
        customTitle: ".article-title>a",
        category: "hcomic"
    }, {
        name: "色色漫画/最新韩漫网",
        host: ["www.sesemanhua.com", "www.manhuazuixin.com"],
        reg: [
            /^https:\/\/www\.sesemanhua\.com\/index\.php\/chapter\/\d+/,
            /^https?:\/\/www\.manhuazuixin\.com\/chapter_\d+\.html/
        ],
        include: ".rd-article-wr,.comic-list",
        imgs: ".rd-article-wr img,.comic-list img",
        button: [4],
        insertImg: [".rd-article-wr,.comic-list", 2],
        autoDownload: [0],
        next: ".j-rd-next,.next-btn",
        prev: ".j-rd-prev,.prev-btn",
        customTitle: ".comic-title>a,.comic-name,.mip-shell-header-title",
        category: "hcomic"
    }, {
        name: "韩漫天下",
        host: ["manhuatianxia.com", "www.manhuatianxia.com"],
        reg: /^https?:\/\/(www\.)?manhuatianxia\.com\/index\.php\/chapter\/\d+$/,
        imgs: "#manga-imgs img,#BookText img",
        button: [4],
        insertImg: ["#manga-imgs,#BookText", 2],
        autoDownload: [0],
        next: "//a[text()='下一话' or text()='下一章'][starts-with(@href,'/')]",
        prev: "//a[text()='上一话' or text()='上一章'][starts-with(@href,'/')]",
        customTitle: () => fun.dt({
            d: "韩漫 "
        }),
        category: "hcomic"
    }, {
        name: "韩漫在线",
        host: ["hanmanzx.com", "www.hanmanzx.com"],
        reg: /^https?:\/\/(www\.)?hanmanzx\.com\/index\.php\/chapter-\d+\.html$/,
        imgs: ".content_read #content img,.chapter_content img",
        button: [4],
        insertImg: [".content_read #content,.chapter_content", 2],
        autoDownload: [0],
        next: "//a[text()='下一章'][starts-with(@href,'/')] | //a[div[span[contains(text(),'下一篇')]]][starts-with(@href,'/')]",
        prev: "//a[text()='上一章'][starts-with(@href,'/')] | //a[div[span[contains(text(),'上一篇')]]][starts-with(@href,'/')]",
        customTitle: () => fun.dt({
            d: "在线观看 "
        }),
        category: "hcomic"
    }, {
        name: "九妖漫画",
        host: ["lifantt.com", "9yaomh.cc"],
        reg: () => fun.checkUrl({
            e: "//title[contains(text(),'九妖漫画网')]",
            p: "/chapter/"
        }),
        imgs: ".rd-article-wr img,.comic-list img",
        button: [4],
        insertImg: [".rd-article-wr,.comic-list", 2],
        autoDownload: [0],
        next: ".j-rd-next,.next-btn",
        prev: ".j-rd-prev,.prev-btn",
        customTitle: () => fun.title(" - 九妖漫画网"),
        css: "[class^=ad],.m-hm-ad1,p.result{display:none!important;}",
        category: "hcomic"
    }, {
        name: "韩漫库/欲漫涩/腐漫屋/快看禁漫",
        host: ["se8.us", "yumanse.com", "fumanwu.org", "kkcomic.vip"],
        reg: [
            /^https?:\/\/se8\.us\/index\.php\/chapter\/\d+/,
            /^https?:\/\/(www\.)?yumanse\.com\/chapter\/\d+/,
            /^https?:\/\/(www\.)?fumanwu\.org\/chapter\/\d+/,
            /^https?:\/\/(www\.)?kkcomic\.vip\/chapter\/\d+/
        ],
        imgs: ".rd-article-wr img,.comic-list img,.episode-detail img",
        button: [4],
        insertImg: [".rd-article-wr,.comic-list,.episode-detail", 1],
        autoDownload: [0],
        next: ".j-rd-next,.next-btn,a.next[href^='/']",
        prev: ".j-rd-prev,.prev-btn,a.prev[href^='/']",
        customTitle: async () => {
            if (fun.ge(".rd-article-wr")) {
                return fun.gt(".read__crumb").replace("首页  ", "").replace("  ", " - ");
            } else {
                try {
                    return _unsafeWindow.shareArr[0].match(/《([^》]+)/)[1] + " - " + fun.gt(".comic-name");
                } catch {
                    let url = fun.gu("//a[contains(text(),'全集')]");
                    let comicName = await fun.fetchDoc(url).then(dom => fun.gt("h1.title", 1, dom));
                    return comicName + " - " + fun.gt(".center-title");
                }
            }
        },
        css: "body>ins,div[id^='show']{display:none!important;}",
        category: "hcomic"
    }, {
        name: "日漫之家",
        host: ["rimanzhijia.com"],
        reg: /^https?:\/\/rimanzhijia\.com\/index\.php\/chapter\/\d+/,
        imgs: "#comic_pic",
        button: [4],
        insertImg: [
            ["#comic_pic", 2, "#comic_pic"], 2
        ],
        autoDownload: [0],
        next: "//a[contains(text(),'下一章')][starts-with(@href,'/')]",
        prev: "//a[contains(text(),'上一章')][starts-with(@href,'/')]",
        customTitle: () => fun.gt(".bo_tit").replace(">", "-"),
        css: "img[src*='/ad/']{display:none!important;}.bo_nav{width:97%!important;padding:10px!important}",
        category: "hcomic"
    }, {
        name: "最新韩漫网M",
        host: ["www.zuixinhanman.com", "www.xinhanman.com"],
        reg: /^https?:\/\/www\.(zui)?xinhanman\.com\/chapter_\d+\.html/,
        delay: 300,
        imgs: "#comic_pic",
        button: [4],
        insertImg: [
            [".bo_tit", 2, "#comic_pic"], 2,
        ],
        autoDownload: [0],
        next: "//a[contains(text(),'下一章')][contains(@href,'html')]",
        prev: "//a[contains(text(),'上一章')][contains(@href,'html')]",
        customTitle: ".mip-shell-header-title",
        fancybox: {
            blacklist: 1
        },
        category: "hcomic"
    }, {
        name: "韩漫100",
        host: ["hanman100.com"],
        reg: /^https?:\/\/hanman100\.com\/index\.php\/chapter-\d+\.html/,
        init: () => fun.createImgBox("#all", 2),
        imgs: "#img-content img,.comic-list img",
        button: [4, "24%", 4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#all"], 2
        ],
        autoDownload: [0],
        next: ".pnext.next+a[href$=html],.next-btn",
        prev: 1,
        customTitle: () => fun.dt({
            s: "h1.text-center,.comic-name",
            d: "漫画 "
        }),
        css: "#left,#right{display:none!important;}",
        category: "hcomic"
    }, {
        name: "免费韩漫看",
        host: ["www.hanmanm.com"],
        reg: /^https?:\/\/www\.hanmanm(\w+)?\.com\/index\.php\/chapter\/\d+/,
        imgs: "#ChapterContent img,.readForm img",
        button: [4],
        insertImg: ["#ChapterContent,.readForm", 2],
        autoDownload: [0],
        next: "//a[text()='下一章'][starts-with(@href,'/')]",
        prev: "//a[text()='上一章'][starts-with(@href,'/')]",
        customTitle: () => fun.ge("#ChapterContent") ? fun.gt(".arthor") + " - " + fun.gt(".title") : fun.title("免费观看 "),
        category: "hcomic"
    }, {
        name: "韩漫推荐",
        host: ["www.hanmantop.com"],
        reg: /^https?:\/\/www\.hanman(\w+)?\.com\/index\.php\/chapter\/\d+/,
        include: "//div/div[@style]/img[@style]",
        imgs: "//div/div[@style]/img[@style]",
        button: [4],
        insertImg: ["//div[div[@style]/img[@style]]", 2],
        autoDownload: [0],
        next: "//a[text()='下一章'][starts-with(@href,'/')]",
        prev: "//a[text()='上一章'][starts-with(@href,'/')]",
        customTitle: "h1[style]",
        category: "hcomic"
    }, {
        name: "韩漫推荐M",
        host: ["www.hanmantop.com"],
        reg: /^https?:\/\/www\.hanman(\w+)?\.com\/index\.php\/chapter\/\d+/,
        imgs: ".chapterbox img",
        button: [4],
        insertImg: [
            [".chapterbox>*:first-child", 1, ".pic"], 2
        ],
        autoDownload: [0],
        next: "//a[text()='继续阅读下一章节']",
        prev: 1,
        customTitle: () => fun.title("韩漫 "),
        category: "hcomic"
    }, {
        name: "51漫画/爱漫画",
        host: ["51comic.org", "aicomic.org"],
        reg: [
            /^https?:\/\/aicomic\.org\/index\.php\/chapter\/\d+/,
            /^https?:\/\/51comic\.org\/chapter\/\d+/
        ],
        init: () => fun.addMutationObserver(() => fun.remove("//div[div[text()='x']]")),
        imgs: () => fun.ge(".rd-article-wr") ? fun.gae(".rd-article-wr img") : fun.gae(".comic-list img:not([src$='empty.png'])"),
        button: [4],
        insertImg: [".rd-article-wr,.comic-list", 1],
        autoDownload: [0],
        next: ".j-rd-next:not([style]):not(.hide),.next-btn",
        prev: ".j-rd-prev,.prev-btn",
        customTitle: () => fun.ge(".rd-article-wr") ? fun.gt(".j-comic-title") + " - " + fun.gt(".comic-title>a").replace(/\d+p/i, "") : _unsafeWindow.shareArr[0].match(/《([^》]+)/)[1] + " - " + fun.gt(".comic-name").replace(/\d+p/i, ""),
        css: ".image-container{display:none!important;}",
        category: "hcomic"
    }, {
        name: "特漫网",
        host: ["www.44te.com"],
        reg: /^https?:\/\/www\.44te\.com\/chapter\/\d+$/,
        imgs: ".comicpage img:not([src*='/banner/']),#cp_img img:not([src*='/banner/'])",
        button: [4],
        insertImg: [".comicpage,#cp_img", 2],
        autoDownload: [0],
        next: "//a[@href and not(starts-with(@href,'java')) and text()='下一章']",
        prev: "//a[@href and not(starts-with(@href,'java')) and text()='上一章']",
        customTitle: () => fun.title(/无删减/, 1),
        css: "body>div[style^=background],[id^=ad]{display:none!important;}",
        category: "hcomic"
    }, {
        name: "一耽女孩",
        host: ["yidan.in", "yidan.one", "yidan.app"],
        reg: /^https?:\/\/yidan\.(in|one|app)\/#\/pages\/read\/read\?no=\d+&id=\d+(&episodesId=\d+)?/,
        init: async () => {
            await fun.waitEle(".read-article img");
            await fun.waitEle("uni-view.last-bum");
            fun.ge("uni-view.last-bum").addEventListener("click", () => setTimeout(() => location.reload(), 300));
            fun.showMsg(displayLanguage.str_05, 0);
            let [, no, mhid] = fun.url.match(/no=(\d+)&id=(\d+)/);
            let api = `/prod-api/app-api/vv/mh-episodes/get?jiNo=${no}&mhid=${mhid}&id=`;
            let fetchJson = await fetch(api).then(res => res.json());
            debug("\n此頁JSON資料\n", fetchJson);
            siteJson = fetchJson;
        },
        imgs: () => siteJson.data.pics.split(",").map(e => fun.lo + e),
        button: [4],
        insertImg: [".read-article", 2],
        autoDownload: [0],
        next: () => {
            let next = fun.ge("//a[text()='继续看下一话']");
            if (next) {
                let [, mhid] = fun.url.match(/&id=(\d+)/);
                let url = `https://${fun.lh}/#/pages/read/read?no=${siteJson.data.next}&id=${mhid}`;
                return url;
            }
            return null;
        },
        prev: 1,
        customTitle: () => fun.title(" - 一耽女孩_好看的一耽漫画官网").trim(),
        css: ".page-pagination{display:none!important}",
        category: "hcomic"
    }, {
        name: "91禁漫",
        host: ["www.91jinman.com"],
        reg: /^https?:\/\/www\.91jinman\.com\/\d+\.html/,
        imgs: ".wp-posts-content img",
        button: [4],
        insertImg: [".wp-posts-content", 2],
        autoDownload: [0],
        next: "//a[p[text()='上一篇']]",
        prev: "//a[p[text()='下一篇']]",
        customTitle: ".article-title",
        css: ".wp-posts-content{max-height:unset!important}",
        category: "hcomic"
    }, {
        name: "鸟鸟韩漫 閱讀頁",
        host: ["nnhanman6.com"],
        reg: () => fun.checkUrl({
            h: "nnhanman",
            p: "chapter",
            e: ".BarTit>h1"
        }),
        imgs: "img[data-original]",
        button: [4],
        insertImg: ["//td[img] | //div[@class='view-imgBox']", 2],
        autoDownload: [0],
        next: "#k_Pic_nextArr",
        prev: 1,
        customTitle: () => fun.gt(".BarTit>h1").replace(" - 第1章", ""),
        category: "hcomic"
    }, {
        name: "鸟鸟韩漫 目錄頁",
        host: ["nnhanman6.com"],
        reg: () => fun.checkUrl({
            h: "nnhanman",
            p: "/comic/",
            e: ".Introduct_Sub"
        }),
        init: () => fun.createImgBox(".txtDesc", 2),
        imgs: () => {
            let links = fun.gau("#list a").reverse();
            return fun.getImgA("img[data-original]", links);
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 3],
        customTitle: ".Introduct_Sub h1",
        category: "hcomic"
    }, {
        name: "松鼠韓漫 閱讀頁",
        host: ["www.songshuhanman.com"],
        reg: () => fun.checkUrl({
            h: "songshuhanman",
            p: "/ch/"
        }),
        imgs: ".more-box img",
        button: [4],
        insertImg: [".more-box", 2],
        autoDownload: [0],
        next: "//a[text()='下一章'][starts-with(@href,'/ch/')]",
        prev: "//a[text()='上一章'][starts-with(@href,'/ch/')]",
        customTitle: "h1",
        category: "hcomic"
    }, {
        name: "松鼠韓漫 目錄頁",
        host: ["www.songshuhanman.com"],
        reg: () => fun.checkUrl({
            h: "songshuhanman",
            p: "/com/"
        }),
        init: () => fun.createImgBox(".contpost2.gap", 2),
        imgs: () => {
            let links = fun.gau(".playlist a");
            return fun.getImgA(".more-box img", links);
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 3],
        customTitle: "article h1",
        category: "hcomic"
    }, {
        name: "野貓韓漫 閱讀頁",
        reg: () => fun.checkUrl({
            e: ".logo img[alt^=野貓韓漫]",
            p: "/read/"
        }),
        imgs: ".module img",
        button: [4],
        insertImg: [".module", 2],
        autoDownload: [0],
        next: "//a[text()='下一章'][starts-with(@href,'/read/')]",
        prev: "//a[text()='上一章'][starts-with(@href,'/read/')]",
        customTitle: () => {
            let text = fun.attr("meta[name=keywords]", "content");
            let textArr = text.split(",").map(t => t.trim());
            let [, comicName, chapterName] = textArr;
            return comicName + " - " + chapterName;
        },
        category: "hcomic"
    }, {
        name: "野貓韓漫 目錄頁",
        reg: () => fun.checkUrl({
            e: ".logo img[alt^=野貓韓漫]",
            p: "/m/"
        }),
        init: () => fun.createImgBox(".module-info", 2),
        imgs: () => {
            let links = fun.gau(".module-play-list a");
            return fun.getImgA(".module img", links);
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 3],
        customTitle: ".module-info-heading h1",
        category: "hcomic"
    }, {
        name: "肉漫画网",
        host: ["www.roumanhua.com", "m.roumanhua.com"],
        reg: /^https?:\/\/(www|m)\.roumanhua\.com\/(wap)?chapter\/\d+/,
        imgs: "img[data-original]",
        button: [4],
        insertImg: [
            ["img[data-original]", 2, "img[data-original]"], 2
        ],
        autoDownload: [0],
        next: "//a[text()='下一章节'] | //a[@class='s_page2']",
        prev: "//a[text()='上一章节'] | //a[@class='s_page1']",
        customTitle: () => fun.title("|韩国漫画网"),
        category: "hcomic"
    }, {
        name: "漫香阁",
        host: ["xn--wgv69rba1382b.com", "韩漫日漫.com"],
        reg: /^https?:\/\/[^\/]+\/content-[\w-]+\.html/,
        include: "//title[contains(text(),'漫香阁')]",
        imgs: "#contentimg img",
        button: [4],
        insertImg: ["#contentimg", 2],
        customTitle: ".services-desc",
        category: "hcomic"
    }, {
        name: "頂點漫畫",
        host: ["www.apexmh.com"],
        reg: /^https?:\/\/www\.apexmh\.com\/comic\/\d+\.html/,
        imgs: () => fun.getImg("#showimg img", fun.gt("//p[contains(text(),'图片数量') or contains(text(),'圖片數量')]").match(/\d+/)[0], 9),
        button: [4],
        insertImg: ["#showimg", 2],
        customTitle: "h1",
        category: "hcomic"
    }, {
        name: "亲亲漫画",
        host: ["m.qinqinmanhua.xyz"],
        reg: /^https?:\/\/m\.qinqinmanhua\.xyz\/view\/\d+\.html/,
        imgs: ".showimg img",
        autoDownload: [0],
        next: ".BtnBox>.next[href*=view]",
        prev: ".BtnBox>.prev[href*=view]",
        customTitle: () => document.title.match(/《(.+)》/)[1],
        category: "hcomic"
    }, {
        name: "ok漫画網",
        host: ["www.okcomic.net", "m.okcomic.net"],
        reg: /^https?:\/\/(www|m)\.okcomic\.net\/\w+\/\d+\/\d+\.html/,
        delay: 1000,
        init: async () => {
            await fun.waitEle("//script[contains(text(),'qTcms_S_m_murl_e')]");
            await fun.waitVar("base64_decode");
            fun.run("document.onkeydown=null");
            fun.remove(".imgBox");
        },
        imgs: () => {
            const {
                base64_decode,
                qTcms_S_m_murl_e
            } = _unsafeWindow;
            return base64_decode(qTcms_S_m_murl_e).split("$qingtiandy$").map(e => e.replace("////", "//"));
        },
        button: [4],
        insertImg: ["//td[//img[@onclick]]", 2],
        go: 1,
        autoDownload: [0],
        next: "#k_Pic_nextArr",
        prev: "#k_Pic_backArr",
        customTitle: () => {
            const {
                qTcms_S_m_name,
                qTcms_S_m_playm
            } = _unsafeWindow;
            return qTcms_S_m_name + " - " + qTcms_S_m_playm
        },
        category: "hcomic"
    }, {
        name: "狮城漫画",
        host: ["hdcomic.com"],
        reg: /^https?:\/\/hdcomic\.com\/chapter\/\d+/,
        init: () => fun.clearAllTimer(),
        imgs: ".comicpage img,#cp_img img",
        button: [4],
        insertImg: [".comiclist,#cp_img", 2],
        autoDownload: [0],
        next: "//a[text()='下一章'][@href]",
        prev: "//a[text()='上一章'][@href]",
        customTitle: () => fun.title(/免费阅读-狮城漫画|在线阅读-狮城漫画/).replace(/\s-\s\(\d+P\)-高清全集/i, ""),
        category: "hcomic"
    }, {
        name: "韩漫连连看",
        host: ["www.hmllk.com"],
        reg: /^https?:\/\/www\.hmllk\.com\/chapter\/\d+/,
        init: () => fun.clearAllTimer(),
        imgs: ".comicpage img,#cp_img img",
        button: [4],
        insertImg: [".comiclist,#cp_img", 2],
        autoDownload: [0],
        next: "//a[text()='下一章'][@href]",
        prev: "//a[text()='上一章'][@href]",
        customTitle: () => fun.title(/免费阅读-连连看.+|免费在线看.+/).replace(/\s-\s\(\d+P\)-高清全集/i, ""),
        category: "hcomic"
    }, {
        name: "顶通漫画",
        host: [
            "toptoon.shop",
            "toptoon.buzz",
            "toptooncn.club",
            "toptooncn.info",
            "toptooncn.life",
            "toptooncn.top",
            "toptoonapp.com",
            "toptoon123.xyz",
            "toptooncn.xyz",
            "toptoon123.link",
            "toptoonapp.club"
        ],
        reg: /^https?:\/\/toptoon(\w+)?\.\w+\/\w+\/\d+\.html/,
        imgs: "#txtbox img",
        button: [4],
        insertImg: ["#txtbox", 2],
        autoDownload: [0],
        next: "a.nexturl.on",
        prev: "a.prevurl.on",
        customTitle: () => {
            let arr = fun.gt(".place").split(" > ");
            return arr[2] + " - " + arr[3];
        },
        css: ".ads_plugin,.ad-top-info{display:none!important;}",
        category: "hcomic"
    }, {
        name: "H肉番动漫",
        host: ["www.rhmanhua11.xyz", "www.rhmanhua12.xyz"],
        reg: /^https?:\/\/www\.rhmanhua(\d+)?\.xyz\/artshow-\d+\.html/,
        imgs: () => {
            thumbnailSrcArray = fun.getImgSrcArr(".margin-fix img");
            return thumbnailSrcArray.map(e => e.replace(/t(\.\w+)$/, "$1"));
        },
        button: [4],
        insertImg: [".list-videos", 2],
        go: 1,
        customTitle: ".headline>h2",
        category: "hcomic"
    }, {
        name: "色漫集",
        host: ["semanji.com"],
        reg: /^https?:\/\/semanji\.com\/\w+\/[^\.]+\.html/,
        imgs: ".post-content a",
        button: [4],
        insertImg: [".post-content", 2],
        customTitle: () => fun.title(" - 色漫集"),
        fancybox: {
            v: 3,
            css: false
        },
        category: "hcomic"
    }, {
        name: "155漫画",
        host: ["155comic.com", "155comic.bio", "155comic.cfd", "155comic.buzz", "155comic.autos", "155.lat"],
        reg: /^https?:\/\/155comic\.\w+\/\d+\.html/,
        imgs: "#post-comic img",
        button: [4],
        insertImg: ["#post-comic", 2],
        customTitle: "#post-data>h1",
        css: ".contentsad{display:none!important;}",
        category: "hcomic"
    }, {
        name: "18H汉化漫画 介紹頁",
        host: ["manhua.sexbook.top", "18manga.top", "mt91.top", "kk4.top"],
        reg: /^https?:\/\/(manhua\.sexbook\.top|18manga\.top|mt91\.top|kk4\.top)\/cont\.php\?id=/,
        imgs: async () => {
            let max = fun.gt("#td-Act+#td-Series").match(/\d+/)[0];
            let [, imgDir, , ex] = fun.gu(".article-content a").match(/^(.+\/)(\d+)(\.\w+)$/);
            return fun.arr(max, (v, i) => imgDir + (i + 1) + ex);
        },
        button: [4],
        insertImg: [
            [".content", 0, ".article-content>a"], 2
        ],
        go: 1,
        customTitle: () => fun.gt(".article-content>h3").split("｜")[1],
        fancybox: {
            blacklist: 1
        },
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}.sidebar,.modown-ad{display:none!important;}.single .content{margin-right:0px!important;}",
        category: "hcomic"
    }, {
        name: "18H汉化漫画 閱讀頁",
        host: ["manhua.sexbook.top", "18manga.top", "mt91.top", "kk4.top"],
        reg: /^https?:\/\/(manhua\.sexbook\.top|18manga\.top|mt91\.top|kk4\.top)\/imgs\.php\?id=/,
        imgs: async () => {
            let next = fun.ge("li.active+li");
            if (next) {
                let last = fun.ge("//a[contains(text(),'最大頁') or contains(text(),'最大页')]");
                let lastDoc = await fun.fetchDoc(last.href);
                let lastFn = fun.gst("decodeBinaryString", lastDoc).match(/decodeBinaryString\('[^;]+/g)[0];
                let html = fun.run(lastFn);
                let tempDoc = fun.doc(html);
                let lastA = fun.gae("a", tempDoc).at(-1);
                let max = lastA.href.match(/(\d+)\.\w+$/)[1];
                let [, imgDir, , ex] = fun.gu("#imgs>a").match(/^(.+\/)(\d+)(\.\w+)$/);
                return fun.arr(max, (v, i) => imgDir + (i + 1) + ex);
            } else {
                return fun.gae("#imgs>a");
            }
        },
        button: [4],
        insertImg: ["#imgs", 2],
        customTitle: ".article-content>h3",
        fancybox: {
            blacklist: 1
        },
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}.sidebar,.modown-ad{display:none!important;}.single .content{margin-right:0px!important;}",
        category: "hcomic"
    }, {
        name: "hanime1",
        host: ["hanime1.biz", "ani02.xyz", "anime01.xyz"],
        reg: () => fun.checkUrl({
            e: [
                "//a[contains(text(),'anime1')][@href='/home']",
                ".blog"
            ],
            p: /^\/book\/\d+$/
        }),
        init: async () => {
            fun.ge(".blog").scrollIntoView({
                block: "end"
            });
            await fun.delay(2000);
        },
        imgs: async () => {
            await fun.waitEle(".blog_section img[title]:not([src*=cover])");
            thumbnailSrcArray = fun.getImgSrcArr(".blog_section img[title]:not([src*=cover])");
            return thumbnailSrcArray.map(e => e.replace(/t(\d+\.\w+)$/, "$1"));
        },
        button: [4],
        insertImg: [
            [".m-1>.blog_section", 2], 2
        ],
        go: 1,
        customTitle: ".blog_section h1,.blog_section h3",
        css: ".blog_section.max-w-7xl.mx-auto.rounded-sm.p-2.pb-3,.flex.flex-row.flex-wrap.items-center.text-center.justify-center{display:none!important;}",
        category: "hcomic"
    }, {
        name: "JavABC",
        host: ["javabc.club"],
        reg: /^https?:\/\/javabc\.club\/chapter\/\d+$/i,
        include: "#enc_img img",
        init: () => {
            fun.clearAllTimer();
            fun.remove("//div[@class='comicpage']/a[img] | //div[@class='comicpage']/div[script] | //div[@id='cp_img']/a[img] | //div[@id='cp_img']/div[script]");
        },
        imgs: async () => {
            await fun.getNP("#enc_img>div,#enc_img>img", "//a[text()='下一页'][@href]", null, ".fanye,.view-bottom-bar");
            return fun.gae("#enc_img img");
        },
        button: [4],
        insertImg: ["#enc_img", 2],
        customTitle: () => {
            if (fun.ge(".comic-name")) {
                return fun.gt(".comic-name");
            } else {
                let text = fun.gst("bookInfo").match(/bookInfo[\s=]+([^;]+)/)[1];
                let bookInfo = fun.run(text);
                return bookInfo.book_name;
            }
        },
        css: "img{opacity:1!important;}",
        category: "hcomic"
    }, {
        name: "桃心漫画",
        host: ["txcomic.com"],
        reg: /^https?:\/\/txcomic\.com\/chapter\/\d+$/i,
        include: "#enc_img img",
        init: () => fun.remove("//div[@class='comicpage']/a[img] | //div[@class='comicpage']/div[script] | //div[@id='cp_img']/a[img] | //div[@id='cp_img']/div[script]"),
        imgs: "#enc_img img",
        button: [4],
        insertImg: ["#enc_img", 2],
        autoDownload: [0],
        next: "//a[text()='下一章'][@href]",
        prev: "//a[text()='上一章'][@href]",
        customTitle: () => {
            if (fun.ge(".title")) {
                return fun.gt(".title");
            } else {
                let text = fun.gst("bookInfo").match(/bookInfo[\s=]+([^;]+)/)[1];
                let bookInfo = fun.run(text);
                return bookInfo.book_name + " - " + bookInfo.chapter_name;
            }
        },
        css: "#pubcdnModal{display:none!important;}",
        category: "hcomic"
    }, {
        name: "有色漫画网",
        host: ["yousemanhua.com"],
        reg: /^https?:\/\/yousemanhua\.com\/index\.php\/chapter\/\d+$/i,
        imgs: "img[data-original]:not([data-original*='empty.png'])",
        button: [4],
        insertImg: [".rd-article-wr,.chapter_content", 2],
        autoDownload: [0],
        next: "//a[contains(@class,'j-rd-next')][@_href] | //a[div[span[contains(text(),'下一篇')]]]",
        prev: "//a[contains(@class,'j-rd-prev')][@_href] | //a[div[span[contains(text(),'上一篇')]]]",
        customTitle: async () => {
            if (fun.ge(".read__crumb")) {
                let arr = fun.gt(".read__crumb").split("  ");
                return arr[1] + " - " + arr[2];
            } else {
                let dom = await fun.fetchDoc(fun.gu(".nav_left>a"));
                return fun.title(" - 有色漫画", 0, dom) + " - " + fun.title(" - 有色漫画");
            }
        },
        category: "hcomic"
    }, {
        name: "Tranh 18",
        host: ["tranh18.com", "m.tranh18.com"],
        reg: /^https?:\/\/(m\.)?tranh18\.com\/\w+\/chapter\/\d+$/i,
        imgs: ".comicpage img,#cp_img img",
        button: [4],
        insertImg: [".comiclist,#cp_img", 2],
        autoDownload: [0],
        next: "//a[text()='Chap sau'][@href] | //a[p[text()='Chap sau']][@href]",
        prev: "//a[text()='Chap trước'][@href] | //a[p[text()='Chap trước']][@href]",
        customTitle: () => fun.title("-Truyện Tranh 18"),
        css: ".ads{display:none!important;}",
        category: "hcomic"
    }, {
        name: "LXMANGA",
        host: ["lxmanga.life"],
        reg: /^https?:\/\/lxmanga\.life\/[\w-]+\/[\w-]+\/[\w-]+/i,
        include: "//nav[li[span[starts-with(text(),'Danh')]]]",
        imgs: "img.lazy.max-w-full",
        button: [4],
        insertImg: [".text-center:has(img.lazy.max-w-full)", 2],
        autoDownload: [0],
        next: "//a[button[span[text()='Chương sau']]][not(starts-with(@href,'javascript'))]",
        prev: "//a[button[span[text()='Chương trước']]][not(starts-with(@href,'javascript'))]",
        customTitle: () => fun.title(" - ", 3),
        category: "hcomic"
    }, {
        name: "污污漫畫",
        host: ["www.55comic.com", "www.comicbox.xyz", "www.wuwucomic.xyz"],
        reg: /^https?:\/\/(www\.55comic\.com|www\.comicbox\.xyz|www\.wuwucomic\.xyz)\/chapter\/\d+$/i,
        include: ".comiclist",
        init: () => fun.remove("//div[div[@class='CarouselView center']]"),
        imgs: async () => {
            let arr = [];
            await fun.aotoScrollEles(".comiclist div[data-src]", (ele) => {
                let canvas = fun.ge("canvas", ele);
                if (canvas) {
                    arr.push(canvas.toDataURL("image/jpeg"));
                    return true;
                }
                return false;
            });
            return arr.map(e => fun.dataURLtoBlobURL(e));
        },
        button: [4],
        insertImg: [".comicpage", 0],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: "//a[text()='上一章']",
        customTitle: ".title",
        fetch: 1,
        category: "hcomic"
    }, {
        name: "污污漫畫M",
        host: ["www.55comic.com", "www.comicbox.xyz"],
        reg: /^https?:\/\/(www\.55comic\.com|www\.comicbox\.xyz)\/chapter\/\d+$/i,
        include: "#cp_img",
        imgs: async () => {
            let arr = [];
            await fun.aotoScrollEles(".cropped[data-src]", (ele) => {
                let canvas = fun.ge("canvas", ele);
                if (canvas) {
                    arr.push(canvas.toDataURL("image/jpeg"));
                    return true;
                }
                return false;
            });
            _unsafeWindow.scrollTo({
                top: 0
            });
            return arr.map(e => fun.dataURLtoBlobURL(e));
        },
        button: [4],
        insertImg: ["#cp_img", 0],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: "//a[text()='上一章']",
        customTitle: () => fun.title(" - 污污漫畫"),
        fetch: 1,
        category: "hcomic"
    }, {
        name: "污漫天堂",
        host: ["wumtt.com"],
        reg: () => fun.checkUrl({
            e: ".logo>a[title='污漫天堂']",
            p: "/mangaread/"
        }),
        imgs: ".content>center>div>img",
        button: [4],
        insertImg: [".content>center>div:has(>img)", 2],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: "//a[text()='上一章']",
        customTitle: () => fun.dt({
            s: ".content h1",
            d: [
                "《",
                "》"
            ]
        }) + " - " + fun.gt(".content h2"),
        category: "hcomic"
    }, {
        name: "污污漫书/55漫書",
        host: ["www.55comics.com", "www.55manshu.com"],
        reg: [
            /^https?:\/\/www\.55comics\.com\/chapter\/\d+\.html$/,
            /^https?:\/\/www\.55manshu\.com\/chapter\/\d+\.html$/
        ],
        imgs: async () => {
            let max = fun.gt("//li[a[text()='下一页»' or text()='下一頁»']]", 2);
            let links = fun.arr(max, (v, i) => i == 0 ? fun.url : fun.url + "?p=" + (i + 1));
            return fun.getImgA(".scramble-page img", links);
        },
        button: [4],
        insertImg: [
            [".scramble-page", 2, ".scramble-page"], 2
        ],
        insertImgAF: () => {
            let arr = ["//div[div[@class='ads']]", "//div[ul[ul[@class='pagination']]]"];
            fun.remove(arr);
        },
        autoDownload: [0],
        next: "//a[text()='下一话»' or text()='下一話»']",
        prev: "//a[text()='上一话»' or text()='上一話»']",
        customTitle: () => {
            let str = fun.gt(".chapter-left h1");
            let strArr = str.split(">");
            strArr = strArr.map(str => str.trim());
            return strArr[2] + " - " + strArr[3];
        },
        category: "hcomic"
    }, {
        name: "日韩漫画/歪歪漫画",
        host: ["www.diyihm.com", "www.lltoon.com", "www.rrtoon.com", "wwtoon.com", "www.zztoon.com", "www.vvtoon.com"],
        reg: /^https?:\/\/(www\.diyihm\.com|www\.(ll|rr)toon\.com|wwtoon\.com|www\.(zz|vv)toon\.com)\/view\/\d+\/\d+$/i,
        init: async () => {
            await fun.waitEle(".charpetBox img");
            let code = fun.gt("//script[contains(text(),'$(document).ready')]");
            let objStr = code.match(/window\.\w+\s?=\s?([^;]+)/)[1];;
            let json = JSON.parse(objStr);
            debug("\n此頁JSON資料\n", json);
            siteJson = json;
        },
        imgs: () => siteJson.volume.pages,
        button: [4, "24%", 3],
        insertImg: [".charpetBox", 2],
        autoDownload: [0],
        next: "#loadNextChapter",
        prev: "#loadPrevChapter",
        customTitle: () => siteJson.comic.title + " - " + siteJson.volume.title,
        css: ".letchepter[style*='20px']{display:none!important;}",
        category: "hcomic"
    }, {
        name: "Manhuascan.us",
        host: ["manhuascan.us"],
        reg: /^https?:\/\/manhuascan\.us\/manga\//,
        imgs: "#readerarea img",
        button: [4],
        insertImg: ["#readerarea", 2],
        next: ".section_button a:has(>.fa-angle-right)",
        prev: ".section_button a:has(>.fa-angle-left)",
        customTitle: () => fun.title(" - Manhuascan.us"),
        category: "comic"
    }, {
        name: "Mangago",
        host: ["mangago.me", "mangago.zone", "youhim.me"],
        reg: () => fun.checkUrl({
            h: /mangago|youhim/,
            p: /^\/read-manga\/|^\/chapter\//,
            e: "#pic_container"
        }) && !hasTouchEvents,
        init: async () => {
            fun.clearAllTimer();
            fun.createImgBox("#pic_container", 1, 1000);
            fun.remove("#pic_container");
            await fun.getEleF("#pagenavigation a", "#pic_container img", ["#FullPictureLoadMainImgBox", 0]);
        },
        imgs: () => fun.gae("#FullPictureLoadMainImgBox img"),
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 0],
        next: () => {
            if (fun.lp.includes("/chapter/")) {
                let cid = fun.lp.split("/").at(-2);
                let selector = `.chapter li:has(a[href*='${cid}'])+li>a`;
                return fun.gu(selector);
            } else {
                return fun.gu("//p[contains(text(),'Next Chapter:')]/a");
            }
        },
        prev: 1,
        customTitle: () => {
            let url = fun.gu(".widepage a");
            return fun.fetchDoc(url).then(dom => fun.ge(".rating_wrap a", dom)?.title.replace("Peole who read ", "") + " - " + fun.gt("#dropdown-chapter-page"));
        },
        css: "div:has(>img[onclick]){display:none!important;}#FullPictureLoadMainImgBox img[id^=page]{width:auto;height:auto;max-width:100%}#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "comic"
    }, {
        name: "MangaDex",
        reg: () => fun.checkUrl({
            h: "mangadex.org",
            e: "link[title=MangaDex]"
        }) && !hasTouchEvents,
        init: async () => await fun.wait((d) => d.title != "" && !d.title.includes("Loading")),
        SPA: () => new URL(document.URL).pathname.startsWith("/chapter/"),
        observerURL: true,
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            const chapter_id = new URL(document.URL).pathname.split("/").at(-1);
            return fetch(`https://api.mangadex.org/at-home/server/${chapter_id}?forcePort443=false`).then(res => res.json()).then(json => {
                fun.hideMsg();
                const {
                    baseUrl,
                    chapter: {
                        data,
                        hash
                    }
                } = json;
                return data.map(e => baseUrl + "/data/" + hash + "/" + e);
            });
        },
        next: async () => {
            if (new URL(document.URL).pathname.startsWith("/chapter/")) {
                await fun.waitEle("#chapter-selector li[data-value]");
                let id = location.pathname.split("/").at(-1);
                let chapters = [...document.querySelectorAll("#chapter-selector li[data-value]")];
                let nextUrl = null;
                chapters.some((e, i, a) => {
                    if (e.dataset.value == id) {
                        if (a[i - 1] === undefined) {
                            nextUrl = null;
                        } else {
                            nextUrl = "https://mangadex.org/chapter/" + a[i - 1].dataset.value;
                        }
                        return true;
                    } else {
                        return false;
                    }
                });
                return nextUrl;
            } else {
                return null;
            }
        },
        customTitle: async () => {
            await fun.wait((d) => d.title != "" && !d.title.includes("Loading"));
            let text = fun.dt({
                d: [
                    /^[\d\s\|]+/,
                    " - MangaDex"
                ]
            });
            let textArr = text.split(" - ");
            return textArr[1] + " - " + textArr[0];
        },
        category: "comic"
    }, {
        name: "NamiComi",
        reg: () => fun.checkUrl({
            h: "namicomi.com",
            e: "meta[content=NamiComi]"
        }) && !hasTouchEvents,
        SPA: () => new URL(document.URL).pathname.includes("/chapter/"),
        observerURL: true,
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            const chapter_id = new URL(document.URL).pathname.split("/").at(-1);
            return fetch(`https://api.namicomi.com/images/chapter/${chapter_id}?newQualities=true`).then(res => res.json()).then(json => {
                fun.hideMsg();
                const {
                    data: {
                        baseUrl,
                        hash,
                    }
                } = json;
                let data;
                let quality;
                let keys = ["source", "high", "medium", "low"];
                for (let k of keys) {
                    if (Array.isArray(json.data[k])) {
                        data = json.data[k];
                        quality = k;
                        break;
                    }
                }
                return data.map(e => baseUrl + "/chapter/" + chapter_id + "/" + hash + `/${quality}/` + e.filename);
            });
        },
        next: async () => {
            if (new URL(document.URL).pathname.includes("/chapter/")) {
                let id = location.pathname.split("/").at(-1);
                await fun.waitEle(`select.relative option[value=${id}]`);
                let chapters = [...document.querySelectorAll("select.relative option")];
                let nextUrl = null;
                chapters.some((e, i, a) => {
                    if (e.value == id) {
                        if (a[i - 1] === undefined) {
                            nextUrl = null;
                        } else {
                            nextUrl = "https://namicomi.com/en/chapter/" + a[i - 1].value;
                        }
                        return true;
                    } else {
                        return false;
                    }
                });
                return nextUrl;
            } else {
                return null;
            }

        },
        customTitle: async () => {
            let text = fun.dt({
                d: [
                    / - NamiComi.+$/
                ]
            });
            let textArr = text.split(" - ");
            return textArr[1] + " - " + textArr[0];
        },
        category: "comic"
    }, {
        name: "嗨皮漫畫閱讀",
        enable: 0,
        reg: () => fun.checkUrl({
            h: "m.happymh.com",
            p: "/reads/"
        }),
        exclude: ".captcha-area",
        fetchJson: (url = siteUrl) => {
            let [, , mangaCode, id] = new URL(url).pathname.split("/");
            let api = `/v2.0/apis/manga/read?code=${mangaCode}&cid=${id}&v=v2.13`;
            return fetch(api, {
                "headers": {
                    "accept": "application/json, text/plain, */*",
                    "x-requested-id": new Date().getTime(),
                    "x-requested-with": "XMLHttpRequest"
                }
            }).then(res => res.json());
        },
        init: async () => {
            let json = await _this.fetchJson();
            debug("\n此頁JSON資料\n", json);
            siteJson = json;
            fun.picPreload(json.data.scans.map(e => e.url), json.data.manga_name + " - " + json.data.chapter_name);
            if (await fun.waitEle("#page-area")) {
                new IntersectionObserver((entries, observer) => {
                    if (entries[0].isIntersecting) {
                        observer.unobserve(entries[0].target);
                        let f = ge("footer>article");
                        let item = ge("footer>article>div:nth-child(2)");
                        item.querySelectorAll("a").forEach(a => a.classList.add("MuiButton-containedPrimary"));
                        let p = gx("//a[span[text()='上一话' or text()='上一話'] and contains(@href,'reads')]");
                        if (p) p.classList.add("MuiButton-containedPrimary");
                        let n = gx("//a[span[text()='下一话' or text()='下一話'] and contains(@href,'readMore')]");
                        if (n) {
                            n.classList.remove("MuiButton-containedPrimary");
                            n.firstChild.innerText = "^_^感谢您的阅读~已经没有下一话了哦~";
                        }
                    }
                }).observe(ge('#page-area'));
            }
        },
        imgs: () => siteJson.status == 0 ? siteJson.data.scans.map(e => e.url) : [],
        referrerpolicy: "origin",
        button: [4],
        insertImg: ["//article[div[contains(@id,'imageLoader')]]", 3],
        autoDownload: [0],
        next: "//a[span[text()='下一話' or text()='下一话']][contains(@href,'reads')]",
        prev: "//a[span[text()='上一話' or text()='上一话']]",
        customTitle: () => siteJson.data.manga_name + " - " + siteJson.data.chapter_name,
        preloadNext: async (nextDoc, obj) => {
            let json = await obj.fetchJson(nextLink);
            json.status == 0 ? fun.picPreload(json.data.scans.map(e => e.url), json.data.manga_name + " - " + json.data.chapter_name, "next") : debug("預讀下一頁失敗");
        },
        css: "footer>article>div{padding: 0.5rem 0 !important}",
        category: "comic"
    }, {
        name: "嗨皮漫畫展開目錄",
        reg: /^https?:\/\/m\.happymh\.com\/manga\//,
        enable: 0,
        icon: 0,
        key: 0,
        init: () => {
            window.addEventListener("load", async () => {
                await fun.delay(1000, 0);
                if (fun.ge("//div[contains(text(),'给本王显示全部章节')]")) {
                    fun.ge('#expandButton').click();
                }
            });
        },
        category: "comic"
    }, {
        name: "嗨皮漫畫，鏈接新分頁打開",
        reg: /^https?:\/\/m\.happymh\.com\//,
        enable: 0,
        icon: 0,
        key: 0,
        openInNewTab: ".home-banner a:not([target=_blank]),.manga-rank a:not([target=_blank]),.manga-cover a:not([target=_blank])",
        category: "comic"
    }, {
        name: "COLAMANHUA", //方向鍵上一章下一章、反反偵錯，下載需先手動觸發全部載入圖片，圖址如為blob函式會使用到canvas需要繪製過程會有點卡。
        host: ["www.colamanga.com"],
        enable: 1,
        reg: /^https?:\/\/www\.colamanga\.com\/manga-.+\.html$/,
        init: () => {
            fun.clearAllTimer(1);
            if (autoScrollAllElement === 1) _this.scrollEle();
        },
        imgs: () => fun.ge(".mh_comicpic img[src^=blob]") ? fun.imgBlobUrlArr(".mh_comicpic img[src^=blob]") : fun.gae(".mh_comicpic img[src]"),
        //scrollEle: [".mh_comicpic img", 600],
        scrollEle: () => fun.aotoScrollEles(".mh_comicpic", (ele) => isEle(fun.ge("img[src]", ele)), 10000),
        next: "//a[text()='下一章']",
        prev: "//a[text()='上一章']",
        customTitle: () => fun.title(" COLAMANGA", 1),
        css: ".mh_wrap{width:100%!important;min-width:100%!important}",
        category: "comic"
    }, {
        name: "COLAMANHUA 目錄鏈結新分頁開啟",
        reg: /^https?:\/\/www\.colamanga\.com\/manga-\w+\/$/,
        openInNewTab: ".all_data_list a:not([target=_blank])",
        category: "none"
    }, {
        name: "8Comic無限動漫",
        host: ["www.8comic.com"],
        enable: 1,
        reg: () => fun.checkUrl({
            e: "//title[contains(text(),'無限動漫')]",
            p: "/online/"
        }) && comicInfiniteScrollMode != 1,
        frameCode: `
if ("ge" in window) {
    const code = [...document.scripts].find(s => s.textContent.includes("ge(e)")).textContent;
    const [, obfuscated_chapter_code] = code.match(/img\\s+s="([^"]+)/);
    const chapter_code = obfuscated_chapter_code.replace(/'|\\+\\w\\+/g, "");
    const getSrc = (a) => {
        const b = window[chapter_code.substring(0, 5)];
        const c = window[chapter_code.substring(5, 10)];
        const d = window[chapter_code.substring(10, 15)];
        const src = "https://img" + su(b, 0, 1) + ".8comic.com/" + su(b, 1, 1) + "/" + ti + "/" + c + "/" + nn(a) + "_" + su(d, mm(a), 3) + ".jpg";
        return src;
    };
    const srcs = Array.from({
        length: ps
    }, (v, i) => getSrc(i + 1));
    window.newImgs = srcs;
    const url = reurl("ch", ni);
    if (url == document.URL) {
        window.nextLink = null;
    } else {
        window.nextLink = url;
    }
}
        `,
        init: async () => {
            await fun.waitEle("#comics-pics img");
            await fun.waitVar("unescape");
            fun.script(_this.frameCode, 0, 1);
            fun.createImgBox(".pinch-zoom-container", 2);
        },
        imgs: () => _unsafeWindow.newImgs,
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, ".pinch-zoom-container"], 2
        ],
        autoDownload: [0],
        next: () => _unsafeWindow.nextLink,
        prev: "#prevvol",
        customTitle: () => fun.dt({
            s: "#pt"
        }),
        preloadNext: () => {
            if (!!_unsafeWindow.nextLink) {
                fun.iframe(_unsafeWindow.nextLink, {
                    waitVar: "ge",
                    waitEle: "#comics-pics img",
                    cb: async (dom, frame) => {
                        fun.script(_this.frameCode, 0, 1, dom);
                        fun.picPreload(frame.newImgs, fun.dt({
                            t: fun.gt("#pt", 1, dom)
                        }), "next");
                    }
                });
            }
        },
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "8Comic無限動漫 自動翻頁",
        reg: () => fun.checkUrl({
            e: "//title[contains(text(),'無限動漫')]",
            p: "/online/"
        }) && comicInfiniteScrollMode == 1,
        frameCode: `
if ("ge" in window) {
    const code = [...document.scripts].find(s => s.textContent.includes("ge(e)")).textContent;
    const [, obfuscated_chapter_code] = code.match(/img\\s+s="([^"]+)/);
    const chapter_code = obfuscated_chapter_code.replace(/'|\\+\\w\\+/g, "");
    const getSrc = (a) => {
        const b = window[chapter_code.substring(0, 5)];
        const c = window[chapter_code.substring(5, 10)];
        const d = window[chapter_code.substring(10, 15)];
        const src = "https://img" + su(b, 0, 1) + ".8comic.com/" + su(b, 1, 1) + "/" + ti + "/" + c + "/" + nn(a) + "_" + su(d, mm(a), 3) + ".jpg";
        return src;
    };
    const srcs = Array.from({
        length: ps
    }, (v, i) => getSrc(i + 1));
    window.newImgs = srcs;
    const url = reurl("ch", ni);
    if (url == document.URL) {
        window.nextLink = null;
    } else {
        window.nextLink = url;
    }
}
        `,
        init: async () => {
            await fun.waitEle("#comics-pics img");
            fun.script(_this.frameCode, 0, 1);
            let tE = fun.createImgBox(".pinch-zoom-container", 2);
            fun.remove(".pinch-zoom-container");
            let imgs = fun.createImgArray(frameWindow.newImgs);
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            mode: 1,
            waitEle: "#comics-pics img",
            ele: () => fun.createImgArray(frameWindow.newImgs),
            pos: ["#FullPictureLoadMainImgBox", 0],
            observer: "#FullPictureLoadMainImgBox>img",
            next: () => frameWindow.nextLink,
            title: (dom, frame) => {
                if (hasTouchEvents) {
                    return "第" + frame.ch + "集";
                } else {
                    return fun.dt({
                        t: fun.gt("#pt", 1, dom)
                    });
                }
            },
            re: "#pt",
            aF: () => (_unsafeWindow.ch = frameWindow.ch),
            preloadNextPage: () => {
                if (!!frameWindow.nextLink) {
                    fun.iframe(frameWindow.nextLink, {
                        waitVar: "ge",
                        waitEle: "#comics-pics img",
                        cb: async (dom, frame) => {
                            fun.script(_this.frameCode, 0, 1, dom);
                            fun.picPreload(frame.newImgs, _this.autoPager.title(dom, frame), "next");
                        }
                    });
                }
            }
        },
        category: "comic autoPager"
    }, {
        name: "Mangabz",
        host: ["www.mangabz.com", "mangabz.com"],
        enable: 1,
        reg: () => /^https?:\/\/(www\.)?mangabz\.com\/m\d+/.test(fun.url) && comicInfiniteScrollMode != 1,
        include: ".container",
        init: () => fun.MangabzUI(),
        imgs: (msg = 1) => {
            if (msg == 1) fun.showMsg(displayLanguage.str_05, 0);
            const {
                MANGABZ_IMAGE_COUNT,
                MANGABZ_CURL,
                MANGABZ_CID,
                MANGABZ_MID,
                MANGABZ_VIEWSIGN_DT,
                MANGABZ_VIEWSIGN
            } = _unsafeWindow;
            let fetchNum = 0;
            let resArr = fun.arr(MANGABZ_IMAGE_COUNT, (v, i) => {
                let searchParams = new URLSearchParams({
                    cid: MANGABZ_CID,
                    page: i + 1,
                    key: "",
                    _cid: MANGABZ_CID,
                    _mid: MANGABZ_MID,
                    _dt: MANGABZ_VIEWSIGN_DT,
                    _sign: MANGABZ_VIEWSIGN
                });
                let apiUrl = `${MANGABZ_CURL}chapterimage.ashx?${searchParams}`;
                return fetch(apiUrl).then(res => res.text()).then(res => {
                    if (msg == 1) fun.showMsg(`${displayLanguage.str_06}(${fetchNum+=1}/${MANGABZ_IMAGE_COUNT})`, 0);
                    return fun.run(res)[0];
                });
            });
            return Promise.all(resArr).then(arr => {
                if (msg == 1) fun.hideMsg();
                return arr;
            });
        },
        button: [4],
        insertImg: ["#cp_img", 2],
        autoDownload: [0],
        next: "//a[img[contains(@src,'xiayizhang')]][starts-with(@href,'/m')]",
        prev: "//a[img[contains(@src,'shangyizhang')]][starts-with(@href,'/m')]",
        customTitle: (dom = document) => fun.title("_", 2, dom).replace("漫畫", ""),
        preloadNext: async (nextDoc, obj) => {
            let code = fun.gst("MANGABZ_IMAGE_COUNT", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(await obj.imgs(0), obj.customTitle(nextDoc), "next");
        },
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}a[href^='j']{display:none !important}body{overflow:unset!important}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "Mangabz 自動翻頁",
        reg: () => /^https?:\/\/(www\.)?mangabz\.com\/m\d+/.test(fun.url) && comicInfiniteScrollMode == 1,
        include: ".container",
        getSrcs: (dom) => {
            let code = fun.gst("MANGABZ_IMAGE_COUNT", dom);
            let imagesNum = code.match(/MANGABZ_IMAGE_COUNT[\s\=]+(\d+)/)[1];
            let chapterURL = code.match(/MANGABZ_CURL[\s\="]+([^"]+)/)[1];
            let cid = code.match(/MANGABZ_CID[\s\=]+(\d+)/)[1];
            let mid = code.match(/MANGABZ_MID[\s\=]+(\d+)/)[1];
            let dt = encodeURIComponent(code.match(/MANGABZ_VIEWSIGN_DT[\s\="]+([^"]+)/)[1]);
            let sing = code.match(/MANGABZ_VIEWSIGN[\s\="]+([^"]+)/)[1];
            let resArr = [];
            for (let i = 1; i <= imagesNum; i++) {
                let searchParams = new URLSearchParams({
                    cid: cid,
                    page: i,
                    key: "",
                    _cid: cid,
                    _mid: mid,
                    _dt: dt,
                    _sign: sing
                });
                let api = `${chapterURL}chapterimage.ashx?${searchParams}`;
                let res = fetch(api).then(res => res.text()).then(text => {
                    let srcArr = fun.run(text);
                    return srcArr[0];
                });
                resArr.push(res);
            }
            return Promise.all(resArr);
        },
        getImgs: async (dom = document) => {
            let srcs = await _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            fun.MangabzUI();
            fun.showMsg(displayLanguage.str_135, 0);
            await _this.getImgs().then(async imgs => {
                let tE = fun.ge("#cp_img");
                tE.innerHTML = "";
                tE.append(...imgs);
                fun.hideMsg();
                await fun.lazyload();
            });
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#cp_img", 0],
            observer: "#cp_img>img",
            next: "//a[img[contains(@src,'xiayizhang')]][starts-with(@href,'/m')]",
            re: ".container",
            title: (dom) => {
                let code = fun.gst("MANGABZ_CTITLE", dom);
                let title = code.match(/MANGABZ_CTITLE[\s\="]+([^"]+)/)[1];
                return title;
            },
            preloadNextPage: 1
        },
        css: "a[href^='j']{display:none !important}body{overflow:unset!important}",
        category: "comic autoPager"
    }, {
        name: "Xmanhua",
        host: ["www.xmanhua.com", "xmanhua.com"],
        enable: 1,
        reg: () => /^https?:\/\/(www\.)?xmanhua\.com\/m\d+/.test(fun.url) && comicInfiniteScrollMode != 1,
        include: ".reader-bottom-page-list",
        init: () => fun.XmanhuaUI(),
        imgs: (msg = 1) => {
            if (msg == 1) fun.showMsg(displayLanguage.str_05, 0);
            const {
                XMANHUA_IMAGE_COUNT,
                XMANHUA_CURL,
                XMANHUA_CID,
                XMANHUA_MID,
                XMANHUA_VIEWSIGN_DT,
                XMANHUA_VIEWSIGN
            } = _unsafeWindow;
            let fetchnUm = 0;
            let resArr = fun.arr(XMANHUA_IMAGE_COUNT, (v, i) => {
                let searchParams = new URLSearchParams({
                    cid: XMANHUA_CID,
                    page: i + 1,
                    key: "",
                    _cid: XMANHUA_CID,
                    _mid: XMANHUA_MID,
                    _dt: XMANHUA_VIEWSIGN_DT,
                    _sign: XMANHUA_VIEWSIGN
                });
                let apiUrl = `${XMANHUA_CURL}chapterimage.ashx?${searchParams}`;
                return fetch(apiUrl).then(res => res.text()).then(res => {
                    if (msg == 1) fun.showMsg(`${displayLanguage.str_06}(${fetchnUm+=1}/${XMANHUA_IMAGE_COUNT})`, 0);
                    return fun.run(res)[0];
                });
            });
            return Promise.all(resArr).then(arr => {
                if (msg == 1) fun.hideMsg();
                return arr;
            });
        },
        button: [4],
        insertImg: ["#cp_img", 2],
        autoDownload: [0],
        next: "//a[img[contains(@src,'reader-bottom-right-2')]][starts-with(@href,'/m')]",
        prev: "//a[img[contains(@src,'reader-bottom-right-1')]][starts-with(@href,'/m')]",
        customTitle: (dom = document) => fun.title("_", 2, dom).replace("漫畫", ""),
        preloadNext: async (nextDoc, obj) => {
            let code = fun.gst("XMANHUA_IMAGE_COUNT", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(await obj.imgs(0), obj.customTitle(nextDoc), "next");
        },
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}.relative>a{display:none!important}.reader-img-con{padding:64px 0 50px !important;}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "Xmanhua 自動翻頁",
        reg: () => /^https?:\/\/(www\.)?xmanhua\.com\/m\d+/.test(fun.url) && comicInfiniteScrollMode == 1,
        include: ".reader-bottom-page-list",
        getSrcs: (dom) => {
            let code = fun.gst("XMANHUA_IMAGE_COUNT", dom);
            let imagesNum = code.match(/XMANHUA_IMAGE_COUNT[\s\=]+(\d+)/)[1];
            let chapterURL = code.match(/XMANHUA_CURL[\s\="]+([^"]+)/)[1];
            let cid = code.match(/XMANHUA_CID[\s\=]+(\d+)/)[1];
            let mid = code.match(/XMANHUA_MID[\s\=]+(\d+)/)[1];
            let dt = encodeURIComponent(code.match(/XMANHUA_VIEWSIGN_DT[\s\="]+([^"]+)/)[1]);
            let sing = code.match(/XMANHUA_VIEWSIGN[\s\="]+([^"]+)/)[1];
            let resArr = [];
            for (let i = 1; i <= imagesNum; i++) {
                let searchParams = new URLSearchParams({
                    cid: cid,
                    page: i,
                    key: "",
                    _cid: cid,
                    _mid: mid,
                    _dt: dt,
                    _sign: sing
                });
                let api = `${chapterURL}chapterimage.ashx?${searchParams}`;
                let res = fetch(api).then(res => res.text()).then(text => {
                    let srcArr = fun.run(text);
                    return srcArr[0];
                });
                resArr.push(res);
            }
            return Promise.all(resArr)
        },
        getImgs: async (dom = document) => {
            let srcs = await _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            fun.XmanhuaUI();
            fun.showMsg(displayLanguage.str_135, 0);
            await _this.getImgs().then(async imgs => {
                let tE = fun.ge("#cp_img");
                tE.innerHTML = "";
                tE.append(...imgs);
                fun.hideMsg();
                await fun.lazyload();
            });
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#cp_img", 0],
            observer: "#cp_img>img",
            next: "//a[img[contains(@src,'reader-bottom-right-2')]][starts-with(@href,'/m')]",
            re: ".container",
            title: (dom) => {
                let code = fun.gst("XMANHUA_CTITLE", dom);
                let title = code.match(/XMANHUA_CTITLE[\s\="]+([^"]+)/)[1];
                return title;
            },
            preloadNextPage: 1
        },
        css: ".relative>a{display:none!important}.reader-img-con{padding:64px 0 50px !important;}",
        category: "comic autoPager"
    }, {
        name: "DM5/極速 分頁模式",
        host: ["www.dm5.com", "m.dm5.com", "www.dm5.cn", "m.dm5.cn", "en.dm5.com", "cnc.dm5.com", "hk.dm5.com", "www.1kkk.com", "m.1kkk.com", "tel.1kkk.com", "en.1kkk.com", "cnc.1kkk.com", "hk.1kkk.com"],
        enable: 1,
        reg: () => /^https?:\/\/(www|tel|en|cnc|hk|m)?\.?(dm5|1kkk)\.(com|cn)\/(m|ch|vol|other)[-_0-9p]+\//.test(fun.url) && comicInfiniteScrollMode != 1,
        include: "#chapterpager",
        imgs: (msg = 1) => {
            if (msg == 1) fun.showMsg(displayLanguage.str_05, 0);
            const {
                DM5_IMAGE_COUNT,
                DM5_CURL,
                DM5_CID,
                DM5_MID,
                DM5_VIEWSIGN_DT,
                DM5_VIEWSIGN
            } = _unsafeWindow;
            let fetchNum = 0;
            let keyE = fun.ge("#dm5_key");
            let key = keyE.value;
            let resArr = fun.arr(DM5_IMAGE_COUNT, (v, i) => {
                let searchParams = new URLSearchParams({
                    cid: DM5_CID,
                    page: i + 1,
                    key: key,
                    language: 1,
                    gtk: 6,
                    _cid: DM5_CID,
                    _mid: DM5_MID,
                    _dt: DM5_VIEWSIGN_DT,
                    _sign: DM5_VIEWSIGN
                });
                let api = `${DM5_CURL}chapterfun.ashx?${searchParams}`;
                return fetch(api).then(res => res.text()).then(res => {
                    if (msg == 1) fun.showMsg(`${displayLanguage.str_06}(${fetchNum+=1}/${DM5_IMAGE_COUNT})`, 0);
                    return fun.run(res)[0];
                });
            });
            return Promise.all(resArr).then(arr => {
                if (msg == 1) fun.hideMsg();
                return arr;
            });
        },
        button: [4],
        insertImg: ["#cp_img", 2],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: "//a[text()='上一章']",
        customTitle: (dom = document) => fun.title("_", 2, dom),
        preloadNext: async (nextDoc, obj) => {
            let code = fun.gst("DM5_IMAGE_COUNT", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(await obj.imgs(0), obj.customTitle(nextDoc), "next");
        },
        topButton: true,
        css: "body{overflow:unset!important}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "DM5/極速 分頁模式 自動翻頁",
        reg: () => /^https?:\/\/(www|tel|en|cnc|hk|m)?\.?(dm5|1kkk)\.(com|cn)\/(m|ch|vol|other)[-_0-9p]+\//.test(fun.url) && comicInfiniteScrollMode == 1,
        include: "#chapterpager",
        getSrcs: (dom) => {
            let code = fun.gst("DM5_IMAGE_COUNT", dom);
            let imagesNum = code.match(/DM5_IMAGE_COUNT[\s\=]+(\d+)/)[1];
            let chapterURL = code.match(/DM5_CURL[\s\="]+([^"]+)/)[1];
            let cid = code.match(/DM5_CID[\s\=]+(\d+)/)[1];
            let mid = code.match(/DM5_MID[\s\=]+(\d+)/)[1];
            let dt = code.match(/DM5_VIEWSIGN_DT[\s\="]+([^"]+)/)[1];
            let sing = code.match(/DM5_VIEWSIGN[\s\="]+([^"]+)/)[1];
            let keyE = fun.ge("#dm5_key");
            let key = keyE.value;
            let resArr = [];
            for (let i = 1; i <= imagesNum; i++) {
                let searchParams = new URLSearchParams({
                    cid: cid,
                    page: i,
                    key: key,
                    language: 1,
                    gtk: 6,
                    _cid: cid,
                    _mid: mid,
                    _dt: dt,
                    _sign: sing
                });
                let api = `${chapterURL}chapterfun.ashx?${searchParams}`;
                let res = fetch(api).then(res => res.text()).then(text => {
                    let srcArr = fun.run(text);
                    return srcArr[0];
                });
                resArr.push(res);
            }
            return Promise.all(resArr)
        },
        getImgs: async (dom = document) => {
            let srcs = await _this.getSrcs(dom);
            return fun.createImgArray(srcs)
        },
        init: async () => {
            fun.showMsg(displayLanguage.str_135, 0);
            await _this.getImgs().then(async imgs => {
                let tE = fun.ge("#cp_img");
                tE.innerHTML = "";
                tE.append(...imgs);
                fun.hideMsg();
                await fun.lazyload();
            });
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#cp_img", 0],
            observer: "#cp_img>img",
            next: "//a[text()='下一章']",
            re: ".active.right-arrow,.view-paging",
            title: (dom) => fun.gt(".title", 1, dom).replace("首页 ", "").replace(/\s+/g, " ").trim(),
            hide: ".view-comment",
            preloadNextPage: 1
        },
        css: "body{overflow:unset!important}a[href^='javascript:Show'],.chapterpager{display:none!important;}",
        category: "comic autoPager"
    }, {
        name: "DM5/極速 條漫模式",
        host: ["www.dm5.com", "m.dm5.com", "www.dm5.cn", "m.dm5.cn", "en.dm5.com", "cnc.dm5.com", "hk.dm5.com", "www.1kkk.com", "m.1kkk.com", "tel.1kkk.com", "en.1kkk.com", "cnc.1kkk.com", "hk.1kkk.com"],
        enable: 1,
        reg: () => /^https?:\/\/(www|tel|en|cnc|hk|m)?\.?(dm5|1kkk)\.(com|cn)\/(m|ch|vol|other)[-_0-9]+\//.test(fun.url) && comicInfiniteScrollMode != 1,
        include: ["#barChapter"],
        imgs: "#barChapter>img",
        button: [4],
        insertImg: ["#barChapter", 2],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: "//a[text()='上一章']",
        customTitle: (dom = document) => fun.title("_", 2, dom),
        preloadNext: (nextDoc, obj) => fun.picPreload(fun.getImgSrcArr(obj.imgs, nextDoc), obj.customTitle(nextDoc), "next"),
        css: "body{overflow:unset!important}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "DM5/極速 條漫模式 自動翻頁",
        reg: () => /^https?:\/\/(www|tel|en|cnc|hk|m)?\.?(dm5|1kkk)\.(com|cn)\/(m|ch|vol|other)[-_0-9]+\//.test(fun.url) && comicInfiniteScrollMode == 1,
        include: ["#barChapter"],
        getSrcs: (dom) => fun.gae("img.load-src[data-src]", dom).map(e => e.dataset.src),
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            let imgs = _this.getImgs();
            let tE = fun.ge("#barChapter");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#barChapter", 0],
            observer: "#barChapter>img",
            next: "//a[text()='下一章']",
            re: ".view-paging",
            title: (dom) => fun.gt(".title", 1, dom).replace("首页 ", "").replace(/\s+/, " ").trim(),
            hide: ".view-comment",
            preloadNextPage: 1
        },
        css: "body{overflow:unset!important}",
        category: "comic autoPager"
    }, {
        name: "YYMANGA",
        enable: 1,
        host: ["www.yymanhua.com", "yymanhua.com"],
        reg: () => /^https?:\/\/(www\.)?yymanhua\.com\/m\d+/.test(fun.url) && comicInfiniteScrollMode != 1,
        include: ".reader-bottom-page-list",
        init: () => fun.XmanhuaUI(),
        imgs: (msg = 1) => {
            if (msg == 1) fun.showMsg(displayLanguage.str_05, 0);
            const {
                YYMANHUA_IMAGE_COUNT,
                YYMANHUA_CURL,
                YYMANHUA_CID,
                YYMANHUA_MID,
                YYMANHUA_VIEWSIGN_DT,
                YYMANHUA_VIEWSIGN
            } = _unsafeWindow;
            let fetchnUm = 0;
            let resArr = fun.arr(YYMANHUA_IMAGE_COUNT, (v, i) => {
                let searchParams = new URLSearchParams({
                    cid: YYMANHUA_CID,
                    page: i + 1,
                    key: "",
                    _cid: YYMANHUA_CID,
                    _mid: YYMANHUA_MID,
                    _dt: YYMANHUA_VIEWSIGN_DT,
                    _sign: YYMANHUA_VIEWSIGN
                });
                let apiUrl = `${YYMANHUA_CURL}chapterimage.ashx?${searchParams}`;
                return fetch(apiUrl).then(res => res.text()).then(res => {
                    if (msg == 1) fun.showMsg(`${displayLanguage.str_06}(${fetchnUm+=1}/${YYMANHUA_IMAGE_COUNT})`, 0);
                    return fun.run(res)[0];
                });
            });
            return Promise.all(resArr).then(arr => {
                if (msg == 1) fun.hideMsg();
                return arr;
            });
        },
        button: [4],
        insertImg: ["#cp_img", 2],
        autoDownload: [0],
        next: "//a[img[contains(@src,'reader-bottom-right-2')]][starts-with(@href,'/m')]",
        prev: "//a[img[contains(@src,'reader-bottom-right-1')]][starts-with(@href,'/m')]",
        customTitle: (dom = document) => fun.title("_", 2, dom).replace("漫畫", ""),
        preloadNext: async (nextDoc, obj) => {
            let code = fun.gst("YYMANHUA_IMAGE_COUNT", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(await obj.imgs(0), obj.customTitle(nextDoc), "next");
        },
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}.relative>a{display:none!important}.reader-img-con{padding:64px 0 50px !important;}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "YYMANGA 自動翻頁",
        reg: () => /^https?:\/\/(www\.)?yymanhua\.com\/m\d+/.test(fun.url) && comicInfiniteScrollMode == 1,
        include: ".reader-bottom-page-list",
        getSrcs: (dom) => {
            let code = fun.gst("YYMANHUA_IMAGE_COUNT", dom);
            let imagesNum = code.match(/YYMANHUA_IMAGE_COUNT[\s\=]+(\d+)/)[1];
            let chapterURL = code.match(/YYMANHUA_CURL[\s\="]+([^"]+)/)[1];
            let cid = code.match(/YYMANHUA_CID[\s\=]+(\d+)/)[1];
            let mid = code.match(/YYMANHUA_MID[\s\=]+(\d+)/)[1];
            let dt = encodeURIComponent(code.match(/YYMANHUA_VIEWSIGN_DT[\s\="]+([^"]+)/)[1]);
            let sing = code.match(/YYMANHUA_VIEWSIGN[\s\="]+([^"]+)/)[1];
            let resArr = [];
            for (let i = 1; i <= imagesNum; i++) {
                let searchParams = new URLSearchParams({
                    cid: cid,
                    page: i,
                    key: "",
                    _cid: cid,
                    _mid: mid,
                    _dt: dt,
                    _sign: sing
                });
                let api = `${chapterURL}chapterimage.ashx?${searchParams}`;
                let res = fetch(api).then(res => res.text()).then(text => {
                    let srcArr = fun.run(text);
                    return srcArr[0];
                });
                resArr.push(res);
            }
            return Promise.all(resArr)
        },
        getImgs: async (dom = document) => {
            let srcs = await _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            fun.XmanhuaUI();
            fun.showMsg(displayLanguage.str_135, 0);
            await _this.getImgs().then(async imgs => {
                let tE = fun.ge("#cp_img");
                tE.innerHTML = "";
                tE.append(...imgs);
                fun.hideMsg();
                await fun.lazyload();
            });
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#cp_img", 0],
            observer: "#cp_img>img",
            next: "//a[img[contains(@src,'reader-bottom-right-2')]][starts-with(@href,'/m')]",
            re: ".container",
            title: (dom) => {
                let code = fun.gst("YYMANHUA_CTITLE", dom);
                let title = code.match(/YYMANHUA_CTITLE[\s\="]+([^"]+)/)[1];
                return title;
            },
            preloadNextPage: 1
        },
        css: ".relative>a{display:none!important}.reader-img-con{padding:64px 0 50px !important;}",
        category: "comic autoPager"
    }, {
        name: "DM5/極速/Mangabz/Xmanhua/yymanhua/漫画人/漫本 手機版",
        host: ["www.dm5.com", "m.dm5.com", "www.dm5.cn", "m.dm5.cn", "en.dm5.com", "cnc.dm5.com", "hk.dm5.com", "www.1kkk.com", "m.1kkk.com", "tel.1kkk.com", "en.1kkk.com", "cnc.1kkk.com", "hk.1kkk.com", "www.mangabz.com", "mangabz.com", "www.xmanhua.com", "xmanhua.com", "www.yymanhua.com", "yymanhua.com", "www.manben.com", "www.manhuaren.com"],
        enable: 1,
        reg: () => /^https?:\/\/(www|tel|en|cnc|hk|m)?\.?(dm5|1kkk|mangabz|xmanhua|yymanhua|manhuaren|manben)\.(com|cn)\/(m|ch|vol|other)?[-_0-9]+\//.test(fun.url) && comicInfiniteScrollMode != 1,
        delay: 300,
        include: "//script[contains(text(),'newImgs')]",
        init: () => {
            if (fun.gae(".view-bottom-bar>li").length == 4) {
                fun.css(".view-bottom-bar>li:nth-child(n+2):nth-child(-n+3){display:none!important}.view-bottom-bar li{width:50%!important}");
            }
        },
        imgs: () => _unsafeWindow.newImgs,
        button: [4],
        insertImg: ["#cp_img,.main_img,#comicContain,.comic-list", 2],
        autoDownload: [0],
        next: () => {
            let next = fun.ge("//a[text()='下一章'] | //a[img[@alt='下一章']]");
            if (next) return /pushHistory/.test(next.href) ? location.origin + next.href.split("'")[1] : next.href;
            return null;
        },
        prev: "//a[text()='上一章'] | //a[img[@alt='上一章']]",
        customTitle: (dom = document) => {
            let host = fun.lh;
            if (/dm5|manhuaren|1kkk|mangabz|xmanhua|yymanhua/.test(host) && !/sixmanhua/.test(host)) {
                return fun.title("_", 2, dom);
            } else if (/sixmanhua/.test(host)) {
                return fun.title("_", 3, dom);
            } else if (/manben/.test(host)) {
                if (fun.ge("#comicTitle")) {
                    return fun.gt("#chapter", 1, dom) + " " + fun.gt(".title-comicHeading", 1, dom);
                } else {
                    return fun.title(" ", 2, dom);
                }
            }
        },
        preloadNext: async (nextDoc, obj) => {
            let code = fun.gst("newImgs", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(obj.imgs(), obj.customTitle(nextDoc), "next");
        },
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "DM5/極速/Mangabz/Xmanhua/yymanhua/漫画人/漫本 手機版 自動翻頁",
        reg: () => /^https?:\/\/(www|tel|en|cnc|hk|m)?\.?(dm5|1kkk|mangabz|xmanhua|yymanhua|manhuaren|manben)\.(com|cn)\/(m|ch|vol|other)?[-_0-9]+\//.test(fun.url) && comicInfiniteScrollMode == 1,
        delay: 300,
        include: "//script[contains(text(),'newImgs')]",
        getSrcs: (dom) => {
            let code = fun.gst("newImgs", dom);
            code = code.replace("eval", "");
            let text = fun.run(code);
            let arrText = text.replace(/var newImgs=|;$/g, "");
            let srcs = fun.run(arrText);
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            let imgs = _this.getImgs();
            let tE = fun.ge("#cp_img");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
            if (fun.gae(".view-bottom-bar>li").length == 4) {
                fun.css(".view-bottom-bar>li:nth-child(n+2):nth-child(-n+3){display:none!important}.view-bottom-bar li{width:50%!important}");
            }
            let b = fun.ge("body.viewbody");
            if (fun.lh.includes("mangabz") && b) {
                b.innerHTML = b.innerHTML.replace("<!--", "").replace("-->", "");
                $(".top-bar-tool").removeAttr("style");
                $(".bottom-bar").removeAttr("style");
                const showtoolbar = () => {
                    let t = fun.ge("body.toolbar");
                    if (t) {
                        $("body").removeClass("toolbar");
                    } else {
                        $('body').addClass("toolbar");
                    }
                };
                document.addEventListener('click', showtoolbar);
            }
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#cp_img", 0],
            observer: "#cp_img>img",
            next: (dom) => {
                let next = fun.ge("//a[text()='下一章'] | //a[img[@alt='下一章']]", dom, dom);
                if (next) {
                    let url = /pushHistory/.test(next.href) ? fun.lo + next.href.split("'")[1] : next.href;
                    if (!/-end/.test(url)) {
                        return url;
                    }
                }
                return null;
            },
            re: ".view-fix-top-bar-title,.top-title,.view-bottom-bar,.view-fix-bottom-bar,.bottom-bar-tool",
            title: (dom) => {
                let tt = fun.gt(".top-title", 1, dom);
                if (fun.lh.includes("xmanhua") && tt) {
                    return tt.replaceAll("?", "-").replace("XManhua-", "");
                } else if (fun.lh.includes("mangabz") && tt) {
                    return tt.replaceAll("?", "-").replace("Mangabz-", "");
                } else if (fun.lh.includes("yymanhua") && tt) {
                    return tt.replaceAll("?", "-").replace("YYManhua-", "");
                }
                return dom.title.replace(/,?_在线漫画.+/, "").replace("漫画", "").replace(/^[^_]+_/, "");
            },
            bF: (dom) => {
                let b = fun.ge("body.viewbody", dom);
                if (fun.lh.includes("mangabz") && b) {
                    b.innerHTML = b.innerHTML.replace("<!--", "").replace("-->", "");
                }
            },
            preloadNextPage: 1
        },
        category: "comic autoPager"
    }, {
        name: "动漫之家M",
        host: ["m.idmzj.com"],
        enable: 0,
        //reg: () => /m\.i?dmzj\.com\/view\/\d+\/\d+\.html/.test(fun.url) && comicInfiniteScrollMode != 1,
        reg: /^https?:\/\/m\.i?dmzj\.com\/view\/\d+\/\d+\.html/,
        init: "$('body').unbind('keydown');",
        imgs: () => {
            let code = fun.gst("initData");
            return fun.run(code.match(/page_url.+(\[.+\])/)[1]);
        },
        button: [4, "24%", 3],
        insertImg: ["#commicBox", 2],
        autoDownload: [0],
        next: ".afterChapter",
        prev: ".beforeChapter",
        customTitle: () => fun.title("-", 1),
        css: "#khdDown,.appTil,#m_r_bottom,#m_r_panelbox,.control_panel.alpha{display:none!important}",
        //infiniteScroll: true,
        category: "comic"
    }, {
        name: "动漫之家M 自動翻頁",
        enable: 0,
        reg: () => /^https?:\/\/m\.i?dmzj\.com\/view\/\d+\/\d+\.html/.test(fun.url) && comicInfiniteScrollMode == 1,
        getImgs: (dom = document) => {
            let code = fun.gst("initData", dom);
            let srcs = fun.run(code.match(/page_url.+(\[.+\])/)[1]);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            fun.run("$('body').unbind('keydown');");
            let imgs = _this.getImgs();
            let tE = fun.ge("#commicBox");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            observer: "#commicBox>img",
            pos: ["#commicBox", 0],
            next: (dom) => {
                let code = fun.gst("comic_id", dom).replaceAll('\"', '');
                let next_chap = code.search(/next_chap/);
                if (next_chap > -1) {
                    let cm = code.match(/comic_id:(\d+)/)[1];
                    let nm = code.match(/next_chap_id:(\d+)/)[1];
                    return fun.lo + "/view/" + cm + "/" + nm + ".html";
                } else {
                    return null;
                }
            },
            stop: async (dom) => {
                if (!fun.ge("//script[contains(text(),'page_url')]", dom)) {
                    let yes = await confirm(`Full Picture Load\n可能遇到 "请登录后观看！" 的情況。\n下一頁鏈結：\n${nextLink}\n是否前往下一頁？`);
                    if (yes) {
                        setTimeout(() => {
                            location.href = nextLink;
                        }, 1000);
                    }
                    return true;
                }
                return false;
            },
            re: "a.BarTit,.botNav .tc",
            title: (dom) => fun.gt(".BarTit", 1, dom),
            aF: (dom) => {
                let code = [...dom.scripts].find(s => s.innerHTML.includes("initData")).innerHTML;
                code = code.match(/mReader[^;]+;/)[0];
                fun.script(code, 0, 1);
            }
        },
        css: "#khdDown,.appTil,#m_r_bottom,#m_r_panelbox,.control_panel.alpha{display:none!important}",
        category: "comic autoPager"
    }, {
        name: "漫畫狗",
        host: ["dogemanga.com"],
        enable: 1,
        reg: /^https?:\/\/dogemanga\.com\/p\/[\w-]+/i,
        init: () => {
            fun.ge(".site-reader").setAttribute("class", "imgBox");
            fun.addUrlHtml(location.origin, ".imgBox", 1, "首頁");
            _this.next() ? fun.addUrlHtml(_this.next(), ".imgBox", 1) : null;
        },
        imgs: () => fun.gae(".site-reader__image").map(e => e.dataset.pageImageUrl),
        button: [4, "24%", 1],
        insertImg: [".imgBox", 2],
        autoDownload: [0],
        next: () => {
            let next = fun.ge("//select[@data-kind='publication']/option[@selected]/preceding-sibling::option[1]");
            return next ? next.value : null;
        },
        prev: 1,
        customTitle: () => fun.title(" - 漫畫狗"),
        css: ".imgBox{height:auto!important}.fixed-bottom{display:none!important}",
        category: "comic"
    }, {
        name: "明日方舟泰拉记事社",
        host: ["terra-historicus.hypergryph.com"],
        enable: 1,
        reg: /^https?:\/\/terra-historicus\.hypergryph\.com\/comic\/\d+\/episode\/\d+/,
        imgs: () => {
            let max = fun.gt(".HG_COMIC_READER_indicator>div:last-child");
            let fetchNum = 0;
            return fun.arr(max, (v, i) => fetch(`/api${fun.lp}/page?pageNum=${(i + 1)}`).then(res => res.json()).then(json => {
                fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${max}`, 0);
                return json.data.url;
            }));
        },
        capture: () => _this.imgs(),
        autoDownload: [0],
        next: () => {
            let next = fun.ge("//a[text()='下一话']") || fun.ge("//a[text()='下一张']");
            return next ? next.href : null;
        },
        prev: 1,
        customTitle: async () => {
            await fun.waitEle(".HG_COMIC_READER_episodeTitle");
            return fun.gt(".HG_COMIC_READER_comicTitle") + " - " + fun.gt(".HG_COMIC_READER_episodeTitle");
        },
        category: "comic"
    }, {
        name: "Manhuagui看漫画M",
        host: ["m.manhuagui.com"],
        enable: 1,
        reg: () => /^https?:\/\/m\.manhuagui\.com\/comic\/\d+\/\d+.html/.test(fun.url) && comicInfiniteScrollMode != 1,
        json: (dom = document) => {
            let code = fun.gst("x6c", dom).trim().slice(26);
            return JSON.parse(fun.run(code).slice(11, -12));
        },
        init: async () => {
            await fun.waitEle("#manga img[src*=hamreus]");
            siteJson = _this.json();
        },
        imgs: (json = siteJson) => json.images.map(e => `https://i.hamreus.com${e}?e=${json.sl.e}&m=${json.sl.m}`),
        button: [4],
        insertImg: ["#manga", 2],
        autoDownload: [0],
        next: () => siteJson.nextId == 0 ? null : fun.ge("#mangaTitle a").href + siteJson.nextId + ".html",
        prev: "//a[text()='上一章']",
        customTitle: (dom = document) => fun.gt("#mangaTitle", 1, dom),
        preloadNext: (nextDoc, obj) => {
            let json = obj.json(nextDoc);
            let arr = obj.imgs(json);
            fun.picPreload(arr, obj.customTitle(nextDoc), "next");
        },
        css: ".action-list li{width:50% !important}#action>ul>li:nth-child(n+2):nth-child(-n+3),.manga-page,.clickforceads{display:none !important}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "Manhuagui看漫画M 自動翻頁",
        host: ["m.manhuagui.com"],
        reg: () => /^https?:\/\/m\.manhuagui\.com\/comic\/\d+\/\d+.html/.test(fun.url) && comicInfiniteScrollMode == 1,
        json: (dom = document) => {
            let code = fun.gst("x6c", dom).trim().slice(26);
            let json = JSON.parse(fun.run(code).slice(11, -12));
            return json;
        },
        getSrcs: (dom) => {
            let json = _this.json(dom);
            let srcs = json.images.map(e => `https://i.hamreus.com${e}?e=${json.sl.e}&m=${json.sl.m}`);
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            await fun.waitEle("#manga img[src*=hamreus]");
            let imgs = _this.getImgs();
            let tE = fun.ge("#manga");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#manga", 0],
            observer: "#manga>img",
            next: (dom, r = 1) => {
                let json = _this.json(dom);
                if (json.nextId == 0) {
                    if (r === 1) {
                        let e = fun.ge("a[data-action='chapter.next']");
                        e.href = fun.ge("#mangaTitle a").href;
                        e.innerText = "返回目录";
                    }
                    return null;
                } else {
                    return fun.gu("#mangaTitle a") + json.nextId + ".html";
                }
            },
            re: "#mangaTitle",
            title: (dom) => fun.ge("#mangaTitle>a", dom)?.nextSibling?.data?.replace(/\s+/g, " ")?.trim(),
            aF: (dom) => {
                let json = _this.json(dom);
                let cUrl = fun.gu("#mangaTitle a");
                let ne = fun.ge("a[data-action='chapter.next']");
                ne.href = cUrl + json.nextId + ".html";
                let pe = fun.ge("a[data-action='chapter.prev']");
                pe.href = cUrl + json.prevId + ".html";
            },
            preloadNextPage: 1
        },
        css: ".action-list li{width:50% !important}#action>ul>li:nth-child(n+2):nth-child(-n+3),.manga-page,.clickforceads{display:none !important}",
        category: "comic autoPager"
    }, {
        name: "Manhuagui看漫画M 点击查看下20条记录",
        host: ["m.manhuagui.com"],
        reg: /^https?:\/\/m\.manhuagui\.com\/(update|list|rank|user)\//,
        loadMore: "#more:not([style*=none])>.more-go",
        openInNewTab: "#detail a:not([target=_blank])",
        category: "autoPager"
    }, {
        name: "Manhuagui看漫画",
        host: ["www.manhuagui.com", "tw.manhuagui.com", "www.mhgui.com"],
        enable: 1,
        reg: () => /^https?:\/\/((www|tw)\.manhuagui\.com)|www\.mhgui\.com\/comic\/\d+\/\d+.html/.test(fun.url) && comicInfiniteScrollMode != 1,
        init: "$(document).unbind('keydown');",
        imgs: (dom = document) => {
            let code = fun.gst("x6c", dom).slice(26, -1);
            let json = fun.run(fun.run(code).slice(11, -11));
            let domain = "https://i.hamreus.com";
            return json.files.map(e => `${domain+json.path+e}?e=${json.sl.e}&m=${json.sl.m}`);
        },
        button: [4],
        insertImg: ["#tbBox", 2],
        autoDownload: [0],
        next: () => {
            const {
                cInfo
            } = _unsafeWindow;
            return cInfo.nextId == 0 ? null : location.origin + "/comic/" + cInfo.bid + "/" + cInfo.nextId + ".html";
        },
        prev: "//a[text()='上一章']",
        customTitle: (dom = document) => fun.gt("h1>a", 1, dom) + " - " + fun.gt("h2", 1, dom),
        preloadNext: true,
        css: ".tbCenter{max-width:1400px!important;width:auto!important;height:auto!important}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "Manhuagui看漫画 自動翻頁",
        host: ["www.manhuagui.com", "tw.manhuagui.com", "www.mhgui.com"],
        reg: () => /^https?:\/\/((www|tw)\.manhuagui\.com)|www\.mhgui\.com\/comic\/\d+\/\d+.html/.test(fun.url) && comicInfiniteScrollMode == 1,
        json: (dom = document) => {
            let code = fun.gst("x6c", dom).slice(26, -1);
            let json = fun.run(fun.run(code).slice(11, -11));
            return json;
        },
        getSrcs: (dom) => {
            let json = _this.json(dom);
            let domain = "https://i.hamreus.com";
            let srcs = json.files.map(e => `${domain+json.path+e}?e=${json.sl.e}&m=${json.sl.m}`);
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            let imgs = _this.getImgs();
            let tE = fun.ge("#tbBox");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
            fun.run("$(document).unbind('keydown');");
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#tbBox", 0],
            observer: "#tbBox img",
            next: (dom, r = 1) => {
                let json = _this.json(dom);
                let n = json.nextId;
                if (n == 0) {
                    if (r === 1) {
                        fun.ge("#pagination").outerHTML = fun.ge(".main-btn").outerHTML;
                    }
                    return null;
                } else {
                    return fun.url.replace(/\d+\.html$/, "") + n + ".html";
                }
            },
            re: ".title h2",
            title: (dom) => _this.json(dom).cname,
            preloadNextPage: 1
        },
        css: ".tbCenter{max-width:1400px!important;width:auto!important;height:auto!important}#prev,#pageSelect,#next,.pager>*:not([onclick]){display:none!important;}",
        category: "comic autoPager"
    }, {
        name: "包子漫画 閱讀",
        host: ["cn.baozimh.com", "cn.webmota.com", "tw.baozimh.com", "tw.webmota.com", "www.baozimh.com", "www.webmota.com", "cn.kukuc.co", "tw.kukuc.co", "www.kukuc.co", "tw.czmanga.com", "cn.czmanga.com", "www.czmanga.com", "tw.dzmanga.com", "cn.dzmanga.com", "www.dzmanga.com", "tw.dociy.net", "cn.dociy.net", "www.dociy.net", "tw.twmanga.com", "cn.twmanga.com", "www.twmanga.com"],
        enable: 1,
        reg: () => fun.checkUrl({
            e: "//title[contains(text(),'包子')]",
            p: /^\/comic\/chapter\/[^/]+\/\w+\.html/i
        }) && comicInfiniteScrollMode != 1,
        init: async () => {
            fun.addMutationObserver(() => fun.remove("div[id*='ads'],div[id='interstitial_fade'],iframe"));
            fun.run("document['onkeydown']=null;");
            await fun.getNP(".comic-contain>div:not(.mobadsq)", "//a[contains(text(),'下一頁') or contains(text(),'下一页')]", null, ".comic-chapter>.next_chapter,.bottom-bar-tool");
        },
        imgs: (dom = document) => [...new Set(fun.gae(".comic-contain amp-img", dom).map(e => e.dataset.src ?? e.getAttribute("src")))],
        button: [4],
        insertImg: [".comic-contain", 2],
        autoDownload: [0],
        next: "//div[@class='next_chapter']/a[contains(text(),'下一話') or contains(text(),'下一话')]",
        prev: 1,
        customTitle: (dom = document) => fun.title(" - ", 3, dom).replace(/\(\d+\/\d+\)/, ""),
        preloadNext: true,
        css: "div[id*='ads'],div[id='interstitial_fade'],iframe,.chapter-main.scroll-mode~*:not(.next_chapter):not(.bottom-bar){display:none!important}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "包子漫画 閱讀 自動翻頁",
        reg: () => fun.checkUrl({
            e: "//title[contains(text(),'包子')]",
            p: /^\/comic\/chapter\/[^/]+\/\w+\.html/i
        }) && comicInfiniteScrollMode == 1,
        getSrcs: (dom) => fun.gae(".comic-contain amp-img", dom).map(e => e.dataset.src ?? e.getAttribute("src")),
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            if (fun.ge(".FullPictureLoadImage")) {
                let currentLastSrc = fun.gae(".FullPictureLoadImage").at(-1).dataset.src;
                let nextFirstNum = Number(srcs[0].match(/(\d)\.\w+$/)[1]);
                if (/\/(50|100|150|200|250|300)\.[a-z]{3,5}$/i.test(currentLastSrc) && nextFirstNum == 7 && nextFirstNum != 1) {
                    srcs = srcs.slice(4);
                }
            }
            return fun.createImgArray(srcs);
        },
        init: async () => {
            fun.addMutationObserver(() => fun.remove("div[id*='ads'],div[id='interstitial_fade'],iframe"));
            fun.run("document['onkeydown']=null;");
            let imgs = _this.getImgs();
            let tE = fun.ge(".comic-contain");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: [".comic-contain", 0],
            observer: ".comic-contain img",
            next: (dom) => {
                let next = fun.ge("a#next-chapter", dom);
                return next ? next.pathname : null;
            },
            re: "//div[@class='text']/span[@class='title'] | //div[@class='comic-chapter']/div[@class='next_chapter'] | //div[@class='bottom-bar-tool']",
            title: (dom) => {
                let titleText = fun.gt("span.title", 1, dom).replace(/\(\d\/\d+\)/, "");
                return {
                    ok: /\/\d+_\d+\.html$/.test(nextLink),
                    text: titleText
                }
            },
            hide: ".comic-chapter>.l-content",
            preloadNextPage: 1
        },
        css: "div[id*='ads'],div[id='interstitial_fade'],iframe,.chapter-main.scroll-mode~*:not(.next_chapter,.bottom-bar,.l-content),.mobadsq{display:none!important}.comic-contain{width: 100%;margin: 0 auto;max-width:970px;",
        category: "comic autoPager"
    }, {
        name: "包子漫画 展開目錄",
        icon: 0,
        key: 0,
        reg: () => fun.checkUrl({
            e: "//title[contains(text(),'包子')]",
            p: /^\/comic\/[-\w]+$/i
        }),
        autoClick: ["#button_show_all_chatper", 1000],
        category: "comic"
    }, {
        name: "包子漫画，鏈接新分頁打開",
        icon: 0,
        key: 0,
        reg: () => fun.checkUrl({
            e: "//title[contains(text(),'包子')]"
        }),
        openInNewTab: ".comics-card a:not([target=_blank]),.bookshelf-items a:not(.remove-img):not([target=_blank])",
        category: "comic"
    }, {
        name: "Komiic",
        host: ["komiic.com"],
        enable: 0,
        reg: /^https?:\/\/komiic\.com\//,
        init: async () => await fun.waitEle(".v-breadcrumbs"),
        imgs: "[data-kid]>img",
        scrollEle: () => fun.aotoScrollEles("[data-kid]", (ele) => isEle(fun.ge("img", ele)), 10000),
        capture: async (url = document.URL) => {
            if (!url.includes("/chapter/")) return [];
            fun.showMsg(displayLanguage.str_05, 0);
            let chapterId = url.match(/chapter\/(\d+)\/images/)[1];
            let body = {
                operationName: "imagesByChapterId",
                variables: {
                    chapterId: `${chapterId}`
                },
                query: "query imagesByChapterId($chapterId: ID!) {\n  imagesByChapterId(chapterId: $chapterId) {\n    id\n    kid\n    height\n    width\n    __typename\n  }\n}\n"
            };
            let json = await fetch("/api/query", {
                "headers": {
                    "content-type": "application/json"
                },
                "body": JSON.stringify(body),
                "method": "POST"
            }).then(res => res.json());
            debug("\nimages JSON\n", json);
            return json.data.imagesByChapterId.map(e => "https://komiic.com/api/image/" + e.kid);
        },
        SPA: () => document.URL.includes("/chapter/"),
        next: async (url = document.URL) => {
            if (!url.includes("/chapter/")) return null;
            let mhId = url.match(/comic\/(\d+)/)[1];
            let body = {
                operationName: "chapterByComicId",
                variables: {
                    comicId: `${mhId}`
                },
                query: "query chapterByComicId($comicId: ID!) {\n  chaptersByComicId(comicId: $comicId) {\n    id\n    serial\n    type\n    dateCreated\n    dateUpdated\n    size\n    __typename\n  }\n}\n"
            };
            let json = await fetch("/api/query", {
                "headers": {
                    "content-type": "application/json"
                },
                "body": JSON.stringify(body),
                "method": "POST"
            }).then(res => res.json());
            debug("\nchapter JSON\n", json);
            let chapterId = url.match(/chapter\/(\d+)\/images/)[1];
            let chapters = json.data.chaptersByComicId;
            let nextUrl;
            for (let i = 0; i < chapters.length; i++) {
                if (new RegExp(chapterId).test(chapters[i].id)) {
                    try {
                        let nextId = chapters[i + 1].id;
                        nextUrl = siteUrl.replace(new RegExp(`/${chapterId}/`), `/${nextId}/`).replace(/\?page=\d+/, "");
                    } catch {
                        nextUrl = null;
                    }
                    break;
                }
            }
            return nextUrl;
        },
        observerURL: true,
        prev: 1,
        customTitle: () => {
            let textArr = fun.gt(".v-breadcrumbs").split("\n");
            return textArr[1] + " - " + textArr[2];
        },
        fetch: 1,
        category: "comic"
    }, {
        name: "LINE WEBTOON / 咚漫",
        host: ["www.webtoons.com", "www.dongmanmanhua.cn"],
        enable: 0,
        reg: /^https?:\/\/www\.(webtoons|dongmanmanhua)\.(com|cn)\/[^&]+&episode/,
        imgs: "._images[data-url]",
        autoDownload: [0],
        next: "//div[@class='episode_cont']//li[a[starts-with(@class,'on')]]/following-sibling::li[1]/a",
        prev: "//div[@class='episode_cont']//li[a[starts-with(@class,'on')]]/preceding-sibling::li[1]/a",
        customTitle: () => fun.title("|", 3).replace(/ - \d+/, "").replace("|", " - "),
        category: "comic"
    }, {
        name: "LINE WEBTOON 目錄聚集所有章節",
        host: ["www.webtoons.com"],
        enable: 0,
        icon: 0,
        key: 0,
        reg: /^https?:\/\/www\.webtoons\.com\/.+\/list\?title_no=\d+/,
        init: "fun.getNP('._episodeItem',\"//div[@class='paginate']/a[span[@class='on']]/following-sibling::a[1]\",null,'.paginate',0,null,0);",
        category: "comic"
    }, {
        name: "動漫狂",
        host: ["www.cartoonmad.com", "cc.fun8.us"],
        enable: 1,
        reg: () => /^https?:\/\/www\.cartoonmad\.com\/comic\/\d+\.html|^https?:\/\/cc\.fun8\.us\/post\/\d+\.html/.test(fun.url) && comicInfiniteScrollMode != 1,
        exclude: "#info table[align]",
        init: () => fun.cartoonmadUI(),
        imgs: (dom = document) => {
            let imgDir = fun.ge("img[onload],img[oncontextmenu]", dom).src.match(/.+\//)[0];
            let max = fun.ge(".onpage", dom).parentNode.lastElementChild.previousElementSibling.innerText;
            fun.remove("//tr[td[a[@class='onpage']]]");
            return fun.arr(max, (v, i) => imgDir + String((i + 1)).padStart(3, "0") + ".jpg");
        },
        button: [4],
        insertImg: ["//td[a[img[@oncontextmenu]]] | //td[a[img[@oncontextmenu]]]", 2],
        autoDownload: [0],
        next: "//td[@width='150' and a[img[@src='/image/rad.gif']]]/a | //a[b]",
        prev: "//td[@width='150' and a[img[@src='/image/rad1.gif']]]/a",
        customTitle: async (dom = document) => {
            let src = fun.ge("img[onload],img[oncontextmenu]", dom).src;
            let comicId = new URL(src).pathname.split("/")[3];
            let comicIdData = JSON.parse(localStorage.getItem("comicIdData")) ?? {};
            if (comicIdData[comicId] === null || comicIdData[comicId] === undefined) {
                if (/TW|HK/.test(language)) {
                    fun.showMsg("首次取得漫畫名稱", 0);
                } else if (/zh/.test(language)) {
                    fun.showMsg("首次取得漫画名称", 0);
                } else {
                    fun.showMsg("First time Get ComicName", 0);
                }
                let comicName = await fun.xhrDoc(`https://www.cartoonmad.com/comic/${comicId}.html`, {
                    headers: {
                        "User-Agent": PCUA
                    }
                }).then(comicDoc => fun.ge("meta[name=Keywords]", comicDoc).content.split(",")[0]);
                comicIdData[comicId] = comicName;
                localStorage.setItem("comicIdData", JSON.stringify(comicIdData));
                return comicName + " - " + dom.title;
            } else {
                let comicName = comicIdData[comicId];
                return comicName + " - " + dom.title;
            }
        },
        preloadNext: true,
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "動漫狂 自動翻頁",
        reg: () => /^https?:\/\/www\.cartoonmad\.com\/comic\/\d+\.html|^https?:\/\/cc\.fun8\.us\/post\/\d+\.html/.test(fun.url) && comicInfiniteScrollMode == 1,
        exclude: "#info table[align]",
        getSrcs: (dom) => {
            let imgDir = fun.ge("img[onload],img[oncontextmenu]", dom).src.match(/.+\//)[0];
            let max = fun.ge(".onpage", dom).parentNode.lastElementChild.previousElementSibling.innerText;
            let srcs = fun.arr(max, (v, i) => imgDir + String((i + 1)).padStart(3, "0") + ".jpg");
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            fun.cartoonmadUI();
            let imgs = _this.getImgs();
            let tE = fun.ge("//td[a[img[@oncontextmenu]]] | //td[a[img[@oncontextmenu]]]");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
            fun.remove("//tr[td[a[@class='onpage']]]");
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["//td[img]", 0],
            observer: "//td[img]/img",
            next: "//td[@width='150' and a[img[@src='/image/rad.gif']]]/a | //a[b]",
            aF: (dom) => {
                fun.gae("//tr[td[@bgcolor='#EAEAEA']] | //tr[td[@bgcolor='#EBEBEB']]").forEach(e => (e.innerHTML = fun.ge("//tr[td[@bgcolor='#EAEAEA']] | //tr[td[@bgcolor='#EBEBEB']]", dom, dom).innerHTML));
                fun.remove("//td[div[@id='sidebar-follow']] | //td[ins[@class='adsbygoogle']] | //tr[td[script]] | //select");
            },
            preloadNextPage: 1
        },
        category: "comic autoPager"
    }, {
        name: "動漫啦",
        host: ["www.dongman.la"],
        enable: 0,
        reg: /^https?:\/\/www\.dongman\.la\/manhua\/chapter\/\d+\/\d+\//,
        imgs: (link = siteUrl, msg = 1, request = 0) => {
            let links = [link.replace("all.html", "") + "all.html"];
            return fun.getImgA(".imgListBox img", links, 0, null, msg, request);
        },
        button: [4],
        insertImg: [".imgListBox", 2],
        autoDownload: [0],
        next: "//a[label[text()='下一章']][contains(@href,'chapter')]",
        prev: "//a[label[text()='上一章']][contains(@href,'chapter')]",
        customTitle: (dom = document) => fun.attr("meta[name='description']", "content", dom),
        preloadNext: async (nextDoc, obj) => fun.picPreload(await obj.imgs(nextLink, 0, 1), obj.customTitle(nextDoc), "next"),
        css: ".mdui-container .mdui-col-xs-4:nth-child(2){display:none!important;}.mdui-col-xs-4{width:50%!important}",
        category: "comic"
    }, {
        name: "動漫戲說",
        host: ["comic.acgn.cc"],
        enable: 0,
        reg: /^https?:\/\/comic\.acgn\.cc\/view/,
        imgs: (dom = document) => fun.gae(".pic[_src][id]", dom).map(e => e.getAttribute("_src")),
        button: [4],
        insertImg: ["#pic_list", 2],
        autoDownload: [0],
        next: ".display_right>a",
        prev: ".display_left>a",
        customTitle: (dom = document) => fun.gt(".hotrmtexth1>a", 1, dom),
        preloadNext: true,
        css: ".btn_wrap{display:none!important}",
        category: "comic"
    }, {
        name: "国漫吧",
        host: ["www.guoman8.cc", "m.guoman8.cc"],
        enable: 1,
        reg: () => /^https?:\/\/(www|m)\.guoman8\.cc\/\d+\/\d+\.html$/.test(fun.url) && comicInfiniteScrollMode != 1,
        init: () => setTimeout(() => fun.run("$(document).off();"), 5000),
        imgs: () => {
            const {
                cInfo,
                pageConfig
            } = _unsafeWindow;
            return cInfo.fs.map(e => /^http/.test(e) ? e : location.protocol + "//" + pageConfig.host.auto[0] + e);
        },
        button: [4],
        insertImg: ["//td[img[@id='manga']]", 2],
        autoDownload: [0],
        next: "a.nextC:not([href^=java])",
        prev: ".prevC",
        customTitle: () => {
            const {
                cInfo
            } = _unsafeWindow;
            return cInfo.btitle + " - " + cInfo.ctitle;
        },
        preloadNext: async (nextDoc, obj) => {
            let code = fun.gst("cInfo", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(obj.imgs(), obj.customTitle(), "next");
        },
        css: ".action-list li{width:50%!important}#action>ul>li:nth-child(n+2):nth-child(-n+3),.bd_960_90,body>section,#action~*:not(#pageNo),footer~*{display:none!important}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "国漫吧 自動翻頁",
        reg: () => /^https?:\/\/(www|m)\.guoman8\.cc\/\d+\/\d+\.html$/.test(fun.url) && comicInfiniteScrollMode == 1,
        json: (dom) => {
            let code = fun.gst("eval", dom);
            let codeText = code.match(/eval(\(.+\)\))/)[0].slice(4);
            let objText = fun.run(codeText);
            objText = objText.replace(/var\scInfo\s?=|;/g, "");
            let json = fun.run(objText);
            return json;
        },
        getSrcs: (dom) => {
            let json = _this.json(dom);
            const {
                pageConfig
            } = _unsafeWindow;
            let srcs = json.fs.map(e => /^http/.test(e) ? e : "//" + pageConfig.host.auto[0] + e);
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            let imgs = _this.getImgs();
            let tE = fun.ge("//td[img[@id='manga']]");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
            setTimeout(() => fun.run("$(document).off();"), 5000);
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["//td[img]", 0],
            observer: "//td[img]/img",
            next: (dom, r = 1) => {
                let nextE = fun.ge("a.nextC:not([href^=java])", dom);
                if (nextE) {
                    return nextE.href;
                } else {
                    if (r === 1) {
                        let curl = fun.lp.replace(/\d+\/$|\d+\.html$/, "");
                        let mn = fun.ge("a.nextC");
                        if (mn) {
                            mn.href = curl;
                            mn.innerText = "返回目录";
                        }
                        if (fun.lh === "www.guoman8.cc") {
                            mn.remove();
                            let pn = fun.ge("//a[text()='下一章']");
                            pn.setAttribute("onclick", "");
                            pn.href = fun.ge("//a[text()='返回目录']").pathname;
                            pn.innerText = "返回目录";
                        }
                    }
                    return null;
                }
            },
            re: ".title h2,.main-btn,#mangaTitle,#action",
            title: (dom) => _this.json(dom).ctitle,
            preloadNextPage: 1
        },
        css: ".action-list li{width:50%!important}#imgLoading,#manga,.action,#action>ul>li:nth-child(n+2):nth-child(-n+3),.bd_960_90,body>section,#action~*:not(#pageNo,.FullPictureLoadMsg),footer~*:not(.FullPictureLoadMsg),#prev,#pageSelect,#next,#pager>*:not([onclick]),#pager>*[onclick*='next()'],.backToTop~div[style*='overflow']{display:none!important}",
        category: "comic autoPager"
    }, {
        name: "古风漫画网",
        host: ["www.gufengmh.com", "m.gufengmh.com", "www.gufengmh9.com", "m.gufengmh9.com"],
        enable: 1,
        reg: () => /^https?:\/\/(www|m)\.gufengmh\d?\.com\/manhua\/\w+\/\d+\.html/.test(fun.url) && comicInfiniteScrollMode != 1,
        init: () => {
            fun.run("$(document).off();$('#images').off();");
            fun.remove("#skin");
            fun.createImgBox("#images", 2);
        },
        imgs: () => {
            const {
                chapterImages,
                SinConf,
                chapterPath
            } = _unsafeWindow;
            return chapterImages.map(e => SinConf.resHost[0].domain + "/" + chapterPath + e);
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#images"], 2
        ],
        autoDownload: [0],
        next: () => {
            const {
                nextChapterData,
                comicUrl
            } = _unsafeWindow;
            return nextChapterData?.id > 0 ? comicUrl + nextChapterData.id + ".html" : null;
        },
        prev: "//a[contains(text(),'上一章')]",
        customTitle: (dom = document) => {
            if (/^https?:\/\/www/.test(siteUrl)) {
                let arr = fun.gt(".title", 1, dom).split(" / ");
                return arr[0] + " - " + arr[1];
            } else {
                let code = fun.gst("SinMH.initChapter", dom);
                let arr = code.match(/SinMH.initChapter\(([^\)]+)\)/)[1].replaceAll('"', "").split(",");
                return arr[3] + " - " + arr[1];
            }
        },
        preloadNext: async (nextDoc, obj) => {
            let title;
            /^https?:\/\/www/.test(siteUrl) ? title = nextDoc.title.split("在线")[0] : title = obj.customTitle(nextDoc);
            let code = fun.gst("chapterImages", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(obj.imgs(), title, "next");
        },
        css: ".nav-pagination,.pageSelect,.nav-pagination,.img_land_prev,.img_land_next,#action li:nth-child(2),#action li:nth-child(3),.control_bottom~*,.chapter-view~*:not(.footer):not([id^='pv-'],[class^='pv-'],[id^='pagetual'],[class^='pagetual'],#comicRead,#fab,[id^='FullPictureLoad'],[class^='FullPictureLoad'],[class^=fancybox]),.img_info{display:none!important}#action li{width:50%!important}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "古风漫画网 自動翻頁",
        reg: () => /^https?:\/\/(www|m)\.gufengmh\d?\.com\/manhua\/\w+\/\d+\.html/.test(fun.url) && comicInfiniteScrollMode == 1,
        getSrcs: (dom) => {
            let code = fun.gst("chapterImages", dom);
            let imagesArrText = code.match(/chapterImages[\s=]+([^;]+)/)[1];
            let cImages = fun.run(imagesArrText);
            let cPath = code.match(/chapterPath[\s="]+([^"]+)/)[1];
            let domain = code.match(/pageImage[\s="]+(https?:\/\/\w+\.\w+\.\w+\/)/)[1];
            let srcs = cImages.map(e => domain + cPath + e);
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            fun.run("$(document).off();$('#images').off();");
            fun.remove("#skin");
            let tE = fun.createImgBox("#images", 2);
            fun.remove("#images");
            let imgs = _this.getImgs();
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            script: "//script[contains(text(),'chapterImages')]",
            ele: (dom) => _this.getImgs(dom),
            pos: ["#FullPictureLoadMainImgBox", 0],
            observer: "#FullPictureLoadMainImgBox>img",
            next: (dom, r = 1) => {
                let code = fun.gst("nextChapterData", dom);
                let nextText = code.match(/nextChapterData[\s=]+([^;]+)/)[1];
                let cUrlText = code.match(/comicUrl[\s="]+([^"]+)/)[1];
                let nextrData = JSON.parse(nextText);
                if (nextrData?.id > 0) {
                    return cUrlText + nextrData.id + ".html";
                } else {
                    if (/^m\./.test(fun.lh) && r === 1) {
                        let n = fun.ge("//a[text()='下一章']");
                        n.href = fun.lp.replace(/\d+\.html$/, "");
                        n.innerText = "返回目录";
                    }
                    return null;
                }
            },
            re: ".title,.BarTit",
            title: (dom) => {
                if (/^https?:\/\/www/.test(siteUrl)) {
                    return fun.gt(".title>h1>a", 1, dom) + " - " + fun.gt(".title>h2", 1, dom);
                } else {
                    let code = fun.gst("SinMH.initChapter", dom);
                    let arr = code.match(/SinMH.initChapter\(([^\)]+)\)/)[1].replaceAll('"', "").split(",");
                    return arr[1];
                }
            },
            hide: ".comic-comment,.chapter-content+.imgBox",
            preloadNextPage: 1
        },
        css: ".nav-pagination,.pageSelect,.nav-pagination,.img_land_prev,.img_land_next,#action li:nth-child(2),#action li:nth-child(3),.control_bottom~*,.chapter-view~*:not(.footer):not([id^='pv-'],[class^='pv-'],[id^='pagetual'],[class^='pagetual'],#comicRead,#fab,[id^='FullPictureLoad'],[class^='FullPictureLoad'],[class^=fancybox]),.img_info{display:none!important}#action li{width:50%!important}",
        category: "comic autoPager"
    }, {
        name: "漫画456",
        host: ["www.manhua456.com"],
        enable: 0,
        reg: /^https?:\/\/www\.manhua456\.com\/manhua\/\w+\/\d+\.html/,
        init: async () => {
            await fun.waitVar("SinConf");
            fun.run("setTimeout(()=>{$(document).unbind('keyup');$(document).unbind('keydown')},4000)");
        },
        imgs: (frame = _unsafeWindow) => {
            const {
                SinConf,
                chapterImages,
                chapterPath
            } = frame;
            let host = SinConf.resHost1 ?? SinConf.resHost[0].domain;
            return chapterImages.map(e => /^http/.test(e) ? e : host + "/" + chapterPath + e);
        },
        button: [4],
        insertImg: ["#images", 2],
        autoDownload: [0],
        next: () => {
            const {
                nextChapterData,
                comicUrl
            } = _unsafeWindow;
            if (nextChapterData?.id > 0) {
                let url = new URL(nextChapterData.url);
                return url.protocol != location.protocol ? url.href.replace(url.protocol, location.protocol) : url;
            }
            return null;
        },
        prev: "//a[text()='上一章']",
        customTitle: (dom) => fun.title(" - ", 3, dom),
        preloadNext: () => {
            fun.iframe(nextLink, {
                waitVar: "SinConf",
                cb: async (dom, frame) => {
                    let srcs = _this.imgs(frame);
                    let text = _this.customTitle(dom);
                    fun.picPreload(srcs, text, "next");
                }
            });
        },
        css: ".img_land_prev,.img_land_next{display:none!important}",
        category: "comic"
    }, {
        name: "漫画456M m.manhua456.com",
        host: ["m.manhua456.com"],
        enable: 0,
        reg: /^https?:\/\/m\.manhua456\.com\/manhua\/\w+\/\d+\.html/,
        init: async () => {
            await fun.waitVar("pageTitle");
            await fun.waitVar("jQuery");
            fun.run("jQuery('#images').unbind('click');");
        },
        imgs: (frame = _unsafeWindow) => {
            const {
                chapterImages,
                SinConf,
                chapterPath
            } = frame;
            let host = SinConf.resHost1 ?? SinConf.resHost[0].domain;
            return chapterImages.map(e => /^http/.test(e) ? e : host + "/" + chapterPath + e);
        },
        button: [4],
        insertImg: ["#images", 2],
        next: () => {
            const {
                nextChapterData,
                comicUrl
            } = _unsafeWindow;
            if (nextChapterData?.id > 0) {
                let url = new URL(nextChapterData.url);
                return url.protocol != location.protocol ? url.href.replace(url.protocol, location.protocol) : url;
            }
            return null;
        },
        prev: "//a[text()='上一章']",
        customTitle: (frame = _unsafeWindow) => {
            const {
                pageTitle
            } = frame;
            let s = pageTitle.split(" - ");
            return s[1] + " - " + s[0];
        },
        preloadNext: () => {
            fun.iframe(nextLink, {
                waitVar: "pageTitle",
                cb: async (dom, frame) => {
                    let srcs = _this.imgs(frame);
                    let text = _this.customTitle(frame);
                    fun.picPreload(srcs, text, "next");
                }
            });
        },
        css: ".img_land_prev,.img_land_next{display:none!important}",
        category: "comic"
    }, {
        name: "漫画1234",
        host: ["www.gmh1234.com", "m.gmh1234.com"],
        enable: 0,
        reg: /^https?:\/\/(www|m)\.\wmh1234\.com\/comic\/\d+\/\d+\.html/i,
        init: async () => {
            await fun.waitVar("chapterImages", 600);
            fun.run("$(document).unbind('keydown');$(document).unbind('keyup');$('#images').unbind('click');");
        },
        imgs: () => {
            const {
                chapterImages,
                SinConf,
                chapterPath
            } = _unsafeWindow;
            return chapterImages.map(e => /^http/.test(e) ? e : SinConf.resHost[0].domain + "/" + chapterPath + e);
        },
        button: [4],
        insertImg: ["#images", 2],
        insertImgAF: () => {
            if (fun.lh == "m.gmh1234.com") fun.run("$('#images').off()");
            if (fun.lh == "www.gmh1234.com" && _this.next()) fun.addUrlHtml(_this.next(), "#images", 1);
        },
        autoDownload: [0],
        next: () => {
            const {
                nextChapterData
            } = _unsafeWindow;
            return nextChapterData.id > 0 ? nextChapterData.url : null;
        },
        prev: 1,
        customTitle: (dom = document) => {
            if (fun.lh == "m.gmh1234.com") {
                let s = fun.gst("initChapter", dom).match(/SinTheme\.initChapter\(([^\)]+)\);/)[1].replaceAll('"', "").split(",");
                return s[3] + " - " + s[1];
            } else {
                let data = JSON.parse(localStorage.history)[0];
                return data.comic_name + " - " + data.read_chapter;
            }
        },
        preloadNext: async (nextDoc, obj) => {
            let code = fun.gst("chapterImages", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(await obj.imgs(), obj.customTitle(nextDoc), "next");
        },
        css: ".globalPadding,.img_info,#imgLoading,#loading{display:none!important;}.action-list li{width:50% !important}#action>ul>li:nth-child(n+2):nth-child(-n+3){display:none !important}",
        category: "comic"
    }, {
        name: "92漫画",
        host: ["www.92mh.com"],
        enable: 0,
        reg: /^https?:\/\/www\.92mh\.com\/manhua\/\d+\/\d+\.html/i,
        init: "$(document).unbind('keydown');$(document).unbind('keyup');$('#images').unbind('click');",
        imgs: () => {
            const {
                chapterImages,
                SinConf
            } = _unsafeWindow;
            return chapterImages.map(e => /^http/.test(e) ? e : SinConf.resHost[0].domain + "/" + e);
        },
        button: [4],
        insertImg: ["#images", 2],
        autoDownload: [0],
        next: () => {
            const {
                nextChapterData
            } = _unsafeWindow;
            return nextChapterData.id > 0 ? nextChapterData.url : null;
        },
        prev: 1,
        customTitle: () => {
            let data = JSON.parse(localStorage.history)[0];
            return data.comic_name + " - " + data.read_chapter;
        },
        preloadNext: (nextDoc, obj) => {
            let code = fun.gst("chapterImages", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(obj.imgs(), nextDoc.title, "next");
        },
        category: "comic"
    }, {
        name: "92漫画M",
        host: ["m.92mh.com"],
        enable: 0,
        reg: /^https?:\/\/m\.92mh\.com\/manhua\/\d+\/\d+\.html/i,
        imgs: (url = siteUrl, dom = document, msg = 1, request = 0) => {
            let max = fun.gt(".image-content p", 1, dom).match(/\/(\d+)/)[1];
            return fun.getImg("#manga-image", max, 5, null, 20, url, msg, request);
        },
        button: [4],
        insertImg: ["#images", 2],
        autoDownload: [0],
        next: () => {
            let next = fun.ge("//a[text()='下一章'][contains(@href,'html')]");
            return next ? next.href : null;
        },
        prev: 1,
        customTitle: (dom = document) => fun.title("在线", 1, dom),
        preloadNext: async (nextDoc, obj) => fun.picPreload(await obj.imgs(nextLink, nextDoc, 0, 1), obj.customTitle(nextDoc), "next"),
        css: ".action-list li{width:50% !important}div[style*='text-align: left;'],.UnderPage~*:not([id^='pv-'],[class^='pv-'],[id^='pagetual'],[class^='pagetual'],#comicRead,#fab,[id^='FullPictureLoad'],[class^='FullPictureLoad'],[class^=fancybox]),.action-list>ul>li:nth-child(n+2):nth-child(-n+3){display:none!important}body{padding:0!important}",
        category: "comic"
    }, {
        name: "优酷漫画",
        host: ["www.ykmh.com"],
        enable: 0,
        reg: /^https?:\/\/www\.ykmh\.com\/manhua\/\w+\/\d+\.html/i,
        init: "$(document).unbind('keydown');$(document).unbind('keyup');",
        imgs: () => {
            const {
                chapterImages,
                SinConf
            } = _unsafeWindow;
            return chapterImages.map(e => SinConf.resHost[0].domain + e);
        },
        button: [4],
        insertImg: ["#images", 2],
        autoDownload: [0],
        next: ".next>a",
        prev: ".pre>a",
        customTitle: (dom = document) => fun.title(" - ", 3, dom),
        preloadNext: (nextDoc, obj) => {
            let code = fun.gst("chapterImages", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(obj.imgs(), obj.customTitle(nextDoc), "next");
        },
        css: ".img_land_prev,.img_land_next{display:none!important}",
        category: "comic"
    }, {
        name: "优酷漫画M",
        host: ["h5.ykmh.com"],
        enable: 0,
        reg: /^https?:\/\/h5\.ykmh\.com\/manhua\/\w+\/\d+\.html/i,
        init: "$('#images').unbind('click');",
        imgs: () => {
            const {
                chapterImages,
                SinConf
            } = _unsafeWindow;
            return chapterImages.map(e => SinConf.resHost[0].domain + e);
        },
        button: [4],
        insertImg: ["#images", 2],
        autoDownload: [0],
        next: () => {
            const {
                nextChapterData,
                comicUrl
            } = _unsafeWindow;
            return nextChapterData?.id > 0 ? nextChapterData.url : null;
        },
        prev: "//a[text()='上一章']",
        customTitle: () => {
            const {
                pageTitle
            } = _unsafeWindow;
            let s = pageTitle.split(" - ");
            return s[1] + " - " + s[0];
        },
        preloadNext: (nextDoc, obj) => {
            let code = fun.gst("chapterImages", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(obj.imgs(), obj.customTitle(), "next");
        },
        css: ".letchepter>div,.letchepter>section,#FullPictureLoad~*{display:none!important}",
        category: "comic"
    }, {
        name: "来漫画",
        host: ["www.laimanhua8.com", "www.comemh.com"],
        enable: 1,
        reg: () => /^https?:\/\/(www\.laimanhua\d?\.com|www\.comemh\.com)\/kanmanhua\/\w+\/\d+\.html/i.test(fun.url) && comicInfiniteScrollMode != 1,
        init: () => {
            fun.clearAllTimer();
            fun.createImgBox("#pic-list", 2);
        },
        imgs: () => {
            const {
                base64_decode,
                picTree,
                getpicdamin
            } = _unsafeWindow;
            return base64_decode(picTree).split("$qingtiandy$").map(e => getpicdamin() + e);
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#pic-list"], 2
        ],
        autoDownload: [0],
        next: () => {
            const {
                nextUrlid
            } = _unsafeWindow;
            return nextUrlid == "" ? null : fun.gu("a#cartoon_url") + nextUrlid + ".html";
        },
        prev: ".btn-prev",
        customTitle: (dom = document) => fun.title(",", 1, dom).replace("漫画", ""),
        preloadNext: (nextDoc, obj) => {
            let code = fun.gst("picTree", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(obj.imgs(), obj.customTitle(nextDoc), "next");
        },
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}#loading,#pre-loading,.img_info,.blank20,#udbsdk_login{display:none!important}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "来漫画 自動翻頁",
        reg: () => /^https?:\/\/(www\.laimanhua\d?\.com|www\.comemh\.com)\/kanmanhua\/\w+\/\d+\.html/i.test(fun.url) && comicInfiniteScrollMode == 1,
        getSrcs: (dom) => {
            const {
                base64_decode,
                getpicdamin
            } = _unsafeWindow;
            let code = fun.gst("picTree", dom);
            let base64Text = code.match(/picTree[\s\=]+([^;]+)/)[1].replaceAll('"', "").replaceAll("'", "");
            let srcs = base64_decode(base64Text).split("$qingtiandy$").map(e => getpicdamin() + e);
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            fun.clearAllTimer();
            let tE = fun.createImgBox("#pic-list", 2);
            fun.remove("#pic-list");
            let imgs = _this.getImgs();
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            script: "//script[contains(text(),'picTree')]",
            ele: (dom) => _this.getImgs(dom),
            pos: ["#FullPictureLoadMainImgBox", 0],
            observer: "#FullPictureLoadMainImgBox>img",
            next: (dom) => {
                let code = fun.gst("nextUrlid", dom);
                let comicURL = fun.gu("#position a");
                let cidText = code.match(/nextUrlid[\s\=]+([^,;]+)/)[1];
                if (/\d+/.test(cidText)) {
                    let cid = cidText.match(/\d+/)[0];
                    return comicURL + cid + ".html";
                } else {
                    return null;
                }
            },
            re: "#bottom_chapter",
            title: (dom) => fun.gt("#position", 1, dom).replaceAll("\n", "").replaceAll(">", "").replace("漫画", ""),
            preloadNextPage: 1
        },
        css: "#loading,#pre-loading,.img_info,.blank20,#udbsdk_login{display:none!important}.subNav{margin: 4px auto!important;float:unset!important}",
        category: "comic autoPager"
    }, {
        name: "来漫画M",
        host: ["m.laimanhua8.com", "m.comemh.com"],
        enable: 1,
        reg: () => /^https?:\/\/(m\.laimanhua\d?\.com|m\.comemh\.com)\/kanmanhua\/\w+\/\d+\.html/i.test(fun.url) && comicInfiniteScrollMode != 1,
        init: () => fun.clearAllTimer(),
        imgs: () => {
            const {
                mhInfo,
                realurl
            } = _unsafeWindow;
            return mhInfo.images.map(e => realurl + mhInfo.path + e);
        },
        button: [4],
        insertImg: ["#manga", 2],
        autoDownload: [0],
        next: () => {
            const {
                mhInfo
            } = _unsafeWindow;
            return mhInfo.nextUrlid == "" ? null : fun.gu("#mangaTitle>a") + mhInfo.nextUrlid + ".html";
        },
        prev: "//a[text()='上一章']",
        customTitle: (dom = document) => fun.gt("#mangaTitle", 1, dom).replace(/\n/g, "").trim(),
        preloadNext: (nextDoc, obj) => {
            let code = fun.gst("mhInfo", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(obj.imgs(), obj.customTitle(nextDoc), "next");
        },
        css: "#jusha1{display:none!important}.action-list li{width:50% !important}#action>ul>li:nth-child(n+2):nth-child(-n+3){display:none !important}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "来漫画M 自動翻頁",
        reg: () => /^https?:\/\/(m\.laimanhua\d?\.com|m\.comemh\.com)\/kanmanhua\/\w+\/\d+\.html/i.test(fun.url) && comicInfiniteScrollMode == 1,
        json: (dom) => {
            let code = fun.gst("mhInfo", dom);
            let objText = code.match(/mhInfo[\s=]+([^;]+)/)[1];
            let json = JSON.parse(objText);
            return json;
        },
        getSrcs: (dom) => {
            let json = _this.json(dom);
            let srcs = json.images.map(e => _unsafeWindow.realurl + json.path + e);
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            fun.clearAllTimer();
            let imgs = _this.getImgs();
            let tE = fun.ge("#manga");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            script: "//script[contains(text(),'mhInfo')]",
            ele: (dom) => _this.getImgs(dom),
            pos: ["#manga", 0],
            observer: "#manga>img",
            next: (dom, r = 1) => {
                let json = _this.json(dom);
                let cUrl = fun.gu("#mangaTitle>a");
                if (json.nextUrlid == "") {
                    if (r === 1) {
                        fun.remove("//li[a[text()='下一章']]");
                        let html = `<li><a href="${cUrl}">返回目录</a></li>`;
                        fun.ge("#action>ul").insertAdjacentHTML("beforeend", html);
                    }
                    return null;
                } else {
                    return cUrl + json.nextUrlid + ".html";
                }
            },
            title: (dom) => _this.json(dom).chapterTitle,
            hide: "#slider",
            preloadNextPage: 1
        },
        css: "#jusha1{display:none!important}.action-list li{width:50% !important}#action>ul>li:nth-child(n+2):nth-child(-n+3){display:none !important}",
        category: "comic autoPager"
    }, {
        name: "漫客栈",
        host: ["www.mkzhan.com"],
        enable: 0,
        reg: /^https?:\/\/www\.mkzhan\.com\/\d+\/\d+\.html/i,
        fetchJson: async (lp = new URL(siteUrl).pathname) => {
            let lps = lp.split("/");
            let comic_id = lps[1];
            let chapter_id = lps[2].match(/\d+/)[0];
            let apiUrl = `https://comic.mkzcdn.com/chapter/content/v1/?chapter_id=${chapter_id}&comic_id=${comic_id}&format=1&quality=1&type=1`;
            return fetch(apiUrl).then(res => res.json());
        },
        init: async () => {
            let json = await _this.fetchJson();
            debug("\n此頁JSON資料\n", json);
            siteJson = json;
        },
        imgs: (json = siteJson) => json.code == 302 ? [] : json.data.page.map(e => e.image),
        insertImg: ["#pages-tpl", 2],
        autoDownload: [0],
        next: ".rd-aside a.j-rd-next",
        prev: ".rd-aside a.j-rd-prev",
        autoClick: "//div[@class='rd-aside__item j-rd-mod'][span[text()='卷轴']]",
        customTitle: (dom = document) => fun.title(" - ", 1, dom),
        preloadNext: async (nextDoc, obj) => {
            let json = await obj.fetchJson(new URL(nextLink).pathname);
            fun.picPreload(obj.imgs(json), obj.customTitle(nextDoc), "next");
        },
        category: "comic"
    }, {
        name: "797漫画网",
        host: ["797mh.com"],
        enable: 0,
        reg: /^https?:\/\/797mh\.com\/chapter\/\d+$/i,
        init: () => fun.createImgBox("#comic_pic", 1),
        imgs: "#comic_pic",
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#comic_pic"], 2
        ],
        autoDownload: [0],
        next: "//a[contains(text(),'下一章')]",
        prev: "//a[contains(text(),'上一章')]",
        customTitle: (dom = document) => fun.gt(".bo_tit", 1, dom).replace("\\n", "").replace(">", "-"),
        preloadNext: true,
        css: ".addg{display:none!important;}",
        category: "comic"
    }, {
        name: "好国漫",
        host: ["www.haoguoman.net", "m.haoguoman.net"],
        enable: 1,
        reg: () => /^https?:\/\/(www|m)\.haoguoman\.net\/\d+\/\d+\.html$/.test(fun.url) && comicInfiniteScrollMode != 1,
        init: async () => {
            await fun.wait(() => !!_unsafeWindow?.layui?.jecms?.base64?.decode);
            fun.createImgBox("#pic-list", 2);
            let code = fun.gst("params");
            let [, dataBase64] = code.match(/params[\s='"]+([^'"]+)/);
            dataBase64 = dataBase64.replace(_unsafeWindow.layui.jecms.base64.decode("WXhVcHFHcnM1JDN3WWc="), "");
            let dataJson = JSON.parse(_unsafeWindow.layui.jecms.base64.decode(dataBase64));
            siteJson = dataJson;
        },
        imgs: () => siteJson.chapter_images.split("###").map(url => {
            if (!(/^http(s)?:\/\/.+/.test(url)) || url.startsWith("//")) {
                url = siteJson.cdnurl + (url.startsWith("/") ? "" : "/") + url;
            }
            return url;
        }),
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 2],
        autoDownload: [0],
        next: "a.j-next,a.j-next_btn",
        prev: "a.j-rd-prev,a.j-prev_btn",
        customTitle: () => siteJson.comic_name + " - " + siteJson.chapter_title,
        css: "#pic-list,#loading{display:none!important;}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "好国漫 自動翻頁",
        host: ["www.haoguoman.net", "m.haoguoman.net"],
        enable: 1,
        reg: () => /^https?:\/\/(www|m)\.haoguoman\.net\/\d+\/\d+\.html$/.test(fun.url) && comicInfiniteScrollMode == 1,
        json: (dom = document) => {
            let code = fun.gst("params", dom);
            let [, dataBase64] = code.match(/params[\s='"]+([^'"]+)/);
            dataBase64 = dataBase64.replace(_unsafeWindow.layui.jecms.base64.decode("WXhVcHFHcnM1JDN3WWc="), "");
            let dataJson = JSON.parse(_unsafeWindow.layui.jecms.base64.decode(dataBase64));
            siteJson = dataJson;
            return dataJson;
        },
        getSrcs: (dom) => {
            let json = _this.json(dom);
            let srcs = json.chapter_images.split("###").map(url => {
                if (!(/^http(s)?:\/\/.+/.test(url)) || url.startsWith("//")) {
                    url = json.cdnurl + (url.startsWith("/") ? "" : "/") + url;
                }
                return url;
            });
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            await fun.wait(() => !!_unsafeWindow?.layui?.jecms?.base64?.decode);
            let tE = fun.createImgBox("#pic-list", 2);
            let imgs = _this.getImgs();
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#FullPictureLoadMainImgBox", 0],
            observer: "#FullPictureLoadMainImgBox>img",
            next: "a.j-next,a.j-next_btn",
            re: ".breadcrumb,#floatbtn>a.j-rd-prev,#floatbtn>a.j-next",
            title: () => siteJson.chapter_title,
            preloadNextPage: 1
        },
        css: "#pic-list,#loading{display:none!important;}",
        category: "comic autoPager"
    }, {
        name: "漫画屋格式",
        host: ["www.mhua5.com", "www.mhw1.com", "www.cmh5.com", "www.umh5.com", "www.obq8.com", "www.wujinmh.com", "comics.veryim.com"],
        enable: 0,
        reg: [
            /^https?:\/\/(www\.mhua5\.com|www\.mhw\d?\.com|www\.cmh5\.com|www\.umh5\.com)\/index\.php\/chapter\/\d+/i,
            /^https?:\/\/www\.manshiduo\.net\/chapter_\d+\.html$/i,
            /^https?:\/\/www\.obq8\.com\/index\.php\/chapter-\d+.html$/i,
            /^https?:\/\/www\.wujinmh\.com\/\d+-\d+\.html$/i,
            /^https?:\/\/comics\.veryim\.com\/\w+\/\d+\/\d+\.html$/
        ],
        include: ".rd-article-wr",
        init: "document.onkeydown=null;",
        imgs: (dom = document) => fun.getImgSrcArr("img[data-original]:not([data-original*='/template/pc/default/']),.lazy-read:not([data-original*='/template/pc/default/']),img[data-src]", dom),
        button: [4],
        insertImg: [".rd-article-wr", 2],
        autoDownload: [0],
        //next: ".btn--next-chapter,.rd-aside a.j-rd-next",
        next: () => {
            let next1 = fun.ge("a.j-rd-next[_href]:not([style])");
            let next2 = fun.ge("a.j-rd-next[href]:not([href^=java])");
            if (next1) {
                let href = fun.attr("a.j-rd-next[_href]", "_href");
                return href == "" ? null : location.origin + href;
            } else if (next2) {
                return next2.href;
            }
            return null;
        },
        prev: ".rd-aside a.j-rd-prev",
        autoClick: "//div[@class='rd-aside__item j-rd-mod'][span[text()='卷轴']]",
        customTitle: (dom = document) => {
            if (/www\.mhua5\.com|www\.mhw\d\.com/.test(fun.lh)) {
                return fun.title(" - 漫画屋", 0, dom).replace("-", " - ");
            } else if (/www\.cmh5\.com/.test(fun.lh)) {
                return fun.attr("meta[name=description]", "content", dom).split(" - 漫画屋")[0].replace("当前阅读的是", "").replace("的", " - ");
            } else if (/www\.umh5\.com|www\.biqug\.org/.test(fun.lh)) {
                return fun.gt(".j-comic-title", 1, dom) + " - " + fun.gt(".last-crumb", 1, dom);
            } else {
                return fun.title(/下拉|在线/, 1, dom).replace("-", " - ").replace(/漫画|\[\d+P\]/i, "");
            }
        },
        preloadNext: true,
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "comic"
    }, {
        name: "漫画屋M格式",
        host: ["m.mkzhan.com", "www.mhua5.com", "www.mhw1.com", "www.cmh5.com", "www.umh5.com", "www.biqug.org", "m.wujinmh.com", "wap.veryim.com"],
        enable: 0,
        reg: [
            /^https?:\/\/m\.mkzhan\.com\/\d+\/\d+\.html$/i,
            /^https?:\/\/(www\.mhua5\.com|www\.mhw\d?\.com|www\.cmh5\.com|www\.umh5\.com)\/index\.php\/chapter\/\d+/i,
            /^https?:\/\/www\.biqug\.org\/index\.php\/chapter-\d+.html$/i,
            /^https?:\/\/m\.wujinmh\.com\/\d+-\d+\.html$/i,
            /^https?:\/\/wap\.veryim\.com\/\w+\/\d+\/\d+\.html$/i
        ],
        imgs: (dom = document) => fun.getImgSrcArr(".comic-page img,img[data-src],img[data-original]", dom),
        autoDownload: [0],
        next: async () => {
            if (/www\.mhua5\.com|www\.cmh5\.com|www\.umh5\.com|www\.mhw\d\.com|www\.biqug\.org/.test(fun.lh)) {
                let next = fun.attr(".next-chapter", "_href");
                return next !== "" ? location.origin + next : null;
            } else if (/m\.mkzhan\.com/.test(fun.lh)) {
                await fun.waitEle(".next-chapter[data-href]", 10)
                let next = fun.ge(".next-chapter").dataset.href;
                return next !== "" || next != 0 ? location.origin + next : null;
            } else if (/www..cmh5\.com/.test(fun.lh)) {
                let next = fun.attr(".next-chapter", "_href");
                return next !== "" ? location.origin + next : null;
            } else {
                let next = fun.ge("//a[text()='下一章']");
                return next ? next.href : null;
            }
        },
        prev: 1,
        customTitle: (dom = document) => {
            if (/www\.mhua5\.com|www\.cmh5\.com/.test(fun.lh)) {
                return fun.title(" - 漫画屋", 0, dom).replace("-", " - ");
            } else if (/m\.mkzhan\.com/.test(fun.lh)) {
                return fun.title(" - 漫客栈", 0, dom).trim();
            } else if (/www\.umh5\.com|www\.mhw\d\.com|www\.biqug\.org|m\.cuiman\.com/.test(fun.lh)) {
                return _unsafeWindow.shareArr[0].match(/《([^》]+)/)[1] + " - " + fun.gt(".comic-name", 1, dom);
            } else {
                return fun.title(/下拉|在线/, 1, dom).trim().replace("-", " - ");
            }
        },
        preloadNext: (nextDoc, obj) => fun.iframeDoc(nextLink, ".comic-page img,img[data-src],img[data-original],canvas[data-src]", 30000).then(nextIframeDoc => fun.picPreload(obj.imgs(nextIframeDoc), obj.customTitle(nextIframeDoc), "next")),
        css: "body>ins,#mainView>.read,.chapter-end .read,#chapter1,#chapter3,.cnt-4,.comic-list a,.chapter-end>a,div[style^=height]{display:none!important}",
        category: "comic"
    }, {
        name: "漫百库M",
        host: ["www.manhuabaiku.com"],
        enable: 0,
        reg: /^https?:\/\/www\.manhuabaiku\.com\/chapter\/\w+\.html/i,
        init: () => {
            $("body").on("click", ".FullPictureLoadImage", () => {
                if ($(".top-tool-bar").css("top") == "0px") {
                    $(".top-tool-bar").animate({
                        top: "-100px"
                    }, 500);
                    $(".bottom-tool-bar").animate({
                        bottom: "-100px"
                    }, 500);
                } else {
                    $(".top-tool-bar").animate({
                        top: "0px"
                    }, 500);
                    $(".bottom-tool-bar").animate({
                        bottom: "0px"
                    }, 500);
                }
            });
        },
        imgs: (dom = document) => fun.gae(".readForm canvas", dom).map(e => atob(e.dataset.sc)),
        button: [4],
        insertImg: [".readForm", 2],
        autoDownload: [0],
        next: "//a[text()='下一章'][contains(@href,'html')]",
        prev: "//a[text()='上一章'][contains(@href,'html')]",
        customTitle: (dom = document) => dom.title.split("漫画章节")[0] + " - " + fun.gt(".comic-name", 1, dom),
        preloadNext: true,
        category: "comic"
    }, {
        name: "爱国漫",
        host: ["www.guoman.net"],
        enable: 1,
        reg: () => /^https?:\/\/www\.guoman\.net\/chapter\/.+\.html/i.test(fun.url) && comicInfiniteScrollMode != 1,
        imgs: () => _unsafeWindow.newImgs.map(e => e.url),
        button: [4, "24%", 1],
        insertImg: [".main-scroll_mode", 2],
        autoDownload: [0],
        next: "a.J_next_eposide_btn[href*=chapter]",
        prev: "a.J_prev_eposide_btn[href*=chapter]",
        customTitle: (dom = document) => fun.gt(".cartoon-title>a:first-child", 1, dom) + " - " + fun.gt(".cartoon-title>a:last-child", 1, dom),
        preloadNext: (nextDoc, obj) => {
            fun.iframeVar(nextLink, "newImgs").then(w => {
                let srcs = w.newImgs.map(e => e.url);
                fun.picPreload(srcs, obj.customTitle(nextDoc), "next");
            });
        },
        infiniteScroll: true,
        css: "a:has(>img[alt*='APP']){display:none!important;}#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "comic"
    }, {
        name: "爱国漫 自動翻頁",
        reg: () => /^https?:\/\/www\.guoman\.net\/chapter\/.+\.html/i.test(fun.url) && comicInfiniteScrollMode == 1,
        getImgs: () => {
            let srcs = frameWindow.newImgs.map(e => e.url);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            let imgs = _this.getImgs();
            let tE = fun.ge(".main-scroll_mode");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            mode: 1,
            waitEle: ".main-item>img:not([src*='.gif'])",
            ele: () => _this.getImgs(),
            pos: [".main-scroll_mode", 0],
            observer: ".main-scroll_mode>img",
            next: (dom) => {
                let nextE = fun.ge("a.J_next_eposide_btn[href*=chapter]", dom);
                if (nextE) {
                    return nextE.href;
                } else {
                    fun.remove("li:has(>a.J_next_eposide_btn)");
                    return null;
                }
            },
            re: ".chapter-sub,.nav-bottom-ul",
            title: (dom) => fun.gt(".cartoon-title>a:first-child", 1, dom) + " - " + fun.gt(".cartoon-title>a:last-child", 1, dom),
            preloadNextPage: (dom) => {
                let next = _this.autoPager.next(dom);
                if (!!next) {
                    fun.iframe(next, {
                        waitVar: "newImgs",
                        cb: async (dom, frame) => {
                            let srcs = frame.newImgs.map(e => e.url);
                            let text = _this.autoPager.title(dom);
                            fun.picPreload(srcs, text, "next");
                        }
                    });
                }
            }
        },
        css: "a:has(>img[alt*='APP']){display:none!important;}",
        category: "comic autoPager"
    }, {
        name: "爱国漫M",
        host: ["m.guoman.net"],
        enable: 1,
        reg: () => /^https?:\/\/m\.guoman\.net\/chapter\/.+\.html/i.test(fun.url) && comicInfiniteScrollMode != 1,
        imgs: () => _unsafeWindow.newImgs.map(e => e.url),
        capture: () => _this.imgs(),
        autoDownload: [0],
        next: "//a[text()='下一章'][contains(@href,'html')]",
        prev: "//a[text()='上一章'][contains(@href,'html')]",
        customTitle: (dom = document) => dom.title.split("免费")[0].replace("漫画", ""),
        preloadNext: (nextDoc, obj) => {
            fun.iframeVar(nextLink, "newImgs").then(w => {
                let srcs = w.newImgs.map(e => e.url);
                fun.picPreload(srcs, obj.customTitle(nextDoc), "next");
            });
        },
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "爱国漫M 自動翻頁",
        reg: () => /^https?:\/\/m\.guoman\.net\/chapter\/.+\.html/i.test(fun.url) && comicInfiniteScrollMode == 1,
        getImgs: () => {
            let srcs = frameWindow.newImgs.map(e => e.url);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            await fun.waitEle("#chapterPic>img:not([src*='.gif'])");
            let imgs = _this.getImgs();
            let tE = fun.ge("#chapterPic");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            mode: 1,
            waitEle: "#chapterPic>img:not([src*='.gif'])",
            ele: () => _this.getImgs(),
            pos: ["#chapterPic", 0],
            observer: "#chapterPic>img",
            next: (dom) => {
                let nextE = fun.ge("//a[text()='下一章'][contains(@href,'html')]", dom);
                if (nextE) {
                    return nextE.href;
                } else {
                    let ne = fun.ge("//a[text()='下一章']");
                    ne.innerText = "无";
                    return null;
                }
            },
            re: ".bottom-bar",
            title: (dom) => dom.title.split("免费")[0].replace("漫画", ""),
            preloadNextPage: (dom) => {
                let next = _this.autoPager.next(dom);
                if (!!next) {
                    fun.iframe(next, {
                        waitVar: "newImgs",
                        cb: async (dom, frame) => {
                            let srcs = frame.newImgs.map(e => e.url);
                            let text = _this.autoPager.title(dom);
                            fun.picPreload(srcs, text, "next");
                        }
                    });
                }
            }
        },
        css: ".FullPictureLoadImage~.lazy{display:none!important;}",
        category: "comic autoPager"
    }, {
        name: "新新漫画",
        host: ["www.77mh.nl", "m.77mh.nl", "www.77mh.xyz", "m.77mh.xyz", "www.77mh.me", "m.77mh.me"],
        enable: 0,
        reg: /^https?:\/\/(www|m)\.77mh\.[a-z]{2,3}\/\d+\/\d+\.html/i,
        init: async () => await fun.waitVar("msg"),
        imgs: async () => {
            let status;
            if (fun.ge(".FullPictureLoadImage")) {
                status = 200;
            } else {
                let src = fun.attr("#comicImg img,.mg-co img", "src");
                status = await fun.xhrHEAD(src).then(res => res.status);
            }
            return status === 200 ? _unsafeWindow.msg.split("|").map(e => fun.indexOf(fun.lh, "m.77mh") ? _unsafeWindow.ImgSvrList + e : _unsafeWindow.img_qianz + e) : [];
        },
        button: [4],
        insertImg: ["#comicImg,.mg-co", 2],
        insertImgAF: () => {
            if (fun.indexOf(fun.lh, "m.77mh")) {
                let p = fun.ge(".page_num");
                let m = fun.ge(".mg-co");
                p ? insertAfter(m, p.cloneNode(true)) : null;
                let selectors = [".pagelist", "//div[div[@style and a[img[@width]]]]"];
                fun.remove(selectors);
            } else {
                let str = "try{$(document).unbind('keydown');$(document).unbind('keyup')}catch(e){}";
                new Function(str)();
                let p = fun.ge("#pnpage");
                let m = fun.ge("#main");
                p ? insertAfter(m, p.cloneNode(true)) : null;
                let selectors = [".qrcode_div", "#bdcotopnew", "#main>*:not(#comicImg)"];
                fun.remove(selectors);
            }
        },
        autoDownload: [0],
        next: () => {
            const {
                nextLink_b
            } = _unsafeWindow;
            return nextLink_b == "" ? null : location.origin + nextLink_b;
        },
        prev: "//a[contains(text(),'上一章')]",
        customTitle: (dom = document) => fun.title(" - ", 3, dom),
        preloadNext: async (nextDoc, obj) => {
            let code = fun.gst("eval", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(await obj.imgs(), obj.customTitle(nextDoc), "next");
        },
        category: "comic"
    }, {
        name: "漫漫聚/KuKu动漫",
        enable: 1,
        reg: () => fun.checkUrl({
            h: [
                "www.manmanju.cc",
                "a.manmanju.cc",
                "b.manmanju.cc",
                "manhua.dididm.cc",
                "a.ikukudm.cc",
                "b.ikukudm.cc"
            ],
            p: /^\/comiclist\/\d+\/\d+\/1\.htm$/
        }) && comicInfiniteScrollMode != 1,
        include: "td img",
        comicListUrl: () => `/comiclist/${siteUrl.split("/")[4]}/index.htm`,
        imgs: () => fun.getKukudmSrc(),
        button: [4],
        insertImg: ["//td[input]", 2],
        insertImgAF: async () => {
            let cUrl = _this.comicListUrl();
            let nextUrl = await _this.next();
            if (nextUrl) {
                fun.addUrlHtml(nextUrl, "body", 2);
                fun.addUrlHtml(cUrl, "body", 2, "目錄");
            } else {
                fun.addUrlHtml(cUrl, "body", 2, "目錄");
                fun.addUrlHtml(location.origin, "body", 2, "首頁");
            }
        },
        autoDownload: [0],
        next: () => {
            let chapterId = siteUrl.split("/")[5];
            let host = 1;
            if (/^a\./.test(fun.lh)) {
                host = 2;
            } else if (/^b\./.test(fun.lh)) {
                host = 3;
            }
            let nextXPath = `//dd[a[contains(@href,'${chapterId}')]]/following-sibling::dd[1]/a[${host}]`;
            return fun.xhrDoc(_this.comicListUrl()).then(dom => {
                let next = fun.ge(nextXPath, dom, dom);
                return next ? next.href : null;
            })
        },
        prev: 1,
        preloadNext: async (nextDoc, obj) => fun.picPreload(await fun.getKukudmSrc(nextLink, nextDoc, 0), nextDoc.title, "next"),
        css: "body{background-image:unset}body>table:nth-child(1),body>table:nth-child(3){display:none!important}body>table:nth-child(2),body>table:nth-child(2)>tbody>tr>td{width:100%!important;}body{scrollbar-width:none;-ms-overflow-style:none;overflow-x:hidden;overflow-y:auto}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "漫漫聚/KuKu动漫 自動翻頁",
        reg: () => fun.checkUrl({
            h: [
                "www.manmanju.cc",
                "a.manmanju.cc",
                "b.manmanju.cc",
                "manhua.dididm.cc",
                "a.ikukudm.cc",
                "b.ikukudm.cc"
            ],
            p: /^\/comiclist\/\d+\/\d+\/1\.htm$/
        }) && comicInfiniteScrollMode == 1,
        include: "td img",
        comicListUrl: () => `/comiclist/${siteUrl.split("/")[4]}/index.htm`,
        init: async () => {
            fun.showMsg(displayLanguage.str_135, 0);
            await fun.getKukudmSrc(siteUrl, document, 0).then(srcs => fun.createImgArray(srcs)).then(async imgs => {
                let tE = fun.ge("//td[input]");
                tE.innerHTML = "";
                tE.append(...imgs);
                fun.hideMsg();
                await fun.lazyload();
            });
            let cUrl = _this.comicListUrl();
            fun.addUrlHtml(cUrl, "body", 2, "目錄");
            fun.addUrlHtml(location.origin, "body", 2, "首頁");
        },
        autoPager: {
            ele: (dom) => fun.getKukudmSrc(nextLink, dom, 0).then(srcs => fun.createImgArray(srcs)),
            pos: ["//td[img]", 0],
            observer: "//td[img]/img",
            next: () => {
                let chapterId = (nextLink ?? siteUrl).split("/")[5];
                let host = 1;
                if (/^a\./.test(fun.lh)) {
                    host = 2;
                } else if (/^b\./.test(fun.lh)) {
                    host = 3;
                }
                let nextXPath = `//dd[a[contains(@href,'${chapterId}')]]/following-sibling::dd[1]/a[${host}]`;
                return fun.xhrDoc(_this.comicListUrl()).then(dom => {
                    let next = fun.ge(nextXPath, dom, dom);
                    return next ? next.href : null;
                })
            },
            stop: (dom) => !fun.ge("//td[input]//img", dom),
            preloadNextPage: async (dom) => {
                let next = await _this.autoPager.next();
                if (!!next) {
                    fun.xhrDoc(next).then(async nextDoc => {
                        let srcs = await fun.getKukudmSrc(next, nextDoc, 0);
                        fun.picPreload(srcs, nextDoc.title, "next");
                    });
                }
            }
        },
        css: "body{background-image:unset}body>table:nth-child(1),body>table:nth-child(3){display:none!important}body>table:nth-child(2),body>table:nth-child(2)>tbody>tr>td{width:100%!important;}body{scrollbar-width:none;-ms-overflow-style:none;overflow-x:hidden;overflow-y:auto}",
        category: "comic autoPager"
    }, {
        name: "漫漫聚M/KuKu动漫M",
        enable: 1,
        reg: () => fun.checkUrl({
            h: [
                "m.manmanju.cc",
                "s1.m.manmanju.cc",
                "s2.m.manmanju.cc",
                "s3.m.manmanju.cc",
                "m.dididm.cc",
                "wap.dididm.cc",
                "s1.wap.ikukudm.cc",
                "s2.wap.ikukudm.cc",
                "s3.wap.ikukudm.cc"
            ],
            p: /^\/comiclist\/\d+\/\d+\/1\.htm$/
        }) && comicInfiniteScrollMode != 1,
        include: ".classBox img,.imgBox",
        init: () => fun.remove("//center[iframe]"),
        imgs: () => {
            fun.remove("//a[img] | //ul[center[li]]");
            return fun.getKukudmSrc();
        },
        button: [4],
        insertImg: [".imgBox", 2],
        insertImgAF: async () => {
            fun.remove(".bottom .subNav~div[style*=height],.bottom .pageLine,.bottom .subNav");
            let nav = fun.ge("ul.subNav").cloneNode(true);
            let tE = fun.ge("div.bottom");
            insertBefore(tE, nav);
            await fun.remove("meta[name=viewport]");
            const meta = document.createElement("meta");
            meta.name = "viewport";
            meta.content = "width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=2.0,user-scalable=no";
            document.head.append(meta);
            let url = await _this.next();
            if (url) fun.addUrlHtml(url, ".bottom", 0);
        },
        autoDownload: [0],
        next: () => {
            let comicListUrl = fun.gu(".subNav a");
            let chapterId = siteUrl.split("/")[5];
            let nextXPath = `//li[a[contains(@href,'${chapterId}')]]/preceding-sibling::li[1]/a`;
            return fun.xhrDoc(comicListUrl).then(dom => {
                let next = fun.ge(nextXPath, dom, dom);
                return next ? next.href : null;
            })
        },
        prev: 1,
        customTitle: () => fun.title("在线", 1),
        preloadNext: async (nextDoc, obj) => fun.picPreload(await fun.getKukudmSrc(nextLink, nextDoc, 0), nextDoc.title.split("在线")[0], "next"),
        css: ".imgBox{margin-bottom:0px!important}.subNav{border-top:1px solid #dcdcde}body{scrollbar-width:none;overflow-x:hidden;overflow-y:auto}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "漫漫聚/KuKu动漫M 404",
        enable: 1,
        reg: () => fun.checkUrl({
            h: [
                "m.manmanju.cc",
                "s1.m.manmanju.cc",
                "s2.m.manmanju.cc",
                "s3.m.manmanju.cc",
                "m.dididm.cc",
                "wap.dididm.cc",
                "s1.wap.ikukudm.cc",
                "s2.wap.ikukudm.cc",
                "s3.wap.ikukudm.cc"
            ],
            p: /^\/comiclist\/\d+\/\d+\/1\.htm$/,
            e: [
                "td img",
                "iframe[src='/top.htm']"
            ]
        }) && comicInfiniteScrollMode != 1,
        comicListUrl: () => `/comiclist/${siteUrl.split("/")[4]}/index.htm`,
        imgs: () => fun.getKukudmSrc(),
        button: [4],
        insertImg: ["//td[input]", 2],
        insertImgAF: async () => {
            let cUrl = _this.comicListUrl();
            let nextUrl = await _this.next();
            if (nextUrl) {
                fun.addUrlHtml(nextUrl, "body", 2);
                fun.addUrlHtml(cUrl, "body", 2, "目錄");
            } else {
                fun.addUrlHtml(cUrl, "body", 2, "目錄");
                fun.addUrlHtml(location.origin, "body", 2, "首頁");
            }
        },
        autoDownload: [0],
        next: () => {
            let chapterId = siteUrl.split("/")[5];
            let nextXPath = `//li[a[contains(@href,'${chapterId}')]]/preceding-sibling::li[1]/a`;
            return fun.xhrDoc(_this.comicListUrl()).then(dom => {
                let next = fun.ge(nextXPath, dom, dom);
                return next ? next.href : null;
            })
        },
        prev: 1,
        preloadNext: async (nextDoc, obj) => fun.picPreload(await fun.getKukudmSrc(nextLink, nextDoc, 0), nextDoc.title.split("在线")[0], "next"),
        css: "body{background-image:unset}body>table:nth-child(1),body>table:nth-child(3){display:none!important}body>table:nth-child(2),body>table:nth-child(2)>tbody>tr>td{width:100%!important;}body{scrollbar-width:none;-ms-overflow-style:none;overflow-x:hidden;overflow-y:auto}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "漫漫聚M/KuKu动漫M 自動翻頁",
        reg: () => fun.checkUrl({
            h: [
                "m.manmanju.cc",
                "s1.m.manmanju.cc",
                "s2.m.manmanju.cc",
                "s3.m.manmanju.cc",
                "m.dididm.cc",
                "wap.dididm.cc",
                "s1.wap.ikukudm.cc",
                "s2.wap.ikukudm.cc",
                "s3.wap.ikukudm.cc"
            ],
            p: /^\/comiclist\/\d+\/\d+\/1\.htm$/
        }) && comicInfiniteScrollMode == 1,
        include: ".classBox img,.imgBox",
        init: async () => {
            fun.remove("//center[iframe] | //a[img] | //ul[center[li[@class='txtA']]]");
            fun.showMsg(displayLanguage.str_135, 0);
            await fun.getKukudmSrc(siteUrl, document, 0).then(urls => fun.createImgArray(urls)).then(async imgs => {
                let tE = fun.ge(".imgBox");
                tE.innerHTML = "";
                tE.append(...imgs);
                fun.hideMsg();
                await fun.lazyload();
            });
            fun.remove(".bottom .subNav~div[style*=height],.bottom .pageLine,.bottom .subNav");
            let nav = fun.ge("ul.subNav").cloneNode(true);
            let tE = fun.ge("div.bottom");
            insertBefore(tE, nav);
            await fun.remove("meta[name=viewport]");
            const meta = document.createElement("meta");
            meta.name = "viewport";
            meta.content = "width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=2.0,user-scalable=no";
            document.head.append(meta);
        },
        autoPager: {
            ele: (dom) => fun.getKukudmSrc(nextLink, dom, 0).then(urls => fun.createImgArray(urls)),
            pos: [".imgBox", 0],
            observer: ".imgBox>img",
            next: () => {
                let comicListUrl = fun.gu(".subNav a");
                let chapterId = (nextLink ?? siteUrl).split("/")[5];
                let nextXPath = `//li[a[contains(@href,'${chapterId}')]]/preceding-sibling::li[1]/a`;
                return fun.xhrDoc(comicListUrl).then(dom => {
                    let next = fun.ge(nextXPath, dom, dom);
                    return next ? next.href : null;
                })
            },
            title: (dom) => dom.title.replace(/在线漫画.+$/, ""),
            preloadNextPage: async (dom) => {
                let next = await _this.autoPager.next();
                if (!!next) {
                    fun.xhrDoc(next).then(async nextDoc => {
                        let srcs = await fun.getKukudmSrc(next, nextDoc, 0);
                        let text = _this.autoPager.title(nextDoc);
                        fun.picPreload(srcs, text, "next");
                    });
                }
            }
        },
        css: ".imgBox{margin-bottom:0px!important}.subNav{border-top:1px solid #dcdcde}body{scrollbar-width:none;overflow-x:hidden;overflow-y:auto}",
        category: "comic autoPager"
    }, {
        name: "仙漫网",
        host: ["www.gaonaojin.com"],
        enable: 0,
        reg: /^https?:\/\/www\.gaonaojin\.com\/\w+\/\d+\.html/i,
        imgs: (url = fun.url) => {
            const {
                imgDomain,
                picdata
            } = _unsafeWindow;
            if (imgDomain === "") {
                url = url.replace("www.gaonaojin.com", "m.gaonaojin.com");
                fun.showMsg(displayLanguage.str_05, 0);
                return fun.xhrDoc(url, {
                    headers: {
                        "Referer": url,
                        "User-Agent": MobileUA
                    }
                }).then(dom => {
                    let code = fun.gst("eval", dom).match(/eval.+\)\)/)[0].slice(4);
                    let imgData = fun.run(fun.run(code).match(/picdata[^;]+/)[0]);
                    return imgData.map(e => "https://res.xiaoqinre.com/" + e);
                });
            } else if (imgDomain === "https://res.xiaoqinre.com/") {
                return picdata.map(e => imgDomain + e);
            } else {
                return [];
            }
        },
        button: [4],
        insertImg: [".comicpage", 2],
        insertImgAF: () => nextLink ? fun.addUrlHtml(nextLink, ".comicpage", 1) : null,
        autoDownload: [0],
        next: "//li[a[@class='active']]/preceding-sibling::li[1]/a",
        prev: "//li[a[@class='active']]/following-sibling::li[1]/a",
        customTitle: "h1.title",
        preloadNext: async (nextDoc, obj) => {
            let url = nextLink.replace("www.gaonaojin.com", "m.gaonaojin.com");
            let arr = await fun.xhrDoc(url, {
                headers: {
                    "Referer": url,
                    "User-Agent": MobileUA
                }
            }).then(dom => {
                let code = fun.gst("eval", dom).match(/eval.+\)\)/)[0].slice(4);
                let imgData = fun.run(fun.run(code).match(/picdata[^;]+/)[0]);
                return imgData.map(e => "https://res.xiaoqinre.com/" + e);
            });
            fun.picPreload(arr, nextDoc.title, "next");
        },
        css: ".dropload-down{display:none!important;}",
        category: "comic"
    }, {
        name: "仙漫网M",
        host: ["m.gaonaojin.com"],
        enable: 1,
        reg: () => /^https?:\/\/m\.gaonaojin\.com\/\w+\/\d+\.html/i.test(fun.url) && comicInfiniteScrollMode != 1,
        init: () => fun.createImgBox("#cp_img", 2),
        imgs: (dom = document) => {
            let code = fun.gst("eval", dom).match(/eval.+\)\)/)[0].slice(4);
            let imgData = fun.run(fun.run(code).match(/picdata[^;]+/)[0]);
            return imgData.map(e => "https://res.xiaoqinre.com/" + e);
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#cp_img"], 2
        ],
        autoDownload: [0],
        next: "a.btn.next",
        prev: "a.btn.prev",
        customTitle: (dom = document) => fun.title("免费", 1, dom),
        preloadNext: true,
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "仙漫网M 自動翻頁",
        reg: () => /^https?:\/\/m\.gaonaojin\.com\/\w+\/\d+\.html/i.test(fun.url) && comicInfiniteScrollMode == 1,
        getSrcs: (dom) => {
            let code = fun.gst("eval", dom).match(/eval.+\)\)/)[0].slice(4);
            let imgData = fun.run(fun.run(code).match(/picdata[^;]+/)[0]);
            let srcs = imgData.map(e => "https://res.xiaoqinre.com/" + e);
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            let tE = fun.createImgBox("#cp_img", 2);
            await fun.remove("#cp_img");
            let imgs = _this.getImgs();
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#FullPictureLoadMainImgBox", 0],
            observer: "#FullPictureLoadMainImgBox>img",
            next: "a.btn.next",
            re: "#title+#title,.pagenation",
            title: (dom) => fun.gt("#title+#title", 1, dom),
            hide: ".recommendList:has(h2)",
            bF: (dom) => fun.gae(".pagenation", dom).forEach(e => e.setAttribute("class", "pagenation")),
            preloadNextPage: 1
        },
        css: "#cp_img>div[style]{display:none!important;}",
        category: "comic autoPager"
    }, {
        name: "大树漫画/世伦漫画",
        enable: 1,
        reg: () => fun.checkUrl({
            h: [
                "www.dashumanhua.com",
                "www.shilunart.com"
            ],
            p: /^\/comic\/\w+\/.+\.html/i
        }) && comicInfiniteScrollMode != 1,
        imgs: (dom = document) => {
            let code = fun.gst("picTree", dom);
            let m = code.match(/eval.+\)\)/)[0].slice(4);
            return fun.run(fun.run(m).slice(12, -1));
        },
        button: [4],
        insertImg: ["#pic-list", 2],
        autoDownload: [0],
        next: "//a[text()='下一话' and not(contains(@href,'--1'))]",
        prev: "//a[text()='上一话' and not(contains(@href,'--1'))]",
        customTitle: (dom = document) => fun.gt(".setnmh-bookname h1", 1, dom) + " - " + fun.gt(".setnmh-bookname h2", 1, dom),
        preloadNext: true,
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "大树漫画/世伦漫画 自動翻頁",
        enable: 1,
        reg: () => fun.checkUrl({
            h: [
                "www.dashumanhua.com",
                "www.shilunart.com"
            ],
            p: /^\/comic\/\w+\/.+\.html/i
        }) && comicInfiniteScrollMode == 1,
        getSrcs: (dom) => {
            let code = fun.gst("picTree", dom);
            let m = code.match(/eval.+\)\)/)[0].slice(4);
            let srcs = fun.run(fun.run(m).slice(12, -1));
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            let tE = fun.createImgBox("#pic-list", 2);
            fun.remove("#pic-list,.loading-box");
            let imgs = _this.getImgs();
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#FullPictureLoadMainImgBox", 0],
            observer: "#FullPictureLoadMainImgBox>img",
            next: "//a[text()='下一话' and not(contains(@href,'--1'))]",
            re: ".setnmh-headsee,.setnmh-controlbottomn>.prev,.setnmh-controlbottomn>.huiname,.setnmh-controlbottomn>.next",
            aF: () => {
                let n = fun.ge(".next>.tandiv>a");
                if (n) {
                    fun.ge(".next>a").href = n.href;
                    fun.remove(".next>a+span,a[v-if=booknext]+span");
                } else {
                    fun.ge(".next>a").classList.add("hui");
                    fun.remove("div[v-if=booknext]");
                }
            },
            title: (dom) => {
                if (hasTouchEvents) {
                    return fun.gt(".setnmh-bookname h2", 1, dom);
                } else {
                    return fun.gt(".setnmh-bookname h1", 1, dom) + " - " + fun.gt(".setnmh-bookname h2", 1, dom);
                }
            },
            hide: ".setnmh-detailspage,#setnmh-footer>nav",
            preloadNextPage: 1
        },
        category: "comic autoPager"
    }, {
        name: "韩漫天堂",
        enable: 1,
        reg: () => fun.checkUrl({
            h: [
                "www.hmttmh.com",
                "w226.npdn.top"
            ],
            p: "/chapter/",
            e: "#comicContain"
        }) && comicInfiniteScrollMode != 1,
        init: async () => {
            await fun.waitVar("newImgs");
            _unsafeWindow.newImgs = [];
            fun.createImgBox("#comicContain", 2);
        },
        imgs: (dom = document) => {
            let newImgsCode = fun.gst("newImgs", dom);
            newImgsCode = fun.run(newImgsCode.replace("\n", "").trim().slice(4));
            newImgsCode = newImgsCode.replace("var newImgs=", "");
            let newImgsArr = fun.run(newImgsCode);
            return newImgsArr;
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#comicContain"], 2
        ],
        autoDownload: [0],
        next: "a:has(>img[alt=下一章])",
        prev: "a:has(>img[alt=上一章])",
        customTitle: (dom = document) => fun.ge("meta[itemprop=name]", dom)?.content + " - " + fun.ge("meta[itemprop=chaptername]", dom)?.content,
        preloadNext: true,
        infiniteScroll: true,
        //css: "#FullPictureLoadMainImgBox{max-width: 800px;}",
        category: "comic"
    }, {
        name: "韩漫天堂 自動翻頁",
        enable: 1,
        reg: () => fun.checkUrl({
            h: [
                "www.hmttmh.com",
                "w226.npdn.top"
            ],
            p: "/chapter/",
            e: "#comicContain"
        }) && comicInfiniteScrollMode == 1,
        getSrcs: (dom) => {
            let newImgsCode = fun.gst("newImgs", dom);
            newImgsCode = fun.run(newImgsCode.replace("\n", "").trim().slice(4));
            newImgsCode = newImgsCode.replace("var newImgs=", "");
            let srcs = fun.run(newImgsCode);
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            await fun.waitVar("newImgs");
            _unsafeWindow.newImgs = [];
            let tE = fun.createImgBox("#comicContain", 2);
            fun.remove("#comicContain");
            let imgs = _this.getImgs();
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#FullPictureLoadMainImgBox", 0],
            observer: "#FullPictureLoadMainImgBox>img",
            next: (dom) => {
                let next = fun.ge("a:has(>img[alt=下一章])", dom);
                if (next) {
                    let [, nextId] = next.href.match(/(\d+)\.html$/);
                    return fun.lp.replace(/(\d+)(\.html)$/, `${nextId}$2`);
                } else {
                    return null;
                }
            },
            re: ".main_control",
            title: (dom) => fun.ge("meta[itemprop=chaptername]", dom)?.content,
            preloadNextPage: 1
        },
        category: "comic autoPager"
    }, {
        name: "韩漫天堂M",
        enable: 1,
        reg: () => fun.checkUrl({
            h: [
                "www.hmttmh.com",
                "w226.npdn.top"
            ],
            p: "/chapter/",
            e: "#mainView_img"
        }) && comicInfiniteScrollMode != 1,
        init: () => fun.createImgBox("#mainView_img", 2),
        imgs: (dom = document) => {
            let imgsCode = fun.gst("original", dom);
            imgsCode = imgsCode.replace("\n", "").trim().slice(4);
            imgsCode = fun.run(imgsCode);
            return imgsCode.match(/https?:\/\/[^/]+\/\w+\/\d+\/[\w-]+\.\w+/gi);
        },
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#mainView_img"], 2
        ],
        insertImgAF: () => {
            $("#FullPictureLoadMainImgBox").click(() => {
                $(".reader-footer").fadeToggle(300);
                $(".van-nav-bar").fadeToggle(300);
            });
        },
        autoDownload: [0],
        next: ".end-itm.next>a",
        prev: ".end-itm.prev>a",
        customTitle: (dom = document) => fun.ge("#mainView_img img", dom)?.alt?.replace("-图1", ""),
        preloadNext: true,
        infiniteScroll: true,
        fancybox: {
            blacklist: 1
        },
        category: "comic"
    }, {
        name: "韩漫天堂M 自動翻頁",
        enable: 1,
        reg: () => fun.checkUrl({
            h: [
                "www.hmttmh.com",
                "w226.npdn.top"
            ],
            p: "/chapter/",
            e: "#mainView_img"
        }) && comicInfiniteScrollMode == 1,
        getSrcs: (dom) => {
            let imgsCode = fun.gst("original", dom);
            imgsCode = imgsCode.replace("\n", "").trim().slice(4);
            imgsCode = fun.run(imgsCode);
            let srcs = imgsCode.match(/https?:\/\/[^/]+\/\w+\/\d+\/[\w-]+\.\w+/gi);
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            let tE = fun.createImgBox("#mainView_img", 2);
            fun.remove("#mainView_img");
            let imgs = _this.getImgs();
            tE.append(...imgs);
            $("#FullPictureLoadMainImgBox").click(() => {
                $(".reader-footer").fadeToggle(300);
                $(".van-nav-bar").fadeToggle(300);
            });
            await fun.lazyload();
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#FullPictureLoadMainImgBox", 0],
            observer: "#FullPictureLoadMainImgBox>img",
            next: (dom) => {
                let next = fun.ge(".end-itm.next>a", dom);
                if (next) {
                    let [, nextId] = next.href.match(/(\d+)\.html$/);
                    return fun.lp.replace(/(\d+)(\.html)$/, `${nextId}$2`);
                } else {
                    return null;
                }
            },
            re: ".end-btns",
            title: (dom) => fun.ge("meta[itemprop=chaptername]", dom)?.content,
            preloadNextPage: 1
        },
        category: "comic autoPager"
    }, {
        name: "Godamanga.ART 英文漫画",
        enable: 1,
        reg: () => fun.checkUrl({
            h: [
                "godamanga.art",
                "godamh.org",
                "manhuascans.org"
            ],
            p: /^\/chapter\/\d+\.html$|^\/manga\/[\w-]+\/[\w-]+$/i
        }) && comicInfiniteScrollMode != 1,
        xhrOptions: {
            cache: "no-cache"
        },
        init: async () => await fun.waitEle(".touch-manipulation img"),
        imgs: ".touch-manipulation img",
        button: [4],
        insertImg: [".touch-manipulation", 2],
        autoDownload: [0],
        next: "#nextChapterLink[href^='/manga/']",
        prev: "#preChapterLink",
        customTitle: (dom = document) => fun.gt("ol.inline-flex>li:nth-child(2) a", 1, dom) + " - " + fun.gt("ol.inline-flex>li:nth-child(3) a", 1, dom),
        preloadNext: (dom) => {
            let dataE = fun.ge("#chapterContent", dom);
            let ms = dataE.dataset.ms;
            let cs = dataE.dataset.cs;
            let ct = dataE.dataset.ct;
            let host = dataE.dataset.host;
            let api = `${host}/chapter/getcontent?m=${ms}&c=${cs}`;
            fun.fetchDoc(api).then(nextDom => {
                let srcs = fun.getImgSrcArr(".touch-manipulation img", nextDom);
                fun.picPreload(srcs, ct, "next");
            });
        },
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "Godamanga.ART 英文漫画 自動翻頁",
        enable: 1,
        reg: () => fun.checkUrl({
            h: [
                "godamanga.art",
                "godamh.org",
                "manhuascans.org"
            ],
            p: /^\/chapter\/\d+\.html$|^\/manga\/[\w-]+\/[\w-]+$/i
        }) && comicInfiniteScrollMode == 1,
        xhrOptions: {
            cache: "no-cache"
        },
        getSrcs: (dom) => {
            let dataE = fun.ge("#chapterContent", dom);
            let ms = dataE.dataset.ms;
            let cs = dataE.dataset.cs;
            let host = dataE.dataset.host;
            let api = `${host}/chapter/getcontent?m=${ms}&c=${cs}`;
            return fun.fetchDoc(api).then(apitDom => fun.getImgSrcArr(".touch-manipulation img", apitDom));
        },
        getImgs: async (dom = document) => {
            let srcs = await _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            await fun.waitEle(".touch-manipulation img");
            let imgs = await _this.getImgs();
            let tE = fun.createImgBox(".touch-manipulation", 2);
            fun.remove("//div[ins[@class='adsbygoogle']]");
            await fun.remove(".touch-manipulation");
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            observer: "#FullPictureLoadMainImgBox>img",
            pos: ["#FullPictureLoadMainImgBox", 0],
            next: "#nextChapterLink[href^='/manga/']",
            title: (dom) => fun.ge("#chapterContent", dom).dataset.ct,
            history: 0,
            hide: "div.justify-center:has(>.w-full),.pb-14",
            preloadNextPage: 1
        },
        category: "comic autoPager"
    }, {
        name: "GODA漫畫/包子漫畫",
        enable: 1,
        reg: () => fun.checkUrl({
            h: [
                "n.cocolamanhua.com",
                "baozimh.one",
                "m.godamh.com"
            ],
            p: /^\/[\w-]+\/$|^\/[\w-]+\/$|^\/chapter\/\d+\.html$/i,
            e: "h2#title"
        }) && comicInfiniteScrollMode != 1,
        init: async () => {
            fun.addMutationObserver(() => fun.remove("iframe,.bannersUite"));
            await fun.waitEle(".touch-manipulation img");
            fun.remove("//div[ins[@class='adsbygoogle']]");
            let setdata = JSON.parse(document.cookie.match(/setdata[\s=]+([^;]+)/)[1]);
            let {
                host,
                ms,
                cs
            } = setdata;
            let api = `${host}/chapter/getinfo?m=${ms}&c=${cs}`;
            let fetchJson = await fetch(api, {
                cache: "no-cache"
            }).then(res => res.json());
            siteJson = fetchJson;
        },
        imgs: (json = siteJson) => json.data.info.images.map(e => e.url),
        button: [4],
        insertImg: [".touch-manipulation", 2],
        autoDownload: [0],
        next: "#nextChapterLink",
        prev: "#preChapterLink",
        customTitle: (json = siteJson) => json.data.info.mangatitle + " - " + json.data.info.title,
        preloadNext: () => {
            let next = siteJson.data.info?.next;
            if (!!next) {
                let setdata = JSON.parse(document.cookie.match(/setdata[\s=]+([^;]+)/)[1]);
                let {
                    host,
                    ms,
                } = setdata;
                let api = `${host}/chapter/getinfo?m=${ms}&c=${next}`;
                fetch(api, {
                    cache: "no-cache"
                }).then(res => res.json()).then(json => {
                    let srcs = _this.imgs(json);
                    let text = _this.customTitle(json);
                    fun.picPreload(srcs, text, "next");
                });
            }
        },
        css: "iframe,.bannersUite,.w-full:has(>amp-ad){display:none!important;}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "GODA漫畫/包子漫畫 自動翻頁",
        enable: 1,
        reg: () => fun.checkUrl({
            h: [
                "n.cocolamanhua.com",
                "baozimh.one",
                "m.godamh.com"
            ],
            p: /^\/[\w-]+\/$|^\/[\w-]+\/$|^\/chapter\/\d+\.html$/i,
            e: "h2#title"
        }) && comicInfiniteScrollMode == 1,
        getSrcs: (json = siteJson) => json.data.info.images.map(e => e.url),
        getImgs: () => {
            let srcs = _this.getSrcs();
            return fun.createImgArray(srcs);
        },
        init: async () => {
            fun.addMutationObserver(() => fun.remove("iframe,.bannersUite,.w-full:has(>amp-ad)"));
            await fun.waitEle(".touch-manipulation img");
            let setdata = JSON.parse(document.cookie.match(/setdata[\s=]+([^;]+)/)[1]);
            let {
                host,
                ms,
                cs
            } = setdata;
            let api = `${host}/chapter/getinfo?m=${ms}&c=${cs}`;
            let fetchJson = await fetch(api, {
                cache: "no-cache"
            }).then(res => res.json());
            siteJson = fetchJson;
            let imgs = _this.getImgs();
            let tE = fun.createImgBox(".touch-manipulation", 2);
            fun.remove("//div[ins[@class='adsbygoogle']]");
            await fun.remove(".touch-manipulation");
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            mode: "json",
            ele: () => _this.getImgs(),
            observer: "#FullPictureLoadMainImgBox>img",
            pos: ["#FullPictureLoadMainImgBox", 0],
            next: async () => {
                let next = siteJson?.data?.info?.next;
                if (!!next) {
                    let setdata = JSON.parse(document.cookie.match(/setdata[\s=]+([^;]+)/)[1]);
                    let {
                        host,
                        ms
                    } = setdata;
                    return `${host}/chapter/getinfo?m=${ms}&c=${next}`;
                } else {
                    return null;
                }
            },
            title: (json = siteJson) => json.data.info.title,
            history: 0,
            hide: ".justify-center:has(>.border-t),div:has(>.banners),div:has(>div>.cardlist)",
            aF: () => fun.gae("#title,#htitle,#bcrctitle").forEach(e => (e.innerText = siteJson.data.info.title)),
            preloadNextPage: () => {
                let next = siteJson.data.info?.next;
                if (next) {
                    let setdata = JSON.parse(document.cookie.match(/setdata[\s=]+([^;]+)/)[1]);
                    let {
                        host,
                        ms,
                    } = setdata;
                    let api = `${host}/chapter/getinfo?m=${ms}&c=${next}`;
                    fetch(api, {
                        cache: "no-cache"
                    }).then(res => res.json()).then(json => {
                        let srcs = _this.getSrcs(json);
                        let text = _this.autoPager.title(json);
                        fun.picPreload(srcs, text, "next");
                    });
                }
            }
        },
        css: "iframe,.bannersUite,.w-full:has(>amp-ad){display:none!important;}",
        category: "comic autoPager"
    }, {
        name: "漫畫屋",
        host: ["mh5.tw"],
        enable: 0,
        reg: /^https?:\/\/mh5\.tw\/(series|seriesvip)-\w+-\d+-\d+/i,
        imgs: () => {
            let max;
            /seriesvip/.test(siteUrl) ? max = fun.gt("a.cur~a:last-child") - 2 : max = fun.gt("a.cur~a:last-child") - 1;
            return fun.getImgIframe(".ptview>img[alt]:not([style])", max, 13, ".setnmh-pagedos", 1000, 0);
        },
        insertImg: [".ptview", 1, 0],
        autoDownload: [0],
        next: "//a[text()='下一話']",
        prev: "//a[text()='上一話']",
        customTitle: () => {
            let ele = fun.ge("h2");
            return ele ? fun.gt("h1") + " - " + fun.gt("h2") : fun.gt(".setnmh-bookname>a:nth-child(5)") + " - " + fun.gt(".setnmh-bookname>a:nth-child(7)");
        },
        css: ".ptview>img{width:100%!important;height:auto!important;max-width:1000px!important;border:none!important;box-shadow:none!important;padding:0!important;margin:0 auto!important}",
        category: "comic"
    }, {
        name: "山立漫畫/TVBS漫畫",
        host: ["www.setnmh.com", "www.tvbsmh.com"],
        enable: 0,
        reg: /^https?:\/\/(www\.setnmh\.com|www\.tvbsmh\.com)\/(series|seriesvip)-\w+-\d+-\d+-.+$/i,
        imgs: () => {
            let max;
            /seriesvip/.test(siteUrl) ? max = fun.gt("a.cur~a:last-child") - 2 : max = fun.gt("a.cur~a:last-child") - 1;
            return fun.getImgIframe(".ptview>img[alt]:not([style])", max, 13, ".setnmh-pagedos,.pagedosw", 1000, 0);
        },
        insertImg: [".ptview", 1, 0],
        autoDownload: [0],
        next: "//a[text()='下一話']",
        prev: "//a[text()='上一話']",
        customTitle: () => document.title.split(" - ")[0].replace(/正在觀看|（\d+P）/ig, "").replace(">", " - "),
        css: ".ptview>img{width:100%!important;height:auto!important;max-width:1000px!important;border:none!important;box-shadow:none!important;padding:0!important;margin:0 auto!important}",
        category: "comic"
    }, {
        name: "如漫画",
        host: ["www.rumanhua.com", "rumanhua.com", "m.rumanhua.com"],
        reg: () => fun.checkUrl({
            h: "rumanhua.com",
            p: /^\/\w+\/\w+.html$/i
        }) && comicInfiniteScrollMode != 1,
        init: () => fun.createImgBox("#pics", 1),
        imgs: ".main_img img",
        button: [4],
        insertImg: [".main_img", 2],
        autoDownload: [0],
        next: "a[href$=html]:has(>.folat-next1),a[href$=html]:has(>.i-rd-next)",
        prev: "a[href$=html]:has(>.folat-prev1),a[href$=html]:has(>.i-rd-prev)",
        customTitle: (dom = document) => {
            let text = fun.dt({
                t: dom.title,
                d: " - 如漫画"
            });
            let textArr = text.split("_");
            return textArr[1] + " - " + textArr[0];
        },
        preloadNext: (nextDoc, obj) => {
            fun.iframe(nextLink, {
                waitEle: ".main_img img",
                waitVar: "__c0rst96",
                cb: (dom, frame) => {
                    let srcs = fun.getImgSrcArr(obj.imgs, dom);
                    fun.picPreload(srcs, obj.customTitle(dom), "next");
                }
            });
        },
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "如漫画 自動翻頁",
        reg: () => fun.checkUrl({
            h: "rumanhua.com",
            p: /^\/\w+\/\w+.html$/i
        }) && comicInfiniteScrollMode == 1,
        getSrcs: (dom) => fun.getImgSrcArr(".main_img img", dom),
        getImgs: (dom = document) => fun.createImgArray(_this.getSrcs(dom)),
        init: async () => {
            let imgs = _this.getImgs();
            let tE = fun.ge(".main_img");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            mode: 1,
            waitEle: ".main_img img[src^=http]",
            ele: (dom) => _this.getImgs(dom),
            pos: [".main_img", 0],
            observer: ".main_img>img",
            next: "a[href$=html]:has(>.folat-next1),a[href$=html]:has(>.i-rd-next)",
            re: ".footer-right>a,.main_control,.chaphead,.chapter-end,.chap-footer",
            title: (dom) => {
                let text = fun.dt({
                    t: dom.title,
                    d: " - 如漫画"
                });
                let textArr = text.split("_");
                if (hasTouchEvents) {
                    return textArr[0];
                } else {
                    return textArr[1] + " - " + textArr[0];
                }
            },
            preloadNextPage: (dom) => {
                let next = fun.ge(_this.autoPager.next, dom);
                if (!!next) {
                    fun.iframe(next.href, {
                        waitEle: ".main_img img[src^=http]",
                        waitVar: "__c0rst96",
                        cb: async (dom, frame) => {
                            let srcs = fun.getImgSrcArr(".main_img img", dom);
                            fun.picPreload(srcs, _this.autoPager.title(dom), "next");
                        }
                    });
                }
            }
        },
        category: "comic autoPager"
    }, {
        name: "漫画网",
        host: ["www.manhua3.com", "manhuami.cc"],
        reg: () => fun.checkUrl({
            e: [
                "div.logo>a[title=漫画网]>img[alt=漫画网]",
                "#pics"
            ],
            p: /^\/[\d-]+\.html$/
        }) && comicInfiniteScrollMode != 1,
        init: () => fun.createImgBox("#pics", 1),
        imgs: (frame = _unsafeWindow) => frame.params.images.map(e => e.url),
        button: [4],
        insertImg: [
            ["#FullPictureLoadMainImgBox", 0, "#pics"], 2
        ],
        autoDownload: [0],
        next: "//a[text()='下一章'][starts-with(@href,'/')]",
        prev: "//a[text()='上一章'][starts-with(@href,'/')]",
        customTitle: (dom = document) => fun.dt({
            t: dom.title,
            d: "在线阅读-漫画网"
        }).replace("_", " - "),
        preloadNext: (nextDoc, obj) => {
            fun.iframeVar(nextLink, "params").then(w => {
                let srcs = obj.imgs(w);
                fun.picPreload(srcs, obj.customTitle(nextDoc), "next");
            });
        },
        infiniteScroll: true,
        css: "@media (max-width:559px){.main{padding:20px 0px 0!important;}}",
        category: "comic"
    }, {
        name: "漫画网 自動翻頁",
        reg: () => fun.checkUrl({
            e: [
                "div.logo>a[title=漫画网]>img[alt=漫画网]",
                "#pics"
            ],
            p: /^\/[\d-]+\.html$/
        }) && comicInfiniteScrollMode == 1,
        getSrcs: () => frameWindow.params.images.map(e => e.url),
        getImgs: () => fun.createImgArray(_this.getSrcs()),
        init: async () => {
            let imgs = _this.getImgs();
            let tE = fun.createImgBox("#pics", 1);
            tE.append(...imgs);
            fun.remove("#pics");
            await fun.lazyload();
        },
        autoPager: {
            mode: 1,
            waitEle: "#pics img",
            ele: () => _this.getImgs(),
            pos: ["#FullPictureLoadMainImgBox", 0],
            observer: "#FullPictureLoadMainImgBox>img",
            next: "//a[text()='下一章'][starts-with(@href,'/')]",
            re: ".btn.paediy",
            title: (dom) => {
                let text = fun.dt({
                    t: dom.title,
                    d: "在线阅读-漫画网"
                });
                if (hasTouchEvents) {
                    return text.split("_")[1];
                } else {
                    return text.replace("_", " - ");
                }
            },
            preloadNextPage: 1
        },
        css: "@media (max-width:559px){.main{padding:20px 0px 0!important;}}",
        category: "comic autoPager"
    }, {
        name: "漫画160/非常爱漫新站",
        host: ["www.mh160.cc", "m.mh160.cc", "www.veryim.com"],
        enable: 1,
        reg: () => /^https?:\/\/(www|m)\.mh160\.cc\/kanmanhua\/\w+\/\d+\.html$|^https?:\/\/www\.veryim\.com\/manhua\/\d+\/\d+\.html$/i.test(fun.url) && comicInfiniteScrollMode != 1,
        init: "document.onkeydown=null",
        imgs: () => {
            const {
                base64_decode,
                qTcms_S_m_murl_e,
                f_qTcms_Pic_curUrl_realpic
            } = _unsafeWindow;
            return base64_decode(qTcms_S_m_murl_e).split("$qingtiandy$").map(e => f_qTcms_Pic_curUrl_realpic(e));
        },
        button: [4],
        insertImg: ["//td[//img[@onclick]] | //div[@class='UnderPage']", 2],
        autoDownload: [0],
        next: "#k_Pic_nextArr",
        prev: "#k_Pic_backArr",
        customTitle: () => {
            const {
                qTcms_S_m_name,
                qTcms_S_m_playm
            } = _unsafeWindow;
            return qTcms_S_m_name + " - " + qTcms_S_m_playm;
        },
        preloadNext: (nextDoc, obj) => {
            let code = fun.gst("qTcms_S_m_murl_e", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(obj.imgs(), obj.customTitle(), "next");
        },
        infiniteScroll: true,
        css: ".action-list li{width:50% !important}#action>ul>li:nth-child(n+2):nth-child(-n+3){display:none !important}",
        category: "comic"
    }, {
        name: "漫画160/非常爱漫新站 自動翻頁",
        enable: 1,
        reg: () => /^https?:\/\/(www|m)\.mh160\.cc\/kanmanhua\/\w+\/\d+\.html$|^https?:\/\/www\.veryim\.com\/manhua\/\d+\/\d+\.html$/i.test(fun.url) && comicInfiniteScrollMode == 1,
        getImgs: () => {
            const {
                base64_decode,
                qTcms_S_m_murl_e,
                f_qTcms_Pic_curUrl_realpic
            } = _unsafeWindow;
            let srcs = base64_decode(qTcms_S_m_murl_e).split("$qingtiandy$").map(e => f_qTcms_Pic_curUrl_realpic(e));
            return fun.createImgArray(srcs);
        },
        init: async () => {
            let imgs = _this.getImgs();
            let tE = fun.createImgBox("//td[//img[@onclick]] | //div[@class='UnderPage']", 2);
            fun.remove("//td[//img[@onclick]] | //div[@class='UnderPage']");
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            script: "//script[contains(text(),'qTcms_S_m_murl_e')]",
            ele: () => _this.getImgs(),
            pos: ["#FullPictureLoadMainImgBox", 0],
            observer: "#FullPictureLoadMainImgBox>img",
            next: (dom, r = 1) => {
                let n = fun.ge("#k_Pic_nextArr[href$='html']", dom);
                if (n) {
                    return n.href;
                } else {
                    if (r === 1) {
                        let n = fun.ge("#k_Pic_nextArr");
                        n.href = fun.lp.replace(/\d+\.html$/, "");
                        let text;
                        if (fun.lh.includes("mh160")) {
                            text = "返回目录";
                        } else {
                            text = "目录";
                        }
                        n.innerText = text;
                        if (fun.lh === "www.mh160.cc") {
                            n.remove();
                        }
                    }
                    return null;
                }
            },
            re: ".title,.main-btn,.breadcrumb,.BarTit,#action,.pager:not([id])",
            title: (dom, frame = _unsafeWindow) => {
                const {
                    qTcms_S_m_name,
                    qTcms_S_m_playm
                } = frame;
                if (hasTouchEvents) {
                    return qTcms_S_m_playm;
                } else {
                    return qTcms_S_m_name + " - " + qTcms_S_m_playm;
                }
            },
            hide: "#m_r_bottom~.imgBox,.globalPadding",
            lazyload: 0,
            preloadNextPage: (dom) => {
                let next = _this.autoPager.next(dom);
                if (!!next) {
                    fun.iframe(next, {
                        waitVar: "qTcms_S_m_murl_e",
                        cb: async (nextDom, frame) => {
                            let srcs = frame.base64_decode(frame.qTcms_S_m_murl_e).split("$qingtiandy$").map(e => frame.f_qTcms_Pic_curUrl_realpic(e));
                            let text = _this.autoPager.title(nextDom, frame);
                            fun.picPreload(srcs, text, "next");
                        }
                    });
                }
            }
        },
        css: ".action-list li{width:50% !important}#action>ul>li:nth-child(n+2):nth-child(-n+3),li:has(>#prev),li:has(>.curPage),li:has(>#k_next){display:none !important}@media only screen and (max-width:480px){.container,.content-body{padding:0px !important}}",
        category: "comic autoPager"
    }, {
        name: "笨狗漫画",
        host: ["www.bengou.co", "m.bengou.co"],
        enable: 0,
        reg: /^https?:\/\/(www|m)\.bengou\.co\/\w+\/\w+\/\d+\.html$/i,
        init: "document.onkeydown=null;",
        imgs: () => {
            const {
                base64_decode,
                qTcms_S_m_murl_e,
                f_qTcms_Pic_curUrl_realpic
            } = _unsafeWindow;
            return base64_decode(qTcms_S_m_murl_e).split("$qingtiandy$").map(e => f_qTcms_Pic_curUrl_realpic(e));
        },
        insertImg: ["//td[img[@id='qTcms_pic']]", 2],
        autoDownload: [0],
        next: () => {
            const {
                qTcms_Pic_nextArr
            } = _unsafeWindow;
            return (!/^java/.test(qTcms_Pic_nextArr) && qTcms_Pic_nextArr !== "") ? location.origin + qTcms_Pic_nextArr : null;
        },
        prev: 1,
        customTitle: () => {
            const {
                qTcms_S_m_name,
                qTcms_S_m_playm
            } = _unsafeWindow;
            return qTcms_S_m_name + " - " + qTcms_S_m_playm;
        },
        preloadNext: (nextDoc, obj) => {
            let code = fun.gst("qTcms_S_m_murl_e", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(obj.imgs(), obj.customTitle(), "next");
        },
        css: ".action-list li{width:50% !important}#mypic_k0,.action-list>ul>li:nth-child(n+2):nth-child(-n+3){display:none!important}",
        category: "comic"
    }, {
        name: "星辰漫画网",
        host: ["www.xcmh.com", "m.xcmh.com"],
        enable: 1,
        reg: /^https?:\/\/(www|m)\.xcmh\.com\/\w+\/\w+\/\d+\.html$/i,
        init: "document.onkeydown=null;",
        imgs: () => {
            const {
                base64_decode,
                qTcms_S_m_murl_e,
                f_qTcms_Pic_curUrl_realpic
            } = _unsafeWindow;
            return base64_decode(qTcms_S_m_murl_e).split("$qingtiandy$").map(e => location.origin + f_qTcms_Pic_curUrl_realpic(e));
        },
        button: [4],
        insertImg: ["//td[img[@id='qTcms_pic']]", 2],
        autoDownload: [0],
        next: () => {
            const {
                qTcms_Pic_nextArr
            } = _unsafeWindow;
            return (!/^java/.test(qTcms_Pic_nextArr) && qTcms_Pic_nextArr !== "") ? location.origin + qTcms_Pic_nextArr : null;
        },
        prev: 1,
        customTitle: () => {
            const {
                qTcms_S_m_name,
                qTcms_S_m_playm
            } = _unsafeWindow;
            return qTcms_S_m_name + " - " + qTcms_S_m_playm;
        },
        preloadNext: (nextDoc, obj) => {
            let code = fun.gst("qTcms_S_m_murl_e", nextDoc);
            fun.script(code, 0, 1);
            fun.picPreload(obj.imgs(), obj.customTitle(), "next");
        },
        css: "#mypic_k0{display:none!important}",
        category: "comic"
    }, {
        name: "哔咔漫画",
        host: ["www.bikamanhua.com"],
        enable: 0,
        reg: /^https?:\/\/www\.bikamanhua\.com\/[\d-]+\.html$/i,
        imgs: "img.lazy-read",
        button: [4],
        insertImg: ["div:has(>div>img.lazy-read)", 2],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: "//a[text()='上一章']",
        customTitle: (dom = document) => fun.title(" - ", 3, dom),
        preloadNext: true,
        category: "comic"
    }, {
        name: "艾米漫画/聚合漫画屋/酷看漫画/皮皮漫画",
        host: ["www.aimimh.com", "www.52hah.com", "www.kukanmanhua.com", "www.pipiman.com"],
        enable: 0,
        reg: [
            /^https?:\/\/www\.aimimh\.com\/chapter\/[\d-]+/,
            /^https?:\/\/www\.52hah\.com\/chapter\/\d+/,
            /^https?:\/\/www\.kukanmanhua\.com\/chapter\/\d+/,
            /^https?:\/\/www\.pipiman\.com\/chapter\/\d+/
        ],
        include: ".comiclist",
        imgs: ".comiclist img",
        button: [4],
        insertImg: [".comicpage", 2],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: "//a[text()='上一章']",
        customTitle: (dom = document) => fun.gt("h1.title", 1, dom),
        preloadNext: (nextDoc, obj) => fun.iframeDoc(nextLink, ".comiclist img:not([src*=loading])", 30000).then(nextIframeDoc => fun.picPreload(fun.getImgSrcArr(obj.imgs, nextIframeDoc), obj.customTitle(nextIframeDoc), "next")),
        category: "comic"
    }, {
        name: "艾米漫画M/聚合漫画屋M/酷看漫画M/皮皮漫画M",
        host: ["www.aimimh.com", "www.52hah.com", "www.kukanmanhua.com", "www.mh369.com"],
        enable: 0,
        reg: [
            /^https?:\/\/www\.aimimh\.com\/chapter\/[\d-]+/,
            /^https?:\/\/www\.52hah\.com\/chapter\/\d+/,
            /^https?:\/\/www\.kukanmanhua\.com\/chapter\/\d+/,
            /^https?:\/\/www\.mh369\.com\/chapter\/\d+/
        ],
        imgs: "#cp_img>img[data-original]",
        button: [4],
        insertImg: ["#cp_img", 2],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: "//a[text()='上一章']",
        customTitle: () => {
            if (/www\.52hah\.com|www\.kukanmanhua\.com|www\.mh369\.com/.test(fun.lh)) {
                let text = fun.gst("bookInfo").match(/bookInfo[\s=]+([^;]+)/)[1];
                let bookInfo = fun.run(text);
                return bookInfo.book_name.replace(/_\d+$/, "") + " - " + bookInfo.chapter_name;
            } else {
                return fun.title("在线阅读-艾米漫画");
            }
        },
        preloadNext: (nextDoc, obj) => fun.iframeDoc(nextLink, "#cp_img>img[data-original]:not([src*=loading])", 30000).then(nextIframeDoc => fun.picPreload(fun.getImgSrcArr(obj.imgs, nextIframeDoc), nextIframeDoc.title, "next")),
        category: "comic"
    }, {
        name: "云端漫画",
        host: ["www.bcloudmerge.com"],
        enable: 0,
        reg: /^https?:\/\/www\.bcloudmerge\.com\/bmergechapter\/\d+\/\d+\.html$/,
        init: () => fun.remove("//div[p[@class='open']] | //div[p[contains(text(),'小贴士')]] | //div[div[button[text()='无删韩漫']]]"),
        imgs: ".mh_list img,#content img",
        button: [4],
        insertImg: [".mh_list,#content", 2],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: "//a[text()='上一章']",
        customTitle: () => {
            const {
                read
            } = _unsafeWindow;
            return read.articlename + " - " + read.cname;
        },
        category: "comic"
    }, {
        name: "次元/夜神",
        host: ["cymh.info", "ysmh.info"],
        enable: 0,
        reg: () => !hasTouchEvents && /^https?:\/\/(cymh|ysmh)\.info\/\w+\/\d+\/\d+\.html$/i.test(fun.url),
        init: async () => fun.getNP("#cp_img img", "//a[text()='下一页']", null, ".fanye"),
        imgs: "#cp_img img",
        button: [4],
        insertImg: ["#cp_img", 2],
        autoDownload: [0],
        next: "//li[a[@class='active']]/following-sibling::li[1]/a",
        prev: "//li[a[@class='active']]/preceding-sibling::li[1]/a",
        customTitle: () => fun.gt("h1.title") + " - " + fun.gt("a.active"),
        category: "comic"
    }, {
        name: "次元M/夜神M",
        host: ["cymh.info", "ysmh.info"],
        enable: 0,
        reg: () => hasTouchEvents && /^https?:\/\/(cymh|ysmh)\.info\/\w+\/\d+\/\d+\.html$/i.test(fun.url),
        init: async () => fun.getNP("#cp_img>*", "//a[text()='下一页']", null, ".page"),
        imgs: "#cp_img img",
        button: [4],
        insertImg: ["#cp_img", 2],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: 1,
        customTitle: async () => {
            let url = fun.gu(".back>a");
            let comicName = await fun.fetchDoc(url).then(dom => fun.ge("#bookcase", dom).dataset.name);
            return comicName + " - " + fun.gt(".h1");
        },
        category: "comic"
    }, {
        name: "最次元/野蛮/考拉漫画/优乐漫画",
        host: ["zcymh.com", "yemancomic.com", "cn.colacomic.com", "www.beston-test.com"],
        enable: 0,
        reg: /^https?:\/\/(zcymh\.com|yemancomic\.com|cn\.colacomic\.com|www\.beston-test\.com)\/\w+\/\d+\/\d+\.html$/,
        imgs: "#img-box img,#imgsec img",
        button: [4],
        insertImg: ["#img-box,#imgsec", 2],
        autoDownload: [0],
        next: "#js_pageNextBtn>a,a#next",
        prev: "#js_pagePrevBtn>a,a#prev",
        customTitle: () => {
            let code = fun.gst("read");
            let objText = code.match(/read[\s=]+([^;]+)/)[1];
            let json = fun.run(objText);
            return json.articlename + " - " + json.chaptername;
        },
        category: "comic"
    }, {
        name: "爱看漫M",
        host: ["ikmmh.com"],
        enable: 0,
        reg: () => hasTouchEvents && /^https?:\/\/ikmmh\.com\/\w+\/\d+\/\d+\.html$/.test(fun.url),
        imgs: ".episode-detail img",
        button: [4],
        insertImg: [".episode-detail", 2],
        autoDownload: [0],
        next: "a#next",
        prev: "a#prev",
        customTitle: () => {
            let code = fun.gst("read");
            let objText = code.match(/read[\s=]+([^;]+)/)[1];
            let json = fun.run(objText);
            return json.articlename + " - " + json.chaptername;
        },
        category: "comic"
    }, {
        name: "拷貝漫畫",
        host: ["www.copymanga.site", "copymanga.site", "www.copymanga.tv", "copymanga.tv", "www.mangacopy.com", "mangacopy.com"],
        enable: 1,
        reg: () => /^https?:\/\/(www\.)?(copymanga\.site|copymanga\.tv|mangacopy\.com)\/comic\/\w+\/chapter\/.+/.test(fun.url) && comicInfiniteScrollMode != 1,
        delay: 300,
        fetchJson: (url = siteUrl) => {
            //let host = fun.lh.replace("www.", "");
            //let api = siteUrl.replace(/.*?(?=\/comic\/)/, `https://api.${host}/api/v3`);
            let [, , name, , id] = new URL(url).pathname.split("/");
            let api = `/api/v3/comic/${name}/chapter2/${id}?platform=3`;
            return fetch(api).then(res => res.json());
        },
        init: async () => {
            fun.copymangaUI();
            fun.showMsg(displayLanguage.str_05, 0);
            let fetchJson = await _this.fetchJson();
            siteJson = fetchJson;
            debug("\n此頁JSON資料\n", fetchJson);
            let readHistoryData = localStorage.getItem("copymangaReadHistory");
            let [, , comic, , chapter] = fun.lp.split("/");
            let json;
            readHistoryData ? json = JSON.parse(readHistoryData) : json = {};
            json[comic] = chapter;
            localStorage.setItem("copymangaReadHistory", JSON.stringify(json));
        },
        //imgs: () => siteJson.results.chapter.contents.map(e => e.url.replace(".c800x.", ".c1500x.")),
        imgs: (json = siteJson) => {
            const srcs = [];
            const {
                words,
                contents
            } = siteJson.results.chapter;
            words.forEach((w, i) => (srcs[w] = contents[i].url.replace(".c800x.", ".c1500x.")));
            return srcs;
        },
        button: [4],
        insertImg: [".comicContent-list", 2],
        autoDownload: [0],
        next: "//a[text()='下一話'][starts-with(@href,'/comic/')]",
        prev: "//a[text()='上一話'][starts-with(@href,'/comic/')]",
        customTitle: (json = siteJson) => json.results.comic.name + " - " + json.results.chapter.name,
        preloadNext: (nextDoc, obj) => {
            obj.fetchJson(nextLink).then(json => {
                let srcs = obj.imgs(json);
                let title = obj.customTitle(json);
                fun.picPreload(srcs, title, "next");
            });
        },
        topButton: true,
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}.header+div[style],.comicContainerAds{display:none!important}",
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "拷貝漫畫 自動翻頁",
        reg: () => /^https?:\/\/(www\.)?(copymanga\.site|copymanga\.tv|mangacopy\.com)\/comic\/\w+\/chapter\/.+/.test(fun.url) && comicInfiniteScrollMode == 1,
        delay: 300,
        getImgs: (url = siteUrl) => {
            let [, , comic, , chapter] = new URL(url).pathname.split("/");
            let api = `/api/v3/comic/${comic}/chapter2/${chapter}?platform=3`;
            return fetch(api).then(res => res.json()).then(json => {
                const srcArr = [];
                const {
                    words,
                    contents
                } = json.results.chapter;
                words.forEach((w, i) => (srcArr[w] = contents[i].url.replace(".c800x.", ".c1500x.")));
                customTitle = json.results.comic.name + " - " + json.results.chapter.name;
                let readHistoryData = localStorage.getItem("copymangaReadHistory");
                let obj;
                readHistoryData ? obj = JSON.parse(readHistoryData) : obj = {};
                obj[comic] = chapter;
                localStorage.setItem("copymangaReadHistory", JSON.stringify(obj));
                return srcArr;
            }).then(srcs => fun.createImgArray(srcs));
        },
        init: async () => {
            fun.copymangaUI();
            fun.showMsg(displayLanguage.str_135, 0);
            await _this.getImgs().then(async imgs => {
                let tE = fun.ge(".comicContent-list");
                tE.innerHTML = "";
                tE.append(...imgs);
                fun.hideMsg();
                await fun.lazyload();
            });
            fun.addMutationObserver(() => {
                if (fun.ge("//li[img[@data-src]]")) {
                    fun.remove("//li[img[@data-src]]");
                }
            });
        },
        autoPager: {
            ele: () => _this.getImgs(nextLink),
            pos: [".comicContent-list", 0],
            observer: ".comicContent-list>img",
            next: "//a[text()='下一話'][starts-with(@href,'/comic/')]",
            re: ".header,.footer",
            title: () => customTitle
        },
        css: ".header+div[style],.comicContainerAds{display:none!important}",
        category: "comic autoPager"
    }, {
        name: "拷貝漫畫 目錄頁",
        reg: /^https?:\/\/(www\.)?(copymanga\.site|copymanga\.tv|mangacopy\.com)\/comic\/\w+$/,
        delay: 300,
        init: async () => {
            await fun.waitEle(".tab-pane.show.active a");
            const updateLastChapter = () => {
                let [, , comic] = fun.lp.split("/");
                let readHistoryData = localStorage.getItem("copymangaReadHistory");
                if (!!readHistoryData) {
                    let json = JSON.parse(readHistoryData);
                    if (comic in json) {
                        let selector = `.tab-content a[href$="${json[comic]}"]`;
                        fun.gae(".lastchapter").forEach(a => a.classList.remove("lastchapter"));
                        fun.gae(selector).forEach(a => a.classList.add("lastchapter"));
                        setTimeout(() => {
                            let lastReadUrl = fun.lp + "/chapter/" + json[comic];
                            let lastText = fun.ge(".lastchapter").title;
                            let lastE = fun.ge("#lastRead");
                            if (!lastE && !fun.ge("//span[contains(text(),'最後閱讀')]")) {
                                let a = document.createElement("a");
                                a.id = "lastRead";
                                a.target = "_blank";
                                let tableRight = fun.ge(".table-default-right");
                                tableRight.insertAdjacentElement("afterbegin", a);
                                const span = document.createElement("span");
                                span.innerText = "最後閱讀：";
                                tableRight.insertAdjacentElement("afterbegin", span);
                                a.href = lastReadUrl;
                                a.innerText = lastText;
                            } else if (!!lastE) {
                                let a = lastE;
                                a.href = lastReadUrl;
                                a.innerText = lastText;
                            }
                        }, 200);
                    }
                }
            };
            updateLastChapter();
            document.addEventListener("visibilitychange", updateLastChapter);
            if ("aboutBlank" in _unsafeWindow) _unsafeWindow.aboutBlank = null;
            setTimeout(() => fun.clearAllTimer(3), 1000);
        },
        css: ".lastchapter{color:#fff !important;background:#1790E6}.comicDetailAds{display:none!important;}",
        category: "none"
    }, {
        name: "拷貝漫畫 清除不給開啟開發人員工具",
        reg: () => !hasTouchEvents && /^(www\.)?(copymanga\.site|copymanga\.tv|mangacopy\.com)$/.test(fun.lh) && !fun.ge("//title[text()='漫畫觀看']"),
        delay: 300,
        init: () => {
            fun.clearAllTimer(3);
            if ("aboutBlank" in _unsafeWindow) _unsafeWindow.aboutBlank = null;
            fun.gae("img[data-src]").forEach(img => (img.src = img.dataset.src));
        },
        category: "none"
    }, {
        name: "拷貝漫畫M",
        host: ["www.copymanga.site", "copymanga.site", "www.copymanga.tv", "copymanga.tv", "www.mangacopy.com", "mangacopy.com"],
        enable: 1,
        reg: () => /^https?:\/\/(www\.)?(copymanga\.site|copymanga\.tv|mangacopy\.com)\/h5\/comicContent\/\w+\/.+/.test(fun.url) && comicInfiniteScrollMode != 1,
        xhrJson: (url = siteUrl) => {
            //let [name, id] = url.split("/").slice(-2);
            //let host = fun.lh.replace("www.", "");
            //let api = `https://api.${host}/api/v3/comic/${name}/chapter/${id}`;
            let [name, id] = url.split("/").slice(-2);
            let api = `/api/v3/comic/${name}/chapter2/${id}?platform=3`;
            return fun.xhr(api, {
                responseType: "json",
                headers: {
                    "Referer": `https://${fun.lh}/comic/${name}/chapter/${id}`,
                    "User-Agent": PCUA
                }
            });
        },
        init: async () => {
            fun.clearAllTimer(3);
            if ("aboutBlank" in _unsafeWindow) _unsafeWindow.aboutBlank = null;
            siteJson = await _this.xhrJson();
            debug("\n此頁JSON資料\n", siteJson);
            const addHtml = (url, text) => {
                let str = `<div style="padding: 10px 0; text-align: center;"><a href="${url}"style="width: 100%;font-size: 26px;line-height: 50px;height: 50px;text-align: center;">${text}</a></div>`;
                fun.ge(".comicContentPopupImageList").insertAdjacentHTML("afterend", str);
            };
            let s = siteUrl.split("/").slice(-2);
            let url = `https://${fun.lh}/h5/details/comic/${s[0]}`;
            let hUrl = `https://${fun.lh}/h5/index`;
            addHtml(hUrl, "首頁");
            addHtml(url, "目錄");
            let nUrl = _this.next();
            if (nUrl) addHtml(nUrl, "點選進入下一話");
            fun.copymanga_M_UI(url, hUrl);
        },
        //imgs: () => siteJson.results.chapter.contents.map(e => e.url.replace("c800x.", "c1500x.")),
        imgs: (json = siteJson) => {
            const srcs = [];
            const {
                words,
                contents
            } = json.results.chapter;
            words.forEach((w, i) => (srcs[w] = contents[i].url));
            return srcs;
        },
        button: [4],
        insertImg: [".comicContentPopupImageList", 2],
        next: () => {
            let next = siteJson.results.chapter.next;
            return next ? siteUrl.replace(/[\w-]+$/, "") + next : null;
        },
        customTitle: () => siteJson.results.comic.name + " - " + siteJson.results.chapter.name,
        preloadNext: (nextDoc, obj) => {
            obj.xhrJson(nextLink).then(json => {
                let srcs = obj.imgs(json);
                let title = json.results.comic.name + " - " + json.results.chapter.name;
                fun.picPreload(srcs, title, "next");
            });
        },
        css: ".comicFixed,.comicControlBottom.hide{display:none!important}.comicControlBottom a:-webkit-any-link{color:white!important}.comicContentPopup .comicControlBottom .comicControlBottomBottom span{margin:0 1rem!important}",
        fancybox: {
            blacklist: 1
        },
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "拷貝漫畫M 自動翻頁",
        enable: 1,
        reg: () => /^https?:\/\/(www\.)?(copymanga\.site|copymanga\.tv|mangacopy\.com)\/h5\/comicContent\/\w+\/.+/.test(fun.url) && comicInfiniteScrollMode == 1,
        getData: () => {
            let [name, id] = new URL(document.URL).pathname.split("/").slice(-2);
            let api = `/api/v3/comic/${name}/chapter2/${id}?platform=3`;
            return fun.xhr(api, {
                responseType: "json",
                headers: {
                    "Referer": `https://${fun.lh}/comic/${name}/chapter/${id}`,
                    "User-Agent": PCUA
                }
            }).then(json => {
                const srcs = [];
                const {
                    words,
                    contents
                } = json.results.chapter;
                words.forEach((w, i) => (srcs[w] = contents[i].url));
                globalImgArray = srcs;
                customTitle = json.results.chapter.name;
                let next = json.results.chapter?.next;
                console.log("\n拷貝漫畫M_JSON\n", json, globalImgArray, customTitle, next);
                if (!!next) {
                    tempNextLink = document.URL.replace(/[^\/]+$/, "") + next;
                } else {
                    tempNextLink = null;
                }
            });
        },
        init: async () => {
            fun.showMsg(displayLanguage.str_135, 0);
            await _this.getData();
            let imgs = fun.createImgArray(globalImgArray);
            let tE = fun.ge(".comicContentPopupImageList");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
            fun.clearAllTimer(3);
            if ("aboutBlank" in _unsafeWindow) _unsafeWindow.aboutBlank = null;
            fun.hideMsg();
            const addHtml = (url, text) => {
                let str = `<div style="padding: 0 0 12px; text-align: center;"><a href="${url}"style="width: 100%;font-size: 26px;line-height: 34px;height: 34px;text-align: center;">${text}</a></div>`;
                fun.ge(".comicContentPopupImageList").insertAdjacentHTML("afterend", str);
            };
            let s = siteUrl.split("/").slice(-2);
            let url = `https://${fun.lh}/h5/details/comic/${s[0]}`;
            let hUrl = `https://${fun.lh}/h5/index`;
            addHtml(hUrl, "首頁");
            addHtml(url, "目錄");
            fun.copymanga_M_UI(url, hUrl);
        },
        autoPager: {
            ele: () => fun.createImgArray(globalImgArray),
            pos: [".comicContentPopupImageList", 0],
            observer: ".comicContentPopupImageList>img",
            next: () => tempNextLink,
            wait: async () => await _this.getData(),
            title: () => customTitle
        },
        css: ".comicFixed,.comicControlBottom.hide{display:none!important}.comicControlBottom a:-webkit-any-link{color:white!important}.comicContentPopup .comicControlBottom .comicControlBottomBottom span{margin:0 1rem!important}",
        category: "comic autoPager"
    }, {
        name: "拷貝漫畫M 清除不給開啟開發人員工具",
        reg: /^https?:\/\/(www\.)?(copymanga\.site|copymanga\.tv|mangacopy\.com)\/h5/,
        init: async () => {
            fun.clearAllTimer(3);
            if ("aboutBlank" in _unsafeWindow) _unsafeWindow.aboutBlank = null;
        },
        category: "none"
    }, {
        name: "二次元動漫/看漫畫",
        host: ["www.2animx.com", "www.k886.net"],
        enable: 0,
        reg: /^https?:\/\/(www\.2animx\.com|www\.k886\.net)\/index-look-name-.+/,
        init: "$(document).unbind('click');",
        imgs: (url = siteUrl, dom = document, msg = 1, request = 0) => {
            let max = fun.ge("#total", dom).value;
            let links = fun.arr(max, (v, i) => fun.getModeUrl(url, 20, (i + 1)));
            return fun.getImgA("#ComicPic", links, 100, null, msg, request);
        },
        button: [4],
        insertImg: ["//div[img[@id='ComicPic']]", 2],
        autoDownload: [0],
        next: ".n.zhangjie",
        prev: ".p.zhangjie",
        customTitle: dom => {
            let [, , comic_name, comic_chapter] = fun.gt(".b", 1, dom).split(" - ");
            return comic_name + " - " + comic_chapter.replace(/（\d+P）/i, "");
        },
        preloadNext: async (nextDoc, obj) => fun.picPreload(await obj.imgs(nextLink, nextDoc, 0, 1), obj.customTitle(nextDoc), "next"),
        css: ".c>*:not(.n.zhangjie):not(.p.zhangjie){display:none!important;}#ComicPic{display:block!important;margin: 0 auto !important;}",
        category: "comic"
    }, {
        name: "奴奴漫畫",
        host: ["www.2nunu.com"],
        enable: 0,
        reg: /^https?:\/\/www\.2nunu\.com\/look-.+\.html/,
        init: "$(document).unbind();document.onkeydown=null;",
        imgs: (url = siteUrl, dom = document, msg = 1, request = 0) => {
            let max = fun.ge("#total", dom).value;
            let links = fun.arr(max, (v, i) => url.replace(/\d+\.html$/, "") + (i + 1) + ".html");
            return fun.getImgA("#cpimg", links, 100, null, msg, request);
        },
        button: [4],
        insertImg: ["#showimage", 2],
        autoDownload: [0],
        next: "//a[text()='下一章']",
        prev: "//a[text()='上一章']",
        customTitle: (dom = document) => dom.title.replace(/（\d+P）.+/i, "").replace("第", " - 第"),
        preloadNext: async (nextDoc, obj) => fun.picPreload(await obj.imgs(nextLink, nextDoc, 0, 1), obj.customTitle(nextDoc), "next"),
        category: "comic"
    }, {
        name: "漫画DB",
        host: ["www.manhuadb.com"],
        enable: 1,
        reg: () => /^https?:\/\/www\.manhuadb\.com\/manhua\/\d+\/\w+\.html$/.test(fun.url) && comicInfiniteScrollMode != 1,
        imgs: (frame = _unsafeWindow) => {
            const {
                img_data_arr,
                img_host,
                img_pre
            } = frame;
            return img_data_arr.map(e => img_host + img_pre + e.img);
        },
        button: [4],
        insertImg: ["#all", 2],
        autoDownload: [0],
        next: () => {
            const {
                p_ccid,
                p_id,
                vg_r_data,
                p_d
            } = _unsafeWindow;
            return fetch("/book/goNumPage", {
                "headers": {
                    "content-type": "application/x-www-form-urlencoded; charset=UTF-8"
                },
                "body": `ccid=${p_ccid}&id=${p_id}&num=${Number(vg_r_data.data("num")) + 1}&d=${p_d}&type=next`,
                "method": "POST"
            }).then(res => res.json()).then(json => json.state == 0 ? null : location.origin + json.url);
        },
        prev: "//a[text()='上集']",
        customTitle: (dom) => fun.title("-漫画DB", 0, dom),
        preloadNext: () => {
            fun.iframe(nextLink, {
                waitVar: "img_data_arr",
                cb: async (dom, frame) => {
                    let srcs = _this.imgs(frame);
                    let text = _this.customTitle(dom);
                    fun.picPreload(srcs, text, "next");
                }
            });
        },
        infiniteScroll: true,
        category: "comic"
    }, {
        name: "漫画DB 自動翻頁",
        reg: () => /^https?:\/\/www\.manhuadb\.com\/manhua\/\d+\/\w+\.html$/.test(fun.url) && comicInfiniteScrollMode == 1,
        getSrcs: (dom) => {
            let code = fun.gst("img_data", dom);
            let base64Text = code.slice(16, -2);
            //let decodeBase64 = atob(base64Text);
            let decodeBase64 = _unsafeWindow.jQuery.base64.decode(base64Text);
            let imgDataArr = JSON.parse(decodeBase64);
            let vgData = fun.ge(".vg-r-data", dom);
            let imgHost = vgData.dataset.host;
            let imgPre = vgData.dataset.img_pre;
            let srcs = imgDataArr.map(e => imgHost + imgPre + e.img);
            return srcs;
        },
        getImgs: (dom = document) => {
            let srcs = _this.getSrcs(dom);
            return fun.createImgArray(srcs);
        },
        init: async () => {
            let imgs = _this.getImgs();
            let tE = fun.ge("#all");
            tE.innerHTML = "";
            tE.append(...imgs);
            await fun.lazyload();
        },
        autoPager: {
            ele: (dom) => _this.getImgs(dom),
            pos: ["#all", 0],
            observer: "#all>img",
            next: (dom) => {
                let vgData = fun.ge(".vg-r-data", dom);
                let ccid = vgData.dataset.ccid;
                let id = vgData.dataset.id;
                let num = vgData.dataset.num;
                let d = vgData.dataset.d;
                return fetch("/book/goNumPage", {
                    "headers": {
                        "content-type": "application/x-www-form-urlencoded; charset=UTF-8"
                    },
                    "body": `ccid=${ccid}&id=${id}&num=${Number(num) + 1}&d=${d}&type=next`,
                    "method": "POST"
                }).then(res => res.json()).then(json => json.state == 0 ? null : json.url);
            },
            title: (dom) => {
                let m = fun.gt("h1.h2>a", 1, dom);
                let c = fun.gt("h2.h4", 1, dom).replace(/\[|\]/g, "");
                return hasTouchEvents ? c : m + " - " + c;
            },
            hide: ".comic-viewer-toc",
            preloadNextPage: 1
        },
        css: ".form-inline>.pre,.form-inline>.next,div:has(>#page-selector){display:none!important;}",
        category: "comic autoPager"
    }, {
        name: "快岸漫画",
        host: ["www.ikanbook.net"],
        enable: 0,
        reg: /^https?:\/\/www\.ikanbook\.net\/comic\/\d+\/\d+/,
        init: async () => {
            await fun.waitVar("x_tokens");
            fun.run("$(document).unbind('keydown');$(document).unbind('keyup');");
        },
        imgs: () => {
            const {
                is_refresh,
                x_tokens,
                Gm,
                comic_id,
                version_id,
                part_id,
                my_sha2,
                data
            } = _unsafeWindow;
            return is_refresh == 0 ? x_tokens.map(e => Gm.getImgUrl(comic_id + "/" + version_id + "/" + part_id + "/" + my_sha2(e))) : data.url.map(e => Gm.getImgUrl(e));
        },
        button: [4],
        insertImg: ["#all", 2],
        autoDownload: [0],
        next: "//a[text()='下一章' and not(starts-with(@href,'javascript'))]",
        prev: "//a[text()='上一章' and not(starts-with(@href,'javascript'))]",
        customTitle: () => fun.gt("h2.h2>a") + " - " + fun.gt("span.h4:nth-child(5)"),
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "comic"
    }, {
        name: "樱花漫画",
        host: ["www.yinghuamh.net", "yinghuamh.net"],
        enable: 1,
        reg: /^https?:\/\/(www\.)?yinghuamh\.net\/comic\/\w+\/\d+\/\d+/i,
        init: async () => {
            await fun.waitVar("x_tokens");
            fun.run("$(document).off();");
            let lastScrollTop = 0;
            document.addEventListener("scroll", event => {
                let st = event.srcElement.scrollingElement.scrollTop;
                if (st > lastScrollTop) {
                    fun.ge(".view-title").style.top = "-60px";
                    lastScrollTop = st;
                } else if (st < lastScrollTop - 20) {
                    fun.ge(".view-title").style.top = "0px";
                    lastScrollTop = st;
                }
            });
        },
        imgs: () => {
            const {
                x_tokens,
                Gm
            } = _unsafeWindow;
            return x_tokens.map(e => Gm.getImgUrl(Gm.fitImgUrl(e)));
        },
        button: [4],
        insertImg: ["#all", 2],
        autoDownload: [0],
        next: "a.next_part:not([href^=java])",
        prev: ".paginationContent>a:first-child:not([href^=java])",
        customTitle: () => {
            const {
                comic_name,
                part_name
            } = _unsafeWindow;
            return comic_name + " - " + part_name;
        },
        preloadNext: () => {
            fun.iframeVar(nextLink, "x_tokens").then(frame => {
                const {
                    x_tokens,
                    Gm,
                    comic_name,
                    part_name
                } = frame;
                let srcs = x_tokens.map(e => Gm.getImgUrl(Gm.fitImgUrl(e)));
                let text = comic_name + part_name;
                fun.picPreload(srcs, text, "next");
            });
        },
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "comic"
    }, {
        name: "哔哩哔哩漫画",
        host: ["manga.bilibili.com"],
        enable: 0,
        reg: /^https?:\/\/manga\.bilibili\.com\/mc\d+\/\d+\?from=manga_detail/,
        init: () => setTimeout(() => fun.ge(".load-next-btn").addEventListener("click", () => setTimeout(() => location.reload(), 500)), 1000),
        imgs: async () => {
            let ep_id = siteUrl.split("/").at(-1).match(/\d+/)[0];
            let headers = {
                "content-type": "application/json;charset=UTF-8"
            };
            let imgsRes = await fetch("/twirp/comic.v1.Comic/GetImageIndex?device=pc&platform=web", {
                "headers": headers,
                "body": JSON.stringify({
                    ep_id: `${ep_id}`
                }),
                "method": "POST"
            }).then(res => res.json()).then(json => json.data.images.map(e => e.path));
            return fetch("/twirp/comic.v1.Comic/ImageToken?device=pc&platform=web", {
                "headers": headers,
                "body": JSON.stringify({
                    urls: JSON.stringify(imgsRes)
                }),
                "method": "POST"
            }).then(res => res.json()).then(json => json.data.map(e => `${e.url}?token=${e.token}`));
        },
        insertImg: [".image-list", 2],
        next: ".load-next-btn",
        prev: 1,
        customTitle: async () => {
            await fun.delay(1500, 0);
            return fun.gt(".manga-title") + " - " + fun.gt(".episode");
        },
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "comic"
    }, {
        name: "看漫画",
        host: ["www.kanman.com"],
        enable: 0,
        reg: /^https?:\/\/www\.kanman\.com\/\d+\/[\w-]+\.html/,
        imgs: () => {
            let s = fun.lp.split("/");
            let comic_id = s[1];
            let chapter_newid = s[2].replace(".html", "");
            let api = `/api/getchapterinfov2?product_id=1&productname=kmh&platformname=pc&comic_id=${comic_id}&chapter_newid=${chapter_newid}&isWebp=1&quality=middle`;
            return fetch(api).then(res => res.json()).then(json => json.data.current_chapter.chapter_img_list);
        },
        customTitle: async () => {
            await fun.delay(1500, 0);
            return fun.gt("#crumbComicLink") + " - " + fun.gt(".chapter-title").trim();
        },
        category: "comic"
    }, {
        name: "zero搬运网",
        host: ["www.zerobyw24.com"],
        enable: 0,
        reg: /^https?:\/\/www\.zerobyw\w+\.com\/plugin\.php\?id=\w+&a=read&zjid=\d+$/i,
        include: "//script[contains(text(),'listimg')]",
        imgs: () => {
            let code = fun.gst("listimg");
            let arrText = code.match(/listimg[\s=]+([^;]+)/)[1];
            let dataArr = fun.run(arrText);
            return dataArr.map(e => e.file);
        },
        button: [4],
        insertImg: [".uk-alert.uk-alert-danger.uk-text-center,.uk-zjimg", 3],
        autoDownload: [0],
        next: "//a[contains(text(),'下一章')]",
        prev: "//a[contains(text(),'上一章')]",
        customTitle: () => fun.title(" - zero搬运网"),
        category: "comic"
    }, {
        name: "zero搬运网M",
        host: ["www.zerobyw24.com"],
        enable: 0,
        reg: [
            /^https?:\/\/www\.zerobyw\w+\.com\/plugin\.php\?id=\w+&c=index&a=read&zjid=\d+$/i,
            /^https?:\/\/www\.zerobyw\w+\.com\/plugin\.php\?id=\w+&a=read&zjid=\d+$/i
        ],
        include: ".areadiv",
        imgs: ".zjimg>img",
        button: [4],
        insertImg: [".areadiv", 3],
        autoDownload: [0],
        next: "//a[contains(text(),'下一章')]",
        prev: "//a[contains(text(),'上一章')]",
        customTitle: () => fun.title(/_ zero搬运网.+/),
        category: "comic"
    }, {
        name: "漫蛙", //方向鍵上一章下一章、清除擋廣告警告、向下滾動隱藏工具列、反反偵錯，，下載需先手動觸發全部載入圖片，函式使用到canvas需要繪製過程會有點卡。
        host: ["manwa.me"],
        link: "https://fuw11.cc/maKapG",
        enable: 1,
        reg: () => fun.checkUrl({
            h: "manwa",
            p: /^\/chapter\/\d+(\?img_host=\d)?$/
        }),
        init: async () => {
            _unsafeWindow.Function.prototype.constructor = () => {};
            //await fun.scrollEles(".img-content img", 200);
            fun.css(".ad-area{opacity:0!important;}#cp_img>.two-ad-area:nth-child(1)>.ad-area,#cp_img>.two-ad-area:nth-child(2){display:none!important}");
            fun.remove(".ad-area,body>div[id]:not([id^='pv-'],[class^='pv-'],[id^='pagetual'],[class^='pagetual'],#comicRead,#fab,[id^='FullPictureLoad'],[class^='FullPictureLoad'],[class^=fancybox])", 5000);
            let lastScrollTop = 0;
            document.addEventListener("scroll", event => {
                let st = event.srcElement.scrollingElement.scrollTop;
                if (st > lastScrollTop) {
                    $(".view-fix-top-bar").attr("style", "top: -60px;");
                    $(".view-fix-bottom-bar").attr("style", "bottom: -60px;");
                    $(".detail-comment-fix-bottom").hide("fast");
                    lastScrollTop = st;
                } else if (st < lastScrollTop - 20) {
                    $(".view-fix-top-bar").attr("style", "top: 0px;");
                    $(".view-fix-bottom-bar").attr("style", "bottom: 0px;");
                    $(".detail-comment-fix-bottom").show("fast");
                    lastScrollTop = st;
                }
            });
            await fun.waitEle(".content-img.lazy_img[src^=blob]");
            if (autoScrollAllElement === 1) _this.scrollEle();
        },
        imgs: () => fun.imgBlobUrlArr(".content-img[src^=blob]"),
        scrollEle: () => fun.aotoScrollEles(".img-content .content-img", (img) => /^blob/.test(img.src)),
        next: ".view-fix-bottom-bar-item-menu-next",
        prev: ".view-fix-bottom-bar-item-menu-prev",
        customTitle: () => fun.title("在线阅读", 1),
        css: "body{padding-bottom:0px!important}",
        category: "comic"
    }, {
        name: "漫蛙選目錄展開全部章節",
        reg: () => fun.checkUrl({
            h: "manwa",
            p: /^\/book\/\d+$/
        }),
        init: "Function.prototype.constructor=()=>{};titleSelect(this,'#chapter_indexes');charpterMore(this);",
        category: "none"
    }, {
        name: "漫蛙自動載入更多",
        reg: () => fun.checkUrl({
            h: "manwa",
            p: /^\/update$/
        }),
        init: "Function.prototype.constructor=()=>{};",
        observerClick: "#loadMore",
        category: "autoPager"
    }, {
        name: "開車漫画",
        host: ["18p.fun"],
        enable: 1,
        reg: /^https?:\/\/(www\.)?(18p|gohaveababy|imynest|healthway|beforeout)\.[a-z]{2,5}\/(ForInject\/|Article\/|content\/)/,
        imgs: async () => {
            await fun.waitEle("//script[contains(text(),'_curChap')]");
            if (fun.lh != "18p.fun") {

                location.replace("https://18p.fun/ForInject/Chapter/?id=" + _unsafeWindow.$_curChap.id);
                await fun.delay(3000, 0);
            }
            await fun.getNP("img[data-src].lazy:not(.demo-lazy)", "//a[@data-url and contains(text(),'下一頁')] | //a[@data-url and contains(text(),'下一章')]", null, "div[class^=picnext]");
            return fun.gae("img[data-src].lazy:not(.demo-lazy)");
        },
        insertImg: ["div[class^=pictures]", 3],
        fetch: 1,
        css: "#FullPictureLoadEnd{color:rgb(255, 255, 255)}",
        category: "comic"
    }, {
        name: "開車漫画",
        host: ["18p.fun"],
        enable: 0,
        icon: 0,
        key: 0,
        reg: /^https?:\/\/18p\.fun\//,
        include: ".loadmore>button",
        init: () => fun.addMutationObserver(() => fun.gae("img.lazy[src$=svg]").forEach(img => (img.src = img.dataset.src))),
        observerClick: ".loadmore>button",
        openInNewTab: "#itemlist li>a:not([target=_blank])",
        css: ".page{display:none!important}.loadmore{display:block!important}",
        category: "comic"
    }, {
        name: "风之动漫",
        host: ["www.fffdm.com"],
        enable: 1,
        reg: /^https?:\/\/(www\.fffdm\.com|manhua\.fffdm\.com)\/(manhua\/)?\d+\/[^/]+\/$/i,
        fetchJson: (url = siteUrl) => {
            let [mhId, mhcId] = new URL(url).pathname.split("/").slice(-3);
            let api = `/api/manhua/${mhId}/${mhcId}`;
            return fetch(api).then(res => res.json());
        },
        init: async () => {
            let json = await _this.fetchJson();
            debug("\n此頁JSON資料\n", json);
            siteJson = json;
        },
        imgs: async (json = siteJson, msg = null) => {
            let hostArr = ["https://p5.fffdm.live/", "https://p6.fffdm.live/", "https://p1.fffdm.live/"];
            let firstPic = json.cont[0];
            let testArr = hostArr.map(e => e + firstPic);
            let ok = false;
            let host;
            for (let i = 0; i < testArr.length; i++) {
                let obj = await fun.checkImgStatus(testArr[i], msg);
                console.log(`確認圖片[${i}]`, obj);
                if (obj.ok) {
                    ok = true;
                    host = hostArr[i];
                    break;
                }
            }
            return ok ? siteJson.cont.map(e => host + e) : [];
        },
        button: [4],
        insertImg: ["#mh", 2],
        insertImgAF: async () => {
            let url = await _this.next();
            if (!!url) {
                let text = `<div style="padding: 36px 0; text-align: center;"><a href="${url}"style="font-size: 26px;line-height: 50px;height: 50px;text-align: center;">點選進入下一話</a></div>`;
                fun.ge("#mh").insertAdjacentHTML("afterend", text);
                fun.ge("#mh+div").addEventListener("click", () => setTimeout(() => location.reload(), 200));
            }

        },
        next: () => {
            let comicListUrl = decodeURIComponent(siteUrl.replace(/[^\/]+\/$/i, ""));
            let chapter = decodeURIComponent(siteUrl.match(/[^\/]+\/$/)[0]);
            let nextXPath = `//div[@id='content']/li[a[@href='${chapter}']]/preceding-sibling::li[1]/a`;
            return fun.fetchDoc(comicListUrl).then(dom => {
                let next = fun.ge(nextXPath, dom, dom);
                return next ? comicListUrl + next.getAttribute("href") : null;
            });
        },
        prev: 1,
        customTitle: (dom = document) => fun.title("第1页", 1, dom),
        preloadNext: async (nextDoc, obj) => {
            let json = await obj.fetchJson(nextLink);
            fun.picPreload(await obj.imgs(json, 0), obj.customTitle(nextDoc), "next");
        },
        fancybox: {
            v: 3,
            insertLibrarys: 1
        },
        category: "comic"
    }, {
        name: "大哥漫画/漫画皮",
        host: ["www.dagemanhua.com", "m.dagemanhua.com", "www.manhuapi.cc", "m.manhuapi.cc"],
        enable: 1,
        reg: [
            /^https?:\/\/(www|m)\.manhuapi\.cc\/chapter\/\d+\.html$/i,
            /^https?:\/\/(www|m)\.dagemanhua\.com\/manhua\/\d+\/\d+\.html$/i
        ],
        init: "document.onkeydown=null;$('body').unbind();",
        imgs: (dom = document) => fun.gae("option[jhc-data]", dom).map(e => e.getAttribute("jhc-data").replace("-mht.middle.webp", "")).map(e => e.replace(new URL(e).protocol, location.protocol)),
        button: [4],
        insertImg: [".mh_list,#content", 2],
        autoDownload: [0],
        next: "//a[text()='下一章'][contains(@href,'chapter')]",
        prev: "//a[text()='上一章'][contains(@href,'chapter')]",
        customTitle: (dom = document) => fun.attr("meta[name='keywords']", "content", dom).replace(",", " - "),
        preloadNext: true,
        css: "#prePage,#nextPage,select[onchange],.jump-list,.apjg,a[href*=taobao]{display:none!important;}",
        category: "comic"
    }, {
        name: "哈哈漫画",
        host: ["www.hahacomic.com"],
        enable: 1,
        reg: /^https?:\/\/www\.hahacomic\.com\/manhua\/\d+\/\d+\.html/,
        imgs: "img[data-original]",
        button: [4],
        insertImg: [".chapter-images", 2],
        autoDownload: [0],
        next: "//a[label[text()='下一章'] and not(starts-with(@href,'java'))]",
        prev: "//a[label[text()='上一章'] and not(starts-with(@href,'java'))]",
        preloadNext: async (nextDoc, obj) => fun.picPreload(fun.getImgSrcArr(obj.imgs, nextDoc), nextDoc.title, "next"),
        category: "comic"
    }, {
        name: "哈哈漫画 - 分類自動翻頁",
        host: ["www.hahacomic.com"],
        enable: 1,
        reg: /^https?:\/\/www\.hahacomic\.com\/manhua\/list\.html/,
        autoPager: {
            ele: ".mdui-col-lg-2",
            observer: ".mdui-col-lg-2",
            next: (dom) => fun.ge("span.current+a", dom) ? siteUrl.replace(/\?page=\d+/, "") + "?page=" + fun.ge("span.current+a", dom).getAttribute("href").match(/\d+/)[0] : null,
            re: ".pages",
            pageNum: () => nextLink.match(/\d+$/)[0]
        },
        openInNewTab: ".mdui-col-lg-2>a",
        category: "autoPager"
    }, {
        name: "风车漫画",
        host: ["www.qyy158.com", "m.qyy158.com"],
        enable: 1,
        reg: /^https?:\/\/(www|m)\.qyy158\.com\/info\/\d+\/\d+\.html/,
        imgs: ".chapter-content img,.hide-scrollbars img",
        button: [4],
        insertImg: [".chapter-content,.hide-scrollbars", 2],
        autoDownload: [0],
        next: "//a[span[text()='下一话']] | //a[p[text()='下一话']]",
        prev: "//a[span[text()='上一话']] | //a[p[text()='上一话']]",
        customTitle: () => {
            if (fun.lh == "www.qyy158.com") {
                let s = fun.gt(".header-center").split(" > ");
                return s[1] + " - " + s[2];
            } else {
                let data = JSON.parse(localStorage[localStorage.read_book]);
                return data.articlename + " - " + data.chaptername_read;
            }
        },
        preloadNext: (nextDoc, obj) => fun.picPreload(fun.getImgSrcArr(obj.imgs, nextDoc), nextDoc.title, "next"),
        category: "comic"
    }, {
        name: "轻之国度",
        host: ["www.lightnovel.us"],
        enable: 1,
        reg: /^https?:\/\/www\.lightnovel\.us\/\w+\/detail\/\d+/,
        imgs: ".article-content img",
        button: [4],
        insertImg: [".article-content", 3],
        customTitle: ".article-title",
        category: "comic"
    }, {
        name: "微信公众号",
        host: ["mp.weixin.qq.com"],
        enable: 1,
        reg: /^https?:\/\/mp\.weixin\.qq\.com\/[^&]+&mid=\d+/,
        imgs: "img.js_insertlocalimg",
        category: "comic"
    }, {
        name: "虎扑社区",
        host: ["bbs.hupu.com"],
        enable: 1,
        reg: /^https?:\/\/bbs\.hupu\.com\/\d+\.html/,
        init: () => (siteJson = JSON.parse(fun.attr("#bbs-admin-main-post-container", "data-admininfo"))),
        imgs: () => {
            let data = JSON.parse(siteJson.format);
            if (data.imgList) {
                return data.imgList.map(e => e.remoteUrl);
            } else if (data.jsonV3) {
                return data.jsonV3.content.filter(item => item.type == "image").map(e => e.attrs.src);
            } else {
                return [];
            }
        },
        customTitle: () => siteJson.postTitle,
        category: "comic"
    }, {
        name: "微漫画 目錄頁",
        host: ["medibang.com"],
        enable: 1,
        reg: () => fun.checkUrl({
            h: "medibang.com",
            p: "/book/"
        }) && !hasTouchEvents,
        init: () => fun.createImgBox("#contentsDetailShow"),
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let links;
            let chapterIds;
            if (fun.ge("a.btn_more")) {
                links = fun.gau("a.btn_more").reverse();
                chapterIds = links.map(url => url.split("/").at(-1));
            } else {
                links = fun.gau(".btn_book_read>a");
                chapterIds = links.map(url => url.split("/").at(-2));
            }
            let resArr = [];
            let fetchNum = 0;
            for (let id of chapterIds) {
                let res = fetch(`/api/book/fixedList2/${id}/?quality=pc`).then(res => res.json()).then(json => {
                    fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${links.length}`, 0);
                    try {
                        let arr = [json.coverUrl];
                        json.chapterList[0].pageList.forEach(e => arr.push(e.publicBgImage));
                        return arr;
                    } catch (error) {
                        console.error(error);
                        return [];
                    }
                });
                resArr.push(res);
            }
            return Promise.all(resArr).then(data => data.flat());
        },
        button: [4],
        insertImg: ["#FullPictureLoadMainImgBox", 3],
        go: 1,
        customTitle: ".box_data>h1.tit",
        category: "comic"
    }, {
        name: "微漫画 閱讀頁",
        host: ["medibang.com"],
        enable: 1,
        reg: () => fun.checkUrl({
            h: "medibang.com",
            p: "/viewer/"
        }) && !hasTouchEvents,
        imgs: () => {
            fun.showMsg(displayLanguage.str_05, 0);
            let id = fun.lp.split("/").at(-2);
            return fetch(`/api/book/fixedList2/${id}/?quality=pc`).then(res => res.json()).then(json => {
                try {
                    let arr = [json.coverUrl];
                    json.chapterList[0].pageList.forEach(e => arr.push(e.publicBgImage));
                    return arr;
                } catch (error) {
                    console.error(error);
                    return [];
                }
            });
        },
        capture: () => _this.imgs(),
        css: ".mdModal.mdWd1{display:none!important;}",
        category: "comic"
    }, {
        name: "漫畫類 自動展開目錄",
        reg: [
            /(mangabz|xmanhua|yymanhua|dm5|1kkk|manhuaren|manben|mkzhan)\.com\/[\w-]+\//,
            /(m\.dmzj\.com|m\.gmh1234\.com)\/(info|comic)\/\d+\.html$/,
            /(dgmanhua|acgwd|magayuan|manhua456|dashumanhua|shilunart|mh160|szcdmj)\.(com|cc)\/(comic|manhua|manga|maga|kanmanhua|szcbook)\/[\w-]+\/?$/,
            /www\.mhua5\.com\/[\w-]+\.html/,
            /m\.guoman\.net\/comic\/\w+/,
            /(www|m)\.77mh\.\w+\/colist_\d+\.html/,
            /www\.manhw\.com\/index\.php\/comic\/\w+$/,
            /m\.gaonaojin\.com\/\w+\/$/
        ],
        init: async () => {
            if (["www.magayuan.com", "m.magayuan.com"].some(h => h === fun.lh)) {
                fun.css(".Introduct_Sub{background:url(https://m.idmzj.com/images/int_bg.png)!important;background-size:100% 100%!important}");
            }
        },
        autoClick: ["span.more,a.detail-list-form-more,a.detail-list-more,.deatil-list-more>a,.detail-more,.moreChapter,.show-more,a#zhankai,.gengduo_dt1>button,.morechapter>button,.gengduo_dt1>a,.chapterList+.more,li.add,a.extend,a.action-collapse:not(.on),.chapter__more .down,.listmore,.more.chapLiList-cont>a,.m-load-more-sm>a,.more>a,.allmulu,.show-more>a,.morechp,.nnmore>a", 1000],
        css: ".comic-info-box+a,.cartoon-introduction.cmg,.cartoon-introduction+a,.msloga,.comic_intro>a,.Introduct+a,[class^='ad']{display:none!important}",
        category: "none"
    }, {
        name: "94i.in 自動簽到",
        host: ["94i.in"],
        reg: /^https?:\/\/94i\.in\//,
        autoClick: "#pper_a:not([style='display: none;'])",
        category: "none"
    }, {
        name: "Supjav 立即顯示影片縮圖",
        host: ["supjav.com"],
        delay: 300,
        reg: /^https?:\/\/supjav\.com\/(zh\/|ja\/)?\d+\.html/,
        init: async () => {
            let t = fun.ge("title");
            t.innerText = t.innerText.replace(/-\sSupjav.com.+/, "").trim();
            let ele = "#vserver.play-button";
            if (await fun.waitEle(ele)) fun.ge(ele).click();
        },
        category: "none"
    }, {
        name: "ouo.io 自動跳轉",
        host: ["ouo.io"],
        reg: /^https?:\/\/ouo\./,
        init: async () => {
            let ele = "#btn-main:not(.disabled)";
            if (await fun.waitEle(ele)) fun.ge(ele).click();
        },
        category: "none"
    }, {
        name: "cuty.io 自動跳轉",
        host: ["cuty.io"],
        reg: /^https?:\/\/cutt?y\.(io|app)\/\w+/i,
        init: async () => {
            let ele = "//button[@id='submit-button' and text()= 'Continue' or text()= 'I am not a robot' or text()= 'Go ->']";
            if (await fun.waitEle(ele)) fun.ge(ele).click();
        },
        category: "none"
    }, {
        name: "m.4khd.com 自動跳轉",
        host: ["m.4khd.com"],
        reg: /^https?:\/\/m\.4khd\.com\//,
        init: () => {
            if (isFn(_unsafeWindow.redirect)) {
                _unsafeWindow.redirect = null;
            }
            fun.css("#divExoLayerWrapper,.exo-ipp,.exo_wrapper,div:has(>.centered-contai),.center-container{display:none!important;}");
            location.href = fun.gu("//a[text()='GET LINK']|//a[span[text()='GET LINK']]");
        },
        category: "none"
    }, {
        name: "4kup.net 自動跳轉",
        host: ["4kup.net"],
        reg: /^https?:\/\/4kup\.net\/getlink\/$/,
        init: async () => {
            let selectorArr = ["#output:not([style*=none]) button", "#gotolink:not([disabled])"];
            for (let selector of selectorArr) {
                await fun.waitEle(selector);
                fun.ge(selector).click();
                await fun.delay(200);
            }
        },
        category: "none"
    }, {
        name: "terabox.fun 自動跳轉",
        host: ["terabox.fun"],
        reg: /^https?:\/\/terabox\.fun\/slmiddlepage\//,
        init: async () => {
            let ele = ".btn.active";
            setInterval(async () => {
                if (await fun.waitEle(ele)) fun.ge(ele).click();
            }, 1000);
        },
        category: "none"
    }, {
        name: "MediaFire 自動下載",
        host: ["www.mediafire.com"],
        reg: /^https?:\/\/www\.mediafire\.com\//,
        autoClick: ".download_link:not(.started) #downloadButton",
        category: "none"
    }, {
        name: "anonfiles 自動下載",
        host: ["anonfiles.com"],
        reg: /^https?:\/\/anonfiles\.com\//,
        autoClick: ["#download-url"],
        category: "none"
    }, {
        name: "letsupload 自動下載",
        host: ["letsupload.cc"],
        reg: /^https?:\/\/letsupload\.cc\//,
        autoClick: ["#download-url"],
        category: "none"
    }, {
        name: "stfly.me 半自動跳轉",
        host: ["stfly.me"],
        reg: () => fun.ge("img[src^='https://stfly.me/']") ? true : false,
        init: async () => {
            if (await fun.waitEle(".btn-captcha:not(.disable)")) setInterval(() => fun.ge(".btn-captcha:not(.disable)").click(), 3000);
        },
        category: "none"
    }, {
        name: "link1s 自動跳轉",
        host: ["link1s.com"],
        reg: () => fun.ge("a.site-logo[href='https://link1s.com/'],a.logo-image[href='https://link1s.com/']") ? true : false,
        init: async () => {
            if (await fun.waitEle("//button[@onclick='link1sgo()'] | //button[@id='link' and contains(@style,'none')] | //a[text()='Get Link']")) fun.ge("//button[@onclick='link1sgo()'] | //a[@id='link1s'] | //a[text()='Get Link']").click();
        },
        category: "none"
    }, {
        name: "Binto.click 自動跳轉",
        host: ["binto.click"],
        reg: () => /^https?:\/\/binto\.click\/\w+$/i.test(siteUrl) && fun.ge("#go-link"),
        init: async () => {
            if (await fun.waitEle("//a[text()='Get Link']")) location.href = fun.gu("//a[text()='Get Link']");
        },
        category: "none"
    }, {
        name: "網址清單新分頁開啟",
        host: ["github.com"],
        reg: [
            /github\.com\/skofkyo\/AutoPager\/tree\/main\/CustomPictureDownload$/,
            /github\.com\/skofkyo\/AutoPager\/blob\/main\/CustomPictureDownload\/README\.md$/
        ],
        init: async () => {
            await fun.waitEle(".markdown-body table a");
            if (!hasTouchEvents) {
                let select = false;
                const cb = (open = 1) => {
                    let links = fun.gae(".markdown-body table a[select]");
                    if (links.length > 0) {
                        links.forEach(a => {
                            if (open === 1) {
                                _GM_openInTab(a.href);
                            }
                            a.removeAttribute("select");
                            a.removeAttribute("style");
                        });
                        setTimeout(() => (select = false), 200);
                    } else {
                        select = false;
                    }
                };
                fun.gae(".markdown-body table a").forEach(a => {
                    a.addEventListener("mouseenter", (event) => {
                        if (event.target.getAttribute("select") == "true") {
                            event.target.removeAttribute("select");
                            event.target.removeAttribute("style");
                        } else {
                            select = true;
                            event.target.setAttribute("select", "true");
                            Object.assign(event.target.style, {
                                paddingLeft: "4px",
                                paddingRight: "4px",
                                borderWidth: "2px",
                                borderStyle: "solid",
                                borderColor: "#ff9933"
                            });
                        }
                    });
                });
                document.addEventListener("keydown", event => {
                    if (event.code === "Escape" || event.key === "Escape") {
                        return cb(0);
                    }
                    if (event.ctrlKey && event.altKey && event.code === "KeyO") {
                        cb();
                    }
                });
                document.addEventListener("click", () => cb(0));
                document.addEventListener("mousedown", event => {
                    if (event.button == 2) {
                        cb();
                    }
                });
                document.addEventListener("contextmenu", event => {
                    if (select) {
                        event.preventDefault();
                    }
                });
            }
        },
        openInNewTab: ".markdown-body table a[href]:not([target=_blank]):not([id])",
        css: ".markdown-body table a{text-decoration:none!important}",
        category: "none"
    }, {
        name: "google search 新分頁開啟",
        reg: /^https?:\/\/(?:www\.)?google\..*\/search/,
        openInNewTab: "//div[@id='center_col']//a[@ping][not(@target)]",
        category: "none"
    }, {
        name: "CivitAi Auto Show NSFW",
        host: ["civitai.com"],
        reg: /^https?:\/\/civitai\.com\//,
        init: async () => {
            await fun.waitEle("img[src*='width='],video[src*='width=']");
            //自動顯示NSFW
            const unBlur = async () => {
                if (/\/posts\/|\/models\//.test(fun.lp)) {
                    try {
                        let ele = [...document.querySelectorAll(".mantine-1t4bhd4")][0];
                        let elePath = ele.querySelector("span>svg>path");
                        if (elePath) {
                            let d = elePath.getAttribute("d");
                            if (d == "M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0") ele.click();
                            await fun.delay(1000, 0);
                        }
                    } catch {}
                }
                [...document.querySelectorAll("button.cursor-pointer")].forEach(ele => {
                    let elePath = ele.querySelector("span>svg>path");
                    if (elePath) {
                        let d = elePath.getAttribute("d");
                        if (d == "M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0") ele.click();
                    }
                });
            };
            fun.addMutationObserver(unBlur);
            //將預覽縮圖替換為原始圖片，延遲載入原始圖片URL，透過腳本管理器選單開啟。
            if (lazyLoadFullResolution == 1) {
                const lazyLoad = () => {
                    [...document.querySelectorAll("img[src*='width=']:not([src^='data'],.mantine-Avatar-image,.mantine-anvagt,.mantine-d881q8,.mantine-cdh9bk,.mantine-qh395j,.mantine-7aj0so[loading],.mantine-34i7e7,.mantine-lrbwmi,.mantine-14evxiu)")].forEach(item => {
                        //console.log(item);
                        if (!/\.mp4/.test(item.dataset.src ?? item.src)) {
                            let thumbnail = item.dataset.src ?? item.src;
                            item.dataset.thumb = thumbnail;
                            item.dataset.url = thumbnail.replace(/width=[\d+\.]\//, ""); //Original Image URL to replace when an error occurs
                            let original = thumbnail.replace(/width=[\d\.]+\//, "original=true/");
                            let imgDir = original.match(/.+\//)[0];
                            if (item.alt != "" && /\.\w+$/.test(item.alt)) original = imgDir + item.alt.trim();
                            item.dataset.src = original;
                            item.src = loading_bak;
                            fun.imagesObserver.observe(item);
                        }
                    });
                };
                fun.addMutationObserver(lazyLoad);
            }
        },
        capture: "img[src*=original]:not([src^='data'],.mantine-Avatar-image,.mantine-anvagt,.mantine-d881q8,.mantine-cdh9bk,.mantine-qh395j,.mantine-7aj0so[loading],.mantine-34i7e7,.mantine-lrbwmi,.mantine-14evxiu),img[data-src*=original]:not(.mantine-Avatar-image,.mantine-anvagt,.mantine-d881q8,.mantine-cdh9bk,.mantine-qh395j,.mantine-7aj0so[loading],.mantine-34i7e7,.mantine-lrbwmi,.mantine-14evxiu)",
        css: "img[src^=data]{margin:auto;}img[src*=original]:not([src^='data'],.mantine-Avatar-image,.mantine-anvagt,.mantine-d881q8,.mantine-cdh9bk,.mantine-qh395j,.mantine-34i7e7){margin: 0 auto !important;width:unset !important;height:unset !important;max-width:100% !important;max-height:100% !important;min-width:unset !important;min-height:unset !important}",
        category: "lazyLoad"
    }, {
        name: "LiblibAI",
        host: ["www.liblib.art"],
        reg: /^https?:\/\/www\.liblib\.art\//,
        init: () => {
            if (lazyLoadFullResolution == 1) {
                const lazyLoad = () => {
                    [...document.querySelectorAll("img.bg-lighter:not([data-src])")].forEach(img => {
                        let thumbnail = img.dataset.src ?? img.src;
                        img.dataset.thumb = thumbnail.replace(/\?image_process=.+/, "") + "?image_process=format,webp&x-oss-process=image/resize,w_600,m_lfit/format,webp";
                        let original = thumbnail.replace(/\?image_process=.+/, "");
                        img.dataset.src = original;
                        img.src = thumbnail;
                        fun.imagesObserver.observe(img);
                    });
                    [...document.querySelectorAll(".relative.cursor-pointer>img:not(.rounded-full,[data-src]),div.image-card img.CarouselWrap_imgItem__h90eB:not([data-src])")].forEach(img => {
                        let thumbnail = img.dataset.src ?? img.src;
                        img.dataset.thumb = thumbnail.replace(/\?x-oss-process=image.+/, "") + "?x-oss-process=image/resize,w_600,m_lfit/format,webp";
                        let original = thumbnail.replace(/\?x-oss-process=image.+/, "");
                        img.dataset.src = original;
                        img.src = thumbnail;
                        fun.imagesObserver.observe(img);
                    });
                };
                fun.addMutationObserver(lazyLoad);
            }
        },
        capture: "img.bg-lighter[data-src],.relative.cursor-pointer>img[data-src],div.image-card img.CarouselWrap_imgItem__h90eB[data-src]",
        category: "lazyLoad"
    }, {
        name: "Tensor.Art",
        host: ["tensor.art"],
        reg: /^https?:\/\/tensor\.art\//,
        init: () => {
            if (lazyLoadFullResolution == 1) {
                const lazyLoad = () => {
                    [...document.querySelectorAll(".thumbnail-image.transition-transform>img.w-full.h-full:not([data-src]),.thumbnail-image.cursor-pointer>img.w-full.h-full:not([data-src])")].forEach(img => {
                        let thumbnail = img.dataset.src ?? img.src;
                        let splitArr = thumbnail.split("/");
                        let bigSrc;
                        if (splitArr.length == 9 || splitArr.length == 10) {
                            splitArr[5] = "w=3840";
                            bigSrc = splitArr.join("/");
                        } else {
                            bigSrc = thumbnail;
                        }
                        img.dataset.src = bigSrc;
                        img.src = loading_bak;
                        fun.imagesObserver.observe(img);
                    });
                };
                fun.addMutationObserver(lazyLoad);
            }
        },
        capture: ".thumbnail-image>img[data-src]",
        css: ".thumbnail-image>img{width:unset !important;height:unset !important;max-width:100% !important;max-height:100% !important;min-width:unset !important;min-height:unset !important;margin:0px auto}",
        category: "lazyLoad"
    }, {
        name: "PixAI",
        host: ["pixai.art"],
        reg: /^https?:\/\/pixai\.art\//,
        init: async () => {
            if (lazyLoadFullResolution == 1) {
                const lazyLoad = () => {
                    [...document.querySelectorAll("img.object-cover[src*='/stillThumb/']:not([data-src])")].forEach(img => {
                        let thumbnail = img.src;
                        img.dataset.thumb = thumbnail;
                        img.dataset.src = thumbnail.replace("/stillThumb/", "/orig/");
                        img.src = loading_bak;
                        fun.imagesObserver.observe(img);
                    });
                };
                fun.addMutationObserver(lazyLoad);
            }
        },
        capture: "img.object-contain,a.group img[data-src]",
        css: "a.group img.object-cover{width:unset !important;height:unset !important;max-width:100% !important;max-height:100% !important;min-width:unset !important;min-height:unset !important;margin:0px auto}",
        category: "lazyLoad"
    }, {
        name: "Yodayo",
        host: ["yodayo.com"],
        reg: /^https?:\/\/yodayo\.com\/explore\//,
        init: async () => {
            await fun.waitEle("img[alt='post thumbnail']");
            if (lazyLoadFullResolution == 1) {
                const lazyLoad = () => {
                    [...document.querySelectorAll("img[alt='post thumbnail']:not([data-src])")].forEach(img => {
                        let thumbnail = img.dataset.src ?? img.src;
                        img.dataset.thumb = thumbnail;
                        fun.fetchDoc(img.parentNode.parentNode.href).then(dom => {
                            let original = dom.querySelector(".image-gallery-image").src;
                            img.dataset.src = original;
                            img.src = original;
                        });
                    });
                };
                fun.addMutationObserver(lazyLoad);
            }
        },
        capture: "img[alt='post thumbnail'][data-src]",
        category: "lazyLoad"
    }, {
        name: "NightCafe Creator",
        host: ["creator.nightcafe.studio"],
        reg: /^https?:\/\/creator\.nightcafe\.studio\//,
        init: async () => {
            await fun.waitEle("img.css-9whsf3");
            if (lazyLoadFullResolution == 1) {
                const lazyLoad = () => {
                    setTimeout(() => {
                        [...document.querySelectorAll("img.css-9whsf3:not([data-src])")].forEach(img => {
                            let thumbnail = img.dataset.src ?? img.src;
                            img.dataset.thumb = thumbnail;
                            let original = thumbnail.replace(/\?.+$/, "");
                            img.dataset.src = original;
                            img.src = loading_bak;
                            fun.imagesObserver.observe(img);
                        });
                    }, 200)
                };
                fun.addMutationObserver(lazyLoad);
            }
        },
        capture: "img.css-9whsf3[data-src]",
        css: "img.css-9whsf3{width:unset !important;height:unset !important;max-width:100% !important;max-height:100% !important;min-width:unset !important;min-height:unset !important}",
        category: "lazyLoad"
    }, {
        name: "Midjourney",
        host: ["midjourney.com"],
        reg: /^https?:\/\/legacy\.midjourney\.com\//,
        capture: "img[data-job-id]",
        category: "lazyLoad"
    }, {
        name: "neural.love",
        host: ["neural.love"],
        reg: /^https?:\/\/neural\.love\//,
        init: async () => {
            await fun.waitEle("a.shadow.bg-dark,img[src*='cdn/ai-photostoc']");
            if (lazyLoadFullResolution == 1) {
                const lazyLoad = () => {
                    [...document.querySelectorAll("a.shadow.bg-dark:not([data-src]):not([fetch])")].forEach(a => {
                        a.setAttribute("fetch", "fetch");
                        let id = a.href.split("/")[4];
                        let api = `https://saas.neural.love/api/ai-photostock/orders/${id}?id=${id}`;
                        fetch(api).then(res => res.json()).then(json => {
                            let data = json.output[0];
                            let original = data.full ?? data.fullWebp;
                            a.dataset.src = original;
                            a.style.backgroundImage = `url("${original}")`;
                        });
                    });
                };
                fun.addMutationObserver(lazyLoad);
            }
        },
        capture: "a.shadow.bg-dark[data-src],img[src*='cdn/ai-photostoc']",
        category: "lazyLoad"
    }, {
        name: "Playground",
        host: ["playground.com"],
        link: "https://playground.com/feed",
        reg: /^https?:\/\/playground\.com\//,
        init: async () => {
            await fun.waitEle("a.image-card-grid,img[data-testid=image-post-image]");
            if (lazyLoadFullResolution == 1) {
                const lazyLoad = async () => {
                    let postImg = document.querySelector("img[data-testid=image-post-image]");
                    if (postImg) {
                        let original = document.querySelector("meta[property='og:image'][content]").content;
                        postImg.dataset.src = original;
                        fun.imagesObserver.observe(postImg);
                    }
                    let aEles = [...document.querySelectorAll("a.image-card-grid:not([data-src]):not([fetch])")];
                    aEles.forEach(a => a.setAttribute("fetch", "fetch"));
                    aEles.map(async a => {
                        let img = fun.ge("img", a);
                        if (img) {
                            let src = img.src;
                            let testSrc = src.replace(/\.jpe?g$/, ".png");
                            let original = await new Promise((resolve) => {
                                fetch(testSrc, {
                                    method: "HEAD"
                                }).then((res) => {
                                    if (res.status == 200) {
                                        resolve(testSrc);
                                    } else {
                                        resolve(src);
                                    }
                                }).catch((error) => {
                                    resolve(src);
                                });
                            });
                            a.dataset.src = original;
                            img.dataset.src = original;
                            fun.imagesObserver.observe(img);
                        }
                    });
                };
                fun.addMutationObserver(lazyLoad);
            }
        },
        capture: "a.image-card-grid[data-src],img[data-testid=image-post-image][data-src]",
        category: "lazyLoad"
    }, {
        name: "Pornderful.ai",
        host: ["pornderful.ai"],
        reg: /^https?:\/\/pornderful\.ai\//,
        init: async () => {
            await fun.waitEle("a.tw-relative");
            if (lazyLoadFullResolution == 1) {
                const lazyLoad = () => {
                    [...document.querySelectorAll("a.tw-relative:not([data-src]):not([fetch])")].forEach(a => {
                        a.setAttribute("fetch", "fetch");
                        fun.fetchDoc(a.href).then(dom => {
                            let data = JSON.parse(dom.querySelector("generator-v3-component").attributes[0].nodeValue);
                            let original = data.path;
                            a.dataset.src = original;
                            let img = a.querySelector("img");
                            img.dataset.src = original;
                            img.src = loading_bak;
                            fun.imagesObserver.observe(img);
                        });
                    });
                };
                fun.addMutationObserver(lazyLoad);
            }
        },
        capture: "a.tw-relative[data-src]",
        observerClick: "button.tw-mx-auto",
        category: "lazyLoad"
    }, {
        name: "SeaArt AI",
        host: ["www.seaart.ai"],
        reg: /^https?:\/\/www\.seaart\.ai\//,
        init: async () => {
            if (lazyLoadFullResolution == 1) {
                const lazyLoad = () => {
                    [...document.querySelectorAll("img[src*='low.']:not([data-src])")].forEach(img => {
                        let thumbnail = img.dataset.src ?? img.src;
                        img.dataset.thumb = thumbnail;
                        let original = thumbnail.replace("_low.", "_high.");
                        img.dataset.src = original;
                        img.src = loading_bak;
                        fun.imagesObserver.observe(img);
                    });
                };
                fun.addMutationObserver(lazyLoad);
            }
        },
        capture: "img[data-src*='_high.']",
        css: "*{backdrop-filter:unset!important}",
        category: "lazyLoad"
    }];

    //const debug = (str, obj = "", title = "debug") => console.log(`%c[Full Picture Load] ${title}:`, "background-color: #C9FFC9;", str, obj);
    function debug(str, obj = "", title = "debug") {
        console.log(`%c[Full Picture Load] ${title}:`, "background-color: #C9FFC9;", str, obj);
    }

    const hasTouchEvents = (() => ("ontouchstart" in _unsafeWindow) || (_unsafeWindow.navigator.maxTouchPoints > 0) || (_unsafeWindow.navigator.msMaxTouchPoints > 0))();
    const isString = str => Object.prototype.toString.call(str) === "[object String]";
    const isNumber = num => Object.prototype.toString.call(num) === "[object Number]";
    const isBoolean = b => Object.prototype.toString.call(b) === "[object Boolean]";
    const isRegExp = reg => Object.prototype.toString.call(reg) === "[object RegExp]";
    const isObject = obj => Object.prototype.toString.call(obj) === "[object Object]";
    const isArray = arr => Object.prototype.toString.call(arr) === "[object Array]";
    const isFn = fn => ["[object Function]", "[object AsyncFunction]"].some(e => e === Object.prototype.toString.call(fn));
    const isPromise = p => Object.prototype.toString.call(p) === "[object Promise]";
    const isEle = e => /^\[object\sHTML[a-zA-Z]*Element\]$/.test(Object.prototype.toString.call(e)) || Object.prototype.toString.call(e) === "[object DocumentFragment]";
    const _GM_xmlhttpRequest = (() => isFn(GM_xmlhttpRequest) ? GM_xmlhttpRequest : GM.xmlHttpRequest)();
    const _GM_openInTab = (() => isFn(GM_openInTab) ? GM_openInTab : GM.openInTab)();
    const _GM_getValue = (() => isFn(GM_getValue) ? GM_getValue : GM.getValue)();
    const _GM_setValue = (() => isFn(GM_setValue) ? GM_setValue : GM.setValue)();
    const _GM_listValues = (() => isFn(GM_listValues) ? GM_listValues : GM.listValues)();
    const _GM_deleteValue = (() => isFn(GM_deleteValue) ? GM_deleteValue : GM.deleteValue)();
    const _GM_registerMenuCommand = (() => isFn(GM_registerMenuCommand) ? GM_registerMenuCommand : GM.registerMenuCommand)();
    const _GM_unregisterMenuCommand = (() => isFn(GM_unregisterMenuCommand) ? GM_unregisterMenuCommand : GM.unregisterMenuCommand)();
    const _GM_getResourceText = (() => isFn(GM_getResourceText) ? GM_getResourceText : GM.getResourceText)();
    const _GM_addElement = (() => isFn(GM_addElement) ? GM_addElement : GM.addElement)();

    const JqueryJS = _GM_getResourceText("JqueryJS");
    const FancyboxV5JS = _GM_getResourceText("FancyboxV5JS");
    const FancyboxV5Css = _GM_getResourceText("FancyboxV5Css");
    const FancyboxV3JS = _GM_getResourceText("FancyboxV3JS");
    const FancyboxV3Css = _GM_getResourceText("FancyboxV3Css");
    const ViewerJs = _GM_getResourceText("ViewerJs");
    const ViewerJsCss = _GM_getResourceText("ViewerJsCss");

    const addLibrarysV3 = async () => {
        try {
            const jsArr = [JqueryJS, FancyboxV3JS];
            for (let code of jsArr) {
                if (siteData.fancybox && siteData.fancybox.js === false) continue;
                fun.script(code, 0, 1);
            }
            if (siteData.fancybox && siteData.fancybox.css !== false) {
                fun.css(FancyboxV3Css);
            }
        } catch (error) {
            console.error("\naddLibrarysV3() 注入函式庫失敗", error);
        }
    };

    const addLibrarysV5 = () => {
        try {
            const jsArr = [JqueryJS, FancyboxV5JS];
            for (let code of jsArr) {
                //fun.script(code, 0, 1);
                _GM_addElement(document.body, "script", {
                    textContent: code
                });
            }
            fun.css(FancyboxV5Css);
        } catch (error) {
            console.error("\naddLibrarysV5() 注入函式庫失敗", error);
        }
    };

    let FancyboxWheelOptions = _GM_getValue("FancyboxWheelOptions", 0);

    let FancyboxOptions;
    let slideIndex = null;

    if (hasTouchEvents) {
        FancyboxOptions = {
            idle: false,
            Images: {
                Panzoom: {
                    maxScale: 2
                }
            },
            Thumbs: {
                showOnStart: false
            },
            Toolbar: {
                display: {
                    left: ["infobar"],
                    middle: ["flipX", "flipY"],
                    right: [ /*"download", */ "iterateZoom", "slideshow", "thumbs", "close"]
                }
            },
            on: {
                done: (fancybox, slide) => {
                    if (fancybox.isCurrentSlide(slide)) {
                        slideIndex = slide.index;
                        fun.scrollEvent(slideIndex);
                    } else {
                        fun.scrollEvent(fancybox.getSlide().index);
                    }
                },
                close: fancybox => {
                    document.body.classList.remove("imgbox-show", "hide-scrollbar");
                    slideIndex = fancybox.getSlide().index;
                    fun.scrollEvent(slideIndex);
                }
            }
        };
    } else {
        FancyboxOptions = {
            idle: false,
            wheel: FancyboxWheelOptions === 0 ? "slide" : "zoom",
            Images: {
                Panzoom: {
                    maxScale: 2
                }
            },
            Thumbs: {
                showOnStart: false
            },
            Toolbar: {
                display: {
                    left: ["infobar"],
                    middle: ["iterateZoom", "toggle1to1", "rotateCCW", "rotateCW", "flipX", "flipY", "fitX", "fitY", "reset"],
                    right: [ /*"download", */ "slideshow", "fullscreen", "thumbs", "close"]
                }
            },
            on: {
                done: (fancybox, slide) => {
                    if (fancybox.isCurrentSlide(slide)) {
                        slideIndex = slide.index;
                        fun.scrollEvent(slideIndex);
                    } else {
                        fun.scrollEvent(fancybox.getSlide().index);
                    }
                },
                close: fancybox => {
                    document.body.classList.remove("imgbox-show", "hide-scrollbar");
                    slideIndex = fancybox.getSlide().index;
                    fun.scrollEvent(slideIndex);
                }
            }
        };
    }

    const fancyboxBlackList = () => siteData.fancybox?.blacklist === 1;

    switch (language) {
        case "zh-TW":
        case "zh-HK":
        case "zh-Hant-TW":
        case "zh-Hant-HK":
            displayLanguage = {
                str_01: "獲取圖片元素中...",
                str_02: "獲取圖片中 ",
                str_03: "獲取圖片逾時",
                str_04: "等待關鍵元素中...",
                str_05: "獲取資料中...",
                str_06: "獲取資料中 ",
                str_07: "確認登錄狀態中...",
                str_08: "獲取預覽圖中...",
                str_09: "獲取最後一張圖...",
                str_10: "是否複製鏈接至剪貼簿？",
                str_11: "已複製鏈接至剪貼簿",
                str_12: "只有複製鏈接功能",
                str_13: "請輸入圖片抓取最大次數",
                str_14: "獲取下一頁中...",
                str_15: "獲取下一頁結束",
                str_16: "獲取元素中...",
                str_17: "獲取元素中 ",
                str_18: "已聚集所有圖片",
                str_19: "用來定位插入的元素不存在",
                str_20: "沒有能插入的圖片",
                str_21: "延遲",
                str_22: "毫秒",
                str_23: "第",
                str_24: "張下載",
                str_25: "完成",
                str_26: "錯誤",
                str_27: "下載失敗了",
                str_28: "張",
                str_29: "\n是否只保存目前下載成功的圖片？\n只要圖片不是100%掛掉，可以調低下載線程數或重新載入網頁後重新下載試試看。",
                str_30: "圖片extension錯誤",
                str_31: "壓縮進度: ",
                str_32: "自動下載倒數",
                str_33: "秒",
                str_34: "nextJS前往下一頁",
                str_35: "已點擊下一頁",
                str_36: "自動下載完畢",
                str_37: "沒有下一頁元素",
                str_38: "返回上一頁",
                str_39: "已點擊上一頁",
                str_40: "沒有上一頁元素",
                str_41: "已取消",
                str_42: "字數小於3已取消",
                str_43: "下載失敗數據為空...",
                str_44: "沒有任何圖片元素...",
                str_45: "網址已複製",
                str_46: "即將進行滾動...",
                str_47: "左鍵：進行下載打包壓縮\n中鍵：匯出網址URLs.txt文件\n右鍵：複製圖片網址和標題或手動模式聚集所有圖片",
                str_48: "下載&壓縮中請稍後再操作！",
                str_49: "獲取圖片中請稍後再操作！",
                str_50: "",
                str_51: "請輸入自訂壓縮檔資料夾名稱",
                str_52: "聚圖數量",
                str_53: "圖片繪製中...",
                str_54: "403，未登錄網站?",
                str_55: "下載載入中...",
                str_56: "確認圖片狀態中...",
                str_57: "自動翻頁載入中...",
                str_58: "已到達最後一頁",
                str_59: "沒有任何主體元素",
                str_60: "圖片縮放",
                str_61: "取消縮放",
                str_62: "前往第一張圖",
                str_63: "左鍵：前往最後一張圖\n右鍵：匯出網址URLs.txt文件",
                str_64: "即將開始自動下載!!!",
                str_65: "已停止自動下載!!!",
                str_66: "💬 反饋",
                str_67: "⚙️ 設定",
                str_68: "當前(※全局)網站 Full Picture Load 選項",
                str_69: "顯示左下圖示按鈕",
                str_70: "最大下載線程數：",
                str_71: "下載後壓縮打包",
                str_72: "壓縮檔副檔名：",
                str_73: "自動下載",
                str_74: " ( 快捷鍵 [ ctrl + . ] 開始或取消 )",
                str_75: "自動下載倒數秒數：",
                str_76: "啟用當前漫畫站點規則",
                str_77: "移動裝置雙擊前往下一頁",
                str_78: "Fancybox燈箱功能",
                str_79: "圖片縮放比例：",
                str_80: "圖片並排數量：",
                str_81: "comic類固定為2，comic類並排後為右至左的漫讀模式，hcomic類也設定為2將套用。",
                str_82: hasTouchEvents ? "取消" : "取消 (Esc)",
                str_83: "重置設定",
                str_84: "保存設定",
                str_85: hasTouchEvents ? "腳本選項" : "腳本選項(*)",
                str_86: hasTouchEvents ? "切換模式" : "切換模式(5)",
                str_87: hasTouchEvents ? "比例縮放" : "比例縮放(-+)",
                str_88: hasTouchEvents ? "取消縮放" : "取消縮放(.)",
                str_89: "暫停自動翻頁",
                str_90: "啟用自動翻頁",
                str_91: "初始化設定",
                str_92: "原始模式",
                str_93: "並排模式",
                str_94: "返回開頭了",
                str_95: "前往下一集",
                str_96: "已是最後一集",
                str_97: "共",
                str_98: "頁獲取出錯，建議反饋",
                str_99: "重試第",
                str_100: "次",
                str_101: "網址.txt已匯出",
                str_102: "格式轉換中...",
                str_103: "頁面容器預設使用並排模式",
                str_104: hasTouchEvents ? "匯出圖址" : "匯出圖址(7)",
                str_105: hasTouchEvents ? "複製圖址" : "複製圖址(1)",
                str_106: hasTouchEvents ? "分頁檢視" : "分頁檢視(8)",
                str_107: hasTouchEvents ? "一鍵下載" : "一鍵下載(3)",
                str_108: "※訊息顯示的位置：",
                str_109: {
                    c: "置中",
                    ul: "左上",
                    ur: "右上",
                    ll: "左下",
                    lr: "右下",
                },
                str_110: "※Webp轉換為Jpg",
                str_111: "惰性載入大圖",
                str_112: "惰性載入單欄布局",
                str_113: "惰性載入預讀大圖",
                str_114: "E/EX-HENTAI 載入原始圖片鏈結",
                str_115: "關閉自動滾動至首張圖片",
                str_116: "自動滾動所有惰性載入的圖片元素",
                str_117: "顯示浮動選單",
                str_118: "圖集標題已更新",
                str_119: "FancyboxV5滾輪圖片縮放",
                str_120: "此網站分頁檢視使用ViewerJs插件",
                str_121: "關閉圖片導覽快捷鍵",
                str_122: "此漫畫站使用無限滾動閱讀模式",
                str_123: "此網站顯示眼睛圖示和圖片數量",
                str_124: "此網站下載影片",
                str_125: "🧹 重置此網站儲存的所有腳本設定",
                str_126: "🧹 重置腳本儲存的所有全局設定",
                str_127: "右鍵：匯出圖址(7)",
                str_128: hasTouchEvents ? "打開收藏" : "打開收藏(9)",
                str_129: hasTouchEvents ? "關閉收藏" : "關閉收藏(9)",
                str_130: "編輯收藏",
                str_131: "保存",
                str_132: "關閉",
                str_133: "選單",
                str_134: "浮動選單",
                str_135: "無限滾動初始化中...",
                str_136: "右鍵：增加圖片縮放級別(+)",
                str_137: "頁面圖片添加燈箱模式",
                str_138: "此網站禁用",
                str_139: "自動聚圖至頁面容器",
                str_140: "自動進入影子畫廊",
                str_141: hasTouchEvents ? "影子畫廊" : "影子畫廊(G)",
                str_142: "離開畫廊 (Esc)",
                str_143: "下一話",
                str_144: "下一篇",
                galleryMenu: {
                    webtoon: hasTouchEvents ? "條漫模式" : "條漫模式 (4)",
                    rtl: hasTouchEvents ? "右至左模式" : "右至左模式 (3)",
                    small: hasTouchEvents ? "小圖像模式" : "小圖像模式 (2,R)",
                    single: hasTouchEvents ? "單圖像模式" : "單圖像模式 (1)",
                    default: hasTouchEvents ? "預設模式" : "預設模式 (0)",
                }
            };
            break;
        case "zh":
        case "zh-CN":
        case "zh-Hans-CN":
            displayLanguage = {
                str_01: "获取图片元素中...",
                str_02: "获取图片中 ",
                str_03: "获取图片逾时",
                str_04: "等待关键元素中...",
                str_05: "获取数据中...",
                str_06: "获取数据中 ",
                str_07: "确认登录状态中...",
                str_08: "获取预览图中...",
                str_09: "获取最后一张图...",
                str_10: "是否拷贝链接至剪贴板？",
                str_11: "已拷贝链接至剪贴板",
                str_12: "只有拷贝链接功能",
                str_13: "请输入图片抓取最大次数",
                str_14: "获取下一页中...",
                str_15: "获取下一页结束",
                str_16: "获取元素中...",
                str_17: "获取元素中 ",
                str_18: "已聚集所有图片",
                str_19: "用来定位插入的元素不存在",
                str_20: "没有能插入的图片",
                str_21: "延迟",
                str_22: "毫秒",
                str_23: "第",
                str_24: "张下载",
                str_25: "完成",
                str_26: "错误",
                str_27: "下载失败了",
                str_28: "张",
                str_29: "\n是否只保存目前下载成功的图片？\n只要图片不是100%挂掉，可以调低下载线程数或重新加载网页后重新下载试试看。",
                str_30: "图片extension错误",
                str_31: "压缩进度: ",
                str_32: "自动下载倒数",
                str_33: "秒",
                str_34: "nextJS前往下一页",
                str_35: "已点击下一页",
                str_36: "自动下载完毕",
                str_37: "没有下一页元素",
                str_38: "返回上一页",
                str_39: "已点击上一页",
                str_40: "没有上一页元素",
                str_41: "已取消",
                str_42: "字数小于3已取消",
                str_43: "下载失败数据为空...",
                str_44: "没有任何图片元素...",
                str_45: "网址已拷贝",
                str_46: "即将进行滚动...",
                str_47: "左键：进行下载打包压缩\n中键：导出网址URLs.txt文档\n右键：拷贝图片网址和标题或手动模式聚集所有图片",
                str_48: "下载&压缩中请稍后再操作！",
                str_49: "获取图片中请稍后再操作！",
                str_50: "",
                str_51: "请输入自定义压缩档文件夹名称",
                str_52: "聚图数量",
                str_53: "图片绘制中...",
                str_54: "403，未登录网站?",
                str_55: "下载加载中...",
                str_56: "确认图片状态中...",
                str_57: "自动翻页加载中...",
                str_58: "已到达最后一页",
                str_59: "没有任何主体元素",
                str_60: "图片缩放",
                str_61: "取消缩放",
                str_62: "前往第一张图",
                str_63: "左键：前往最后一张图\n右键：导出网址URLs.txt文档",
                str_64: "即将开始自动下载!!!",
                str_65: "已停止自动下载!!!",
                str_66: "💬 反馈",
                str_67: "⚙️ 设置",
                str_68: "当前(※全局)网站 Full Picture Load 设置",
                str_69: "显示左下图标按钮",
                str_70: "下载后最大下载线程数：",
                str_71: "压缩打包",
                str_72: "压缩档文件扩展名：",
                str_73: "自动下载",
                str_74: " ( 快捷键 [ ctrl + . ] 开始或取消 )",
                str_75: "自动下载倒数秒数：",
                str_76: "启用当前漫画站点规则",
                str_77: "移动设备双击前往下一页",
                str_78: "Fancybox灯箱功能",
                str_79: "图片缩放比例：",
                str_80: "图片并排数量：",
                str_81: "comic类固定为2，comic类并排后为右至左的漫读模式，hcomic类也设置为2将套用。",
                str_82: hasTouchEvents ? "取消" : "取消 (Esc)",
                str_83: "重置设置",
                str_84: "保存设置",
                str_85: hasTouchEvents ? "脚本设置" : "脚本设置(*)",
                str_86: hasTouchEvents ? "切换模式" : "切换模式(5)",
                str_87: hasTouchEvents ? "比例缩放" : "比例缩放(-+)",
                str_88: hasTouchEvents ? "取消缩放" : "取消缩放(.)",
                str_89: "暂停自动翻页",
                str_90: "启用自动翻页",
                str_91: "初始化设置",
                str_92: "原始模式",
                str_93: "并排模式",
                str_94: "返回开头了",
                str_95: "前往下一集",
                str_96: "已是最后一集",
                str_97: "共",
                str_98: "页获取出错，建议反馈",
                str_99: "重试第",
                str_100: "次",
                str_101: "网址.txt已导出",
                str_102: "格式转换中...",
                str_103: "页面容器默认使用并排模式",
                str_104: hasTouchEvents ? "导出图址" : "导出图址(7)",
                str_105: hasTouchEvents ? "拷贝图址" : "拷贝图址(1)",
                str_106: hasTouchEvents ? "分页视图" : "分页视图(8)",
                str_107: hasTouchEvents ? "一键下载" : "一键下载(3)",
                str_108: "※讯息显示的位置：",
                str_109: {
                    c: "置中",
                    ul: "左上",
                    ur: "右上",
                    ll: "左下",
                    lr: "右下",
                },
                str_110: "※Webp转换为Jpg",
                str_111: "懒加载大图",
                str_112: "懒加载单栏布局",
                str_113: "懒加载预读大图",
                str_114: "E/EX-HENTAI 加载原始图片链结",
                str_115: "关闭自动滚动至首张图片",
                str_116: "自动滚动所有懒加载的图片元素",
                str_117: "显示浮动菜单",
                str_118: "图集标题已更新",
                str_119: "FancyboxV5滚轮图片缩放",
                str_120: "此网站分页视图使用ViewerJs插件",
                str_121: "关闭图片导览快捷键",
                str_122: "此漫画站使用无限滚动阅读模式",
                str_123: "此网站显示眼睛图标和图片数量",
                str_124: "此网站下载视频",
                str_125: "🧹 重置此网站存储的所有脚本设置",
                str_126: "🧹 重置脚本存储的所有全局设置",
                str_127: "右键：导出图址(7)",
                str_128: hasTouchEvents ? "打开收藏" : "打开收藏(9)",
                str_129: hasTouchEvents ? "关闭收藏" : "关闭收藏(9)",
                str_130: "编辑收藏",
                str_131: "保存",
                str_132: "关闭",
                str_133: "菜单",
                str_134: "浮动菜单",
                str_135: "无限滚动初始化中...",
                str_136: "右键：增加图片缩放级别(+)",
                str_137: "页面图片添加灯箱模式",
                str_138: "此网站禁用",
                str_139: "自动聚图至页面容器",
                str_140: "自動進入影子畫廊",
                str_141: hasTouchEvents ? "影子画廊" : "影子画廊(G)",
                str_142: "离开画廊 (Esc)",
                str_143: "下一话",
                str_144: "下一篇",
                galleryMenu: {
                    webtoon: hasTouchEvents ? "条漫模式" : "条漫模式 (4)",
                    rtl: hasTouchEvents ? "右至左模式" : "右至左模式 (3)",
                    small: hasTouchEvents ? "小图像模式" : "小图像模式 (2,R)",
                    single: hasTouchEvents ? "单图像模式" : "单图像模式 (1)",
                    default: hasTouchEvents ? "默认模式" : "默认模式 (0)",
                }
            };
            break;
        default:
            displayLanguage = {
                str_01: "Get Element...",
                str_02: "Get Element ",
                str_03: "Get timed out",
                str_04: "Wait Element...",
                str_05: "Get Data...",
                str_06: "Get Data ",
                str_07: "Confirm Login Status",
                str_08: "Get Preview Thumbnail",
                str_09: "Get Element...",
                str_10: "Whether To Copy Link To Clipboard?",
                str_11: "Copied",
                str_12: "Only Link Can Be Copied",
                str_13: "Please Enter The Number Of Pictures",
                str_14: "Get Next Page...",
                str_15: "Get Next Page End",
                str_16: "Get Element...",
                str_17: "Get Element ",
                str_18: "All Pictures Gathered",
                str_19: "Element Does Not Exist",
                str_20: "No Pictures",
                str_21: "Delay",
                str_22: "ms",
                str_23: "No. ",
                str_24: " Download ",
                str_25: "Completed",
                str_26: "Error",
                str_27: "Download Failed",
                str_28: "P",
                str_29: "\nDo you want to save only the pictures that have been successfully downloaded so far?\nAs long as the image is not 100% dead, you can reduce the number of download threads or reload the web page and try downloading again.",
                str_30: "Image Extension Error",
                str_31: "Compression Progress: ",
                str_32: "Countdown ",
                str_33: " sec",
                str_34: "JS Go To Next Page",
                str_35: "Next Page Clicked",
                str_36: "AutoDownload Completed",
                str_37: "No Next Page Element",
                str_38: "Return To Previous Page",
                str_39: "Previous Page Clicked",
                str_40: "No Previous Page Element",
                str_41: "Cancelled",
                str_42: "Cancelled",
                str_43: "Download Failed Data Is Empty",
                str_44: "No Picture Element",
                str_45: "URLs Copied ",
                str_46: "About To Scroll...",
                str_47: "Left Click：Download And Compress\nMiddle Click：Export URLs.txt\nRight Click：Copy Image URL And Title Or Aggregate Images",
                str_48: "Downloading & Compressing, Please Try Again Later!",
                str_49: "Get Pictureing Please Try Again Later!",
                str_50: "",
                str_51: "Please Enter A Custom zip File Folder Name",
                str_52: "Number Of Pictures",
                str_53: "Picture Drawing...",
                str_54: "403，Not Logged In To Website?",
                str_55: "Download Loading...",
                str_56: "Check Picture Statusing...",
                str_57: "AutoPager Loading...",
                str_58: "Reached The Last Page",
                str_59: "No Main Element",
                str_60: "Image Zoom",
                str_61: "Cancel Eoom",
                str_62: "Go To First Image",
                str_63: "Left Click：Go To Last Image\nLeft Click：Export URLs.txt",
                str_64: "Start AutoDownload!!!",
                str_65: "Stop AutoDownload!!!",
                str_66: "💬 Feedback",
                str_67: "⚙️ Settings",
                str_68: "Current(※Global) Website Full Picture Load Options",
                str_69: "Show Lower Left Icon Button",
                str_70: "Max Download Thread：",
                str_71: "Compressed Packaging",
                str_72: "Compressed File Extension：",
                str_73: "AutoDownload",
                str_74: " ( [ ctrl + . ] Start or Cancel)",
                str_75: "AutoDownload Countdown Sec：",
                str_76: "Comic Site Rules Switch",
                str_77: "Double Click Go To Next Page",
                str_78: "Fancybox Plugin",
                str_79: "Image Zoom Ratio：",
                str_80: "Number Of Images Side By Side：",
                str_81: "Comic Category Fixed To 2",
                str_82: hasTouchEvents ? "Cancel" : "Cancel (Esc)",
                str_83: "Reset",
                str_84: "Save",
                str_85: hasTouchEvents ? "Settings" : "Settings(*)",
                str_86: hasTouchEvents ? "Toggle" : "ToggleMode(5)",
                str_87: hasTouchEvents ? "Zoom" : "ToggleZoom(-+)",
                str_88: hasTouchEvents ? "Cancel" : "CancelZoom(.)",
                str_89: "Pause Automatic Page Turning",
                str_90: "Enable Automatic Page Turning",
                str_91: "Initialization Settings",
                str_92: "Original Mode",
                str_93: "Side-By-Side Mode",
                str_94: "Back To The Beginning",
                str_95: "Go To Next Episode",
                str_96: "It’s The Last Episode",
                str_97: "Have",
                str_98: "Page Fetch Error Please Feedback",
                str_99: "Retry No.",
                str_100: "Bout",
                str_101: "MediaURLs.txt Exported",
                str_102: "Format Converting",
                str_103: "Enable Side-By-Side Mode",
                str_104: hasTouchEvents ? "Export" : "ExportURLs(7)",
                str_105: hasTouchEvents ? "Copy" : "CopyURLs(1)",
                str_106: hasTouchEvents ? "TabView" : "NewTabView(8)",
                str_107: hasTouchEvents ? "Download" : "FastDownload(3)",
                str_108: "※Where the message appears：",
                str_109: {
                    c: "Center",
                    ul: "Upper left",
                    ur: "Upper right",
                    ll: "Lower left",
                    lr: "Lower right",
                },
                str_110: "※Convert Webp to Jpg",
                str_111: "Lazy Load Full Resolution",
                str_112: "Lazy Load Single Column Layout",
                str_113: "Lazy Load Preload Images",
                str_114: "E/EX-HENTAI Load Original Image",
                str_115: "Turn Off Auto Scroll To First Image",
                str_116: "Auto Scroll All Image Elements",
                str_117: "Show Fixed Menu",
                str_118: "Album title has been updated",
                str_119: "FancyboxV5 Wheel Toggle Zoom",
                str_120: "This Website New Tab View uses ViewerJs Plug-in",
                str_121: "Turn Off Image Navigation Shortcut Keys",
                str_122: "This website uses Infinite Scroll Read Mode",
                str_123: "This website Show eye icon and picture number",
                str_124: "This website downloads videos",
                str_125: "🧹 Reset all script settings stored on this site",
                str_126: "🧹 Reset all saved global settings",
                str_127: "Right Click：Export URLs(7)",
                str_128: hasTouchEvents ? "OpenFavor" : "OpenFavor(9)",
                str_129: hasTouchEvents ? "CloseFavor" : "CloseFavor(9)",
                str_130: "Edit Favor",
                str_131: "save",
                str_132: "close",
                str_133: "Menu",
                str_134: "Float Menu",
                str_135: "Infinite Scroll Initializing",
                str_136: "Right Click：Increase Image Zzoom Level(+)",
                str_137: "Add Fancybox To Image",
                str_138: "This Website Is Disabled",
                str_139: "Page Content Auto Insert Images",
                str_140: "Enable Shadow Gallery",
                str_141: "Shadow Gallery",
                str_141: hasTouchEvents ? "Shadow Gallery" : "Shadow Gallery(G)",
                str_142: "Close (Esc)",
                str_143: "Next Chapter",
                str_144: "Next Post",
                galleryMenu: {
                    webtoon: hasTouchEvents ? "Webtoon" : "Webtoon (4)",
                    rtl: hasTouchEvents ? "Right To Left" : "Right To Left (3)",
                    small: hasTouchEvents ? "Small Image" : "Small Image (2,R)",
                    single: hasTouchEvents ? "Single Image" : "Single Image (1)",
                    default: hasTouchEvents ? "Default" : "Default (0)",
                }
            };
            break;
    }

    let FullPictureLoadBlacklist = localStorage.getItem("FullPictureLoadBlacklist") ?? 0;
    _GM_registerMenuCommand(displayLanguage.str_66, () => _GM_openInTab("https://greasyfork.org/scripts/463305/feedback"));
    _GM_registerMenuCommand("📓 Github README.md", () => _GM_openInTab("https://github.com/skofkyo/AutoPager/blob/main/CustomPictureDownload/README.md"));
    const FullPictureLoadBlacklist_menu_command_id = _GM_registerMenuCommand(FullPictureLoadBlacklist == 0 ? "❌ " + displayLanguage.str_138 : "✔️  " + displayLanguage.str_138, () => {
        FullPictureLoadBlacklist == 0 ? localStorage.setItem("FullPictureLoadBlacklist", 1) : localStorage.setItem("FullPictureLoadBlacklist", 0);
        location.reload();
    });
    if (FullPictureLoadBlacklist == 1) return;

    const fun = {
        url: (() => siteUrl)(),
        lo: (() => _unsafeWindow.location.origin)(),
        lp: (() => _unsafeWindow.location.pathname)(),
        lh: (() => _unsafeWindow.location.hostname)(),
        ls: (() => _unsafeWindow.location.search)(),
        indexOf: (obj, str) => obj.indexOf(str) > -1,
        int: (srt) => parseInt(srt, 10),
        ex: e => {
            const object = {
                j: "jpg",
                p: "png",
                g: "gif",
                w: "webp",
                b: "bmp"
            };
            return object[e];
        },
        for: async (array, callback) => {
            for (let index = 0; index < array.length; index++) {
                await callback(array[index], index, array);
            }
        },
        checkUrl: (obj = {}) => {
            const {
                h: hosts,
                p: pathname,
                s: search,
                e: elements
            } = obj;
            const {
                imgs: imgSelector,
                customTitle: titleSelector
            } = tempData;
            let checkH = true;
            let checkP = true;
            let checkS = true;
            let checkE = true;
            let checkI = true;
            let checkT = true;
            if ("h" in obj) {
                if (isArray(hosts)) {
                    checkH = hosts.some(item => {
                        if (isRegExp(item)) {
                            return item.test(fun.lh);
                        } else if (isString(item)) {
                            return item === fun.lh;
                        } else {
                            return false;
                        }
                    });
                } else if (isRegExp(hosts)) {
                    checkH = hosts.test(fun.lh);
                } else if (isString(hosts)) {
                    checkH = fun.lh.includes(hosts);
                }
            }
            if (!checkH) return false;
            if ("p" in obj) {
                if (isRegExp(pathname)) {
                    checkP = pathname.test(fun.lp);
                } else if (isString(pathname)) {
                    checkP = fun.lp.includes(pathname);
                }
            }
            if ("s" in obj) {
                if (isRegExp(search)) {
                    checkS = search.test(fun.ls);
                } else if (isString(search)) {
                    checkS = fun.ls.includes(search);
                }
            }
            if ("e" in obj) {
                if (isArray(elements)) {
                    checkE = elements.every(selector => !!fun.ge(selector));
                } else if (isString(elements)) {
                    checkE = !!fun.ge(elements);
                }
            }
            if ("imgs" in tempData && isString(imgSelector) && !("SPA" in tempData)) {
                checkI = !!fun.ge(imgSelector);
            }
            if ("customTitle" in tempData && isString(titleSelector) && !("SPA" in tempData)) {
                checkT = !!fun.ge(titleSelector);
            }
            return checkH && checkP && checkS && checkE && checkI && checkT;
        },
        checkAutoPagerEle: (data = {}) => {
            let check = true;
            const {
                ele: pageElementSelector,
                observer: observerSelector,
                next: nextSelector,
                re: replaceSelector
            } = data;
            const selectors = [
                pageElementSelector,
                observerSelector,
                nextSelector,
                replaceSelector
            ].filter(item => isString(item));
            if (selectors.length > 0) {
                check = selectors.every(selector => !!fun.ge(selector));
                if (check) {
                    debug("\n圖片全載AutoPager\n頁面包含自動翻頁必須的所有元素");
                } else {
                    console.error("\n圖片全載AutoPager\n頁面沒有包含自動翻頁必須的所有元素");
                }
            }
            return check;
        },
        getModeUrl: (url, mode, i) => {
            //【.html ==> .html?page=2】第一頁 ==> 第二頁
            //【 ==> ?page=2】第一頁 ==> 第二頁
            if (mode === 1) return url.replace(/\?page=\d+$/, "") + "?page=" + i;
            //【.html ==> /2.html】 第一頁 ==> 第二頁
            if (mode === 2) return url.slice(0, -5) + "/" + i + ".html";
            //【.html ==> _1.html】  第一頁 ==> 第二頁
            //return siteUrl.replace(/(_\d+)?\.html$/, "") + "_" + (i - 1) + ".html";
            if (mode === 3) return url.replace(/\.html$/, "") + "_" + (i - 1) + ".html";
            //【/ ==> /2/】  第一頁 ==> 第二頁
            if (mode === 4) return url.slice(0, -1) + "/" + i + "/";
            //【 ==> /2】  第一頁 ==> 第二頁
            if (mode === "4") return url + "/" + i;
            //【.html ==> -2.html】  第一頁 ==> 第二頁
            if (mode === 5) return url.replace(/\.html$/, "") + "-" + i + ".html";
            //【-1.html ==> -2.html】  第一頁 ==> 第二頁
            if (mode === "5") return url.replace(/(-\d+)?\.html$/, "") + "-" + i + ".html";
            //【?p=1 ==> ?p=2】  第一頁 ==> 第二頁
            if (mode === 6) return url.replace(/\?p=\d+$/, "") + "?p=" + i;
            //【/1 ==> /2】  第一頁 ==> 第二頁
            //【.html ==> .html/2】  第一頁 ==> 第二頁
            if (mode === 7) return url.replace(/(\.html).*$/, "$1").replace(/\/\d+$/, "") + "/" + i;
            //【 ==> &page=1】  第一頁 ==> 第二頁
            if (mode === 8) return url.replace(/&page=\d+$/, "") + "&page=" + (i - 1);
            //【 ==> &page=2】  第一頁 ==> 第二頁
            if (mode === "8") return url.replace(/&page=\d+$/, "") + "&page=" + i;
            //【.html ==> _2.html】  第一頁 ==> 第二頁
            if (mode === 9) return url.replace(/(_\d+)?\.html$/, "") + "_" + i + ".html";
            //【.html ==> .html/2】  第一頁 ==> 第二頁
            if (mode === 10) return url.replace(/\.html(\/\d+)?$/, "") + ".html/" + i;
            //【/ ==> /2.html】  第一頁 ==> 第二頁
            //【/1.html ==> /2.html】  第一頁 ==> 第二頁
            if (mode === 11) return url.replace(/\/(\d+\.html)?$/, "") + "/" + i + ".html";
            //【/ ==> /2.htm】  第一頁 ==> 第二頁
            //【/1.htm ==> /2.htm】  第一頁 ==> 第二頁
            if (mode === 12) return url.replace(/\/(\d+\.htm)?$/, "") + "/" + i + ".htm";
            //【-1-* ==> -2-*】  第一頁 ==> 第二頁
            if (mode === 13) return url.replace(/-\d+-[^-]+$/, "") + "-" + i;
            //【/1/ ==> /2/】  第一頁 ==> 第二頁
            if (mode === 14) return url.replace(/\/\d+\/$/, "") + "/" + i + "/";
            //【/index.html ==> /index_2.html】  第一頁 ==> 第二頁
            if (mode === 15) return url.replace(/\/(index(_\d+)?\.html)?$/, "") + "/index_" + i + ".html";
            //【 ==> /2#list】  第一頁 ==> 第二頁
            if (mode === 16) return url.replace(/\/(index(_\d+)?\.html)?$/, "") + "/" + i + "#list";
            //【.htm ==> _2.htm】  第一頁 ==> 第二頁
            if (mode === 17) return url.replace(/#$/, "").replace(/(_\d+)?\.htm$/, "") + "_" + i + ".htm";
            //【/ ==> /page/2/】  第一頁 ==> 第二頁
            if (mode === 18) return url.replace(/\/(page\/\d+\/)?$/, "") + "/page/" + i + "/";
            //【-1 ==> -2】  第一頁 ==> 第二頁
            if (mode === 19) return url.replace(/-\d+$/, "") + "-" + i;
            //【 ==> -p-2】  第一頁 ==> 第二頁
            if (mode === 20) return url.replace(/-p-\d+$/, "") + "-p-" + i;
        },
        //重新發送請求
        retryUrl: async (url, res, fn, retryCount = 10) => {
            debug(`\n${fn}連線錯誤碼：${res.status}\n`, url);
            let retryNum = 1;
            let obj = {
                fn: fn,
                url: url,
                status: res.status
            };
            debug(`\n${fn}連線錯誤碼：${res.status}重試第${retryNum}次\n`, url);
            let retry = await new Promise(async resolve => {
                for (let check = 1; check <= retryCount; check++) {
                    let checkRes = await fetch(url);
                    if (checkRes.status == 304 || checkRes.status == 200) {
                        let buffer = await checkRes.arrayBuffer();
                        resolve({
                            ok: true,
                            buffer: buffer
                        });
                        break;
                    } else {
                        debug(`\n${fn}連線錯誤碼：${checkRes.status}重試第${retryNum += 1}次\n`, url);
                        await fun.delay(3000, 0);
                    }
                    if (check >= retryCount) {
                        resolve({
                            ok: false
                        });
                    }
                }
            });
            if (retry.ok) {
                return retry.buffer;
            } else {
                fetchErrorArray.push(obj);
                return null;
            }
        },
        fetchErrorMsg: () => {
            if (fetchErrorArray.length > 0) {
                debug(`\nfetchErrorArray\n`, fetchErrorArray);
                setTimeout(() => fun.showMsg(`${displayLanguage.str_97}${fetchErrorArray.length}${displayLanguage.str_98}`, 10000), 1500);
            }
        },
        //並行請求取得圖片網址，返回圖片網址。
        getImg: async (img, maxPage = 1, mode = 1, rText = null, time = 50, url = siteUrl, msg = 1, request = 0) => {
            if (fun.ge(".FullPictureLoadImage") && request == 0) return fun.gae(".FullPictureLoadImage:not(.small)");
            isFetching = true;
            if (!getImgFn.includes("getImg()")) getImgFn += " > fun.getImg()";
            if (msg == 1) fun.showMsg(displayLanguage.str_01, 0);
            let imgsArray = [];
            let fetchNum = 0;
            const html = _url => fetch(_url).then(async res => {
                debug(`\nfun.getImg() URL`, _url);
                if (res.status >= 400) {
                    let resData = await fun.retryUrl(_url, res, "fun.getImg()");
                    if (resData !== null) return resData;
                }
                return res.arrayBuffer();
            }).then(buffer => {
                const decoder = new TextDecoder(document.characterSet || document.charset || document.inputEncoding);
                const htmlText = decoder.decode(buffer);
                if (msg == 1) fun.showMsg(`${displayLanguage.str_02}${fetchNum+=1}/${fun.int(maxPage)}`, 0);
                return htmlText;
            }).catch(error => {
                console.error(`\nfun.getImg() > fetch()出錯:\n${decodeURIComponent(_url)}`, error);
            });
            const resArr = [];
            resArr.push(html(url));
            if (fun.int(maxPage, 10) > 1) {
                for (let i = 2; i <= fun.int(maxPage); i++) {
                    resArr.push(html(fun.getModeUrl(url, mode, i)));
                    await fun.delay(time, 0);
                }
            }
            await Promise.all(resArr).then(htmls => {
                isFetching = false;
                if (msg == 1) fun.hideMsg();
                for (let i = 0; i < htmls.length; i++) {
                    let dom = fun.doc(htmls[i]);
                    let imgs = fun.gae(img, dom, dom);
                    //debug(`\nfun.getImg() DOM${i}`, dom);
                    for (let p = 0; p < imgs.length; p++) {
                        let check = fun.checkImgSrc(imgs[p], rText);
                        check.ok ? imgsArray.push(decodeURIComponent(check.src)) : debug(`\nfun.getImg() imgs[${p}]錯誤`, imgs[p]);
                    }
                }
            });
            fun.fetchErrorMsg();
            return imgsArray;
        },
        //單線程請求取得圖片網址,完成一個請求會把圖片元素先插入到當前文檔，類翻頁模式，返回圖片網址。
        getImgO: async (img, maxPage = 1, mode = 1, rText = null, time = 200, replaceElement = null, url = siteUrl, msg = 1, request = 0) => {
            if (fun.ge(".FullPictureLoadImage") && request == 0) return fun.gae(".FullPictureLoadImage:not(.small)");
            isFetching = true;
            if (!getImgFn.includes("getImgO()")) getImgFn += " > fun.getImgO()";
            if (msg == 1) fun.showMsg(displayLanguage.str_01, 0);
            let imgsArray = [];
            let fetchNum = 0;
            const html = async (_url, id = 1) => {
                await fun.delay(time, 0);
                return fetch(_url).then(async res => {
                    debug(`\nfun.getImgO() URL`, _url);
                    if (res.status >= 400) {
                        let resData = await fun.retryUrl(_url, res, "fun.getImgO()");
                        if (resData !== null) return resData;
                    }
                    return res.arrayBuffer();
                }).then(buffer => {
                    const decoder = new TextDecoder(document.characterSet || document.charset || document.inputEncoding);
                    const htmlText = decoder.decode(buffer);
                    let dom = fun.doc(htmlText);
                    fun.gae(img, dom, dom).forEach(ele => {
                        let check = fun.checkImgSrc(ele);
                        if (ele.tagName == "IMG" && check.ok) ele.src = check.src;
                        if (id == 1) {
                            let targetEle = fun.gae(img).at(-1);
                            insertAfter(targetEle, ele.cloneNode(true));
                        }
                    });
                    if (isString(replaceElement)) {
                        fun.gae(".invisible", dom).forEach(ele => ele.classList.remove("invisible"));
                        let ce = fun.gae(replaceElement);
                        let re = fun.gae(replaceElement, dom, dom);
                        if (ce.length === re.length) {
                            ce.forEach((e, i) => (e.outerHTML = re[i].outerHTML));
                        }
                    }
                    if (msg == 1) fun.showMsg(`${displayLanguage.str_02}${fetchNum+=1}/${fun.int(maxPage)}`, 0);
                    return htmlText;
                }).catch(error => {
                    console.error(`\nfun.getImgO() > fetch()出錯:\n${decodeURIComponent(_url)}`, error);
                });
            };
            const resArr = [];
            resArr.push(await html(url, 0));
            if (fun.int(maxPage) > 1) {
                for (let i = 2; i <= fun.int(maxPage); i++) {
                    resArr.push(await html(fun.getModeUrl(url, mode, i)));
                }
            }
            await Promise.all(resArr).then(htmls => {
                isFetching = false;
                fun.hideMsg();
                for (let i = 0; i < htmls.length; i++) {
                    let dom = fun.doc(htmls[i]);
                    let imgs = fun.gae(img, dom, dom);
                    //debug(`\nfun.getImgO() DOM${i}`, dom);
                    for (let p = 0; p < imgs.length; p++) {
                        let check = fun.checkImgSrc(imgs[p], rText);
                        check.ok ? imgsArray.push(decodeURIComponent(check.src)) : debug(`\nfun.getImgO() imgs[${p}]錯誤`, imgs[p]);
                    }
                }
            });
            fun.fetchErrorMsg();
            return imgsArray;
        },
        //使用Iframe框架加載網頁,完成一個加載會把圖片元素先插入到當前文檔，類翻頁模式，返回圖片網址。
        getImgIframe: async (img, maxPage = 1, mode = 1, rEle = null, time = 500, showMsg = 1) => {
            if (fun.ge(".FullPictureLoadImage")) return fun.gae(".FullPictureLoadImage:not(.small)");
            isFetching = true;
            if (!getImgFn.includes("getImgIframe()")) getImgFn += " > fun.getImgIframe()";
            if (showMsg == 1) fun.showMsg(displayLanguage.str_01, 0);
            let imgsArray = [];
            let fetchNum = 1;
            await fun.waitEle(img);
            fun.gae(img).forEach(ele => imgsArray.push(ele));
            const html = async (url, index = 0) => {
                let targetEle = fun.gae(img).at(-1);
                let load = document.createElement("p");
                load.className = "FullPictureLoadLoading";
                load.innerText = "Loading...";
                insertAfter(targetEle, load);
                await fun.delay(time, 0);
                let dom = null;
                for (let i = 1; i < 20; i++) {
                    dom = await fun.iframeSrcDoc(url, img);
                    if (dom !== null) {
                        break;
                    } else {
                        fun.remove("#FullPictureLoadIframe");
                    }
                }
                if (dom) {
                    debug("iframeDoc" + index, dom);
                    fun.gae(img, dom, dom).forEach(ele => {
                        imgsArray.push(ele);
                        insertAfter(targetEle, ele.cloneNode(true));
                    });
                    if (rEle) {
                        let ce = fun.gae(rEle);
                        let re = fun.gae(rEle, dom, dom);
                        if (ce.length === re.length) {
                            ce.forEach((e, i) => (e.outerHTML = re[i].outerHTML));
                        }
                    }
                    load.remove();
                    if (showMsg == 1) fun.showMsg(`${displayLanguage.str_02}${fetchNum+=1}/${fun.int(maxPage)}`, 0);
                } else {
                    fetchNum += 1;
                    load.remove();
                    let obj = {
                        fn: "fun.getImgIframe()",
                        url: url
                    };
                    fetchErrorArray.push(obj);
                    fun.showMsg(displayLanguage.str_03, 3000);
                    return;
                }
            }
            if (fun.int(maxPage) > 1) {
                for (let i = 2; i <= fun.int(maxPage); i++) {
                    await html(fun.getModeUrl(siteUrl, mode, i), i);
                }
            }
            debug("\nfun.getImgiframe() 聚集的所有IMG", imgsArray);
            isFetching = false;
            fun.hideMsg();
            fun.fetchErrorMsg();
            return imgsArray;
        },
        //從指定的所有鏈接取得圖片網址，有並行請求、單線程、翻頁模式，返回圖片網址。
        getImgA: async (elementSelector, link, mode = 0, rText = null, showMsg = 1, request = 0) => {
            if (fun.ge(".FullPictureLoadImage") && request == 0) return fun.gae(".FullPictureLoadImage:not(.small)");
            isFetching = true;
            if (!getImgFn.includes("getImgA()")) getImgFn += " > fun.getImgA()";
            if (showMsg == 1) fun.showMsg(displayLanguage.str_01, 0);
            let links, linkEles, linksNum;
            if (isFn(link)) {
                links = await link();
                linksNum = links.length;
            } else if (isArray(link)) {
                links = link;
                linksNum = links.length;
            } else if (isString(link)) {
                linkEles = fun.gae(link);
                links = [...new Set(linkEles.map(a => a.href))];
                linksNum = links.length + 1;
            } else {
                console.error("\nfun.getImgA() link參數錯誤");
                return;
            }
            debug("\nfun.getImgA() links", links);
            let imgsArray = [];
            let fetchNum = 0;
            const html = url => fetch(url).then(async res => {
                debug(`\nfun.getImgA() URL`, url);
                if (res.status >= 400) {
                    let resData = await fun.retryUrl(url, res, "fun.getImgA()");
                    if (resData !== null) return resData;
                }
                return res.arrayBuffer();
            }).then(buffer => {
                if (showMsg == 1) fun.showMsg(`${displayLanguage.str_02}${fetchNum+=1}/${linksNum}`, 0);
                const decoder = new TextDecoder(document.characterSet || document.charset || document.inputEncoding);
                const htmlText = decoder.decode(buffer);
                return htmlText;
            }).catch(error => {
                console.error(`\nfun.getImgA fetch()出錯:\n${decodeURIComponent(url)}`, error);
            });
            const resArr = [];
            if (isString(link)) resArr.push(html(siteUrl));
            for (let i = 0; i < links.length; i++) {
                if (mode == 0) {
                    resArr.push(html(links[i]));
                } else if (mode >= 100) {
                    await fun.delay(mode, 0);
                    resArr.push(html(links[i]));
                } else if (mode == 1) {
                    let res = await html(links[i]);
                    resArr.push(res);
                    let dom = fun.doc(res);
                    debug(`\nfun.getImgA()單線程模式 DOM\n${links[i].href}`, dom);
                    let imgs = fun.gae(elementSelector, dom, dom);
                    let imgHtml = "";
                    for (let p = 0; p < imgs.length; p++) {
                        let imgSrc;
                        let check = fun.checkImgSrc(imgs[p], rText);
                        if (check.ok) {
                            imgSrc = check.src;
                            //let blob = await GM_XHR_Download(imgSrc);
                            //let objectURL = await URL.createObjectURL(blob.blob);
                            //imgSrc = objectURL;
                            debug("\nfun.getImgA() 單線程模式imgSrc", imgSrc);
                        } else {
                            console.error("\nfun.getImgA() 單線程模式出錯", imgs[p]);
                            continue;
                        }
                        imgHtml += `<img class="FullPictureLoadImage" src="${imgSrc}">`;
                    }
                    linkEles[i].outerHTML = imgHtml;
                } else if (mode == 2) {
                    let res = await html(links[i]);
                    await fun.delay(200, 0);
                    resArr.push(res);
                    if (i !== 0) {
                        let dom = fun.doc(res);
                        let tE = fun.gae(elementSelector).at(-1);
                        let eles = fun.gae(elementSelector, dom, dom);
                        eles.forEach(e => insertAfter(tE, e));
                    }
                }
            }
            await Promise.all(resArr).then(htmls => {
                isFetching = false;
                fun.hideMsg();
                for (let i = 0; i < htmls.length; i++) {
                    let dom = fun.doc(htmls[i]);
                    //if (mode != 1) debug(`\nfun.getImgA() DOM${i}`, dom);
                    let imgs = fun.gae(elementSelector, dom, dom);
                    for (let p = 0; p < imgs.length; p++) {
                        let check = fun.checkImgSrc(imgs[p], rText);
                        check.ok ? imgsArray.push(check.src) : console.error("\nfun.getImgA() PromiseAll出錯", imgs[p]);
                    }
                }
            });
            fun.fetchErrorMsg();
            return imgsArray;
        },
        //跨域從指定的所有鏈接取得圖片網址，並行請求有請求間隔參數，返回圖片網址。
        getImgCorsA: (imgSelector, aSelector, time = 100) => {
            isFetching = true;
            fun.showMsg(displayLanguage.str_01, 0);
            let xhrNum = 0;
            let links;
            isString(aSelector) ? links = fun.gau(aSelector) : links = aSelector;
            let resArr = links.map(async (url, i, arr) => {
                await fun.delay(time * i, 0);
                return fun.xhrDoc(url).then(dom => {
                    fun.showMsg(`${displayLanguage.str_02}${xhrNum+=1}/${arr.length}`, 0);
                    return fun.gae(imgSelector, dom, dom);
                });
            });
            return Promise.all(resArr).then(arr => {
                isFetching = false;
                fun.hideMsg();
                return fun.getImgSrcArr(arr.flat());
            });
        },
        //確認元素和圖片網址，嘗試取得網址和補全網址。
        checkImgSrc: (ele, rText = null) => {
            let imgSrc;
            let check = fun.checkDataset(ele);
            if (isEle(ele) && ["IMG", "DIV", "A", "SPAN", "LI", "FIGURE"].some(n => n === ele.tagName) && check.ok) {
                imgSrc = check.src;
                if (/^\/\//.test(imgSrc)) imgSrc = location.protocol + imgSrc;
                if (/^\/\w+/.test(imgSrc)) imgSrc = location.origin + imgSrc;
                if (!/^(http|blob)/.test(imgSrc) && !/^data/.test(imgSrc) && /^\w+/.test(imgSrc)) imgSrc = location.origin + "/" + imgSrc;
                if (isArray(rText) && rText.length == 2) imgSrc = imgSrc.replace(rText[0], rText[1]);
                return {
                    ok: true,
                    src: imgSrc
                };
            } else if (isEle(ele) && ["IMG", "AMP-IMG"].some(n => n === ele.tagName)) {
                if (ele.tagName == "IMG") imgSrc = ele.src;
                if (ele.tagName == "AMP-IMG") imgSrc = ele.getAttribute("src");
                if (/^\/\//.test(imgSrc)) imgSrc = location.protocol + imgSrc;
                if (isArray(rText) && rText.length == 2) imgSrc = imgSrc.replace(rText[0], rText[1]);
                return {
                    ok: true,
                    src: imgSrc
                };
            } else if (["A", "LINK"].some(n => n === ele.tagName)) {
                imgSrc = ele.href;
                if (isArray(rText) && rText.length == 2) imgSrc = imgSrc.replace(rText[0], rText[1]);
                return {
                    ok: true,
                    src: imgSrc
                };
            } else if (isString(ele) && /^(http|blob|\/\/)/.test(ele)) {
                imgSrc = ele;
                if (/^\/\//.test(ele)) imgSrc = location.protocol + imgSrc;
                if (isArray(rText) && rText.length == 2) imgSrc = imgSrc.replace(rText[0], rText[1]);
                return {
                    ok: true,
                    src: imgSrc
                };
            }
            return {
                ok: false
            };
        },
        //確認元素有沒有把圖片原始網址放在src以外的屬性
        checkDataset: ele => {
            if (["IMG", "DIV", "A", "SPAN", "LI", "FIGURE"].some(n => n === ele.tagName)) {
                const datasetArr = [
                    "data-loadsrc",
                    "data-orig-file",
                    "data-src",
                    "data-original",
                    "data-url",
                    "data-echo",
                    "data-ecp",
                    "data-lazyload-src",
                    "data-lazy-src",
                    "data-lazy",
                    "data-lazyload",
                    "data-lbwps-srcsmall",
                    "data-cfsrc",
                    "data-pin-media",
                    "data-img-url",
                    "data-mfp-src",
                    "data-wpfc-original-src",
                    "data-high-res-src",
                    "data-thumb",
                    "bigimg",
                    "lg-data-src",
                    "org_img_url",
                    "lazysrc",
                    "file",
                    "zoomfile",
                    "original",
                    "mydatasrc",
                    "ess-data"
                ];
                for (let p of datasetArr) {
                    let imgSrc = ele.getAttribute(p)?.trim();
                    if (!!imgSrc) {
                        return {
                            ok: true,
                            src: imgSrc
                        }
                    }
                }
                let backgroundImage = ele.style.backgroundImage;
                if (backgroundImage !== "") {
                    let [, imgSrc] = backgroundImage.split('"');
                    imgSrc = imgSrc?.trim();
                    return {
                        ok: true,
                        src: imgSrc
                    }
                }
            }
            return {
                ok: false
            };
        },
        //確認加了CDN的圖片網址是否有效，無效則刪除CDN返回原始來源的圖片網址
        checkImageCDN: srcArr => {
            fun.showMsg("fun.xhrHEA(check)...", 0);
            let xhrNum = 0;
            return srcArr.map(async (src, i, arr) => {
                await fun.delay(25 * i, 0);
                let res = await fun.xhrHEAD(src);
                fun.showMsg(`fun.xhrHEAD(${xhrNum+=1}/${arr.length})`, 0);
                let status = res.status;
                if (src.includes("wsrv.nl")) {
                    return status > 399 ? src.replace("https://wsrv.nl/?url=", "") : src; //wsrv.nl_CDN
                } else {
                    return status > 399 ? src.replace(/i\d\.wp\.com\/|\?.+$/g, "") : src; //WordPressCDN
                }
            });
        },
        //移除CDN返回原始來源的圖片網址
        removeImageCDN: srcArr => {
            return srcArr.map(async (src, i, arr) => {
                if (src.includes("wsrv.nl")) {
                    return src.replace("https://wsrv.nl/?url=", ""); //wsrv.nl_CDN
                } else {
                    return src.replace(/i\d\.wp\.com\/|\?.+$/g, ""); //WordPressCDN
                }
            });
        },
        //從用AList架設的雲端硬碟，提取圖片和影片網址
        getAList: () => {
            let paths = [...document.querySelectorAll("a.list-item")].map(a => decodeURIComponent(a.getAttribute("href"))).map(href => /\.jpe?g$|\.png$|\.gif$|\.mp4$|\.mov$|\.ts$/i.test(href) ? href : null).filter(item => item);
            fun.showMsg(displayLanguage.str_05, 0);
            let fetchNum = 0;
            let resArr = paths.map((path, i, arr) => {
                return fetch("/api/fs/get", {
                    "headers": {
                        "accept": "application/json, text/plain, */*",
                        "content-type": "application/json;charset=UTF-8"
                    },
                    "body": `{\"path\":\"${path}\",\"password\":\"\"}`,
                    "method": "POST"
                }).then(res => res.json()).then(json => {
                    fun.showMsg(`${displayLanguage.str_06}${fetchNum+=1}/${arr.length}`, 0);
                    return json.code == 200 ? {
                        name: json.data.name,
                        url: decodeURIComponent(json.data.raw_url)
                    } : null;
                });
            });
            return Promise.all(resArr).then(arr => arr.map(obj => {
                if (/\.mp4$|\.mov$|\.ts$/i.test(obj.name)) {
                    videoSrcArray.push(obj.url);
                    return null;
                } else {
                    return obj.url;
                }
            }).filter(item => item));
        },
        //指定元素選擇器或元素陣列，返回過濾出圖片網址陣列。
        getImgSrcArr: (img, dom = document) => {
            let imgs;
            isString(img) ? imgs = fun.gae(img, dom, dom) : imgs = img;
            let srcs = imgs.map(ele => {
                let check = fun.checkImgSrc(ele);
                return check.ok ? check.src : null;
            }).filter(item => item);
            return [...new Set(srcs)];
        },
        getImgSrcset: (img, dom = document) => {
            let imgs;
            isString(img) ? imgs = fun.gae(img, dom, dom) : imgs = img;
            let srcs = imgs.map(ele => {
                let srcset = ele.getAttribute("srcset");
                if (srcset) {
                    let splitArr = srcset.split(",");
                    splitArr = splitArr.sort((a, b) => a.match(/\s(\d+)(w|x)/)[1] - b.match(/\s(\d+)(w|x)/)[1]);
                    let src = splitArr.at(-1).trim().split(" ")[0];
                    if (/^https:\/\/i\d\.wp\.com/.test(src)) {
                        src = src.replace(/\?.+$/, "?ssl=1");
                    }
                    return decodeURIComponent(src);
                } else {
                    let check = fun.checkImgSrc(ele);
                    if (check.ok) {
                        let src = check.src;
                        if (/^https:\/\/i\d\.wp\.com/.test(src)) {
                            src = src.replace(/\?.+$/, "?ssl=1").replace(/-\d+x\d+\./, ".");
                        } else {
                            src = src.replace(/-\d+x\d+\./, ".");
                        }
                        return decodeURIComponent(src);
                    } else {
                        return null;
                    }
                }
            }).filter(item => item);
            return srcs;
        },
        getBackgroundImage: (selector, dom = document) => {
            let eles;
            isString(selector) ? eles = fun.gae(selector, dom, dom) : eles = selector;
            let srcs = eles.map(ele => {
                let backgroundImage = ele?.style?.backgroundImage;
                if (!!backgroundImage) {
                    let [, imgSrc] = backgroundImage.split('"');
                    imgSrc = imgSrc?.trim();
                    return imgSrc;
                } else {
                    return null;
                }
            }).filter(item => item);
            return [...new Set(srcs)];
        },
        //從頭一路翻到尾的自動翻頁函式
        getNP: async (pageEle, nextLinkEle, lastEle = null, replaceElement = null, time = 0, dataset = null, msg = 1, retry = 10) => {
            //翻頁模式聚集所有圖片或是預覽縮圖然後fun.getImgA()
            //用在規則init，fun.getNP(picsEle, nextLinkEle, lastEle, replaceElement, time);
            if (fun.ge(".FullPictureLoadImage")) return;
            if (isString(nextLinkEle) && !fun.ge(nextLinkEle)) return;
            isFetching = true;
            if (!getImgFn.includes("getNP()")) getImgFn += " > fun.getNP()";
            let nextlink = null;
            let page = 1;
            if (msg == 1) fun.showMsg(displayLanguage.str_14, 0);
            const getNextLink = async (url = "", dom = document) => {
                if (isFn(nextLinkEle)) {
                    nextlink = await nextLinkEle(dom);
                } else if (isString(nextLinkEle)) {
                    let ele = fun.ge(nextLinkEle, dom, dom);
                    if (!!ele) {
                        if (!!ele?.dataset?.url) {
                            if (!/^http/.test(ele.dataset.url)) return null;
                            nextlink = ele.dataset.url;
                        } else if (ele.tagName === "A") {
                            nextlink = ele.href;
                            let nh = ele.hostname;
                            let lh = fun.lh;
                            if (nh != lh) nextlink = nextlink.replace(nh, lh);
                        } else {
                            try {
                                ele.getAttribute("href") ? nextlink = ele.getAttribute("href") : nextlink = ele.getAttribute("_href");
                            } catch {
                                nextlink = null;
                            }
                        }
                    } else {
                        nextlink = null;
                    }
                } else {
                    nextlink = null;
                }
                if (isString(url) && isString(nextlink) && (url === nextlink)) {
                    if (msg == 1) fun.showMsg(displayLanguage.str_15);
                    nextlink = null;
                }
                return nextlink;
            };
            const getNextPageEles = async url => {
                if (msg == 1) fun.showMsg(`${displayLanguage.str_14} (Page${page += 1})`, 0);
                await fetch(url).then(async res => {
                    if (res.status >= 400) {
                        let resData = await fun.retryUrl(url, res, "fun.getNP()");
                        if (resData !== null) return resData;
                    }
                    return res.arrayBuffer();
                }).then(buffer => {
                    const decoder = new TextDecoder(document.characterSet || document.charset || document.inputEncoding);
                    const htmlText = decoder.decode(buffer);
                    return htmlText;
                }).then(async htmlText => {
                    let dom = fun.doc(htmlText);
                    let lastPage = null;
                    if (isString(lastEle)) {
                        lastPage = fun.ge(lastEle, dom, dom);
                    } else if (isFn(lastEle)) {
                        try {
                            lastPage = await lastEle(dom);
                        } catch (error) {
                            debug("fun.getNP() lastEle() 函式錯誤", error);
                            lastPage = null;
                        }
                    }
                    if (lastPage) {
                        isFetching = false;
                        if (msg == 1) fun.showMsg(displayLanguage.str_15);
                        return;
                    }
                    if (!fun.ge(pageEle, dom, dom)) {
                        for (let i = 1; i <= retry; i++) {
                            dom = await fun.iframeSrcDoc(url, pageEle);
                            if (dom != null) {
                                break;
                            } else {
                                fun.remove("#FullPictureLoadIframe");
                            }
                        }
                    }
                    if (!dom) dom = fun.doc(htmlText);
                    if (isString(dataset)) {
                        fun.gae(dataset, dom, dom).forEach(e => {
                            let check = fun.checkImgSrc(e);
                            if (check.ok) {
                                if (e.tagName == "IMG") {
                                    e.src = check.src;
                                } else if (["A", "DIV", "SPAN", "LI", "FIGURE"].some(n => n === e.tagName)) {
                                    e.style.backgroundImage = `url(${check.src})`;
                                }
                            }
                        });
                    }
                    //debug(`\nfun.getNP() > getNextPageEles() DOM\n${decodeURIComponent(url)}`, dom);
                    let eles = fun.gae(pageEle, dom, dom);
                    let fragment = new DocumentFragment();
                    fragment.append(...eles);
                    let targetEle = fun.gae(pageEle).at(-1);
                    insertAfter(targetEle, fragment);
                    if (replaceElement) {
                        let currentPageEles = fun.gae(replaceElement);
                        let nextPageEles = fun.gae(replaceElement, dom, dom);
                        if (currentPageEles.length === nextPageEles.length) {
                            currentPageEles.forEach((e, i) => (e.outerHTML = nextPageEles[i].outerHTML));
                        }
                    }
                    nextlink = await getNextLink(url, dom);
                    if (nextlink) {
                        await fun.delay(time, 0);
                        await getNextPageEles(nextlink);
                    } else {
                        isFetching = false;
                        if (msg == 1) fun.showMsg(displayLanguage.str_15);
                        return;
                    }
                });
            };
            nextlink = await getNextLink();
            if (nextlink) {
                await fun.delay(time, 0);
                await getNextPageEles(nextlink);
            } else {
                isFetching = false;
                if (msg == 1) fun.showMsg(displayLanguage.str_15);
                return;
            }
        },
        //傳入免費圖片空間的鏈結陣列，提取圖片網址
        getImageHost: async (links = captureLinksArray) => {
            let imgsSrcArr = [];
            if (links.length > 0) {
                if (/\.\w+$/.test(links[0]) && !/\.html$/.test(links[0]) && !/pixhost\.to\/show\//.test(links[0]) && !/^https?:\/\/imagetwist\.com\//.test(links[0])) return links;
                fun.showMsg(displayLanguage.str_01, 0);
                let xhrNum = 0;
                let resArr = links.map(async (url, i, arr) => {
                    await fun.delay(100 * i, 0);
                    if (/imx\.to/.test(url)) {
                        return fun.imxXHR(url).then(dom => {
                            fun.showMsg(`${displayLanguage.str_02}${xhrNum+=1}/${arr.length}`, 0);
                            let img = fun.ge("#container img", dom);
                            return img ? img.src : null;
                        });
                    } else if (/imagebam/.test(url)) {
                        return fun.imageBamXHR(url).then(dom => {
                            fun.showMsg(`${displayLanguage.str_02}${xhrNum+=1}/${arr.length}`, 0);
                            let img = fun.ge("img.main-image", dom);
                            return img ? img.src : null;
                        });
                    } else if (/postimg/.test(url)) {
                        return fun.xhr(url, {
                            responseType: "document"
                        }).then(dom => {
                            fun.showMsg(`${displayLanguage.str_02}${xhrNum+=1}/${arr.length}`, 0);
                            let a = fun.ge("a#download", dom);
                            return a ? a.href : null;
                        });
                    } else {
                        return fun.xhr(url, {
                            responseType: "document"
                        }).then(dom => {
                            fun.showMsg(`${displayLanguage.str_02}${xhrNum+=1}/${arr.length}`, 0);
                            let img = fun.ge("#imgpreview,#image,.pic.img.img-responsive,#imageid,#img.image-content,.card-body img,.image.img-fluid", dom);
                            return img ? img.src : null;
                        });
                    }
                })
                await Promise.all(resArr).then(arr => (imgsSrcArr = arr.filter(item => item)));
            }
            return imgsSrcArr;
        },
        toggleAutoPager: () => {
            let hide = siteData.autoPager?.hide;
            if (autoPagerSwitch === true) {
                autoPagerSwitch = false;
                fun.showMsg(displayLanguage.str_89);
                fun.gae(".autoPagerTitle").forEach(e => e.classList.add("off"));
                if (isString(hide)) {
                    let eles = fun.gae(hide);
                    eles.forEach(e => (e.style.display = ""));
                }
            } else {
                autoPagerSwitch = true;
                fun.showMsg(displayLanguage.str_90);
                fun.gae(".autoPagerTitle").forEach(e => e.classList.remove("off"));
                if (isString(hide)) {
                    let eles = fun.gae(hide);
                    eles.forEach(e => (e.style.display = "none"));
                }
            }
        },
        //無限滾動自動翻頁函式
        autoPager: async () => {
            fun.addLoading();
            let hide = siteData.autoPager?.hide;
            let url;
            try {
                url = await fun.getNextLink(doc);
                if (!url) {
                    autoPagerSwitch = false;
                    fun.showMsg(displayLanguage.str_58, 3000);
                    fun.removeLoading();
                    if (isString(hide)) {
                        let eles = fun.gae(hide);
                        eles.forEach(e => (e.style.display = ""));
                    }
                    return;
                }
            } catch (error) {
                console.error("\n取得下一頁鏈結出錯\n", error);
                fun.removeLoading();
                if (isString(hide)) {
                    let eles = fun.gae(hide);
                    eles.forEach(e => (e.style.display = ""));
                }
                return;
            }
            let mode = siteData.autoPager?.mode;
            let eleSelector = siteData.autoPager.ele;
            if (isString(mode) && mode == "json") {
                siteJson = await fetch(url, {
                    cache: "no-cache"
                }).then(res => res.json());
            } else if (isNumber(mode) && mode == 1) {
                doc = await fun.iframeDoc(url, (siteData.autoPager?.waitEle || eleSelector), 30000);
            } else {
                if (httpFetchError === false) {
                    doc = await fun.fetchDoc(url, 0);
                }
                if (httpFetchError === true || !doc) {
                    doc = await fun.xhrDoc(url);
                }
            }
            //debug(`\nfun.autoPager()\n${url}\n`, doc);
            debug(`\nfun.autoPager()\n${url}`);
            let stop = siteData.autoPager?.stop;
            if (isFn(stop) || isString(eleSelector)) {
                let stopCheck;
                if (isFn(stop)) {
                    try {
                        stopCheck = await stop(doc);
                    } catch (error) {
                        console.error("\nsiteData.autoPager.stop() 函式錯誤\n", error);
                        stopCheck = false;
                    }
                } else if (isString(eleSelector)) {
                    stopCheck = !fun.ge(eleSelector, doc, doc); //有元素false沒有元素true
                }
                if (stopCheck) {
                    autoPagerSwitch = false;
                    fun.removeLoading();
                    fun.showMsg(displayLanguage.str_58, 3000);
                    if (isString(hide)) {
                        let eles = fun.gae(hide);
                        eles.forEach(e => (e.style.display = ""));
                    }
                    return;
                }
            }
            let history = siteData.autoPager?.history;
            if (history != 0 && mode != "json") {
                try {
                    await fun.addHistory(doc?.title ?? document.title, url);
                } catch (error) {
                    console.error(error);
                }
            }
            let wait = siteData.autoPager?.wait;
            if (isFn(wait)) {
                await wait(doc);
            }
            let script = siteData.autoPager?.script;
            if (isString(script)) {
                let scripts = fun.gae(script, doc);
                for (let i = 0; i < scripts.length; i++) {
                    if (scripts[i].src !== "") {
                        let src = scripts[i].src;
                        await fun.script(src, 1, 1);
                    } else {
                        let code = scripts[i].innerHTML;
                        await fun.script(code, 0, 1);
                    }
                }
            }
            let lazySrc = siteData.autoPager?.lazySrc;
            if (isString(lazySrc)) {
                let eles = fun.gae(lazySrc, doc, doc);
                for (let i = 0; i < eles.length; i++) {
                    let check = fun.checkDataset(eles[i]);
                    if (check.ok) {
                        if (eles[i].tagName === "IMG") {
                            eles[i].src = check.src;
                        } else if (["DIV", "A", "SPAN", "LI", "FIGURE"].some(n => n === eles[i].tagName)) {
                            eles[i].style.backgroundImage = `url('${check.src}')`;
                        }
                    }
                }
            }
            let bF = siteData.autoPager?.bF;
            if (isFn(bF)) await bF(doc);
            let re = siteData.autoPager?.re;
            if (isString(re)) {
                let currentPageEles = fun.gae(re);
                let nextPageEles = fun.gae(re, doc, doc);
                if (currentPageEles.length === nextPageEles.length) {
                    currentPageEles.forEach((e, i) => (e.outerHTML = nextPageEles[i].outerHTML));
                }
            }
            let newEles, tE;
            let pos = siteData.autoPager?.pos;
            if (isFn(eleSelector) && pos || isString(eleSelector)) {
                if (isFn(eleSelector)) {
                    newEles = await eleSelector(doc);
                } else if (isString(eleSelector)) {
                    let nextEle = fun.ge(eleSelector, doc, doc);
                    if (!nextEle) {
                        fun.removeLoading();
                        fun.showMsg(displayLanguage.str_59, 3000);
                        return;
                    }
                    tE = fun.gae(eleSelector).at(-1);
                    newEles = fun.gae(eleSelector, doc, doc);
                }
                let fragment = new DocumentFragment();
                if (siteData.autoPager?.showTitle !== 0) {
                    let add = true;
                    let titleText = null;
                    let num = siteData.autoPager?.pageNum;
                    let title = siteData.autoPager?.title;
                    if (isString(num)) {
                        titleText = `Page ${fun.gt(num, 1, doc)}`;
                    } else if (isFn(num)) {
                        titleText = `Page ${await num(doc)}`;
                    } else if (isFn(title)) {
                        try {
                            titleText = await title(siteJson || doc, frameWindow);
                            if (isObject(titleText)) {
                                titleText.ok ? titleText = titleText.text : add = false;
                            }
                        } catch (error) {
                            console.error("\nsiteData.autoPager.title() 函式錯誤\n", error);
                        }
                    }
                    if (add) {
                        if (mode == "json") {
                            url = document.URL;
                        }
                        fragment.append(fun.titleUrlEle(url, (titleText || doc?.title || document.title)));
                    }
                }
                fragment.append(...newEles);
                if (isArray(pos) && pos.length == 2 && isString(pos[0]) && isNumber(pos[1])) {
                    const [selector, p] = pos;
                    tE = fun.ge(selector);
                    if (p === 0) { //元素裡面
                        tE.append(fragment);
                    } else if (p === 1) { //元素之前
                        insertBefore(tE, fragment);
                    } else if (p === 2) { //元素之後
                        insertAfter(tE, fragment);
                    }
                } else {
                    insertAfter(tE, fragment);
                }
            } else if (isFn(eleSelector)) {
                await eleSelector(doc);
            }
            fun.removeLoading();
            let aF = siteData.autoPager?.aF;
            if (isFn(aF)) await aF(doc);
            if (siteData.category === "comic autoPager") {
                await fun.lazyload();
                let pagerTitles = fun.gae(".autoPagerTitle");
                if (pagerTitles.length > 3) {
                    let parentE = pagerTitles[0].parentNode;
                    pagerTitles[0].remove();
                    let nodes = [...parentE.childNodes];
                    for (let i = 0; i < nodes.length; i++) {
                        if (nodes[i].className === "autoPagerTitle") {
                            break;
                        }
                        nodes[i].remove();
                    }
                }
            }
            let observer = siteData.autoPager?.observer;
            if (isString(observer)) {
                await fun.delay(siteData.autoPager?.sleep ?? 1000, 0);
                let ele = fun.gae(observer).at(-1);
                fun.autoPagerNextObserver.observe(ele);
            }
            let preloadNextPage = siteData.autoPager?.preloadNextPage;
            if (!!preloadNextPage) {
                fun.preloadNextPage(doc);
            }
        },
        preloadNextPage: async (dom = document) => {
            let preloadNextPage = siteData.autoPager?.preloadNextPage;
            if (isNumber(preloadNextPage) && preloadNextPage === 1 && siteData.category === "comic autoPager") {
                let nextSelector = siteData.autoPager.next;
                let nextUrl = null;
                if (isString(nextSelector)) {
                    let nextE = fun.ge(nextSelector, dom, dom);
                    if (!!nextE) {
                        nextUrl = nextE.href;
                    }
                } else if (isFn(nextSelector)) {
                    nextUrl = await nextSelector(dom, 0);
                }
                if (!!nextUrl) {
                    let _fetch;
                    let xhr = siteData.autoPager?.preloadNextPageXHR;
                    if (!!xhr && xhr === "cors") {
                        _fetch = fun.xhrDoc(nextUrl);
                    } else {
                        _fetch = fun.fetchDoc(nextUrl);
                    }
                    _fetch.then(async nextDoc => {
                        let srcs = await siteData.getSrcs(nextDoc);
                        let text;
                        let title = siteData.autoPager?.title;
                        if (isFn(title)) {
                            text = await title(nextDoc);
                            if (isObject(text)) {
                                text = nextDoc.title;
                            }
                        } else {
                            text = nextDoc.title;
                        }
                        fun.picPreload(srcs, text, "next");
                    });
                }
            } else if (isFn(preloadNextPage)) {
                preloadNextPage(dom);
            }
        },
        //Iframe框架加載網頁返回框架的document
        iframeDoc: (url, selector, time = 5000, callback) => {
            return new Promise(async resolve => {
                let tid;
                const iframe = document.createElement("iframe");
                iframe.name = "FullPictureLoad-iframe";
                iframe.id = "FullPictureLoadIframe";
                iframe.src = url;
                iframe.sandbox = "allow-same-origin allow-scripts allow-popups allow-forms";
                //iframe.style.display = "none";
                iframe.style.cssText = "display: block; visibility: visible; float: none; clear: both; width: 100%; height: 0; background: initial; border: 0px; border-radius: 0px; margin: 0px; padding: 0px; z-index: 2147483645;content-visibility: auto;contain-intrinsic-size: auto 300px;";
                document.body.append(iframe);
                tid = setTimeout(() => resolve(null), time);
                const call = async () => {
                    clearTimeout(tid);
                    let dom = iframe.contentDocument || iframe.contentWindow.document;
                    if (!dom) resolve(fun.doc("none"));
                    dom.body.scrollTop = 9999999;
                    dom.documentElement.scrollTop = 9999999;
                    try {
                        await fun.delay(siteData.autoPager?.loadTime || 200, 0);
                    } catch {
                        await fun.delay(200, 0);
                    }
                    if (isString(selector)) await fun.waitEle(selector, 600, dom);
                    if (isFn(callback)) {
                        await callback(dom, iframe.contentWindow);
                    }
                    let frameCode = siteData.frameCode;
                    if (!!frameCode) {
                        fun.script(frameCode, 0, 1, dom);
                    }
                    frameWindow = iframe.contentWindow;
                    resolve(dom);
                    iframe.remove();
                };
                if (iframe.attachEvent) {
                    iframe.attachEvent("onload", () => call());
                } else {
                    iframe.onload = () => call();
                }
            });
        },
        //先用Fetch API取得網頁原始碼，再傳入Iframe框架加載網頁返回框架的document
        iframeSrcDoc: (url, selector, time = 5000, callback) => {
            return new Promise(async resolve => {
                let tid;
                let resText = await fetch(url).then(async res => {
                    debug(`\nfun.iframeSrcDoc() URL`, url);
                    if (res.status >= 400) {
                        let resData = await fun.retryUrl(url, res, "fun.iframeSrcDoc()");
                        if (resData !== null) return resData;
                    }
                    return res.arrayBuffer()
                }).then(buffer => {
                    const decoder = new TextDecoder(document.characterSet || document.charset || document.inputEncoding);
                    const htmlText = decoder.decode(buffer);
                    return htmlText;
                });
                const iframe = document.createElement("iframe");
                iframe.name = "FullPictureLoad-iframe";
                iframe.id = "FullPictureLoadIframe";
                iframe.srcdoc = resText;
                iframe.sandbox = "allow-same-origin allow-scripts allow-popups allow-forms";
                //iframe.style.display = "none";
                iframe.style.cssText = "display: block; visibility: visible; float: none; clear: both; width: 100%; height: 0; background: initial; border: 0px; border-radius: 0px; margin: 0px; padding: 0px; z-index: 2147483645;content-visibility: auto;contain-intrinsic-size: auto 300px;";
                document.body.append(iframe);
                tid = setTimeout(() => resolve(null), time);
                const call = async () => {
                    clearTimeout(tid);
                    let dom = iframe.contentDocument || iframe.contentWindow.document;
                    if (!dom) resolve(fun.doc("none"));
                    dom.body.scrollTop = 9999999;
                    dom.documentElement.scrollTop = 9999999;
                    try {
                        await fun.delay(siteData.autoPager?.loadTime || 200, 0);
                    } catch {
                        await fun.delay(200, 0);
                    }
                    if (isString(selector)) await fun.waitEle(selector, 600, dom);
                    if (isFn(callback)) {
                        await callback(dom, iframe.contentWindow);
                    }
                    let frameCode = siteData.frameCode;
                    if (!!frameCode) {
                        fun.script(frameCode, 0, 1, dom);
                    }
                    frameWindow = iframe.contentWindow;
                    resolve(dom);
                    iframe.remove();
                };
                if (iframe.attachEvent) {
                    iframe.attachEvent("onload", () => call());
                } else {
                    iframe.onload = () => call();
                }
            });
        },
        //使用Iframe框架加載網頁，直到框架的window出現指定的屬性，返回框架window
        iframeVar: async (url, declares, time = 1000) => {
            const iframe = document.createElement("iframe");
            iframe.id = "FullPictureLoadIframe";
            iframe.src = url;
            iframe.style.display = "none";
            iframe.sandbox = "allow-same-origin allow-scripts allow-popups allow-forms";
            document.body.append(iframe);
            await fun.delay(time, 0);
            await new Promise(resolve => {
                let loop = setInterval(() => {
                    if (declares in iframe.contentWindow) {
                        clearInterval(loop);
                        resolve();
                    }
                }, 100);
            });
            setTimeout(() => iframe.remove(), 1000);
            return iframe.contentWindow;
        },
        // 讓用Iframe框架加載網頁，能像fetch的寫法
        iframe: async (url, details = {}) => {
            return new Promise(async (resolve, reject) => {
                const iframe = document.createElement("iframe");
                iframe.id = "FullPictureLoadIframe";
                iframe.src = url;
                iframe.style.cssText = "display: block; visibility: visible; float: none; clear: both; width: 100%; height: 0; background: initial; border: 0px; border-radius: 0px; margin: 0px; padding: 0px; z-index: 2147483645;content-visibility: auto;contain-intrinsic-size: auto 300px;";
                iframe.sandbox = "allow-same-origin allow-scripts allow-popups allow-forms";
                document.body.append(iframe);
                const call = async () => {
                    const {
                        loadTime,
                        waitEle,
                        waitVar,
                        cb
                    } = details;
                    if (!!loadTime && isNumber(loadTime)) {
                        await fun.delay(loadTime, 0);
                    } else {
                        await fun.delay(1000, 0);
                    }
                    const dom = iframe.contentDocument || iframe.contentWindow.document;
                    if (!!waitEle && isString(waitEle)) {
                        const e = await fun.waitEle(waitEle, 600, dom);
                        //console.log("waitEle", e);
                    }
                    if (!!waitVar && isString(waitVar)) {
                        await new Promise(resolve => {
                            let loop = setInterval(() => {
                                if (waitVar in iframe.contentWindow) {
                                    //console.log("waitVar", waitVar);
                                    clearInterval(loop);
                                    resolve();
                                }
                            }, 100);
                        });
                    }
                    if (!!cb && isFn(cb)) {
                        await cb(dom, iframe.contentWindow);
                    }
                    setTimeout(() => iframe.remove(), 1000);
                    const object = {
                        dom: dom,
                        frame: iframe.contentWindow
                    };
                    //console.log("iframe dom", dom);
                    //console.log("iframe window", iframe.contentWindow);
                    resolve(object);
                };
                if (!!iframe.attachEvent) {
                    iframe.attachEvent("onload", () => call());
                } else {
                    iframe.onload = () => call();
                }
                iframe.error = reject;
            });
        },
        //無限滾動函式用來觀察元素觸發自動翻頁
        autoPagerNextObserver: new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && autoPagerSwitch) {
                    observer.unobserve(entry.target);
                    fun.autoPager();
                }
            });
        }),
        //無限滾動取得下一頁鏈結函式
        getNextLink: async (dom) => {
            let nextSelector = siteData.autoPager.next;
            if (isFn(nextSelector)) {
                let nextCode = await nextSelector(dom);
                if (nextLink === nextCode) return null;
                nextLink = nextCode;
            } else if (isString(nextSelector)) {
                let nextEle = fun.ge(nextSelector, dom, dom);
                try {
                    if (!nextEle || (nextEle && (nextLink === nextEle.href))) return null;
                } catch (error) {
                    console.error("\nfun.getNextLink() ERROR\n", error);
                    return null;
                }
                nextLink = nextEle.href;
                const nh = nextEle.hostname;
                const lh = fun.lh;
                if (nh !== lh) nextLink = nextLink.replace(nh, lh);
            } else {
                return null;
            }
            if (!nextLink) return null;
            return nextLink;
        },
        //無限滾動創建標題函式
        titleUrlEle: (url, title) => {
            let div = document.createElement("div");
            autoPagerSwitch ? div.className = "autoPagerTitle" : div.className = "autoPagerTitle off";
            let a = document.createElement("a");
            a.href = url;
            a.innerText = title;
            div.append(a);
            div.addEventListener("click", event => fun.toggleAutoPager());
            return div;
        },
        //無限滾動創建載入中圖示函式
        addLoading: () => {
            if (siteData.autoPager?.loading === "msg") {
                fun.showMsg(displayLanguage.str_57, 0);
            } else {
                try {
                    let img = new Image();
                    img.className = "autoPagerLoading";
                    img.src = autoPagerLoading_gif;
                    let tE;
                    let pos = siteData.autoPager?.pos;
                    if (isArray(pos) && pos.length == 2 && isString(pos[0]) && isNumber(pos[1])) {
                        const [selector, p] = pos;
                        tE = fun.ge(selector);
                        if (p === 0) { //元素裡面
                            tE.append(img);
                        } else if (p === 1) { //元素之前
                            insertBefore(tE, img);
                        } else if (p === 2) { //元素之後
                            insertAfter(tE, img);
                        }
                    } else {
                        tE = fun.gae(siteData.autoPager.ele).at(-1);
                        insertAfter(tE, img);
                    }
                } catch {
                    fun.showMsg(displayLanguage.str_57, 0);
                }
            }
        },
        //無限滾動移除載入中圖示函式
        removeLoading: () => {
            if (siteData.autoPager?.loading === "msg") {
                fun.hideMsg();
            } else {
                try {
                    fun.ge(".autoPagerLoading").remove();
                } catch {
                    fun.hideMsg();
                }
            }
        },
        //無限滾動添加瀏覽器歷史紀錄函式
        addHistory: (title, url) => {
            history.pushState(null, title, url);
            document.title = title;
        },
        //修改A元素以新分頁的方式開啟鏈結
        openInNewTab: selector => fun.gae(selector).forEach(a => a.setAttribute("target", "_blank")),
        getEleF: async (links, elements, targetEle = null) => {
            if (fun.ge(".FullPictureLoadImage")) return;
            isFetching = true;
            if (!getImgFn.includes("getEleF()")) getImgFn += " > fun.getEleF()";
            fun.showMsg(displayLanguage.str_16, 0);
            if (isString(links)) {
                links = fun.gau(links);
            }
            let resArr = [];
            let fetchNum = 0;
            for (let url of links) {
                let res = await fun.iframeDoc(url, elements).then(dom => {
                    fun.clearAllTimer();
                    fun.showMsg(`${displayLanguage.str_17}${fetchNum+=1}/${links.length}`, 0);
                    let eles = fun.gae(elements, dom, dom);
                    if (targetEle === null) {
                        return eles;
                    }
                    let ele;
                    let fragment = new DocumentFragment();
                    fragment.append(...eles);
                    if (isArray(targetEle)) {
                        const [selector, p] = targetEle;
                        ele = fun.ge(selector);
                        if (p == 0) ele.append(fragment);
                        else if (p == 1) insertBefore(ele, fragment);
                        else if (p == 2) insertAfter(ele, fragment);
                    }
                    return eles;
                });
                resArr.push(res);
            }
            isFetching = false;
            fun.hideMsg();
            return Promise.all(resArr).then(arr => arr.flat());
        },
        //傳入鏈結陣列並行請求取得元素插入到指定的位置
        getEle: async (links, elements, targetEle = null, removeEles = null, time = 100) => {
            if (fun.ge(".FullPictureLoadImage")) return;
            isFetching = true;
            if (!getImgFn.includes("getEle()")) getImgFn += " > fun.getEle()";
            let resArr = [];
            let xhrNum = 0;
            fun.showMsg(displayLanguage.str_16, 0);
            if (isString(links)) {
                links = fun.gau(links);
            }
            for (let i = 0; i < links.length; i++) {
                let res = fun.fetchDoc(links[i]).then(dom => {
                    debug(`\nfun.getEle() URL`, decodeURIComponent(links[i]));
                    fun.showMsg(`${displayLanguage.str_17}${xhrNum+=1}/${links.length}`, 0);
                    //debug(`fun.getEle()\n${decodeURIComponent(links[i])}\n`, dom);
                    return fun.gae(elements, dom, dom);
                });
                resArr.push(res);
                await fun.delay(time, 0);
            }
            return Promise.all(resArr).then(arr => arr.flat()).then(eles => {
                isFetching = false;
                fun.hideMsg();
                if (targetEle === null) {
                    if (removeEles) fun.remove(removeEles);
                    return eles;
                }
                let ele;
                let fragment = new DocumentFragment();
                fragment.append(...eles);
                if (isArray(targetEle)) {
                    const [selector, p] = targetEle;
                    ele = fun.ge(selector);
                    if (p == 0) ele.append(fragment);
                    else if (p == 1) insertBefore(ele, fragment);
                    else if (p == 2) insertAfter(ele, fragment);
                } else if (isString(targetEle)) {
                    ele = fun.ge(targetEle);
                    ele.innerHTML = "";
                    ele.append(fragment);
                }
                if (removeEles) fun.remove(removeEles);
                fun.fetchErrorMsg();
            });
        },
        //跨域，傳入鏈結陣列並行請求取得元素插入到指定的位置
        getCorsEle: async (links, elements, targetEle = null, removeEles = null, time = 100) => {
            if (fun.ge(".FullPictureLoadImage")) return;
            isFetching = true;
            if (!getImgFn.includes("getCorsEle()")) getImgFn += " > fun.getCorsEle()";
            let resArr = [];
            let xhrNum = 0;
            fun.showMsg(displayLanguage.str_16, 0);
            if (isString(links)) {
                links = fun.gau(links);
            }
            for (let i = 0; i < links.length; i++) {
                let res = fun.xhrDoc(links[i]).then(dom => {
                    debug(`\nfun.getCorsEle() URL`, decodeURIComponent(links[i]));
                    fun.showMsg(`${displayLanguage.str_17}${xhrNum+=1}/${links.length}`, 0);
                    //debug(`fun.getCorsEle()\n${decodeURIComponent(links[i])}\n`, dom);
                    return fun.gae(elements, dom, dom);
                });
                resArr.push(res);
                await fun.delay(time, 0);
            }
            return Promise.all(resArr).then(arr => arr.flat()).then(eles => {
                isFetching = false;
                fun.hideMsg();
                if (targetEle === null) {
                    if (removeEles) fun.remove(removeEles);
                    return eles;
                }
                let ele;
                let fragment = new DocumentFragment();
                fragment.append(...eles);
                if (isArray(targetEle)) {
                    const [selector, p] = targetEle;
                    ele = fun.ge(selector);
                    if (p == 0) ele.append(fragment);
                    else if (p == 1) insertBefore(ele, fragment);
                    else if (p == 2) insertAfter(ele, fragment);
                } else if (isString(targetEle)) {
                    ele = fun.ge(targetEle);
                    ele.innerHTML = "";
                    ele.append(fragment);
                }
                if (removeEles) fun.remove(removeEles);
                fun.fetchErrorMsg();
            });
        },
        //單線程背景讀取圖片IMG元素陣列的圖片網址
        singleThreadLoadImgs: async imgArr => {
            for (let i = 0; i < imgArr.length; i++) {
                if (!isValidPage) return;
                if (!imgArr[i].dataset?.src) continue;
                let loadSrc = imgArr[i].dataset.src;
                let parent = imgArr[i].parentNode;
                let temp = new Image();
                if ("referrerpolicy" in (siteData ?? {})) {
                    temp.setAttribute("referrerpolicy", siteData.referrerpolicy);
                }
                await new Promise(resolve => {
                    temp.onload = () => {
                        imgArr[i].src = loadSrc;
                        resolve();
                    };
                    temp.onerror = () => {
                        if (loadSrc.includes("https://wsrv.nl/") && !fun.ge("//a[@rel='home'][text()='4KHD']")) {
                            loadSrc = loadSrc.replace("https://wsrv.nl/?url=", ""); //wsrv.nl_CDN
                            imgArr[i].dataset.src = loadSrc;
                            if (!!parent && parent?.nodeName === "A" && !!parent?.getAttribute("data-fancybox")) {
                                parent.href = loadSrc;
                                parent.dataset.thumb = loadSrc;
                            }
                        } else if (loadSrc.includes(".wp.com/") && !fun.ge("//a[@rel='home'][text()='4KHD']")) {
                            loadSrc = loadSrc.replace(/i\d\.wp\.com\/|\?.+$/g, ""); //WordPressCDN
                            imgArr[i].dataset.src = loadSrc;
                            if (!!parent && parent?.nodeName === "A" && !!parent?.getAttribute("data-fancybox")) {
                                parent.href = loadSrc;
                                parent.dataset.thumb = loadSrc;
                            }
                        }
                        resolve();
                    };
                    temp.src = loadSrc;
                });
            }
        },
        //單線程背景讀取圖片網址陣列的圖片網址
        singleThreadLoadSrcs: async srcArr => {
            for (let src of srcArr) {
                if (!isValidPage) return;
                const temp = new Image();
                if ("referrerpolicy" in (siteData ?? {})) {
                    temp.setAttribute("referrerpolicy", siteData.referrerpolicy);
                }
                await new Promise(resolve => {
                    temp.onload = resolve;
                    temp.onerror = resolve;
                    temp.src = src;
                });
            }
        },
        //圖片預讀函式
        picPreload: async (srcArr, title = (customTitle || document.title), page = "current") => {
            const errorNumArr = new Array(srcArr.length).fill(0);
            const loadImg = async (src, index) => {
                await new Promise(resolve => {
                    const temp = new Image();
                    if ("referrerpolicy" in siteData) {
                        temp.setAttribute("referrerpolicy", siteData.referrerpolicy);
                    }
                    temp.onload = () => {
                        resolve("OK");
                    };
                    temp.onerror = error => {
                        if (!isValidPage) return;
                        const errorNum = errorNumArr[index] + 1;
                        errorNumArr[index] = errorNum;
                        if (src.includes("https://wsrv.nl/") && !fun.ge("//a[@rel='home'][text()='4KHD']")) {
                            src = src.replace("https://wsrv.nl/?url=", ""); //wsrv.nl_CDN
                        } else if (src.includes(".wp.com/") && !fun.ge("//a[@rel='home'][text()='4KHD']")) {
                            src = src.replace(/i\d\.wp\.com\/|\?.+$/g, ""); //WordPressCDN
                        }
                        if (/e-hentai\.org|exhentai\.org/.test(fun.lh)) {
                            resolve("OK");
                            return;
                        }
                        if (errorNum >= 10) {
                            debug(`\n圖片全載Lazyloading預讀重新載入出錯的圖片已達到10次上限：\n${src}`);
                            resolve("OK");
                            return;
                        }
                        resolve("OK");
                        setTimeout(() => {
                            if (/www\.yinghuamh\.net/.test(fun.lh)) {
                                const {
                                    Gm,
                                    media
                                } = _unsafeWindow;
                                debug(`\n圖片全載Lazyloading預讀出錯 樱花漫画 重新載入另一個圖片伺服器的圖片網址：\n${src}\nto\n${src.replace(Gm.getMediaHost(media), media)}`);
                                loadImg(src.replace(Gm.getMediaHost(media), media), index);
                            } else {
                                debug(`\n圖片全載Lazyloading預讀重新載入出錯的圖片：\n${src}\n錯誤次數：${errorNum}`);
                                loadImg(src, index);
                            }
                        }, 2000);
                    };
                    temp.src = src;
                });
            };
            page == "next" ? debug(`\n${title}\n圖片全載開始預讀下一頁`, srcArr) : debug(`\n${title}\n圖片全載Lazyloading開始預讀`);
            for (let i = 0; i < srcArr.length; i++) {
                if (!isValidPage) return;
                if (/youtube|\.mp4|\.m3u8$|\.webm$/.test(srcArr[i])) continue;
                let load = await loadImg(srcArr[i], i);
            }
            page == "next" ? debug(`\n${title}\n圖片全載下一頁預讀結束`) : debug(`\n${title}\n圖片全載Lazyloading預讀結束`);
        },
        //观察者 MutationObserver事件，根據圖片燈箱插件檢視圖片時的索引，滾動到頁面相對應的圖片位置
        MutationObserver_aff: () => {
            const openEvent = () => {
                if (fun.ge("span[data-fancybox-current-index]") !== null) {
                    slideIndex = Number(fun.gt("span[data-fancybox-current-index]")) - 1;
                } else if (fun.ge("span[data-fancybox-index]") !== null) {
                    slideIndex = Number(fun.gt("span[data-fancybox-index]")) - 1;
                } else if (fun.ge("badge.b-black.counter") !== null) {
                    slideIndex = Number(fun.gt("badge.b-black.counter").match(/\d+/)[0]) - 1;
                }
                if (isNumber(slideIndex)) {
                    console.log("open - # " + slideIndex + " slide is open!");
                }
            };
            const ContentContainer = document.body;
            const configObserver = {
                childList: true,
                subtree: true,
                attributeFilter: ["class"]
            };
            //当观察到突变时执行的回调函数
            const Callbacks = mutationsList => {
                mutationsList.forEach((item, index) => {
                    //console.log("index: ", index, " - \n", item);
                    if (item.type === "attributes") {
                        //console.log(item);
                        if (item.target.className === "fancybox-slide fancybox-slide--image fancybox-slide--current fancybox-slide--complete" || item.target.className === "fancybox__slide has-image can-zoom_in is-selected" || item.target.className === "swiper-slide swiper-slide-active") {
                            console.log(" # ", item);
                            openEvent();
                            fun.scrollEvent(slideIndex);
                        }
                    } else if (item.type === "childList") {
                        //console.log(item);
                        if (item.removedNodes.length > 1 && /fancybox|swiper/.test(item.removedNodes[1].className)) {
                            console.log(" # ", item);
                            console.log("close - # " + slideIndex + " slide is closed!");
                            //setTimeout(closeEvent, 1000);
                            fun.scrollEvent(slideIndex);
                        }
                    }
                });
            };
            //创建一个链接到回调函数的观察者实例
            const Observer = new MutationObserver(Callbacks);
            ContentContainer && Observer.observe(ContentContainer, configObserver);
        },
        //創建用來添加圖片元素的主容器
        createImgBox: (selector, pos = 0, width = null) => {
            if (fun.ge("#FullPictureLoadMainImgBox")) return;
            let div = document.createElement("div");
            div.id = "FullPictureLoadMainImgBox";
            div.style.display = "block";
            div.style.textAlign = "center";
            div.style.margin = "0 auto";
            if (isNumber(width)) {
                div.style.maxWidth = width + "px";
            }
            let targetEle = fun.ge(selector);
            if (pos == 0) targetEle.append(div);
            if (pos == 1) insertBefore(targetEle, div);
            if (pos == 2) insertAfter(targetEle, div);
            return div;
        },
        //插入圖片函式
        insertImg: (imgsArray, insertTargetEle, mode = 2) => {
            if (fun.ge(".FullPictureLoadImage") || isFetching || isDownloading) return;
            let srcArr = [];
            for (let i = 0; i < imgsArray.length; i++) {
                let check = fun.checkImgSrc(imgsArray[i]);
                check.ok ? srcArr.push(check.src) : console.error("\nfun.insertImg(imgsArray) 格式錯誤！", imgsArray[i]);
            }
            srcArr = [...new Set(srcArr)];
            let noVideoNum = srcArr.filter(src => !/youtube|\.mp4$|\.webm$/.test(src)).length;
            let fragment = new DocumentFragment();
            let buttonFn = siteData.button;
            if (isArray(buttonFn)) {
                let [, customWidth, insertBr] = buttonFn;
                let buttonDiv = document.createElement("div");
                buttonDiv.id = "FullPictureLoadOptionsButtonParentDiv";
                buttonDiv.style.width = "100%";
                //buttonDiv.style.height = "42px";
                buttonDiv.style.display = "inline-block";
                buttonDiv.style.textAlign = "center";
                if (isNumber(insertBr)) {
                    for (let i = 1; i <= insertBr; i++) {
                        let br = document.createElement("br");
                        fragment.append(br);
                    }
                }
                let width = "24%";
                if (isString(customWidth)) width = customWidth;
                const buttonObj = [{
                    id: "FullPictureLoadOpenFavoritesBtn",
                    className: "FullPictureLoadPageButtonTop",
                    text: displayLanguage.str_128,
                    cfn: event => {
                        event.preventDefault();
                        toggleFavor();
                    }
                }, {
                    id: "FullPictureLoadShadowGalleryBtn",
                    className: "FullPictureLoadPageButtonTop",
                    text: displayLanguage.str_141,
                    cfn: event => {
                        event.preventDefault();
                        createShadowGallery();
                    }
                }, {
                    id: "FullPictureLoadFastDownloadBtn",
                    className: "FullPictureLoadPageButtonTop",
                    text: hasTouchEvents ? displayLanguage.str_107 : displayLanguage.str_107 + ` | [ ${noVideoNum}P ]`,
                    cfn: event => {
                        event.preventDefault();
                        fastDownload = true;
                        DownloadFn();
                    }
                }, {
                    id: "FullPictureLoadNewTabViewBtn",
                    className: "FullPictureLoadPageButtonTop",
                    text: displayLanguage.str_106,
                    cfn: event => {
                        event.preventDefault();
                        newTabView();
                    }
                }, {
                    id: "FullPictureLoadOptionsBtn",
                    className: "FullPictureLoadPageButtonBottom",
                    text: displayLanguage.str_85,
                    cfn: event => {
                        event.preventDefault();
                        createPictureLoadOptionsShadowElement();
                    }
                }, {
                    id: "FullPictureLoadToggleImgModeBtn",
                    className: "FullPictureLoadPageButtonBottom",
                    text: displayLanguage.str_86,
                    cfn: event => {
                        event.preventDefault();
                        toggleImgMode();
                    }
                }, {
                    id: "FullPictureLoadToggleZoomeBtn",
                    className: "FullPictureLoadPageButtonBottom",
                    text: displayLanguage.str_87,
                    title: displayLanguage.str_136,
                    cfn: event => {
                        event.preventDefault();
                        fun.clearAllTimer(2);
                        reduceZoom();
                    },
                    mfn: event => {
                        if (event.button == 2) {
                            event.preventDefault();
                            increaseZoom();
                        }
                    }
                }, {
                    id: "FullPictureLoadCancelZoomBtn",
                    className: "FullPictureLoadPageButtonBottom",
                    text: displayLanguage.str_88,
                    cfn: event => {
                        event.preventDefault();
                        fun.clearAllTimer(2);
                        cancelZoom();
                    }
                }];

                if (hasTouchEvents) {
                    buttonObj[1] = {
                        id: "FullPictureLoadCopyURLBtn",
                        className: "FullPictureLoadPageButtonTop",
                        text: displayLanguage.str_105,
                        cfn: event => {
                            event.preventDefault();
                            copyImgSrcTextB();
                        }
                    };
                }

                const createButton = obj => {
                    let button = document.createElement("button");
                    button.id = obj.id;
                    button.className = obj.className;
                    button.style.width = width;
                    //button.style.height = "24px";
                    button.innerText = obj.text;
                    button.oncontextmenu = () => false;
                    if (!!obj.title) button.title = obj.title;
                    if (!!obj.cfn) button.addEventListener("click", obj.cfn);
                    if (!!obj.mfn) button.addEventListener("mousedown", obj.mfn);
                    buttonDiv.append(button);
                };
                [...buttonObj].forEach(obj => createButton(obj));
                fragment.append(buttonDiv);
            }
            let blackList = fancyboxBlackList();
            if (options.fancybox == 1 && thumbnailSrcArray.length > 0) {
                if (!/www\.24cos\.org|www\.lovecos\.net|luohuaxiu\.com|kemono\.su|coomer\.su/.test(fun.lh) || !/^data/.test(thumbnailSrcArray[0])) {
                    thumbnailSrcArray = [...new Set(thumbnailSrcArray)];
                }
            }
            debug("\nfun.insertImg()插入圖片最後確認 thumbnailSrcArray", thumbnailSrcArray);
            debug("\nfun.insertImg()插入圖片最後確認 srcArr", srcArr);
            let padStart = String(srcArr.length).length;
            for (let i = 0; i < srcArr.length; i++) {
                let img = new Image();
                img.alt = `no.${i + 1}`;
                img.dataset.index = i;
                img.className = "FullPictureLoadImage";
                if ("referrerpolicy" in siteData) {
                    img.setAttribute("referrerpolicy", siteData.referrerpolicy);
                }
                img.dataset.errorNum = 0;
                //if (/vipr\.im/.test(srcArr[i])) img.referrerPolicy = "no-referrer";
                if (options.zoom <= 10 && options.zoom > 0 && (blackList || options.fancybox !== 1)) {
                    img.style.width = `${options.zoom * 10}%`;
                    img.style.height = "auto";
                }
                if (mode == 2 || mode == 3) {
                    img.src = loading_bak;
                    img.dataset.src = srcArr[i];
                } else {
                    img.decoding = "async";
                    img.onload = () => {
                        img.classList.remove("error");
                    };
                    img.onerror = error => {
                        const num = Number(error.target.dataset.errorNum);
                        if (num < 10) {
                            error.target.dataset.errorNum = num + 1;
                        } else {
                            return;
                        }
                        error.target.classList.add("error");
                        setTimeout(() => {
                            debug(`\nfun.insertImg()重新載入出錯的圖片：\n${error.target.src}`);
                            error.target.src = error.target.src;
                        }, 1000);
                    };
                    img.src = srcArr[i];
                }
                if (options.fancybox == 1 && !blackList) {
                    let a = document.createElement("a");
                    a.id = "imgLocationOriginal_" + i;
                    a.dataset.fancybox = "FullPictureLoadImageOriginal";
                    thumbnailSrcArray.length > 0 && thumbnailSrcArray.length == noVideoNum ? a.dataset.thumb = thumbnailSrcArray[i] : a.dataset.thumb = srcArr[i];
                    a.href = srcArr[i];
                    if (options.zoom <= 10 && options.zoom > 0) {
                        a.style.width = `${options.zoom * 10}%`;
                        a.style.height = "auto";
                    }
                    a.append(img);
                    fragment.append(a);
                } else {
                    fragment.append(img);
                }
            }
            if (videoSrcArray.length > 0) {
                debug("\nfun.insertImg()插入圖片最後確認 videoSrcArray", videoSrcArray);
                if (!hasTouchEvents && siteData.downloadVideo === true && FullPictureLoadCustomDownloadVideo == 1) {
                    let dbtn = fragment.querySelector("#FullPictureLoadFastDownloadBtn");
                    dbtn.innerText = dbtn.innerText.replace("P", `P + ${videoSrcArray.length}V`);
                }
                for (let i = 0; i < videoSrcArray.length; i++) {
                    let video = document.createElement("video");
                    video.className = "FullPictureLoadVideo";
                    video.controls = true;
                    video.loop = false;
                    video.autoplay = false;
                    video.preload = "none";
                    video.style = "height: 500px;width: 100%;max-width:100%";
                    let source = document.createElement("source");
                    source.src = videoSrcArray[i];
                    source.type = "video/mp4";
                    video.append(source);
                    fragment.append(video);
                }
            }
            let end = document.createElement("p");
            end.id = "FullPictureLoadEnd";
            end.innerText = `${displayLanguage.str_52}：${noVideoNum}P`;
            fragment.append(end);
            if (srcArr.length > 0 || (srcArr.length >= 0 && videoSrcArray.length > 0)) {
                const [, insertMode] = siteData.insertImg;
                if (insertMode == 2 || insertMode == 3) {
                    fun.picPreload(srcArr);
                }
                let targetEle;
                try {
                    if (isArray(insertTargetEle)) {
                        let [selector, pos, removeSelector] = insertTargetEle;
                        targetEle = fun.ge(selector);
                        if (pos == 0) {
                            targetEle.append(fragment);
                            //targetEle.style.textAlign = "center";
                            targetEle.style.display = "block";
                        } else if (pos == 1) {
                            insertBefore(targetEle, fragment);
                            //targetEle.parentNode.style.textAlign = "center";
                            targetEle.parentNode.style.display = "block";
                        } else if (pos == 2) {
                            insertAfter(targetEle, fragment);
                            //targetEle.parentNode.style.textAlign = "center";
                            targetEle.parentNode.style.display = "block";
                        }
                        if (isString(removeSelector)) fun.remove(removeSelector);
                        if (siteData.msg != 0 && siteData.category != "comic") fun.showMsg(displayLanguage.str_18);
                    } else if (isString(insertTargetEle)) {
                        targetEle = fun.ge(insertTargetEle);
                        targetEle.innerHTML = "";
                        targetEle.append(fragment);
                        //targetEle.style.textAlign = "center";
                        targetEle.style.display = "block";
                        if (siteData.msg != 0 && siteData.category != "comic") fun.showMsg(displayLanguage.str_18);
                    }
                    let insertImgAF = siteData.insertImgAF;
                    if (isFn(insertImgAF)) insertImgAF();
                } catch (error) {
                    fun.showMsg(displayLanguage.str_19, 3000);
                    console.error("\nfun.insertImg() ele參數錯誤，或用來定位插入的元素不存在。", error);
                    return;
                }
                let imgs = fun.gae("img.FullPictureLoadImage:not(.small)");
                if (mode == 2 || mode == 3) {
                    setTimeout(() => {
                        imgs.forEach(img => fun.imagesObserver.observe(img));
                    }, 1000);
                }
                let oddNumberImgs = imgs.filter((img, index) => index % 2 == 0);
                let evenNumberImgs = imgs.filter((img, index) => index % 2 != 0);
                fun.singleThreadLoadImgs(oddNumberImgs);
                fun.singleThreadLoadImgs(evenNumberImgs);
                if (TurnOffImageNavigationShortcutKeys != 1) {
                    let imgsNum = 0;
                    document.addEventListener("keydown", event => {
                        if (fun.ge("#FullPictureLoadOptionsShadowElement,.fancybox-container,.fancybox__container,#mainShadowGallery")) return;
                        if (event.code === "ArrowUp") {
                            if (imgsNum > 0 && viewMode == 0) {
                                imgsNum -= 1;
                                imgs[imgsNum].scrollIntoView();
                            }
                        } else if (event.code === "ArrowDown") {
                            event.preventDefault();
                            if (imgsNum < imgs.length && viewMode == 0) {
                                imgsNum += 1;
                                try {
                                    imgs[imgsNum].scrollIntoView();
                                } catch {
                                    imgsNum = 0;
                                    imgs[0].scrollIntoView();
                                    fun.showMsg(displayLanguage.str_94);
                                }
                            }
                        } else {
                            imgsNum = 0 - 1;
                        }
                    });
                }
                if (siteData.category === "comic") {
                    let lastImg = imgs.at(-1);
                    fun.comicNextObserver.observe(lastImg);
                }
                fun.gae("#FullPictureLoadGoToFirstImage,#FullPictureLoadGoToLastImage").forEach(e => (e.style.display = "unset"));
                if (options.fancybox == 1 && !blackList && !isObject(siteData.fancybox)) {
                    _unsafeWindow.Fancybox.bind("[data-fancybox='FullPictureLoadImageOriginal']", FancyboxOptions);
                }
                if (!/tupianwu\.com/.test(fun.lh) && !fun.ge(".umRelevant.umBox") && !fun.ge(".videoPlayerWrap")) {
                    fun.MutationObserver_aff();
                }
                if (options.viewMode == 1 || siteData.viewMode == 1) toggleImgMode();
                if (siteData.go == 1 && noGoToFirstImage != 1) goToNo1Img();
            } else {
                fun.showMsg(displayLanguage.str_20);
            }
        },
        immediateInsertImg: async () => {
            if (ge(".FullPictureLoadImage") || isFetching || isDownloading) return;
            if ("SPA" in siteData && isFn(siteData.SPA)) {
                let validPage = await siteData.SPA();
                if (!validPage) return;
            }
            if (options.autoInsert == 1) {
                let [insertSelector, insertMode, delayTime] = siteData.insertImg;
                await fun.delay(delayTime || 0);
                let selector = siteData.imgs;
                let imgsSrcArray = await getImgs(selector);
                fun.insertImg(imgsSrcArray, insertSelector, insertMode);
            }
        },
        //選取指定的元素返回元素
        ge: (selector, contextNode = null, dom = document) => {
            if (/^\//.test(selector)) {
                return dom.evaluate(selector, (contextNode ?? document), null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
            } else {
                return (contextNode ?? document).querySelector(selector);
            }
        },
        //選取指定的A元素返回元素的href屬性
        gu: (selector, contextNode = null, dom = document) => fun.ge(selector, contextNode, dom)?.href,
        //選取所有指定的元素返回元素陣列
        gae: (selector, contextNode = null, dom = document) => {
            if (/^\//.test(selector)) {
                let nodes = [];
                let results = dom.evaluate(selector, (contextNode ?? document), null, XPathResult.ANY_TYPE, null);
                let node = null;
                while (node = results.iterateNext()) {
                    nodes.push(node);
                }
                return nodes;
            } else {
                return [...(contextNode ?? document).querySelectorAll(selector)];
            }
        },
        //選取所有指定的A素返回元素的href陣列
        gau: (selector, contextNode = null, dom = document) => fun.gae(selector, contextNode, dom)?.map(a => a?.href),
        //返回網頁喧染後的元素字串
        gt: (selector, mode = 1, dom = document) => {
            try {
                if (mode == 1) return fun.ge(selector, dom, dom)?.innerText;
                if (mode == 2) return fun.ge(selector, dom, dom)?.previousElementSibling?.innerText;
                if (mode == 3) return fun.ge(selector, dom, dom)?.previousElementSibling?.previousElementSibling?.innerText;
            } catch (error) {
                console.error(`\nfun.gt() ERROR\nselector：${selector}\n`, error);
                return null;
            }
        },
        getText: (selector, dom = document) => {
            let text = "";
            if (isString(selector)) {
                let ele = fun.ge(selector, dom);
                text = ele?.innerText;
                if (!!ele && !!text && text?.length > 0) {
                    return fun.dt({
                        t: text
                    });
                }
            } else if (isArray(selector)) {
                for (let s of selector) {
                    let ele = fun.ge(s, dom);
                    text = ele?.innerText;
                    if (!!ele && !!text && text?.length > 0) {
                        return fun.dt({
                            t: text
                        });
                    }
                }
            }
            return text;
        },
        //根據關鍵字串或正則搜索符合條件的script，返回script字串
        gst: (searchValue, dom = document) => {
            try {
                return [...dom.scripts].find(script => {
                    if (isString(searchValue)) {
                        return script.textContent.includes(searchValue);
                    } else if (isRegExp(searchValue)) {
                        return script.textContent.search(searchValue) > -1;
                    }
                }).textContent;
            } catch {
                return "";
            }
        },
        //刪除指定字串返回字串
        dt: (obj = {}, dom = document) => {
            let str = dom.title;
            if ("s" in obj) {
                let selector = obj.s;
                str = fun.gt(selector, 1, dom);
            } else if ("t" in obj) {
                str = obj.t;
            }
            let dt = obj.d ?? "";
            if (isString(dt) && dt !== "" || isRegExp(dt)) {
                str = str?.replace(dt, "");
            } else if (isArray(dt)) {
                dt.forEach(r => (str = str?.replace(r, "")));
            }
            str = str?.replace(/[\/\s]?[\(\[［（【“]\d+[\w\s\\\/\.\+-／]+[\)\]］）】”]|\s?\d+p[\+\s]+\d+v|\s?\d+p\+?\d+v|\s?\d+P|\(\d\)/gi, "").replace(/\//g, "").replace(/\s|/, "").replace(/[\/\?<>\\:\*\|":]/g, " ").replace(/\s{2,3}/g, " ").trim();
            return str;
        },
        //取得元素的屬性值
        attr: (selector, attr, dom = document) => fun.ge(selector, dom, dom).getAttribute(attr),
        //傳入代碼運行代碼
        run: code => new Function("return " + code)(),
        //將字串解析為document物件
        doc: str => new DOMParser().parseFromString(str, "text/html"),
        //將字串解析為XML物件
        xml: str => new DOMParser().parseFromString(str, "text/xml"),
        //根據參數返回修改後的網頁標題
        title: (str, mode = 0, dom = document) => {
            let split = dom.title.replace(/漫画|\s-\s(漫本)|\[\d+p(\d+v)?\]/gi, "").split(str);
            try {
                if (mode == 0) return dom.title.replace(str, "").trim();
                if (mode == 1) return split[0].replace(/,$/g, "").replace(/,/g, " ").trim();
                if (mode == 2) return (split[0] + str + split[1]).replace(/,$/g, "").replace(/,/g, " ").trim();
                if (mode == 3) return (split[1] + str + split[0]).replace(/,$/g, "").replace(/,/g, " ").trim();
            } catch (error) {
                console.error("\nfun.title() ERROR", error);
                return dom.title;
            }
        },
        //創建一個指定長度的陣列
        arr: (num, cb = null) => {
            if (isFn(cb)) {
                return Array.from({
                    length: Number(num)
                }, cb);
            } else {
                return Array.from({
                    length: Number(num)
                });
            }
        },
        //顯示簡短的訊息
        showMsg: (text, time = 1000) => {
            if (!fun.ge("body>.FullPictureLoadMsg")) fun.addFullPictureLoadMsg();
            let msg = fun.ge(".FullPictureLoadMsg");
            if (fun.ge(".FullPictureLoadMsg[style]")) msg.removeAttribute("style");
            msg.innerText = text;
            if (time > 0) setTimeout(() => fun.hideMsg(), time);
        },
        //隱藏訊息
        hideMsg: () => {
            if (!fun.ge("body>.FullPictureLoadMsg")) return;
            if (!fun.ge(".FullPictureLoadMsg[style]")) {
                let msg = fun.ge(".FullPictureLoadMsg");
                msg.innerText = "none";
                msg.style.display = "none";
            }
        },
        //圖片元素觀察者，圖片進入可視範圍時把data-src屬性寫入src
        imagesObserver: new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    observer.unobserve(entry.target);
                    let realSrc = entry.target.dataset.src;
                    let nE = entry.target.nextElementSibling;
                    let fancyboxE = entry.target.parentNode;
                    let fancyboxA = null;
                    let fancyboxNE = null;
                    if (fancyboxE && fancyboxE?.tagName == "A" && fancyboxE.getAttribute("data-fancybox")) {
                        fancyboxA = fancyboxE;
                        fancyboxNE = fancyboxE.nextElementSibling;
                    }
                    if (realSrc) {
                        entry.target.classList.remove("lazyload");
                        entry.target.onload = () => {
                            if (!/^(data|blob)/.test(entry.target.src)) {
                                entry.target.classList.remove("error");
                            }
                        };
                        entry.target.onerror = async (error) => {
                            if (realSrc.includes("wsrv.nl/") && !fun.ge("//a[@rel='home'][text()='4KHD']")) {
                                let newSrc = realSrc.replace("https://wsrv.nl/?url=", ""); //wsrv.nl_CDN
                                entry.target.dataset.src = newSrc;
                                if (!!fancyboxA) {
                                    fancyboxA.href = newSrc;
                                    fancyboxA.dataset.thumb = newSrc;
                                }
                            } else if (realSrc.includes(".wp.com/") && !fun.ge("//a[@rel='home'][text()='4KHD']")) {
                                let newSrc = realSrc.replace(/i\d\.wp\.com\/|\?.+$/g, ""); //WordPressCDN
                                entry.target.dataset.src = newSrc;
                                if (!!fancyboxA) {
                                    fancyboxA.href = newSrc;
                                    fancyboxA.dataset.thumb = newSrc;
                                }
                            }
                            const errorNum = Number(entry.target.dataset?.errorNum) || 0;
                            if (errorNum < 10) {
                                entry.target.dataset.errorNum = errorNum + 1;
                            } else {
                                return;
                            }
                            if (/www\.yinghuamh\.net/.test(fun.lh)) {
                                const {
                                    Gm,
                                    media
                                } = _unsafeWindow;
                                error.target.dataset.src = error.target.dataset.src.replace(Gm.getMediaHost(media), media);
                            }
                            if (/e-hentai\.org|exhentai\.org/.test(fun.lh) && errorNum < 1) {
                                let url = error.target.dataset.loadfail ?? fun.gae(".gdtm a,.gdtl a")[error.target.dataset.index].href;
                                let newSrc = await fun.fetchDoc(url).then(async dom => {
                                    let loadfail = fun.ge("#loadfail", dom);
                                    let newUrl = url.replace(/\?nl=.+$/, "") + "?nl=" + loadfail.getAttribute("onclick").split("'")[1];
                                    error.target.dataset.loadfail = newUrl;
                                    return await fun.fetchDoc(newUrl).then(newDoc => {
                                        let src = fun.ge("#img", newDoc).src;
                                        if (fancyboxE && fancyboxE.tagName == "A") fancyboxE.href = src;
                                        return src;
                                    });
                                });
                                error.target.dataset.src = newSrc;
                            }
                            if (/civitai\.com/.test(fun.lh)) {
                                if (error.target.dataset.url) {
                                    error.target.dataset.src = error.target.dataset.url;
                                } else {
                                    error.target.dataset.src = error.target.dataset.src.replace("original=true/", "");
                                }
                            }
                            error.target.src = loading_bak;
                            error.target.classList.add("error");
                            setTimeout(() => {
                                if (/www\.yinghuamh\.net/.test(fun.lh)) {
                                    debug(`\nimagesObserver 樱花漫画圖片出錯 重新載入另一個圖片伺服器的圖片網址：\n${realSrc}\nto\n${error.target.dataset.src}`);
                                } else if (/e-hentai\.org|exhentai\.org/.test(fun.lh)) {
                                    debug(`\nimagesObserver E紳士圖片出錯 重新載入新的圖片網址：\n${realSrc}\nto\n${error.target.dataset.src}`);
                                } else {
                                    debug(`\nimagesObserver重新載入出錯圖片：\n${realSrc}\n錯誤次數：${errorNum}`);
                                }
                                error.target.src = error.target.dataset.src;
                            }, 1000);
                        };
                        entry.target.src = realSrc;
                    }
                    if (!!nE && nE.tagName == "IMG" && !!nE?.dataset?.src) nE.src = nE.dataset.src;
                    if (fancyboxNE && fancyboxNE.tagName == "A") {
                        let ele = fancyboxNE.firstElementChild;
                        if (!!ele && ele.tagName == "IMG" && !!ele?.dataset?.src) ele.src = ele.dataset.src;
                    }
                }
            });
        }),
        //看漫畫當最後一張圖進入可視範圍時，按住空白鍵前往下一話
        comicNextObserver: new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    observer.unobserve(entry.target);
                    if (!!nextLink) {
                        const comicSpaceClickNext = () => {
                            let click = 0;
                            const callback = event => {
                                if (event.code === "Space") {
                                    click += 1;
                                    if (click >= 5) {
                                        document.removeEventListener("keydown", callback);
                                        fun.showMsg(displayLanguage.str_34);
                                        location.href = nextLink;
                                    }
                                }
                            };
                            document.addEventListener("keydown", callback);
                        };
                        comicSpaceClickNext();
                    }
                }
            });
        }),
        //創建顯示訊息的元素
        addFullPictureLoadMsg: () => {
            let div = document.createElement("div");
            div.className = "FullPictureLoadMsg";
            div.style.display = "none";
            div.innerText = "none";
            document.body.append(div);
        },
        //創建style元素
        css: (css, id = null) => {
            let style = document.createElement("style");
            style.type = "text/css";
            if (isString(id)) style.id = id;
            style.className = "FullPictureLoadStyle";
            style.innerHTML = css;
            document.head.append(style);
        },
        //創建script元素
        //fun.script("code")，返回script
        //fun.script("code",0,1)，script插入到document.body
        //fun.script("srcUrl",1,1)，script插入到document.body
        script: async (code, src = 0, pos = 0, dom = document) => {
            let script = dom.createElement("script");
            script.className = "FullPictureLoadScript";
            if (src == 0) {
                script.type = "text/javascript";
                script.innerHTML = code;
            }
            if (src == 0 && pos == 0) {
                return script;
            } else if (pos == 1) {
                if (src == 1) {
                    await new Promise(resolve => {
                        script.onload = () => {
                            resolve();
                        };
                        script.src = code;
                        dom.body.append(script);
                    });
                } else {
                    dom.body.append(script);
                }
            }
            if (siteData.category === "comic autoPager") {
                script.remove();
            }
        },
        //延遲
        delay: (time, msg = 1) => {
            if (time > 200 && msg == 1) fun.showMsg(`${displayLanguage.str_21}${time}${displayLanguage.str_22}...`, time);
            return new Promise(resolve => setTimeout(resolve, time));
        },
        //等待函式寫法
        wait: (callback, dom = document, win = _unsafeWindow, num = 300) => {
            if (!isFn(callback)) return;
            if (dom === null || Object.prototype.toString.call(dom) !== "[object HTMLDocument]") {
                dom = document;
            }
            if (win === null || Object.prototype.toString.call(win) !== "[object Window]") {
                win = _unsafeWindow;
            }
            let loopNum = 0;
            return new Promise(resolve => {
                const loopFn = async () => {
                    let check = await callback(dom, win);
                    if (!!check) {
                        resolve(true);
                        return;
                    }
                    if (loopNum >= num) {
                        debug(`fun.wait()達循環上限。`);
                        resolve(false);
                        return;
                    }
                    if (!check) {
                        loopNum += 1;
                        await fun.delay(100, 0);
                        return loopFn();
                    }
                };
                loopFn();
            });
        },
        //等待元素
        waitEle: (selector, max = 200, dom = document) => {
            let loopNum = 0;
            return new Promise(resolve => {
                let loop = setInterval(() => {
                    loopNum += 1;
                    let e = fun.ge(selector, dom, dom);
                    if (isEle(e)) {
                        clearInterval(loop);
                        resolve(e);
                    }
                    if (loopNum >= max) {
                        clearInterval(loop);
                        debug(`fun.waitEle()達循環上限，沒有出現"${selector}"元素。`);
                        resolve(null);
                    }
                }, 100);
            });
        },
        //等待window屬性
        waitVar: (key, max = 200) => {
            let loopNum = 0;
            return new Promise(resolve => {
                let loop = setInterval(() => {
                    loopNum += 1;
                    if (key in _unsafeWindow) {
                        clearInterval(loop);
                        resolve(true);
                    }
                    if (loopNum >= max) {
                        clearInterval(loop);
                        debug(`fun.waitVar()達循環上限，沒有出現"${key}"屬性。`);
                        resolve(false);
                    }
                }, 100);
            });
        },
        //確認圖片狀態返回圖片寬高
        checkImgStatus: (src, msg = null) => {
            if (msg != 0) fun.showMsg(msg || displayLanguage.str_56, 0);
            return new Promise(resolve => {
                const temp = new Image();
                temp.onload = () => {
                    fun.hideMsg();
                    resolve({
                        ok: true,
                        src: src,
                        width: temp.width,
                        height: temp.height
                    });
                };
                temp.onerror = () => {
                    fun.hideMsg();
                    resolve({
                        ok: false,
                        src: src
                    });
                };
                temp.src = src;
            });
        },
        //確認目前下載線程
        checkDownloadThread: () => {
            let threading;
            if (options.threading > 32) {
                threading = 32;
            } else if (options.threading < 1) {
                threading = 1;
            } else {
                threading = options.threading;
            }
            return new Promise(resolve => {
                let loop = setInterval(() => {
                    if (currentDownloadThread <= threading) {
                        clearInterval(loop);
                        resolve();
                    }
                }, 50);
            });
        },
        //產生隨機字串
        generateRandomString: (num, mode = 0) => {
            let characters;
            if (mode === 0) {
                characters = "0123456789";
            } else {
                characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            }
            let string = "";
            let charactersLength = characters.length;
            for (let i = 0; i < num; i++) {
                string += characters.charAt(Math.floor(Math.random() * charactersLength));
            }
            return string;
        },
        //取得代碼並創建script注入到當前頁面
        getCode: (url, obj = {}) => {
            const {
                mode,
                cors,
                key
            } = obj;
            if (mode == "dom" && (isString(key) || isRegExp(key))) {
                let xhr;
                if (cors == true) {
                    xhr = fun.xhrDoc(url);
                } else {
                    xhr = fun.fetchDoc(url);
                }
                return xhr.then(dom => {
                    let code = fun.gst(key, dom);
                    _GM_addElement(document.body, "script", {
                        textContent: code
                    });
                });
            } else {
                let xhr;
                if (cors == true) {
                    xhr = fun.xhr(url);
                } else {
                    xhr = fetch(url).then(res => res.text());
                }
                return xhr.then(text => {
                    _GM_addElement(document.body, "script", {
                        textContent: text
                    });
                });
            }
        },
        //用Promise封裝GM_xmlhttpRequest
        xhr: (url, details = {}) => {
            return new Promise((resolve, reject) => {
                _GM_xmlhttpRequest({
                    method: "GET",
                    url: url,
                    responseType: "text",
                    headers: {
                        "Referer": _unsafeWindow.location.href,
                        "User-Agent": _unsafeWindow.navigator.userAgent
                    },
                    onload: data => {
                        if (data.status > 400) debug(`\nfun.xhr()連線錯誤碼：${data.status}\n`, url);
                        resolve(data.response);
                    },
                    onerror: error => {
                        console.error("fun.xhr()ERROR", error);
                        reject(error)
                    },
                    ...details
                });
            });
        },
        //用Promise封裝GM_xmlhttpRequest
        xhrHEAD: url => {
            return new Promise(resolve => {
                _GM_xmlhttpRequest({
                    method: "HEAD",
                    url: url,
                    timeout: 20000,
                    onload: data => {
                        resolve(data);
                    },
                    onerror: error => {
                        console.log(`fun.xhrHEAD() ERROR\n${url}`, error);
                        resolve({
                            status: 403
                        });
                    },
                    ontimeout: error => {
                        console.log(`fun.xhrHEAD() Timeout\n${url}`, error);
                        resolve({
                            status: 524
                        });
                    }
                });
            });
        },
        //用Promise封裝GM_xmlhttpRequest
        imxXHR: url => {
            return new Promise((resolve, reject) => {
                _GM_xmlhttpRequest({
                    method: "POST",
                    url: url,
                    responseType: "document",
                    headers: {
                        "content-type": "application/x-www-form-urlencoded"
                    },
                    data: "imgContinue=Continue+to+image+...+",
                    onload: data => {
                        resolve(data.response);
                    },
                    onerror: error => {
                        reject(error);
                    }
                });
            });
        },
        //用Promise封裝GM_xmlhttpRequest
        imageBamXHR: url => {
            return new Promise((resolve, reject) => {
                _GM_xmlhttpRequest({
                    method: "GET",
                    url: url,
                    responseType: "document",
                    headers: {
                        "referrer": url,
                        "referrerPolicy": "strict-origin-when-cross-origin"
                    },
                    onload: data => {
                        resolve(data.response);
                    },
                    onerror: error => {
                        reject(error);
                    }
                });
            });
        },
        //用Promise封裝GM_xmlhttpRequest，返回經過文字編碼的document物件
        xhrDoc: (url, details = {}) => {
            if ("xhrOptions" in siteData) {
                details = siteData.xhrOptions
            }
            return new Promise(resolve => {
                _GM_xmlhttpRequest({
                    method: "GET",
                    url: url,
                    responseType: "arraybuffer",
                    headers: {
                        "Referer": _unsafeWindow.location.href,
                        "User-Agent": _unsafeWindow.navigator.userAgent
                    },
                    onload: data => {
                        if (data.status >= 400) {
                            debug(`\nfun.xhrDoc()連線錯誤碼：${data.status}\n`, url);
                            let obj = {
                                fn: "fun.xhrDoc()",
                                url: url,
                                status: data.status
                            };
                            fetchErrorArray.push(obj);
                        }
                        let decoder = new TextDecoder(document.characterSet || document.charset || document.inputEncoding);
                        let htmlText = decoder.decode(data.response);
                        let dom = fun.doc(htmlText);
                        resolve(dom);
                    },
                    onerror: error => {
                        console.error(`\nfun.xhrDoc()出錯:\n${decodeURIComponent(url)}`, error);
                        resolve(null);
                    },
                    ...details
                });
            });
        },
        //用Fetc API，返回經過文字編碼的document物件
        fetchDoc: (url, details = {}, retry = 10) => {
            if ("xhrOptions" in siteData) {
                details = siteData.xhrOptions
            }
            return new Promise(async resolve => {
                fetch(url, {
                    ...details
                }).then(async res => {
                    if (res.status >= 400 && retry > 0) {
                        let resData = await fun.retryUrl(url, res, "fun.fetchDoc()", retry);
                        if (resData !== null) return resData;
                    }
                    return res.arrayBuffer();
                }).then(buffer => {
                    const decoder = new TextDecoder(document.characterSet || document.charset || document.inputEncoding);
                    const htmlText = decoder.decode(buffer);
                    resolve(fun.doc(htmlText));
                }).catch(error => {
                    console.error(`\nfun.fetchDoc()出錯:\n${decodeURIComponent(url)}`, error);
                    httpFetchError = true;
                    resolve(null);
                });
            });
        },
        //IMHentai網站用的取得圖片網址
        getImhentaiSrc: async () => {
            await fun.waitVar("g_th");
            const findServer = cId => {
                if (cId > 0 && cId <= 274825) return "m1.imhentai.xxx";
                if (cId > 274825 && cId <= 403818) return "m2.imhentai.xxx";
                if (cId > 403818 && cId <= 527143) return "m3.imhentai.xxx";
                if (cId > 527143 && cId <= 632481) return "m4.imhentai.xxx";
                if (cId > 632481 && cId <= 816010) return "m5.imhentai.xxx";
                if (cId > 816010 && cId <= 970098) return "m6.imhentai.xxx";
                if (cId > 970098 && cId <= 1121113) return "m7.imhentai.xxx";
                return "m8.imhentai.xxx";
            };
            const galleryId = fun.ge(".gview>#gallery_id,#load_id").value;
            const imageDir = fun.ge("#image_dir,#load_dir").value;
            const num = fun.ge("#pages,#load_pages").value ?? "";
            const cId = Number(fun.ge("#u_id,#load_dir+#gallery_id").value ?? "");
            const randomServer = _unsafeWindow.random_server ?? findServer(cId);
            return fun.arr(num, (v, i) => `//${randomServer}/${imageDir}/${galleryId}/${(i + 1)}.${fun.ex(_unsafeWindow.g_th[i + 1][0])}`);
        },
        //漫漫聚和KuKu动漫取得圖片網址的函式
        getKukudmSrc: async (url = siteUrl, dom = document, msg = 1) => {
            if (url === null) return;
            if (fun.ge("//title[contains(text(),'404')]", dom, dom)) return [];
            if (!getImgFn.includes("getKukudmSrc")) getImgFn += " > fun.getKukudmSrc()";
            let timeId = setTimeout(() => msg === 1 ? location.reload() : null, 20000);
            if (msg == 1) fun.showMsg(displayLanguage.str_05, 0);
            let max;
            fun.ge("//td[input]", dom, dom) ? max = fun.gt("//td[input]", 1, dom).match(/共(\d+)/)[1] : max = fun.gt(".bottom .subNav", 1, dom).match(/\/(\d+)/)[1];
            url = url.replace(/1\.htm$/, "");
            let links = fun.arr(max, (v, i) => url + (i + 1) + ".htm");
            let xhrNum = 0;
            let resArr = links.map(url => {
                return fun.xhrDoc(url).then(dom => {
                    if (msg == 1) fun.showMsg(`${displayLanguage.str_06}${xhrNum+=1}/${links.length}`, 0);
                    let script = fun.gst("document.write", dom);
                    let htmlCode = script.replace("document.write(", "").replace(");", "");
                    let htmlText = fun.run(`(${htmlCode}).toString()`);
                    let tempDom = fun.doc(htmlText);
                    let imgs = [...tempDom.images];
                    if (imgs.length > 1) {
                        return {
                            src1: decodeURIComponent(imgs[0].src),
                            src2: decodeURIComponent(imgs[1].src)
                        };
                    } else if (imgs.length > 0) {
                        return decodeURIComponent(imgs[0].src);
                    } else {
                        return null;
                    }
                });
            });
            let allSrc = await Promise.all(resArr).then(arr => {
                clearTimeout(timeId);
                if (msg == 1) fun.hideMsg();
                return arr;
            });
            try {
                const [first] = allSrc;
                if (isString(first)) {
                    return allSrc;
                } else {
                    msg == 1 ? fun.showMsg(displayLanguage.str_56, 0) : null;
                    let status = await fun.xhrHEAD(first.src1).then(res => res.status);
                    return status == 200 ? allSrc.map(e => e.src1) : allSrc.map(e => e.src2);
                }
            } catch {
                return [];
            }
        },
        //移除元素
        remove: async (obj, time = 0) => {
            if (isString(obj)) {
                await fun.delay(time, 0);
                let selector = obj;
                fun.gae(selector).forEach(e => e.remove());
            } else if (isArray(obj)) {
                let selectors = obj;
                await fun.delay(time, 0);
                selectors.forEach(selector => fun.gae(selector).forEach(e => e.remove()));
            }
        },
        //創建A元素
        addUrlHtml: (url, selector, pos = 0, text = "點選進入下一話") => {
            let _pos;
            switch (pos) {
                case 0:
                    _pos = "beforebegin"; //在元素之前。
                    break;
                case 1:
                    _pos = "afterend"; //在元素之後。
                    break;
                case 2:
                    _pos = "beforeend"; //在元素裡面，最後一個子元素之後。
                    break;
                case 3:
                    _pos = "afterbegin"; //在元素裡面，第一個子元素之前。
                    break;
            }
            let html = `<div style="padding: 20px 0; text-align: center;"><a href="${url}"style="font-size: 26px;line-height: 50px;height: 50px;text-align: center;">${text}</a></div>`;
            fun.ge(selector).insertAdjacentHTML(_pos, html);
        },
        dataURLtoBlobURL: dataurl => {
            let arr = dataurl.split(","),
                mime = arr[0].match(/:(.*?);/)[1],
                bstr = atob(arr[1]),
                n = bstr.length,
                u8arr = new Uint8Array(n);
            while (n--) {
                u8arr[n] = bstr.charCodeAt(n);
            }
            return URL.createObjectURL(new Blob([u8arr], {
                type: mime
            }));
        },
        imgSrcToDataURL: (src, type = "image/jpeg", cros = 0) => {
            return new Promise((resolve, reject) => {
                const img = new Image();
                if (cros == 1) {
                    img.setAttribute("crossOrigin", "");
                }
                img.onload = () => {
                    let canvas = document.createElement("canvas");
                    canvas.height = img.naturalWidth;
                    canvas.width = img.naturalHeight;
                    canvas.getContext("2d").drawImage(img, 0, 0);
                    URL.revokeObjectURL(img.src);
                    let dataURL = canvas.toDataURL(type);
                    resolve(dataURL);
                };
                img.onerror = error => {
                    reject(error);
                }
                img.src = src;
            });
        },
        imgSrcToBlobURL: (src, type = "image/jpeg", cros = 0) => {
            return new Promise((resolve, reject) => {
                const img = new Image();
                if (cros == 1) {
                    img.setAttribute("crossOrigin", "");
                }
                img.onload = () => {
                    const canvas = new OffscreenCanvas(img.naturalWidth, img.naturalHeight);
                    canvas.getContext("2d").drawImage(img, 0, 0);
                    URL.revokeObjectURL(img.src);
                    canvas.convertToBlob({
                        type: type,
                        quality: 1
                    }).then(blob => {
                        let blobURL = URL.createObjectURL(blob);
                        resolve(blobURL);
                    });
                };
                img.onerror = error => {
                    reject(error);
                }
                img.src = src;
            });
        },
        imgToBlobURL: (img, type = "image/jpeg", quality = 1) => {
            const canvas = new OffscreenCanvas(img.naturalWidth, img.naturalHeight);
            canvas.getContext("2d").drawImage(img, 0, 0);
            return canvas.convertToBlob({
                type: type,
                quality: quality
            }).then(blob => URL.createObjectURL(blob));
        },
        imgBlobUrlArr: async (selector, type = "image/jpeg", quality = 1) => {
            fun.showMsg(displayLanguage.str_53, 0);
            await fun.delay(200, 0);
            let num = 0;
            let imgs = await fun.gae(selector).map(async (img, index, arr) => {
                let blobUrl = await fun.imgToBlobURL(img, type, quality);
                fun.showMsg(`DrawImage ${num += 1}/${arr.length}`, 0);
                return blobUrl;
            });
            fun.hideMsg();
            return imgs;
        },
        blobToDataURL: blob => {
            return new Promise(resolve => {
                const reader = new FileReader();
                reader.onload = () => {
                    resolve(reader.result);
                };
                reader.readAsDataURL(blob);
            });
        },
        convertImage: async (blob, type = "image/jpeg") => {
            const img = new Image();
            await new Promise((resolve, reject) => {
                img.onload = resolve;
                img.onerror = reject;
                img.src = URL.createObjectURL(blob);
            });
            const canvas = new OffscreenCanvas(img.naturalWidth, img.naturalHeight);
            canvas.getContext("2d").drawImage(img, 0, 0);
            URL.revokeObjectURL(img.src);
            return canvas.convertToBlob({
                type: type,
                quality: 0.9
            });
        },
        //自動滾動元素
        scrollEles: async (ele, time = 100, top = 1) => {
            if (isAutoScrolling) return;
            isAutoScrolling = true;
            let eles = fun.gae(ele);
            for (let e of eles) {
                e.scrollIntoView({
                    behavior: "smooth",
                    block: "end"
                });
                await fun.delay(time, 0);
            }
            if (top === 1) {
                _unsafeWindow.scrollTo({
                    top: 0
                });
            }
            isAutoScrolling = false;
        },
        //自動滾動元素
        aotoScrollEles: async (selector, callback, time = 5000, top = 1) => {
            if (isAutoScrolling) return;
            isAutoScrolling = true;
            let n = 0;
            let timeout = false;
            let imgs = fun.gae(selector);
            let imgNum = imgs.length;
            const autoScrollIntoView = async (arr, num) => {
                for (let i = 0; i < arr.length; i++) {
                    fun.showMsg(`AutoScroll ${n += 1}/${num}`, 0);
                    await new Promise(resolve => {
                        let timeId = setTimeout(() => {
                            timeout = true;
                            clearInterval(loop);
                            resolve();
                        }, time);
                        let loop = setInterval(async () => {
                            arr[i].scrollIntoView();
                            if (await callback(arr[i])) {
                                clearTimeout(timeId);
                                clearInterval(loop);
                                resolve();
                            }
                        }, 50);
                    });
                    if (timeout) break;
                }
                fun.hideMsg();
                if (timeout) fun.showMsg("Timeout");
                let newImgs = fun.gae(selector);
                let newImgNum = newImgs.length;
                if (imgNum < newImgNum) {
                    newImgs = newImgs.slice(imgNum);
                    imgNum = newImgNum;
                    await autoScrollIntoView(newImgs, newImgNum);
                }
            };
            await autoScrollIntoView(imgs, imgNum);
            if (top === 1) {
                _unsafeWindow.scrollTo({
                    top: 0
                });
            }
            isAutoScrolling = false;
        },
        openInTab: (url, target = "_blank") => {
            let a = document.createElement("a");
            a.href = url;
            a.target = target;
            a.style = "display: none;";
            document.body.append(a);
            a.click();
            a.remove();
        },
        addMutationObserver: (callback, node = document.body, config = MutationObserverConfig) => {
            callback();
            new MutationObserver(callback).observe(node, config);
        },
        scrollEvent: slideIndex => {
            if (!isNumber(slideIndex)) return;
            let modeName = "Samll";
            switch (viewMode) {
                case 0:
                    modeName = "Original";
                    break;
                case 1:
                    modeName = "Samll";
                    break;
                default:
                    console.error("模式错误");
                    break;
            }
            debug(`\nfun.scrollEvent() > imgLocation${modeName}_` + slideIndex);
            let elementById = document.getElementById(`imgLocation${modeName}_` + slideIndex);
            let [sa, sb, sc] = [
                ".FullPictureLoadImage",
                "#FullPictureLoadImgBox:not([style*=none]) .FullPictureLoadImage.small",
                ".FullPictureLoadImage:not(.small)"
            ];
            let options = {
                block: "center",
                behavior: "smooth",
                inline: "center",
            };
            if (!!elementById) {
                elementById.scrollIntoView();
            } else if (fun.ge(".swiper-slide.swiper-slide-active") && fun.ge(sa)) {
                fun.gae(sa)[slideIndex].scrollIntoView(options);
            } else if (fun.ge(sb)) {
                fun.gae(sb)[slideIndex].scrollIntoView(options);
            } else if (fun.ge(sc)) {
                fun.gae(sc)[slideIndex].scrollIntoView(options);
            } else {
                console.error(" # ", "未定位id！");
            }
        },
        //清除定時器
        clearAllTimer: (mode = 0) => {
            let debuggerStr = `
            if ((() => {}).constructor === Function) {
                Function.prototype.constructor = () => {};
            }
            `;
            if (mode == 0 || mode == 1) new Function(debuggerStr)();
            let endTidStr = `
            let endTid = setTimeout(() => {});
            for (let i = 0; i <= endTid; i++) {
                clearTimeout(i);
            }
            `;
            if (mode == 0 || mode == 2) {
                new Function(endTidStr)();
                let endTid = setTimeout(() => {});
                for (let i = 0; i <= endTid; i++) {
                    clearTimeout(i);
                }
            }
            let endIidStr = `
            let endIid = setInterval(() => {});
            for (let i = 1; i <= endIid; i++) {
                clearInterval(i);
            }
            `;
            if (mode == 0 || mode == 3) {
                new Function(endIidStr)();
                let endIid = setInterval(() => {});
                for (let i = 1; i <= endIid; i++) {
                    clearInterval(i);
                }
            }
        },
        //清除定時器
        clearSetTimeout: () => {
            let endTid = setTimeout(() => {});
            for (let i = 0; i <= endTid; i++) {
                clearTimeout(i);
            }
        },
        //清除元素事件
        clearElementEvent: () => {
            return fun.fetchDoc(document.URL).then(dom => {
                let newDocumentElement = document.importNode(dom.documentElement, true);
                let oldDocumentElement = document.documentElement;
                document.replaceChild(newDocumentElement, oldDocumentElement);
                debug("網站元素事件已清除");
            });
        },
        //創建元素陣列
        createImgArray: (srcs) => {
            return srcs.map(src => {
                let img = new Image();
                img.className = "FullPictureLoadImage lazyload";
                img.src = loading_bak;
                img.dataset.src = src;
                return img;
            });
        },
        setFancybox: (selector) => {
            fun.showMsg(displayLanguage.str_137);
            const loadSrcs = (srcArr) => {
                const oddNumberSrcs = srcArr.filter((img, index) => index % 2 == 0);
                const evenNumberSrcs = srcArr.filter((img, index) => index % 2 != 0);
                fun.singleThreadLoadSrcs(oddNumberSrcs);
                fun.singleThreadLoadSrcs(evenNumberSrcs);
            };
            fun.gae(selector).forEach(e => {
                let check = fun.checkImgSrc(e);
                if (e.nodeName === "IMG") {
                    let pE = e.parentNode;
                    if (pE.nodeName === "A") {
                        let src = check.ok ? check.src : e.src;
                        pE.dataset.fancybox = "gallery";
                        pE.href = src;
                        pE.dataset.thumb = src;
                        pE.removeAttribute("title");
                    } else {
                        let a = document.createElement("a");
                        let src = check.ok ? check.src : e.src;
                        a.href = src;
                        a.dataset.fancybox = "gallery";
                        a.dataset.thumb = src;
                        insertBefore(e, a);
                        a.append(e);
                    }
                } else if (e.nodeName === "A") {
                    let img = e.querySelector("img");
                    let check = fun.checkImgSrc(img);
                    let src = check.ok ? check.src : img.src;
                    e.dataset.fancybox = "gallery";
                    e.dataset.thumb = src;
                }
            });
            let srcs = fun.getImgSrcArr(selector);
            loadSrcs(srcs);
            if (siteData.fancybox?.v === 3) {
                return;
            }
            let gallery = fun.gae("[data-fancybox]");
            let scrollIntoViewOptions = {
                block: "center",
                behavior: "smooth",
                inline: "center"
            };
            let FancyboxOptions;
            if (hasTouchEvents) {
                FancyboxOptions = {
                    idle: false,
                    Images: {
                        Panzoom: {
                            maxScale: 2
                        }
                    },
                    Thumbs: {
                        showOnStart: false
                    },
                    Toolbar: {
                        display: {
                            left: ["infobar"],
                            middle: ["flipX", "flipY"],
                            right: ["iterateZoom", "slideshow", "thumbs", "close"]
                        }
                    },
                    on: {
                        done: (fancybox, slide) => {
                            if (fancybox.isCurrentSlide(slide)) {
                                gallery[slide.index].scrollIntoView(scrollIntoViewOptions);
                            } else {
                                gallery[fancybox.getSlide().index].scrollIntoView(scrollIntoViewOptions);
                            }
                        }
                    }
                };
            } else {
                FancyboxOptions = {
                    idle: false,
                    wheel: FancyboxWheelOptions === 0 ? "slide" : "zoom",
                    Images: {
                        Panzoom: {
                            maxScale: 2
                        }
                    },
                    Thumbs: {
                        showOnStart: false
                    },
                    Toolbar: {
                        display: {
                            left: ["infobar"],
                            middle: ["iterateZoom", "toggle1to1", "rotateCCW", "rotateCW", "flipX", "flipY", "fitX", "fitY", "reset"],
                            right: ["slideshow", "fullscreen", "thumbs", "close"]
                        }
                    },
                    on: {
                        done: (fancybox, slide) => {
                            if (fancybox.isCurrentSlide(slide)) {
                                gallery[slide.index].scrollIntoView(scrollIntoViewOptions);
                            } else {
                                gallery[fancybox.getSlide().index].scrollIntoView(scrollIntoViewOptions);
                            }
                        }
                    }
                };
            }
            _unsafeWindow.Fancybox.bind("[data-fancybox]", FancyboxOptions);
        },
        lazyload: async () => {
            let check = !!fun.ge("img.FullPictureLoadImage.lazyload");
            if (check) {
                let lazyload = siteData?.autoPager?.lazyload;
                let imgs = fun.gae("img.FullPictureLoadImage.lazyload");
                if (lazyload != 0) {
                    let oddNumberImgs = imgs.filter((img, index) => index % 2 == 0);
                    let evenNumberImgs = imgs.filter((img, index) => index % 2 != 0);
                    fun.singleThreadLoadImgs(oddNumberImgs);
                    fun.singleThreadLoadImgs(evenNumberImgs);
                    await fun.delay(1000, 0);
                    imgs.forEach(img => fun.imagesObserver.observe(img));
                } else {
                    await fun.delay(1000, 0);
                    imgs.forEach((img, i) => {
                        setTimeout(() => {
                            img.src = img.dataset.src;
                            img.classList.remove("lazyload");
                            fun.imagesObserver.observe(img);
                        }, i * 200);
                    });
                }
            }
        },
        setStyleSheet: () => {
            for (const sheet of document.styleSheets) {
                if (sheet.href) {
                    for (const rule of sheet.rules) {
                        if (rule.selectorText === "textarea") {
                            //rule.style.removeProperty("height");
                            rule.style.setProperty("height", "auto");
                            return;
                        }
                    }
                }
            }
        },
        copymangaUI: () => {
            let lastScrollTop = 0;
            document.addEventListener("scroll", event => {
                let st = event.srcElement.scrollingElement.scrollTop;
                if (st > lastScrollTop) {
                    $("h4.header").attr("style", "top: -30px;");
                    $("div.footer").attr("style", "bottom: -41px;");
                    lastScrollTop = st;
                } else if (st < lastScrollTop - 20) {
                    $("h4.header").removeAttr("style");
                    $("div.footer").removeAttr("style");
                    lastScrollTop = st;
                }
            });
            fun.run("$(document).off();");
        },
        copymanga_M_UI: (c, h) => {
            let s = siteUrl.split("/").slice(-2);
            let url = `https://${fun.lh}/h5/details/comic/${s[0]}`;
            let html = `
<div class="comicControlBottom van-popup van-popup--bottom hide" style="z-index: 2024;">
    <div class="comicControlBottomBottom">
        <a href="${c}">
            <span class="comicControlBottomBottomItem">
                <span class="comicControlBottomBottomItemIcon iconfont iconRead_btn_nor_Catalog"></span>
                <span class="comicControlBottomBottomItemText">目錄</span>
            </span>
        </a>
        <a href="${h}">
            <span class="comicControlBottomBottomItem">
                <span class="comicControlBottomBottomItemIcon iconfont iconRead_btn_nor_home"></span>
                <span class="comicControlBottomBottomItemText">首頁</span>
            </span>
        </a>
    </div>
</div>
`;
            document.querySelector(".comicContentPopup").insertAdjacentHTML("beforeend", html);
            document.addEventListener("click", (e) => {
                if (e.target.nodeName === "IMG") {
                    let b = fun.ge(".comicControlBottom");
                    if (b.classList.contains("hide")) {
                        b.classList.remove("hide");
                    } else {
                        b.classList.add("hide");
                    }
                }
            });
        },
        MangabzUI: () => {
            let lastScrollTop = 0;
            document.addEventListener("scroll", event => {
                let st = event.srcElement.scrollingElement.scrollTop;
                if (st > lastScrollTop) {
                    $(".top-bar").attr("style", "top: -74px;");
                    lastScrollTop = st;
                } else if (st < lastScrollTop - 20) {
                    $(".top-bar").removeAttr("style");
                    lastScrollTop = st;
                }
            });
        },
        XmanhuaUI: () => {
            const clickToggleToolbar = () => {
                if (fun.ge(".fancybox__container")) return;
                let t = fun.ge(".header.toolbar");
                if (t) {
                    $(".header").removeClass("toolbar");
                    $(".header").removeAttr("style");
                } else {
                    $(".header").addClass("toolbar");
                    $(".header").attr("style", "top: -64px;")
                }
                let b = fun.ge(".reader-bottom.toolbar");
                if (b) {
                    $(".reader-bottom").removeClass("toolbar");
                    $(".reader-bottom").removeAttr("style");
                } else {
                    $(".reader-bottom").addClass("toolbar");
                    $(".reader-bottom").attr("style", "bottom: -50px;");
                }
            };
            document.addEventListener("click", clickToggleToolbar);
            let lastScrollTop = 0;
            document.addEventListener("scroll", event => {
                let st = event.srcElement.scrollingElement.scrollTop;
                if (st > lastScrollTop) {
                    $(".header").addClass("toolbar");
                    $(".header").attr("style", "top: -64px;");
                    $(".reader-bottom").addClass("toolbar");
                    $(".reader-bottom").attr("style", "bottom: -50px;");
                    lastScrollTop = st;
                } else if (st < lastScrollTop - 20) {
                    $(".header").removeClass("toolbar");
                    $(".header").removeAttr("style");
                    $(".reader-bottom").removeClass("toolbar");
                    $(".reader-bottom").removeAttr("style");
                    lastScrollTop = st;
                }
            });
        },
        cartoonmadUI: () => {
            fun.run("document.onkeydown=null;");
            fun.remove("//td[div[@id='sidebar-follow']] | //td[ins[@class='adsbygoogle']] | //tr[td[script]] | //select");
            let ele = fun.ge("//tr[td[@bgcolor='#EAEAEA']]");
            if (ele) ele.parentNode.append(ele.cloneNode(true));
            let eleM = fun.ge("//tr[td[table[@bgcolor='#CCCCCC']]]");
            if (eleM) {
                let x = eleM.parentNode.lastElementChild.previousElementSibling;
                insertBefore(x, eleM.cloneNode(true));
            }
        },
        cm_decrypt: (raw) => {
            function initCypto() {
                const c = [];

                function r(i) {
                    if (c[i]) return c[i].exports;
                    c[i] = {
                        i,
                        l: false,
                        exports: {}
                    };
                    const e = c[i];
                    const wj = _unsafeWindow.webpackJsonp;
                    wj[0][1][i].call(e.exports, e, e.exports, r);
                    e.l = true;
                    return e.exports;
                }
                return r(6);
            }
            const decrypt = (raw) => {
                const dio = "xxxmanga.woo.key";
                const cypto = initCypto();
                const str = raw;
                const header = str.substring(0, 16);
                const body = str.substring(16, str.length);
                const dioEn = cypto.enc.Utf8.parse(dio);
                const headerEn = cypto.enc.Utf8.parse(header);
                const bHex = cypto.enc.Hex.parse(body);
                const b64 = cypto.enc.Base64.stringify(bHex);
                return cypto.AES.decrypt(b64, dioEn, {
                    iv: headerEn,
                    mode: cypto.mode.CBC,
                    padding: cypto.pad.Pkcs7
                }).toString(cypto.enc.Utf8).toString();
            };
            return JSON.parse(decrypt(raw));
        }
    };

    //CSS取得元素返回元素
    //const ge = (selector) => document.querySelector(selector);

    function ge(selector, node = null) {
        return (node || document).querySelector(selector);
    }

    //CSS取得所有元素返回元素陣列
    const gae = (selector) => [...document.querySelectorAll(selector)];
    //Xpath取得元素返回元素
    const gx = (xpath) => document.evaluate(xpath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
    //Xpath取得所有元素返回元素陣列
    const gax = (xpath) => {
        let nodes = [];
        let results = document.evaluate(xpath, document, null, XPathResult.ANY_TYPE, null);
        let node;
        while (node = results.iterateNext()) {
            nodes.push(node);
        }
        return nodes;
    };

    const insertBefore = (targetNode, newNode) => {
        if ([targetNode, newNode].every(e => isEle(e))) {
            targetNode.parentNode.insertBefore(newNode, targetNode);
        } else {
            console.error("insertBefore參數錯誤\n", targetNode, Object.prototype.toString.call(targetNode), newNode, Object.prototype.toString.call(newNode));
        }
    };

    const insertAfter = (targetNode, newNode) => {
        if ([targetNode, newNode].every(e => isEle(e))) {
            targetNode.parentNode.insertBefore(newNode, targetNode.nextSibling);
        } else {
            console.error("insertAfter參數錯誤\n", targetNode, Object.prototype.toString.call(targetNode), newNode, Object.prototype.toString.call(newNode));
        }
    };

    const createStyle = css => {
        const style = document.createElement("style");
        style.type = "text/css";
        style.innerHTML = css;
        return style;
    };

    //數字字串補0
    const getNum = (i, padStart = 4) => String(i + 1).padStart(padStart, "0");

    const showMsg = (text, time = 1000) => {
        if (!ge("body>.FullPictureLoadMsg")) fun.addFullPictureLoadMsg();
        ge(".FullPictureLoadMsg").removeAttribute("style");
        ge(".FullPictureLoadMsg").innerText = text;
        setTimeout(() => {
            ge(".FullPictureLoadMsg").innerText = "none";
            ge(".FullPictureLoadMsg").style.display = "none";
        }, time);
    };

    const getDataMsg = (text, picNum, imgsNum) => {
        if (picNum != "none") fun.showMsg(`${displayLanguage.str_23}${downloadNum += 1}/${imgsNum}${displayLanguage.str_24}${text}`, 0);
    };

    //取得參照頁
    const getReferer = (srcUrl) => {
        let referer;
        if (/vipr\.im|imagetwist\.com|imgspice\.com/.test(srcUrl) || siteData.referer == "src") {
            referer = srcUrl;
        } else if (/imgtaxi\.com/.test(srcUrl)) {
            referer = "https://imgtaxi.com/";
        } else if (/saint2\.su/.test(srcUrl)) {
            referer = "https://saint2.su/";
        } else if (/bunkr/.test(srcUrl)) {
            referer = "https://bunkr.fi/";
        } else if (isString(siteData.referer) || siteData.referer == "") {
            referer = siteData.referer;
        } else {
            referer = fun.lo + "/";
        }
        return referer;
    };

    //Fetch API下載圖片
    const Fetch_API_Download = (srcUrl, picNum = "none", imgsNum = "none") => {
        currentDownloadThread++;
        return new Promise(resolve => {
            fetch(srcUrl, {
                headers: {
                    "accept": "*/*",
                    //"accept": "image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8",
                    //"cache-control": "no-cache",
                    "upgrade-insecure-requests": "1"
                },
                referrer: getReferer(srcUrl),
                referrerPolicy: "strict-origin-when-cross-origin",
                /***同域請求攜帶cookie***/
                //credentials: "same-origin"
            }).then(async res => {
                return {
                    data: res,
                    blob: await res.blob()
                }
            }).then(obj => {
                currentDownloadThread--;
                if (obj.blob.size < 100) {
                    getDataMsg(displayLanguage.str_26, picNum, imgsNum);
                    resolve({
                        error: "下載錯誤",
                        data: obj.data,
                        picNum: picNum,
                        src: srcUrl,
                        get: "Fetch API"
                    });
                } else {
                    getDataMsg(displayLanguage.str_25, picNum, imgsNum);
                    resolve({
                        load: "下載成功",
                        blob: obj.blob,
                        picNum: picNum,
                        src: srcUrl,
                        finalUrl: obj.data?.url,
                        get: "Fetch API"
                    });
                }
            }).catch(error => {
                currentDownloadThread--;
                getDataMsg(displayLanguage.str_26, picNum, imgsNum);
                resolve({
                    error: "下載錯誤",
                    picNum: picNum,
                    src: srcUrl,
                    errorLog: error,
                    get: "Fetch API"
                });
                console.error("Fetch_API_Download() Error: ", error);
            });
        })
    };

    //GM_xmlhttpRequest下載圖片
    const GM_XHR_Download = (srcUrl, picNum = "none", imgsNum = "none") => {
        currentDownloadThread++;
        return new Promise(resolve => {
            _GM_xmlhttpRequest({
                method: "GET",
                url: srcUrl,
                responseType: "blob",
                headers: {
                    origin: fun.lo,
                    referer: getReferer(srcUrl),
                    accept: "*/*",
                    "upgrade-insecure-requests": "1"
                },
                onload: async data => {
                    currentDownloadThread--;
                    let blob = data.response;
                    //debug("GM blob", blob);
                    //XBrowser Blob的type是""
                    if (/\/octet-stream/.test(blob.type) && blob.size > 1024 || hasTouchEvents && blob.type == "" && blob.size > 1024) {
                        resolve({
                            load: "下載成功",
                            blob: blob,
                            picNum: picNum,
                            src: srcUrl,
                            finalUrl: data.finalUrl,
                            get: "GM_xmlhttpRequest"
                        });
                        getDataMsg(displayLanguage.str_25, picNum, imgsNum);
                    } else if (/^image|^video|text\/base64\.jpg/.test(blob.type)) {
                        resolve({
                            load: "下載成功",
                            blob: blob,
                            picNum: picNum,
                            src: srcUrl,
                            finalUrl: data.finalUrl,
                            get: "GM_xmlhttpRequest"
                        });
                        getDataMsg(displayLanguage.str_25, picNum, imgsNum);
                    } else {
                        let htmlText = "none";
                        if (/text\/html/.test(blob.type)) {
                            htmlText = blob.text();
                        }
                        resolve({
                            htmlText: htmlText,
                            blob: blob,
                            error: "下載錯誤",
                            picNum: picNum,
                            src: srcUrl,
                            finalUrl: data.finalUrl,
                            data: data,
                            get: "GM_xmlhttpRequest"
                        });
                        getDataMsg(displayLanguage.str_26, picNum, imgsNum);
                    }
                },
                onerror: error => {
                    currentDownloadThread--;
                    resolve({
                        error: "下載錯誤",
                        picNum: picNum,
                        src: srcUrl,
                        errorLog: error,
                        get: "GM_xmlhttpRequest"
                    });
                    getDataMsg(displayLanguage.str_26, picNum, imgsNum);
                    console.error("GM_XHR_Download() Error: ", error);
                }
            });
        });
    };

    //下載儲存
    const saveData = (blob, fileName) => {
        let objURL = URL.createObjectURL(blob);
        let a = document.createElement("a");
        a.href = objURL;
        a.download = fileName;
        document.body.append(a);
        a.click();
        a.remove();
        setTimeout(() => URL.revokeObjectURL(objURL), 1000);
    };

    const checkGeting = () => {
        if (isDownloading) {
            alert(displayLanguage.str_48);
            return true;
        }
        if (isFetching) {
            alert(displayLanguage.str_49);
            return true;
        }
        return false;
    };

    //取得圖片主函式
    const getImgs = async selector => {
        isFetching = true;
        let imgs = null;
        if (!("SPA" in siteData) && !("capture" in siteData) && siteData.repeat != 1 && globalImgArray.length > 0) {
            isFetching = false;
            imgs = globalImgArray;
            return imgs;
        } else if (ge(".FullPictureLoadImage,.FullPictureLoadVideo") && siteData.repeat != 1) {
            imgs = gae(".FullPictureLoadImage:not(.small)");
        } else if (isFn(selector)) {
            imgs = await selector();
            if (getImgFn == "" && !getImgFn.includes("專用Fn")) {
                getImgFn += " > " + siteData.name + "專用Fn";
            }
        } else if (!selector || selector === "") {
            showMsg(displayLanguage.str_41);
            return;
        } else if (selector.length < 3) {
            showMsg(displayLanguage.str_42);
            return;
        } else if (/^\//.test(selector)) {
            imgs = gax(selector);
            if (siteData.category != "lazyLoad" && !getImgFn.includes("gax(selector)")) {
                getImgFn += " > gax(selector)";
            }
        } else {
            imgs = gae(selector);
            if (siteData.category != "lazyLoad" && !getImgFn.includes("gae(selector)")) {
                getImgFn += " > gae(selector)";
            }
        }
        if (!isArray(imgs)) {
            isFetching = false;
            alert("getImgs() Error! ImageList Not Array");
            return [];
        }
        if (isPromise(imgs[0])) {
            imgs = await Promise.all(imgs); //取出new Promise的值
        }
        fun.hideMsg();
        imgs = imgs.filter(item => item).flat(); //去除空、無用
        let imgsSrcArr = imgs.map(img => {
            let check = fun.checkImgSrc(img);
            if (check.ok) {
                return check.src;
            } else {
                console.error("\ngetImgs() imgs 格式錯誤！", img);
                return null;
            }
        }).filter(item => item);
        if (siteData.category !== "lazyLoad" && globalImgArray.length === 0 && imgs.length !== 0) {
            debug(`\ngetImgs()${getImgFn} 所有圖片網址：`, imgsSrcArr);
        }
        if (siteData.category !== "lazyLoad" && globalImgArray.length === 0 && imgs.length !== 0) {
            debug(`\ngetImgs()${getImgFn} 去重複後的圖片網址：`, [...new Set(imgsSrcArr)]);
        }
        imgsSrcArr = [...new Set(imgsSrcArr)];
        globalImgArray = imgsSrcArr;
        let thums = siteData.thums;
        if (isString(thums)) {
            thumbnailSrcArray = fun.getImgSrcArr(thums);
        }
        isFetching = false;
        return imgsSrcArr;
    };

    //自動下載函式
    const startAutoDownload = async () => {
        let autoDownload = siteData.autoDownload;
        if (!autoDownload) return;
        let [start, time] = autoDownload;
        let next = siteData.next;
        let ele;
        isFn(next) ? ele = await next() : ele = fun.ge(next);
        if (!!ele && start == 1 || !!ele && options.autoDownload == 1) {
            let max = time || options.autoDownloadCountdown;
            let countdownNum = max;
            fun.showMsg(`${displayLanguage.str_32}${max}${displayLanguage.str_33}`, 0);
            for (let i = 1; i < max; i++) {
                setTimeout(() => {
                    fun.showMsg(`${displayLanguage.str_32}${countdownNum-=1}${displayLanguage.str_33}`, 0);
                }, i * 1000);
            }
            setTimeout(() => {
                if (isFn(next)) {
                    fun.showMsg(displayLanguage.str_34);
                    location.href = ele;
                } else {
                    fun.showMsg(displayLanguage.str_35);
                    ele.click();
                }
            }, max * 1000);
        } else if (!ele && start == 1 || !ele && options.autoDownload == 1) {
            fun.showMsg(displayLanguage.str_36, 0);
            options.autoDownload = 0;
            let jsonStr = JSON.stringify(options);
            localStorage.setItem("FullPictureLoadOptions", jsonStr);
        }
    };

    //圖片影片下載函式
    const DownloadFn = async () => {
        if (checkGeting() || ge("#FullPictureLoadOptionsShadowElement")) return;
        let selector, titleText;
        let autoDownload = siteData.autoDownload;
        let start;
        if (isArray(autoDownload)) {
            [start] = autoDownload;
        }
        let titleReplace = fun.dt({
            s: "title"
        });
        if (fastDownload) {
            selector = siteData.imgs;
            titleText = (customTitle || titleReplace);
        } else {
            if (!autoDownload || !!autoDownload && start != 1 && options.autoDownload != 1) {
                selector = siteData.imgs;
                titleText = await prompt(displayLanguage.str_51, (customTitle || titleReplace));
                if (titleText === null) {
                    showMsg(displayLanguage.str_41);
                    return;
                }
            } else if (!!autoDownload) {
                if (start == 1 || options.autoDownload == 1) {
                    selector = siteData.imgs;
                    titleText = (customTitle || titleReplace);
                } else {
                    debug("未開啟自動下載");
                    return;
                }
            }
        }
        isDownloading = true;
        let imgsSrcArr = await getImgs(selector);
        if (imgsSrcArr.length > 0 && titleText != null && titleText != "" || videoSrcArray.length > 0) {
            fun.showMsg(displayLanguage.str_55, 0);
            let loopMsg;
            const imgsNum = imgsSrcArr.length;
            let title = titleText;
            const zip = new JSZip();
            let zipFolder;
            let videosNum;
            if (videoSrcArray.length > 0 && siteData.downloadVideo && siteData.downloadVideo == true && FullPictureLoadCustomDownloadVideo == 1) {
                videosNum = videoSrcArray.length;
                zipFolder = zip.folder(`${title} [${imgsNum}P + ${videosNum}V]`);
            } else {
                zipFolder = zip.folder(`${title} [${imgsNum}P]`);
            }
            if (imgsSrcArr.length > 0) {
                const padStart = String(imgsSrcArr.length).length;
                for (let i = 0; i < imgsSrcArr.length; i++) {
                    let picNum = getNum(i, padStart);
                    let promiseBlob;
                    await fun.checkDownloadThread();
                    siteData.fetch == 1 ? promiseBlob = Fetch_API_Download(imgsSrcArr[i], picNum, imgsNum) : promiseBlob = GM_XHR_Download(imgsSrcArr[i], picNum, imgsNum);
                    promiseBlobArray.push(promiseBlob);
                }
            }
            if (videoSrcArray.length > 0 && siteData.downloadVideo === true && FullPictureLoadCustomDownloadVideo == 1 && !hasTouchEvents) {
                const padStart = String(videosNum).length;
                loopMsg = setInterval(() => {
                    fun.showMsg("Video Downloading...", 0);
                }, 2000);
                for (let i = 0; i < videoSrcArray.length; i++) {
                    let videoNum = getNum(i, padStart);
                    let promiseBlob;
                    await fun.checkDownloadThread();
                    siteData.fetch == 1 ? promiseBlob = Fetch_API_Download(videoSrcArray[i], videoNum, imgsNum + videosNum) : promiseBlob = GM_XHR_Download(videoSrcArray[i], videoNum, imgsNum + videosNum);
                    promiseBlobArray.push(promiseBlob);
                }
            }
            debug("\nPromiseBlobArray：", promiseBlobArray);
            Promise.all(promiseBlobArray).then(async data => {
                try {
                    clearInterval(loopMsg);
                } catch {}
                debug("\nPromiseAllData：", data);
                let blobDataArray = data.filter(item => item.load); //成功下載
                let errorDataArray = data.filter(item => item.error); //下載錯誤
                debug("\nNewDataArray：", blobDataArray);
                debug("\nErrorDataArray：", errorDataArray);
                if (errorDataArray.length > 0) {
                    options.autoDownload = 0;
                    let jsonStr = JSON.stringify(options);
                    localStorage.setItem("FullPictureLoadOptions", jsonStr);
                    downloadNum = 0;
                    isDownloading = false;
                    let yes = await confirm(`${displayLanguage.str_27}${errorDataArray.length}${displayLanguage.str_28}${displayLanguage.str_29}`);
                    fun.hideMsg();
                    if (!yes) {
                        promiseBlobArray = [];
                        blobDataArray = null;
                        errorDataArray = null;
                        return;
                    }
                }
                if (blobDataArray.length > 0) {
                    for (let i = 0; i < blobDataArray.length; i++) {
                        let ex;
                        let blobData = blobDataArray[i].blob;
                        let type = blobData.type;
                        try {
                            if (/octet-stream/.test(type) || hasTouchEvents && type === "") {
                                let url = URL.createObjectURL(blobData);
                                let check = await fun.checkImgStatus(url, 0);
                                URL.revokeObjectURL(url);
                                if (check.ok) {
                                    if (/\.webp/i.test(blobDataArray[i].src) && convertWebpToJpg != 1) {
                                        blobData = await fun.convertImage(blobData, "image/webp");
                                        ex = "webp";
                                    } else {
                                        blobData = await fun.convertImage(blobData);
                                        ex = "jpg";
                                    }
                                    if (type === "") {
                                        fun.showMsg(`unknown type to ${ex} ${(i+ 1)}/${blobDataArray.length}`, 0);
                                    } else {
                                        fun.showMsg(`octet-stream to ${ex} ${(i+ 1)}/${blobDataArray.length}`, 0);
                                    }
                                } else {
                                    console.error("\nDownloadFn() PromiseAll blob資料格式錯誤", blobDataArray[i]);
                                    fun.showMsg(displayLanguage.str_30, 0);
                                    return;
                                }
                            } else if ((/webp/i.test(type) || /\.webp/i.test(blobDataArray[i].finalUrl)) && !type.includes("image/jpeg") && convertWebpToJpg == 1) {
                                blobData = await fun.convertImage(blobData);
                                ex = "jpg";
                                fun.showMsg(`${displayLanguage.str_102} to ${ex} ${(i+ 1)}/${blobDataArray.length}`, 0);
                            } else if (/^text\/base64\.jpg/.test(type)) {
                                ex = "jpg";
                            } else {
                                ex = type.split("/")[1].match(/\w+/)[0];
                            }
                        } catch {
                            if (/^image/.test(type)) {
                                ex = "jpg";
                            } else if (type === "") {
                                let url = URL.createObjectURL(blobData);
                                let check = await fun.checkImgStatus(url, 0);
                                URL.revokeObjectURL(url);
                                if (check.ok) {
                                    if (/\.webp/i.test(blobDataArray[i].src) && convertWebpToJpg != 1) {
                                        ex = "webp";
                                        fun.showMsg(`unknown type to ${ex} ${(i+ 1)}/${blobDataArray.length}`, 0);
                                        blobData = await fun.convertImage(blobData, "image/webp");
                                    } else {
                                        ex = "jpg";
                                        fun.showMsg(`unknown type to ${ex} ${(i+ 1)}/${blobDataArray.length}`, 0);
                                        blobData = await fun.convertImage(blobData);
                                    }
                                } else {
                                    console.error("\nDownloadFn() PromiseAll blob資料格式錯誤", blobDataArray[i]);
                                    fun.showMsg(displayLanguage.str_30, 0);
                                    return;
                                }
                            } else {
                                console.error("\nDownloadFn() PromiseAll blob資料格式錯誤", blobDataArray[i]);
                                fun.showMsg(displayLanguage.str_30, 0);
                                return;
                            }
                        }
                        let fileName;
                        ["mp4", "webm", "mov"].includes(ex) ? fileName = `${blobDataArray[i].picNum}V.${(ex)}` : fileName = `${blobDataArray[i].picNum}P.${(siteData.ex || ex)}`;
                        if (options.zip == 1) {
                            //console.log(`第${n}/${blobDataArray.length}張，檔案名：${fileName}，大小：${parseInt(blobDataArray[i].blob.size / 1024, 10)} Kb`);
                            zipFolder.file(fileName, blobData, {
                                binary: true
                            });
                        } else {
                            saveData(blobData, title + "_" + fileName);
                            await fun.delay(200, 0);
                            if (i === blobDataArray.length - 1) {
                                promiseBlobArray = [];
                                downloadNum = 0;
                                isDownloading = false;
                                fun.hideMsg();
                                startAutoDownload();
                            }
                        }
                    }
                    if (options.zip == 1) {
                        zip.generateAsync({
                            type: "blob"
                        }, (metadata) => {
                            fun.showMsg(displayLanguage.str_31 + metadata.percent.toFixed(2) + " %", 0);
                        }).then(async data => {
                            debug("\nZIP壓縮檔數據：", data);
                            let fileName;
                            if (videoSrcArray.length > 0 && siteData.downloadVideo == true && FullPictureLoadCustomDownloadVideo == 1) {
                                fileName = `${title} [${imgsNum}P + ${videosNum}V].${options.file_extension}`;
                            } else {
                                fileName = `${title} [${imgsNum}P].${options.file_extension}`;
                            }
                            saveData(data, fileName);
                            promiseBlobArray = [];
                            downloadNum = 0;
                            isDownloading = false;
                            fun.hideMsg();
                            startAutoDownload();
                        });
                    }
                } else {
                    promiseBlobArray = [];
                    downloadNum = 0;
                    isDownloading = false;
                    showMsg(displayLanguage.str_43);
                    return;
                }
            });
        } else {
            isDownloading = false;
            showMsg(displayLanguage.str_41);
            return;
        }
    };

    //匯出網址
    const exportImgSrcText = async () => {
        if (checkGeting() || ge("#FullPictureLoadOptionsShadowElement")) return;
        let selector = siteData.imgs;
        let srcArr = await getImgs(selector);
        if (srcArr.length == 0 && videoSrcArray.length == 0) return showMsg(displayLanguage.str_44);
        let picNum = srcArr.length;
        let titleText = (customTitle || document.title);
        let fileName = `${titleText}[${picNum}P]_MediaURLs.txt`;
        if (videoSrcArray.length > 0) {
            srcArr = srcArr.concat(videoSrcArray);
            fileName = `${titleText}[${picNum}P + ${videoSrcArray.length}V]_MediaURLs.txt`;
        }
        let str = srcArr.join("\n");
        let blob = new Blob([str], {
            type: "text/plain",
            endings: "native"
        });
        saveData(blob, fileName);
        showMsg(`${displayLanguage.str_101}`);
    };

    //複製網址或手動模式的插入圖片
    const copyImgSrcText = async () => {
        if (checkGeting() || ge("#FullPictureLoadOptionsShadowElement")) return;
        let selector = siteData.imgs;
        let srcArr = await getImgs(selector);
        siteData.insertImg ? debug("手動插入圖片") : debug("複製網址");
        if (srcArr.length == 0) return showMsg(displayLanguage.str_44);
        if ((!fun.ge(".FullPictureLoadImage") && !!siteData.insertImg) || siteData.repeat == 1 && !!siteData.insertImg) {
            const [insertTargetEle, insertMode] = siteData.insertImg;
            return fun.insertImg(srcArr, insertTargetEle, insertMode);
        }
        if (videoSrcArray.length > 0) srcArr = srcArr.concat(videoSrcArray);
        let textArr = [customTitle || document.title].concat(srcArr);
        let str = textArr.join("\n");
        console.log(str);
        copyToClipboard(str);
        showMsg(`${displayLanguage.str_45}(${textArr.length - 1})`);
    };

    //複製網址
    const copyImgSrcTextB = async () => {
        if (checkGeting() || ge("#FullPictureLoadOptionsShadowElement")) return;
        let selector = siteData.imgs;
        let srcArr = await getImgs(selector);
        if (srcArr.length == 0) return showMsg(displayLanguage.str_44);
        if (videoSrcArray.length > 0) srcArr = srcArr.concat(videoSrcArray);
        let textArr = [customTitle || document.title].concat(srcArr);
        let str = textArr.join("\n");
        console.log(str);
        copyToClipboard(str);
        showMsg(`${displayLanguage.str_45}(${textArr.length - 1})`);
    };

    const copyToClipboard = text => {
        if (!!_unsafeWindow.navigator.clipboard && _unsafeWindow.isSecureContext) {
            return _unsafeWindow.navigator.clipboard.writeText(text);
        } else {
            let textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "absolute";
            textArea.style.opacity = 0;
            textArea.style.left = "-999999px";
            textArea.style.top = "-999999px";
            document.body.append(textArea);
            textArea.focus();
            textArea.select();
            return new Promise((res, rej) => {
                document.execCommand("copy") ? res() : rej();
                textArea.remove();
            });
        }
    };

    //滾動至首張圖片(動畫效果)
    const goToNo1Img = (time = 1000) => {
        if (ge("#FullPictureLoadOptionsShadowElement")) return;
        let ele;
        ge("#FullPictureLoadImgBox:not([style*=none])") ? ele = ge(".FullPictureLoadImage.small") : ele = ge(".FullPictureLoadImage");
        if (ele) {
            if (time != 0) showMsg(displayLanguage.str_46);
            setTimeout(() => {
                ele.scrollIntoView({
                    behavior: "smooth"
                });
            }, time);
        }
    };

    //滾動至首尾圖片
    const goToImg = img => {
        let ele = null;
        if (ge("#FullPictureLoadImgBox:not([style*=none])") && img == "first") {
            ele = ge(".FullPictureLoadImage.small");
        } else if (img == "first") {
            ele = ge(".FullPictureLoadImage:not(.small)");
        }
        if (ge("#FullPictureLoadImgBox:not([style*=none])") && img == "last") {
            ele = gae(".FullPictureLoadImage.small").at(-1);
        } else if (img == "last") {
            ele = gae(".FullPictureLoadImage:not(.small)").at(-1);
        }
        if (ele) ele.scrollIntoView();
    };

    //自動滾動元素
    const autoScrollEles = () => {
        if (ge("#FullPictureLoadOptionsShadowElement")) return;
        let scrollEle = siteData.scrollEle;
        if (isFn(scrollEle)) {
            scrollEle();
        } else if (isArray(scrollEle)) {
            const [selector, time] = scrollEle;
            fun.scrollEles(selector, time);
        }
    };

    //減少圖片縮放級別
    const reduceZoom = () => {
        if (isFetching || !siteData.insertImg || ge("#FullPictureLoadOptionsShadowElement")) return;
        if (options.zoom <= 10 && ge(".FullPictureLoadImage:not(.small)")) {
            options.zoom == 0 ? options.zoom = 10 : options.zoom = options.zoom -= 1;
            if (options.zoom == 0) cancelZoom();
            ge("#FullPictureLoadOptionsZoom").value = options.zoom;
            let jsonStr = JSON.stringify(options);
            localStorage.setItem("FullPictureLoadOptions", jsonStr);
            if (options.zoom > 0) {
                gae(".FullPictureLoadImage:not(.small)").forEach(img => {
                    if (fancyboxBlackList() || options.fancybox !== 1) {
                        img.style.width = `${options.zoom * 10}%`;
                    } else {
                        let pE = img.parentNode;
                        if (pE.nodeName === "A") {
                            pE.style.width = `${options.zoom * 10}%`;
                        }
                    }
                });
                fun.showMsg(`${displayLanguage.str_60} ${options.zoom * 10}%`);
            }
        }
    };

    //增加圖片縮放級別
    const increaseZoom = () => {
        if (isFetching || !siteData.insertImg || ge("#FullPictureLoadOptionsShadowElement")) return;
        if (options.zoom > 1 && options.zoom <= 10 && ge(".FullPictureLoadImage:not(.small)")) {
            options.zoom = options.zoom += 1;
            if (options.zoom > 10) cancelZoom();
            ge("#FullPictureLoadOptionsZoom").value = options.zoom;
            let jsonStr = JSON.stringify(options);
            localStorage.setItem("FullPictureLoadOptions", jsonStr);
            if (options.zoom > 0 && options.zoom <= 10) {
                gae(".FullPictureLoadImage:not(.small)").forEach(img => {
                    if (fancyboxBlackList() || options.fancybox !== 1) {
                        img.style.width = `${options.zoom * 10}%`;
                    } else {
                        let pE = img.parentNode;
                        if (pE.nodeName === "A") {
                            pE.style.width = `${options.zoom * 10}%`;
                        }
                    }
                });
                fun.showMsg(`${displayLanguage.str_60} ${options.zoom * 10}%`);
            }
        }
    };

    let viewMode = 0;

    //切換圖片檢視模式
    const toggleImgMode = async () => {
        if (isFetching || !siteData.insertImg || ge("#FullPictureLoadOptionsShadowElement")) return;
        let column;
        if (gae(".FullPictureLoadImage").length < 1) {
            fun.showMsg("沒有圖片或只有影片");
            return;
        }
        if (ge(".FullPictureLoadImage:not(.small):not([style*=none])")) {
            if (ge("#FullPictureLoadImgBox")) {
                ge("#FullPictureLoadImgBox").style.display = "block";
                gae(".FullPictureLoadImage:not(.small),#FullPictureLoadEnd").forEach(e => {
                    if (e.tagName == "IMG") {
                        e.setAttribute("style", "display:none!important;");
                        if (options.zoom > 0) e.style.width = `${options.zoom * 10}%`;
                    } else {
                        e.setAttribute("style", "display:none!important;");
                    }
                });
                viewMode = 1;
                fun.showMsg(displayLanguage.str_93);
                return;
            }
            let width;
            if (options.column == 2 || siteData.category == "comic") {
                width = "48.8%";
                column = 2;
            } else if (options.column == 3) {
                width = "32%";
                column = 3;
            } else if (options.column == 5) {
                width = "19.2%";
                column = 5;
            } else if (options.column == 6) {
                width = "16%";
                column = 6;
            } else {
                column = 4;
                hasTouchEvents ? width = "24%" : width = "24.4%";
            }
            let imgBox = document.createElement("div");
            imgBox.id = "FullPictureLoadImgBox";
            imgBox.style.width = "100%";
            imgBox.style.maxWidth = "1400px";
            imgBox.style.backgroundColor = "#F6F6F6";
            imgBox.style.textAlign = "center";
            imgBox.style.display = "block";
            let srcArr = gae(".FullPictureLoadImage:not(.small)").map(e => e.dataset.src ?? e.src);
            //單雙對換
            //let srcArr2 = srcArr.map((item, index, arr) => { //圖片網址陣列單雙對換用於漫畫式閱讀
            //if (index % 2 == 0) { //圖片網址陣列裡的單數張
            //if ((index + 1) == arr.length) {
            //return arr[index]; //最後一張是單數張則返回此圖片網址
            //} else {
            //return arr[index + 1]; //是單數則返回後一個
            //}
            //} else { //圖片網址陣列裡的雙數張
            //return arr[index - 1]; //是雙數則返回前一個
            //}
            //});
            if (siteData.category == "comic" || (options.column == 2 && siteData.category == "hcomic")) {
                imgBox.style.direction = "rtl";
            }
            let padStart = String(srcArr.length).length;
            let blackList = fancyboxBlackList();
            srcArr.forEach((src, i) => {
                let a = document.createElement("a");
                if (options.fancybox == 1 && !blackList) {
                    a.id = "imgLocationSamll_" + i;
                    a.dataset.fancybox = "FullPictureLoadImageSmall";
                    thumbnailSrcArray.length > 0 && thumbnailSrcArray.length == srcArr.length ? a.dataset.thumb = thumbnailSrcArray[i] : a.dataset.thumb = src;
                    a.href = src;
                }
                let img = new Image();
                img.alt = `no.${i + 1}`;
                img.dataset.index = i;
                img.className = "FullPictureLoadImage small";
                if ("referrerpolicy" in siteData) {
                    img.setAttribute("referrerpolicy", siteData.referrerpolicy);
                }
                img.dataset.errorNum = 0;
                if ([2, 3].some(n => siteData.insertImg[1] == n)) {
                    img.src = loading_bak;
                    img.dataset.src = src;
                } else {
                    img.decoding = "async";
                    img.onload = () => {
                        img.classList.remove("error");
                    };
                    img.onerror = error => {
                        const num = Number(error.target.dataset.errorNum);
                        if (num < 10) {
                            error.target.dataset.errorNum = num + 1;
                        } else {
                            return;
                        }
                        error.target.classList.add("error");
                        setTimeout(() => {
                            error.target.src = error.target.src;
                        }, 1000);
                    };
                    img.src = src;
                }
                let item = document.createElement("div");
                item.style.width = width;
                //item.style.height = "auto";
                //item.style.float = "left";
                item.style.display = "inline-block";
                if (siteData.category == "comic" || (options.column == 2 && siteData.category == "hcomic")) {
                    item.style.verticalAlign = "middle"
                } else {
                    item.style.verticalAlign = "top"
                }
                item.style.padding = "0.1%";
                item.style.border = "1px solid #a0a0a0";
                if (options.fancybox == 1 && !blackList) {
                    a.append(img);
                    item.append(a);
                    imgBox.append(item);
                } else {
                    item.append(img);
                    imgBox.append(item);
                }
            });
            let tE = ge("#FullPictureLoadEnd");
            insertBefore(tE, imgBox);
            if (ge(".FullPictureLoadVideo")) {
                gae(".FullPictureLoadVideo").forEach(e => insertBefore(tE, e));
            }
            if (options.fancybox == 1 && !blackList && !isObject(siteData.fancybox)) {
                _unsafeWindow.Fancybox.bind("[data-fancybox='FullPictureLoadImageSmall']", FancyboxOptions);
            }
            //tE.parentNode.style.textAlign = "center";
            tE.parentNode.style.display = "block";
            gae(".FullPictureLoadImage:not(.small),#FullPictureLoadEnd").forEach(e => {
                if (e.tagName == "IMG") {
                    e.setAttribute("style", "display:none!important;");
                    if (options.zoom > 0) e.style.width = `${options.zoom * 10}%`;
                } else {
                    e.setAttribute("style", "display:none!important;");
                }
            });
            viewMode = 1;
            fun.showMsg(displayLanguage.str_93);
            let smallImgs = gae("img.FullPictureLoadImage.small");
            setTimeout(() => {
                smallImgs.forEach(img => fun.imagesObserver.observe(img));
            }, 1000);
            let imgDivs = gae("#FullPictureLoadImgBox>div");
            if (siteData.category == "comic") {
                let lastImg = imgDivs.at(-1);
                fun.comicNextObserver.observe(lastImg);
            }
            let imgsNum = 0;
            const scrollIntoViewOptions = {
                block: "center",
                inline: "center"
            };
            if (imgDivs[0].nextSibling && siteData.category == "comic") {
                await fun.checkImgStatus(imgDivs[0].nextSibling.querySelector("img").dataset.src, "Wait Loading...");
                if (imgDivs[0].offsetHeight < imgDivs[0].nextSibling.offsetHeight) {
                    imgDivs[0].style.height = (imgDivs[0].nextSibling.offsetHeight) + "px";
                    let img = imgDivs[0].querySelector("img");
                    await fun.checkImgStatus(img.dataset.src, "Wait Loading...");
                    let num = (imgDivs[0].offsetHeight - img.height) / 2;
                    img.style.marginTop = `${num}px`;
                }
                await fun.delay(1200, 0);
                imgDivs[0].scrollIntoView(scrollIntoViewOptions);
            }
            if (TurnOffImageNavigationShortcutKeys != 1) {
                document.addEventListener("keydown", async event => {
                    if (ge("#FullPictureLoadOptionsShadowElement,.fancybox-container,.fancybox__container,#mainShadowGallery")) return;
                    if (event.code === "ArrowUp") {
                        event.preventDefault();
                        if (imgsNum > 0 && viewMode == 1) {
                            imgsNum -= column;
                            imgDivs[imgsNum].scrollIntoView(scrollIntoViewOptions);
                        }
                    } else if (event.code === "ArrowDown") {
                        event.preventDefault();
                        if (imgsNum < imgDivs.length && imgsNum != imgDivs.length && viewMode == 1) {
                            imgsNum += column;
                            try {
                                if (imgDivs[imgsNum].nextSibling && siteData.category === "comic") {
                                    debug(`\n第${imgsNum + 1}張(左)高：${imgDivs[imgsNum].offsetHeight}\n第${imgsNum + 2}張(右)高：${imgDivs[imgsNum].nextSibling.offsetHeight}`);
                                    await fun.checkImgStatus(imgDivs[imgsNum].nextSibling.querySelector("img").dataset.src, "Wait Loading...");
                                    if (imgDivs[imgsNum].offsetHeight < imgDivs[imgsNum].nextSibling.offsetHeight) {
                                        imgDivs[imgsNum].style.height = (imgDivs[imgsNum].nextSibling.offsetHeight) + "px";
                                        let img = imgDivs[imgsNum].querySelector("img");
                                        await fun.checkImgStatus(img.dataset.src, "Wait Loading...");
                                        let num = (imgDivs[imgsNum].offsetHeight - img.height) / 2;
                                        debug(`\n修改了之後\n第${imgsNum + 1}張(左)高：${imgDivs[imgsNum].offsetHeight}\n第${imgsNum + 2}張(右)高：${imgDivs[imgsNum].nextSibling.offsetHeight}`);
                                        img.style.marginTop = `${num}px`;
                                    }
                                } else if (siteData.category === "comic") {
                                    imgDivs[imgsNum].src = imgDivs[imgsNum].dataset.src;
                                    await fun.checkImgStatus(imgDivs[imgsNum].dataset.src, "Wait Loading...");
                                }
                                imgDivs[imgsNum].scrollIntoView(scrollIntoViewOptions);
                                await fun.delay(200);
                                imgDivs[imgsNum].scrollIntoView(scrollIntoViewOptions);
                            } catch {
                                if (siteData.category === "comic" && siteData.next && siteData.insertImg) {
                                    if (isString(siteData.next)) {
                                        let next = fun.ge(siteData.next);
                                        if (next) {
                                            fun.showMsg(displayLanguage.str_95, 3000);
                                            //next.click();
                                            elementClick(next);
                                        } else {
                                            imgsNum = 0 - column;
                                            fun.showMsg(displayLanguage.str_96, 3000);
                                        }
                                    } else if (isFn(siteData.next)) {
                                        let next = await siteData.next();
                                        if (next) {
                                            fun.showMsg(displayLanguage.str_95, 3000);
                                            location.href = next;
                                        } else {
                                            imgsNum = 0;
                                            fun.showMsg(displayLanguage.str_96, 3000);
                                        }
                                    }
                                } else {
                                    imgsNum = 0;
                                    imgDivs[0].scrollIntoView(scrollIntoViewOptions);
                                    fun.showMsg(displayLanguage.str_94);
                                }
                            }
                        }
                    } else if (event.code === "Delete" && (siteData.category === "comic" || (options.column == 2 && siteData.category === "hcomic"))) {
                        if (imgDivs[0].style.display === "none") {
                            imgDivs[0].style.display = "inline-block";
                        } else {
                            imgDivs[0].style.display = "none";
                        }
                    } else {
                        imgsNum = 0 - column;
                    }
                });
            }
        } else if (ge(".FullPictureLoadImage.small")) {
            ge("#FullPictureLoadImgBox").style.display = "none";
            gae(".FullPictureLoadImage:not(.small),#FullPictureLoadEnd").forEach(e => e.removeAttribute("style"));
            if (options.zoom > 0) {
                gae(".FullPictureLoadImage:not(.small)").forEach(img => (img.style.width = `${options.zoom * 10}%`));
            }
            viewMode = 0;
            fun.showMsg(displayLanguage.str_92);
        }
    };

    const newTabViewLightGallery = localStorage.getItem("newTabViewLightGallery") ?? 0;

    //新分頁空白頁檢視圖片
    const newTabView = async () => {

        if (isFetching || "eye" in siteData && siteData.eye === 0) return;

        let newWindowData = localStorage.getItem("newWindowData");
        if (newWindowData) {
            newWindowData = JSON.parse(newWindowData);
        } else {
            localStorage.setItem("newWindowData", '{"ViewMode":0}');
            newWindowData = {
                "ViewMode": 0
            }
        }

        let imgSrcs;
        if ("SPA" in siteData) {
            let selector = siteData.capture ?? siteData.imgs;
            imgSrcs = await getImgs(selector);
        } else if (!("capture" in siteData)) {
            globalImgArray.length > 0 ? imgSrcs = globalImgArray : imgSrcs = await getImgs(siteData.imgs);
        } else {
            captureSrcArray.length > 0 ? imgSrcs = captureSrcArray : imgSrcs = await getImgs(siteData.imgs);
        }

        if (!!imgSrcs?.length && imgSrcs.length > 0) {

            let newWindow;
            let dom;
            try {
                newWindow = _unsafeWindow.open("about:blank", "_blank");
                dom = newWindow.document;
            } catch {
                alert("An error occurred\nUnable to use window.open()");
                return;
            }
            dom.write(`
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, shrink-to-fit=no">
        <title>${customTitle ?? document.title}</title>
    </head>
    <body style="text-align: center;">
        <div id="imgBox"></div>
    </body>
</html>
            `);

            newWindow.fun = fun;
            newWindow.hasTouchEvents = hasTouchEvents;
            newWindow.newWindowData = newWindowData;
            newWindow.imgViewIndex = -1;
            newWindow.category = siteData.category;
            newWindow.newImgs = imgSrcs;
            newWindow.menuLanguage = displayLanguage.galleryMenu;

            const newWindowStyle = dom.createElement("style");
            newWindowStyle.id = "newWindowStyle";
            newWindowStyle.type = "text/css";
            newWindowStyle.innerHTML = `
body {
    background-color: #333;
    display: block;
    margin: 0px;
}
#FixedMenu {
    text-align: center;
    font-family: Arial, sans-serif;
    font-size: 14px;
    color: #000000;
    width: 122px;
    height: auto;
    padding: 5px 5px 2px 5px;
    position: fixed;
    left: ${hasTouchEvents ? "0px" : "-128px"};
    bottom: 0px;
    border: #ccc 1px solid;
    border-radius: 3px;
    background-color: #fff;
    z-index: 2;
}
#FixedMenu:hover {
  left: 0px;
}
.FixedMenuitem {
    width: 110px;
    height: 24px;
    line-height: 24px;
    overflow: hidden;
    font-size: 14px;
    border: #ccc 1px solid;
    background-color: #f6f6f6;
    padding: 0 5px 0 5px;
    margin: 0 2px 3px 0;
    cursor: pointer;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.FixedMenuitem.active {
    color: #fff;
    background: #1790E6;
}
img.default {
    vertical-align: middle;
    width: auto;
    height: auto;
    border: solid #fff;
}
img.single {
    width: auto;
    height: auto;
    max-width: 99%;
    max-height: 99vh;
    display: block;
    margin: 0 auto;
    border: solid #fff;
}
img.scroll {
    width: 100%;
    height: auto;
    max-width: 800px;
    display: block;
    margin: 0 auto;
    border: unset !important;
}
img.small {
    display: inline-block;
    vertical-align: middle;
    width: auto;
    height: auto;
    max-width: 31.8%;
    max-height: 33vh;
    border: solid #fff;
}
.viewer-backdrop {
    background-color: rgba(0,0,0,.94)!important;
}
`;
            dom.head.append(newWindowStyle);

            if (newTabViewLightGallery == 0) {
                const fancyboxStyle = dom.createElement("style");
                fancyboxStyle.id = "FancyboxStyle";
                fancyboxStyle.type = "text/css";
                fancyboxStyle.innerHTML = FancyboxV5Css;
                dom.head.append(fancyboxStyle);

                const JF_code = JqueryJS + FancyboxV5JS + `
var scrollIntoViewOptions = {
    block: "center",
    behavior: "smooth",
    inline: "center"
};

var FancyboxOptions = {};

if (hasTouchEvents) {
    FancyboxOptions = {
        idle: false,
        Images: {
            Panzoom: {
                maxScale: 2
            }
        },
        Thumbs: {
            showOnStart: false
        },
        Toolbar: {
            display: {
                left: ["infobar"],
                middle: ["flipX", "flipY"],
                right: ["iterateZoom", "slideshow", "thumbs", "close"]
            }
        },
        on: {
            done: (fancybox, slide) => {
                let slideIndex = slide.index;
                let imgs = [...document.querySelectorAll("img")];
                if (newWindowData.ViewMode != 4) {
                    imgs.forEach(e => (e.style.border = ""));
                }
                if (fancybox.isCurrentSlide(slide)) {
                    imgViewIndex = slideIndex;
                    if (newWindowData.ViewMode != 4) {
                        imgs[slideIndex].style.border = "solid #32a1ce";
                    }
                    imgs[slideIndex].scrollIntoView(scrollIntoViewOptions);
                } else {
                    imgViewIndex = fancybox.getSlide().index;
                    if (newWindowData.ViewMode != 4) {
                        imgs[slideIndex].style.border = "solid #32a1ce";
                    }
                    imgs[fancybox.getSlide().index].scrollIntoView(scrollIntoViewOptions);
                }
            },
            close: fancybox => {
                document.body.classList.remove("hide-scrollbar");
                let slideIndex = fancybox.getSlide().index;
                imgViewIndex = slideIndex;
                let imgs = [...document.querySelectorAll("img")];
                if (newWindowData.ViewMode != 4) {
                    imgs.forEach(e => (e.style.border = ""));
                    imgs[slideIndex].style.border = "solid #32a1ce";
                }
                imgs[slideIndex].scrollIntoView(scrollIntoViewOptions);
            }
        }
    }
} else {
    FancyboxOptions = {
        idle: false,
        wheel: ${FancyboxWheelOptions === 0 ? '"slide"' : '"zoom"'},
        Images: {
            Panzoom: {
                maxScale: 2
            }
        },
        Thumbs: {
            showOnStart: false
        },
        Toolbar: {
            display: {
                left: ["infobar"],
                middle: ["iterateZoom", "toggle1to1", "rotateCCW", "rotateCW", "flipX", "flipY", "fitX", "fitY", "reset"],
                right: ["download", "slideshow", "fullscreen", "thumbs", "close"]
            }
        },
        on: {
            done: (fancybox, slide) => {
                let slideIndex = slide.index;
                let imgs = [...document.querySelectorAll("img")];
                imgs.forEach(e => (e.style.border = ""));
                if (fancybox.isCurrentSlide(slide)) {
                    imgViewIndex = slideIndex;
                    imgs[slideIndex].style.border = "solid #32a1ce";
                    imgs[slideIndex].scrollIntoView(scrollIntoViewOptions);
                } else {
                    imgViewIndex = fancybox.getSlide().index;
                    imgs[slideIndex].style.border = "solid #32a1ce";
                    imgs[fancybox.getSlide().index].scrollIntoView(scrollIntoViewOptions);
                }
            },
            close: fancybox => {
                document.body.classList.remove("hide-scrollbar");
                let slideIndex = fancybox.getSlide().index;
                imgViewIndex = slideIndex;
                let imgs = [...document.querySelectorAll("img")];
                imgs.forEach(e => (e.style.border = ""));
                imgs[slideIndex].style.border = "solid #32a1ce";
                imgs[slideIndex].scrollIntoView(scrollIntoViewOptions);
            }
        }
    }
}

function setFancybox() {
    switch (navigator.language) {
        case "zh-TW":
        case "zh-HK":
        case "zh-Hant-TW":
        case "zh-Hant-HK":
            Fancybox.defaults.l10n = {
                PANUP: "上移",
                PANDOWN: "下移",
                PANLEFT: "左移",
                PANRIGHT: "右移",
                ZOOMIN: "放大",
                ZOOMOUT: "縮小",
                TOGGLEZOOM: "切換縮放等級",
                TOGGLE1TO1: "切換縮放等級",
                ITERATEZOOM: "切換縮放等級",
                ROTATECCW: "逆時針旋轉",
                ROTATECW: "順時針旋轉",
                FLIPX: "水平翻轉",
                FLIPY: "垂直翻轉",
                FITX: "水平適應",
                FITY: "垂直適應",
                RESET: "重設",
                TOGGLEFS: "切換全螢幕",
                CLOSE: "關閉",
                NEXT: "下一個",
                PREV: "上一個",
                MODAL: "使用 ESC 鍵關閉",
                ERROR: "發生了錯誤，請稍後再試",
                IMAGE_ERROR: "找不到圖像",
                ELEMENT_NOT_FOUND: "找不到 HTML 元素",
                AJAX_NOT_FOUND: "載入 AJAX 時出錯: 未找到",
                AJAX_FORBIDDEN: "載入 AJAX 時出錯: 被阻止",
                IFRAME_ERROR: "載入頁面出錯",
                TOGGLE_ZOOM: "切換縮放等級",
                TOGGLE_THUMBS: "切換縮圖",
                TOGGLE_SLIDESHOW: "切換幻燈片",
                TOGGLE_FULLSCREEN: "切換全螢幕",
                DOWNLOAD: "下載"
            };
            break;
        case "zh":
        case "zh-CN":
        case "zh-Hans-CN":
            Fancybox.defaults.l10n = {
                PANUP: "上移",
                PANDOWN: "下移",
                PANLEFT: "左移",
                PANRIGHT: "右移",
                ZOOMIN: "放大",
                ZOOMOUT: "缩小",
                TOGGLEZOOM: "切换缩放级别",
                TOGGLE1TO1: "切换缩放级别",
                ITERATEZOOM: "切换缩放级别",
                ROTATECCW: "逆时针旋转",
                ROTATECW: "顺时针旋转",
                FLIPX: "水平翻转",
                FLIPY: "垂直翻转",
                FITX: "水平适应",
                FITY: "垂直适应",
                RESET: "重置",
                TOGGLEFS: "切换全屏",
                CLOSE: "关闭",
                NEXT: "下一个",
                PREV: "上一个",
                MODAL: "使用 ESC 键关闭",
                ERROR: "发生了错误，请稍后再试",
                IMAGE_ERROR: "找不到图像",
                ELEMENT_NOT_FOUND: "找不到 HTML 元素",
                AJAX_NOT_FOUND: "载入 AJAX 时出错: 未找到",
                AJAX_FORBIDDEN: "载入 AJAX 时出错: 被阻止",
                IFRAME_ERROR: "加载页面出错",
                TOGGLE_ZOOM: "切换缩放级别",
                TOGGLE_THUMBS: "切换缩略图",
                TOGGLE_SLIDESHOW: "切换幻灯片",
                TOGGLE_FULLSCREEN: "切换全屏",
                DOWNLOAD: "下载"
            };
            break;
    }
    Fancybox.bind("[data-fancybox]", FancyboxOptions);
}
`;

                //受限於Content Security Policy (CSP) 內容安全政策
                //const jQueryScript = dom.createElement("script");
                //jQueryScript.id = "jQueryScript";
                //jQueryScript.type = "text/javascript";
                //jQueryScript.innerHTML = JF_code;
                //dom.body.append(jQueryScript);
                _GM_addElement(dom.body, "script", {
                    textContent: JF_code
                });

                const newWindowScriptCode = `
function addFixedMenu() {
    let menuDiv = document.createElement("div");
    menuDiv.id = "FixedMenu";
    const menuObj = [{
        id: "MenuScrollItem",
        text: menuLanguage.webtoon,
        cfn: () => scrollImageLayout()
    }, {
        id: "MenuRTLItem",
        text: menuLanguage.rtl,
        cfn: () => rtlImageLayout()
    }, {
        id: "MenuSmallItem",
        text: menuLanguage.small,
        cfn: () => smallImageLayout()
    }, {
        id: "MenuSinglePageItem",
        text: menuLanguage.single,
        cfn: () => singleImageLayout()
    }, {
        id: "MenuDefaultItem",
        text: menuLanguage.default,
        cfn: () => defaultImageLayout()
    }];
    const createMenu = obj => {
        let item = document.createElement("div");
        item.id = obj.id;
        item.className = "FixedMenuitem";
        item.innerText = obj.text;
        item.oncontextmenu = () => false;
        if (!!obj.cfn) item.addEventListener("click", obj.cfn);
        menuDiv.append(item);
    };
    menuObj.forEach(obj => createMenu(obj));
    document.body.append(menuDiv);
}
addFixedMenu();

if (hasTouchEvents) {
    let menu = document.querySelector("#FixedMenu");
    menu.style.display = "none";
    let lastScrollTop = 0;
    let scroll = "";
    document.addEventListener("scroll", event => {
        if (document.querySelector(".fancybox__container")) return;
        let st = event.srcElement.scrollingElement.scrollTop;
        if (st > lastScrollTop) {
            scroll = "down";
            menu.style.display = "none";
            lastScrollTop = st;
        } else if (st < lastScrollTop - 20) {
            scroll = "up";
            menu.style.display = "";
            lastScrollTop = st;
        }
    });
}

document.addEventListener("keydown", event => {
    if (document.querySelector(".fancybox__container")) return;
    if (event.code === "Numpad0" || event.key === "0") return defaultImageLayout();
    if (event.code === "Numpad1" || event.key === "1") return singleImageLayout();
    if (event.code === "Numpad2" || event.key === "2") return smallImageLayout();
    if (event.code === "Numpad3" || event.key === "3") return rtlImageLayout();
    if (event.code === "Numpad4" || event.key === "4") return scrollImageLayout();
});

document.addEventListener("keydown", event => {
    if (document.querySelector(".fancybox__container")) return;
    const scrollIntoViewOptions = {
        block: "center",
        inline: "center"
    };
    const imgs = [...document.querySelectorAll("img")];
    if (event.code === "KeyR" && newWindowData.ViewMode == 2) {
        let box = document.querySelector("#imgBox");
        if (box.style.direction == "rtl") {
            box.style.direction = "ltr";
        } else {
            box.style.direction = "rtl";
        }
    }
    if (["KeyW", "KeyA", "ArrowUp", "ArrowLeft"].some(k => k === event.code) && imgViewIndex >= 0) {
        event.preventDefault();
        imgViewIndex--;
        if (imgViewIndex < 0) imgViewIndex = imgs.length - 1;
        if (newWindowData.ViewMode != 4) {
            imgs.forEach(e => (e.style.border = ""));
            imgs[imgViewIndex].style.border = "solid #32a1ce";
        }
        imgs[imgViewIndex].scrollIntoView(scrollIntoViewOptions);
    } else if (["KeyS", "KeyD", "ArrowDown", "ArrowRight"].some(k => k === event.code) && imgViewIndex <= imgs.length - 1) {
        event.preventDefault();
        imgViewIndex++;
        if (imgViewIndex > imgs.length - 1 && category === "comic") {
            return window.close();
        } else if (imgViewIndex > imgs.length - 1) {
            imgViewIndex = 0;
        }
        if (newWindowData.ViewMode != 4) {
            imgs.forEach(e => (e.style.border = ""));
            imgs[imgViewIndex].style.border = "solid #32a1ce";
        }
        imgs[imgViewIndex].scrollIntoView(scrollIntoViewOptions);
    } else if (event.code === "Delete" && newWindowData.ViewMode === 3) {
        const hideE = [...document.querySelectorAll("#imgBox>*")][imgViewIndex];
        hideE.style.display = "none";
    } else if (event.code === "Enter" && newWindowData.ViewMode === 3) {
        [...document.querySelectorAll("#imgBox>*")].forEach(e => (e.style.display = ""));
    } else {
        imgViewIndex = -1;
    }
});

function loadImgs() {
    const imgs = [...document.querySelectorAll("img")];
    const oddNumberImgs = imgs.filter((img, index) => index % 2 == 0);
    const evenNumberImgs = imgs.filter((img, index) => index % 2 != 0);
    fun.singleThreadLoadImgs(oddNumberImgs);
    fun.singleThreadLoadImgs(evenNumberImgs);
}

function aspectRatio() {
    const verticalScreen = window.innerHeight / window.innerWidth > 1;
    const imgs = [...document.images];
    imgs.forEach(img => {
        if (verticalScreen && img.className === "default") {
            img.style.minWidth = "98vw";
            img.style.maxWidth = "98vw";
            img.style.minHeight = "";
            img.style.maxHeight = "";
        } else if (img.className === "default") {
            img.style.minHeight = "99vh";
            img.style.maxHeight = "99vh";
            img.style.minWidth = "";
            img.style.maxWidth = "98vw";
        }
    });
}

if (hasTouchEvents) {
    window.addEventListener("deviceorientation", () => {
        aspectRatio();
    });
} else {
    window.addEventListener("resize", () => {
        aspectRatio();
    });
}

function createImgElement(mode) {
    window.scrollTo({
        top: 0
    });
    if (newWindowData.ViewMode === 3) {
        document.querySelector("#imgBox").style.direction = "rtl";
    } else {
        document.querySelector("#imgBox").style.direction = "";
    }
    imgViewIndex = -1;
    [...document.querySelectorAll(".FixedMenuitem")].forEach(item => item.classList.remove("active"));
    document.querySelector("#imgBox").innerHTML = "";
    const imgElements = newImgs.map((src, i, arr) => {
        let a = document.createElement("a");
        a.href = src;
        a.dataset.fancybox = "gallery";
        a.target = "_blank";
        let img = document.createElement("img");
        img.className = mode;
        img.src = "${loading_bak}";
        img.dataset.src = src;
        a.append(img);
        return a;
    });
    document.querySelector("#imgBox").append(...imgElements);
    setFancybox();
    loadImgs();
    aspectRatio();
    setTimeout(() => {
        aspectRatio();
        [...document.images].forEach(img => fun.imagesObserver.observe(img));
    }, 1000);
}

function defaultImageLayout() {
    newWindowData.ViewMode = 0;
    localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
    createImgElement("default");
    document.querySelector("#MenuDefaultItem").classList.add("active");
}

function singleImageLayout() {
    newWindowData.ViewMode = 1;
    localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
    createImgElement("single");
    document.querySelector("#MenuSinglePageItem").classList.add("active");
}

function smallImageLayout() {
    newWindowData.ViewMode = 2;
    localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
    createImgElement("small");
    document.querySelector("#MenuSmallItem").classList.add("active");
}

function rtlImageLayout() {
    newWindowData.ViewMode = 3;
    localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
    createImgElement("default");
    document.querySelector("#MenuRTLItem").classList.add("active");
}

function scrollImageLayout() {
    newWindowData.ViewMode = 4;
    localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
    createImgElement("scroll");
    document.querySelector("#MenuScrollItem").classList.add("active");
}

if (newWindowData.ViewMode == 1) {
    singleImageLayout();
} else if (newWindowData.ViewMode == 2) {
    smallImageLayout();
} else if (newWindowData.ViewMode == 3) {
    rtlImageLayout();
} else if (newWindowData.ViewMode == 4) {
    scrollImageLayout();
} else {
    defaultImageLayout();
}

`;

                //受限於Content Security Policy (CSP) 內容安全政策
                //const newWindowScript = dom.createElement("script");
                //newWindowScript.id = "newWindowScript";
                //newWindowScript.type = "text/javascript";
                //newWindowScript.innerHTML = newWindowScriptCode;
                //dom.body.append(newWindowScript);
                _GM_addElement(dom.body, "script", {
                    textContent: newWindowScriptCode
                });

            } else {

                const ViewerStyle = dom.createElement("style");
                ViewerStyle.id = "ViewerStyle";
                ViewerStyle.type = "text/css";
                ViewerStyle.innerHTML = ViewerJsCss;
                dom.head.append(ViewerStyle);

                const VV_code = ViewerJs + `
var ViewerJsInstance = new Viewer(document.querySelector("#imgBox"), {
    url: "data-src"
});

document.addEventListener("viewed", event => {
    let slideIndex = event.detail.index;
    let imgs = [...document.querySelectorAll("img")];
    imgViewIndex = slideIndex;
    if (newWindowData.ViewMode != 4) {
        imgs.forEach(e => (e.style.border = ""));
        imgs[slideIndex].style.border = "solid #32a1ce";
    }
    imgs[slideIndex].scrollIntoView({
        block: "center",
        behavior: "smooth",
        inline: "center"
    });
});
`;

                //受限於Content Security Policy (CSP) 內容安全政策
                //const ViewerScript = dom.createElement("script");
                //ViewerScript.id = "ViewerScript";
                //ViewerScript.type = "text/javascript";
                //ViewerScript.innerHTML = VV_code;
                //dom.body.append(ViewerScript);
                _GM_addElement(dom.body, "script", {
                    textContent: VV_code
                });

                const newWindowScriptCode = `
function addFixedMenu() {
    let menuDiv = document.createElement("div");
    menuDiv.id = "FixedMenu";
    const menuObj = [{
        id: "MenuScrollItem",
        text: menuLanguage.webtoon,
        cfn: () => scrollImageLayout()
    }, {
        id: "MenuRTLItem",
        text: menuLanguage.rtl,
        cfn: () => rtlImageLayout()
    }, {
        id: "MenuSmallItem",
        text: menuLanguage.small,
        cfn: () => smallImageLayout()
    }, {
        id: "MenuSinglePageItem",
        text: menuLanguage.single,
        cfn: () => singleImageLayout()
    }, {
        id: "MenuDefaultItem",
        text: menuLanguage.default,
        cfn: () => defaultImageLayout()
    }];
    const createMenu = obj => {
        let item = document.createElement("div");
        item.id = obj.id;
        item.className = "FixedMenuitem";
        item.innerText = obj.text;
        item.oncontextmenu = () => false;
        if (!!obj.cfn) item.addEventListener("click", obj.cfn);
        menuDiv.append(item);
    };
    menuObj.forEach(obj => createMenu(obj));
    document.body.append(menuDiv);
}
addFixedMenu();

if (hasTouchEvents) {
    let menu = document.querySelector("#FixedMenu");
    menu.style.display = "none";
    let lastScrollTop = 0;
    let scroll = "";
    document.addEventListener("scroll", event => {
        if (document.querySelector(".viewer-container .viewer-canvas>img")) return;
        let st = event.srcElement.scrollingElement.scrollTop;
        if (st > lastScrollTop) {
            scroll = "down";
            menu.style.display = "none";
            lastScrollTop = st;
        } else if (st < lastScrollTop - 20) {
            scroll = "up";
            menu.style.display = "";
            lastScrollTop = st;
        }
    });
}

document.addEventListener("keydown", event => {
    if (document.querySelector(".viewer-container .viewer-canvas>img")) return;
    if (event.code === "Numpad0" || event.key === "0") return defaultImageLayout();
    if (event.code === "Numpad1" || event.key === "1") return singleImageLayout();
    if (event.code === "Numpad2" || event.key === "2") return smallImageLayout();
    if (event.code === "Numpad3" || event.key === "3") return rtlImageLayout();
    if (event.code === "Numpad4" || event.key === "4") return scrollImageLayout();
});

document.addEventListener("keydown", event => {
    if (document.querySelector(".viewer-container .viewer-canvas>img")) return;
    const scrollIntoViewOptions = {
        block: "center",
        inline: "center"
    };
    const imgs = [...document.querySelectorAll("img")];
    if (event.code === "KeyR" && newWindowData.ViewMode == 2) {
        let box = document.querySelector("#imgBox");
        if (box.style.direction == "rtl") {
            box.style.direction = "ltr";
        } else {
            box.style.direction = "rtl";
        }
    }
    if (["KeyW", "KeyA", "ArrowUp", "ArrowLeft"].some(k => k === event.code) && imgViewIndex >= 0) {
        event.preventDefault();
        imgViewIndex--;
        if (imgViewIndex < 0) imgViewIndex = imgs.length - 1;
        if (newWindowData.ViewMode != 4) {
            imgs.forEach(e => (e.style.border = ""));
            imgs[imgViewIndex].style.border = "solid #32a1ce";
        }
        imgs[imgViewIndex].scrollIntoView(scrollIntoViewOptions);
    } else if (["KeyS", "KeyD", "ArrowDown", "ArrowRight"].some(k => k === event.code) && imgViewIndex <= imgs.length - 1) {
        event.preventDefault();
        imgViewIndex++;
        if (imgViewIndex > imgs.length - 1 && category === "comic") {
            return window.close();
        } else if (imgViewIndex > imgs.length - 1) {
            imgViewIndex = 0;
        }
        if (newWindowData.ViewMode != 4) {
            imgs.forEach(e => (e.style.border = ""));
            imgs[imgViewIndex].style.border = "solid #32a1ce";
        }
        imgs[imgViewIndex].scrollIntoView(scrollIntoViewOptions);
    } else if (event.code === "Delete" && newWindowData.ViewMode === 3) {
        const hideE = [...document.querySelectorAll("#imgBox>*")][imgViewIndex];
        hideE.style.display = "none";
    } else if (event.code === "Enter" && newWindowData.ViewMode === 3) {
        [...document.querySelectorAll("#imgBox>*")].forEach(e => (e.style.display = ""));
    } else {
        imgViewIndex = -1;
    }
});

function loadImgs() {
    const imgs = [...document.querySelectorAll("img")];
    const oddNumberImgs = imgs.filter((img, index) => index % 2 == 0);
    const evenNumberImgs = imgs.filter((img, index) => index % 2 != 0);
    fun.singleThreadLoadImgs(oddNumberImgs);
    fun.singleThreadLoadImgs(evenNumberImgs);
}

function aspectRatio() {
    const verticalScreen = window.innerHeight / window.innerWidth > 1;
    const imgs = [...document.images];
    imgs.forEach(img => {
        if (verticalScreen && img.className === "default") {
            img.style.minWidth = "98vw";
            img.style.minHeight = "";
        } else if (img.className === "default") {
            img.style.minHeight = "99vh";
            img.style.minWidth = "";
        }
    });
}

if (hasTouchEvents) {
    window.addEventListener("deviceorientation", () => {
        aspectRatio();
    });
} else {
    window.addEventListener("resize", () => {
        aspectRatio();
    });
}

function createImgElement(mode) {
    window.scrollTo({
        top: 0
    });
    if (newWindowData.ViewMode === 3) {
        document.querySelector("#imgBox").style.direction = "rtl";
    } else {
        document.querySelector("#imgBox").style.direction = "";
    }
    imgViewIndex = -1;
    [...document.querySelectorAll(".FixedMenuitem")].forEach(item => item.classList.remove("active"));
    document.querySelector("#imgBox").innerHTML = "";
    const imgElements = newImgs.map((src, i, arr) => {
        let img = document.createElement("img");
        img.className = mode;
        img.src = "${loading_bak}";
        img.dataset.src = src;
        return img;
    });
    document.querySelector("#imgBox").append(...imgElements);
    ViewerJsInstance.update();
    loadImgs();
    aspectRatio();
    setTimeout(() => {
        aspectRatio();
        [...document.images].forEach(img => fun.imagesObserver.observe(img));
    }, 1000);
}

function defaultImageLayout() {
    newWindowData.ViewMode = 0;
    localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
    createImgElement("default");
    document.querySelector("#MenuDefaultItem").classList.add("active");
}

function singleImageLayout() {
    newWindowData.ViewMode = 1;
    localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
    createImgElement("single");
    document.querySelector("#MenuSinglePageItem").classList.add("active");
}

function smallImageLayout() {
    newWindowData.ViewMode = 2;
    localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
    createImgElement("small");
    document.querySelector("#MenuSmallItem").classList.add("active");
}

function rtlImageLayout() {
    newWindowData.ViewMode = 3;
    localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
    createImgElement("default");
    document.querySelector("#MenuRTLItem").classList.add("active");
}

function scrollImageLayout() {
    newWindowData.ViewMode = 4;
    localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
    createImgElement("scroll");
    document.querySelector("#MenuScrollItem").classList.add("active");
}

if (newWindowData.ViewMode == 1) {
    singleImageLayout();
} else if (newWindowData.ViewMode == 2) {
    smallImageLayout();
} else if (newWindowData.ViewMode == 3) {
    rtlImageLayout();
} else if (newWindowData.ViewMode == 4) {
    scrollImageLayout();
} else {
    defaultImageLayout();
}

`;

                //受限於Content Security Policy (CSP) 內容安全政策
                //const newWindowScript = dom.createElement("script");
                //newWindowScript.id = "newWindowScript";
                //newWindowScript.type = "text/javascript";
                //newWindowScript.innerHTML = newWindowScriptCode;
                //dom.body.append(newWindowScript);
                _GM_addElement(dom.body, "script", {
                    textContent: newWindowScriptCode
                });

            }
        } else {
            alert("No Image.");
            return;
        }
    };

    //創建影子畫廊
    const createShadowGallery = async () => {

        if (hasTouchEvents) return;

        if (ge("#mainShadowGallery")) {
            ge("#mainShadowGallery").remove();
        }

        let newWindowData = localStorage.getItem("newWindowData");
        if (newWindowData) {
            newWindowData = JSON.parse(newWindowData);
        } else {
            localStorage.setItem("newWindowData", '{"ViewMode":0}');
            newWindowData = {
                "ViewMode": 0
            }
        }

        let srcs;
        if ("SPA" in siteData) {
            let selector = siteData.capture ?? siteData.imgs;
            srcs = await getImgs(selector);
        } else if (!("capture" in siteData)) {
            globalImgArray.length > 0 ? srcs = globalImgArray : srcs = await getImgs(siteData.imgs);
        } else {
            captureSrcArray.length > 0 ? srcs = captureSrcArray : srcs = await getImgs(siteData.imgs);
        }

        if (srcs.length < 1) return;

        let imgViewIndex = -1;

        const scrollIntoViewOptions = {
            block: "center",
            inline: "center"
        };

        const mainHtml = '<div id="mainShadowGallery" style="overflow: clip !important;display: initial !important;position: fixed !important;z-index: 2147483647 !important;"></div>';
        document.body.insertAdjacentHTML("beforeend", mainHtml);

        const mainShadowGallery = ge("#mainShadowGallery");
        const shadow = mainShadowGallery.attachShadow({
            mode: "closed"
        });

        const hideSelector = "body>*:not(#mainShadowGallery,script,[id^=Full],[class^=Full],#comicRead,#toast,#fab,#ehvp-base,[id^='pagetual'],[class^='pagetual'],[id^='pv-'],[class^='pv-gallery'],[id^=Autopage])";
        gae(hideSelector).forEach(e => (e.style.display = "none"));

        const closeGallery = () => {
            _unsafeWindow.removeEventListener("keydown", kEvent);
            gae(hideSelector).forEach(e => (e.style.display = ""));
            ge("#overflowYHidden")?.remove();
            mainShadowGallery?.remove();
        };

        const kEvent = (event) => {
            if (ge(".fancybox__container")) return;
            const imgs = [...shadow.querySelectorAll("img")];
            if (event.code === "Escape") return closeGallery();
            if (event.code === "Numpad0" || event.key === "0") return defaultImageLayout();
            if (event.code === "Numpad1" || event.key === "1") return singleImageLayout();
            if (event.code === "Numpad2" || event.key === "2") return smallImageLayout();
            if (event.code === "Numpad3" || event.key === "3") return rtlImageLayout();
            if (event.code === "Numpad4" || event.key === "4") return webtoonImageLayout();
            if (event.code === "KeyN") {
                let next = shadow.querySelector("#next a");
                if (next) {
                    next.click();
                }
            }
            if (event.code === "KeyR" && newWindowData.ViewMode == 2) {
                let box = shadow.querySelector("#imgBox");
                if (box.style.direction == "rtl") {
                    box.style.direction = "ltr";
                } else {
                    box.style.direction = "rtl";
                }
            }
            if (["KeyW", "KeyA", "ArrowUp", "ArrowLeft"].some(k => k === event.code) && imgViewIndex >= 0) {
                event.preventDefault();
                imgViewIndex--;
                if (imgs[imgViewIndex] === undefined) {
                    imgViewIndex = imgs.length - 1;
                }
                if (newWindowData.ViewMode != 4) {
                    imgs.forEach(e => (e.style.border = ""));
                    imgs[imgViewIndex].style.border = "solid #32a1ce";
                }
                imgs[imgViewIndex].scrollIntoView(scrollIntoViewOptions);
            } else if (["KeyS", "KeyD", "ArrowDown", "ArrowRight"].some(k => k === event.code) && imgViewIndex <= imgs.length - 1) {
                event.preventDefault();
                imgViewIndex++;
                let next = shadow.querySelector("#next");
                if (imgs[imgViewIndex] === undefined && next) {
                    next.scrollIntoView(scrollIntoViewOptions);
                } else if (imgs[imgViewIndex] === undefined) {
                    imgViewIndex = 0;
                }
                if (newWindowData.ViewMode != 4) {
                    imgs.forEach(e => (e.style.border = ""));
                    imgs[imgViewIndex].style.border = "solid #32a1ce";
                }
                imgs[imgViewIndex].scrollIntoView(scrollIntoViewOptions);
            } else if (event.code === "Delete" && newWindowData.ViewMode === 3) {
                const hideE = [...shadow.querySelectorAll("img")][imgViewIndex];
                hideE.style.display = "none";
            } else if (event.code === "Enter" && newWindowData.ViewMode === 3) {
                [...shadow.querySelectorAll("img")].forEach(e => (e.style.display = ""));
            } else {
                imgViewIndex = -1;
            }
        };
        _unsafeWindow.addEventListener("keydown", kEvent);

        fun.css(`
html,body {
    overflow-y: hidden !important;
}
        `, "overflowYHidden");

        const style = createStyle(`
p {
    display: block;
    padding: 0;
    margin: 0;
}
#FixedMenu {
    text-align: center;
    font-family: Arial, sans-serif;
    font-size: 14px;
    color: #000000;
    width: 122px;
    height: auto;
    padding: 5px 5px 2px 5px;
    position: fixed;
    left: -128px;
    bottom: 0px;
    border: #ccc 1px solid;
    border-radius: 3px;
    background-color: #fff;
    z-index: 2147483647;
}
#FixedMenu:hover {
  left: 0px;
}
.FixedMenuitem {
    width: 110px;
    height: 24px;
    line-height: 24px;
    overflow: hidden;
    font-size: 14px;
    border: #ccc 1px solid;
    background-color: #f6f6f6;
    padding: 0 5px 0 5px;
    margin: 0 2px 3px 0;
    cursor: pointer;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.FixedMenuitem.active {
    color: #fff;
    background: #1790E6;
}
img.default {
    vertical-align: middle;
    width: auto;
    object-fit: contain;
    min-height: 99vh;
    max-height: 99vh;
    max-width: 99%;
    border: solid #fff;
    background-color: #fff;
}
img.single {
    width: auto;
    height: auto;
    max-width: 99%;
    max-height: 99vh;
    display: block;
    margin: 0 auto;
    border: solid #fff;
}
img.webtoon {
    width: 100%;
    height: auto;
    max-width: 800px;
    display: block;
    margin: 0 auto;
    border: unset !important;
}
img.small {
    display: inline-block;
    vertical-align: middle;
    width: auto;
    height: auto;
    max-width: 31.8%;
    max-height: 33vh;
    border: solid #fff;
}
#next {
    display: block;
    padding: 10px 0;
    text-align: center;
    background-color: #F6F6F6;
}
#next a {
    display: block;
    color: rgb(0, 0, 0);
    font-size: 26px;
    line-height: 50px;
    height: 50px;
    text-align: center;
    text-decoration: unset !important;
}
        `);
        shadow.appendChild(style);

        const mainElement = document.createElement("div");
        mainElement.id = "shadowGallery";

        Object.assign(mainElement.style, {
            left: "0",
            right: "0",
            top: "0",
            bottom: "0",
            width: "100vw",
            height: "100vh",
            margin: "auto",
            padding: "0",
            position: "fixed",
            opacity: "1",
            zIndex: "2147483647",
            backgroundColor: "#333",
            color: "#222",
            fontSize: "14px",
            overflowY: "scroll",
            textAlign: "center"
        });
        shadow.appendChild(mainElement);

        function loadImgs() {
            const imgs = [...shadow.querySelectorAll("img")];
            const oddNumberImgs = imgs.filter((img, index) => index % 2 == 0);
            const evenNumberImgs = imgs.filter((img, index) => index % 2 != 0);
            fun.singleThreadLoadImgs(oddNumberImgs);
            fun.singleThreadLoadImgs(evenNumberImgs);
        }

        function createGalleryElement(mode) {
            mainElement.scrollTo({
                top: 0
            });
            imgViewIndex = -1;
            [...shadow.querySelectorAll(".FixedMenuitem")].forEach(item => item.classList.remove("active"));
            mainElement.innerHTML = "";
            const imgElements = srcs.map(src => {
                let img = new Image();
                img.className = mode;
                img.src = loading_bak;
                img.dataset.src = src;
                img.dataset.fancybox = "gallery";
                return img;
            });
            const p = document.createElement("p");
            p.id = "imgBox";
            if (newWindowData.ViewMode === 3) {
                p.style.direction = "rtl";
            }
            if (siteData.category.includes("comic") && newWindowData.ViewMode != 4) {
                p.style.padding = "0 6%";
                p.style.margin = "0 auto";
            }
            p.append(...imgElements);
            mainElement.append(p);
            loadImgs();
            setTimeout(() => {
                [...mainElement.querySelectorAll("img")].forEach(img => fun.imagesObserver.observe(img));
            }, 1000);
            if (!("fancybox" in siteData) && options.fancybox == 1) {
                _unsafeWindow.Fancybox.bind(mainElement, "img", {
                    idle: false,
                    wheel: FancyboxWheelOptions === 0 ? "slide" : "zoom",
                    Images: {
                        Panzoom: {
                            maxScale: 2
                        }
                    },
                    Thumbs: {
                        showOnStart: false
                    },
                    Toolbar: {
                        display: {
                            left: ["infobar"],
                            middle: ["iterateZoom", "toggle1to1", "rotateCCW", "rotateCW", "flipX", "flipY", "fitX", "fitY", "reset"],
                            right: ["slideshow", "fullscreen", "thumbs", "close"]
                        }
                    },
                    on: {
                        done: (fancybox, slide) => {
                            let slideIndex = slide.index;
                            let imgs = [...mainElement.querySelectorAll("img")];
                            imgs.forEach(e => (e.style.border = ""));
                            if (fancybox.isCurrentSlide(slide)) {
                                imgViewIndex = slideIndex;
                                imgs[slideIndex].style.border = "solid #32a1ce";
                                imgs[slideIndex].scrollIntoView(scrollIntoViewOptions);
                            } else {
                                imgViewIndex = fancybox.getSlide().index;
                                imgs[slideIndex].style.border = "solid #32a1ce";
                                imgs[fancybox.getSlide().index].scrollIntoView(scrollIntoViewOptions);
                            }
                        },
                        close: fancybox => {
                            document.body.classList.remove("hide-scrollbar");
                            let slideIndex = fancybox.getSlide().index;
                            imgViewIndex = slideIndex;
                            let imgs = [...mainElement.querySelectorAll("img")];
                            imgs.forEach(e => (e.style.border = ""));
                            imgs[slideIndex].style.border = "solid #32a1ce";
                            imgs[slideIndex].scrollIntoView(scrollIntoViewOptions);
                        }
                    }
                });
            }
            if (nextLink) {
                let html = `<div id="next"><a href="${nextLink}">${siteData.category?.includes("comic") ? displayLanguage.str_143 : displayLanguage.str_144}（ N ）</a></div>`;
                mainElement.insertAdjacentHTML("beforeend", html);
            }
        }

        function addFixedMenu() {
            let menuDiv = document.createElement("div");
            menuDiv.id = "FixedMenu";
            const menuObj = [{
                id: "MenuCancelItem",
                text: displayLanguage.str_142,
                cfn: () => closeGallery()
            }, {
                id: "MenuWebtoonItem",
                text: displayLanguage.galleryMenu.webtoon,
                cfn: () => webtoonImageLayout()
            }, {
                id: "MenuRTLItem",
                text: displayLanguage.galleryMenu.rtl,
                cfn: () => rtlImageLayout()
            }, {
                id: "MenuSmallItem",
                text: displayLanguage.galleryMenu.small,
                cfn: () => smallImageLayout()
            }, {
                id: "MenuSinglePageItem",
                text: displayLanguage.galleryMenu.single,
                cfn: () => singleImageLayout()
            }, {
                id: "MenuDefaultItem",
                text: displayLanguage.galleryMenu.default,
                cfn: () => defaultImageLayout()
            }];
            const createMenu = obj => {
                let item = document.createElement("div");
                item.id = obj.id;
                item.className = "FixedMenuitem";
                item.innerText = obj.text;
                item.oncontextmenu = () => false;
                if (!!obj.cfn) item.addEventListener("click", obj.cfn);
                menuDiv.append(item);
            };
            menuObj.forEach(obj => createMenu(obj));
            shadow.append(menuDiv);
        }
        addFixedMenu();

        function defaultImageLayout() {
            newWindowData.ViewMode = 0;
            localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
            createGalleryElement("default");
            shadow.querySelector("#MenuDefaultItem").classList.add("active");
        }

        function singleImageLayout() {
            newWindowData.ViewMode = 1;
            localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
            createGalleryElement("single");
            shadow.querySelector("#MenuSinglePageItem").classList.add("active");
        }

        function smallImageLayout() {
            newWindowData.ViewMode = 2;
            localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
            createGalleryElement("small");
            shadow.querySelector("#MenuSmallItem").classList.add("active");
        }

        function rtlImageLayout() {
            newWindowData.ViewMode = 3;
            localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
            createGalleryElement("default");
            shadow.querySelector("#MenuRTLItem").classList.add("active");
        }

        function webtoonImageLayout() {
            newWindowData.ViewMode = 4;
            localStorage.setItem("newWindowData", JSON.stringify(newWindowData));
            createGalleryElement("webtoon");
            shadow.querySelector("#MenuWebtoonItem").classList.add("active");
        }

        if (newWindowData.ViewMode == 1) {
            singleImageLayout();
        } else if (newWindowData.ViewMode == 2) {
            smallImageLayout();
        } else if (newWindowData.ViewMode == 3) {
            rtlImageLayout();
        } else if (newWindowData.ViewMode == 4) {
            webtoonImageLayout();
        } else {
            defaultImageLayout();
        }

    };

    //創建新分頁檢視眼睛圖示按鈕和圖片數量元素
    const addnewTabViewButton = () => {
        if (ge("#FullPictureLoadEye")) return;
        isAddnewTabViewButton = true;
        let img = new Image();
        img.id = "FullPictureLoadEye";
        img.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEV0lEQVRYhb2XTWwTRxTHTShJ4NDegJ4rwbGngkpVxCGQ3loVcaIlEuJU2h5oKyFQtXaigojj3VAQErTlQxQCiRMaoF+HxjhNjD/XxVISbGPHxEAc3MR8xo5xeMybZNezn7HAYaUXWZuZ9/vPmzdv3loaGjbVEltGzGL2cMDV2ELC+81hYX9zmO9sFgVfS1iIN4t83Opv81u9bV2cp/X7fX0HPtz6zSd1C/mTn4XgnIurbxH5bwkwRYDAGoGDLeDQmsincA7OrUSA7nsAWNIS4psIeEwNNoPj+/I4/jaZvwN9VRaO+edw9HAdmXxGD1w5XDH+Ahc8vqIiOOdrXU3g/mrBy/MEH/o2h8/tt7facEZEiI2EYvvpnoeFc4sFl/2QE4QshOMBkAVgwi02XPYXcHw+f/pqy6EnGfta4OjP35b+WvjyLVkAntlK4IfEI9AVvwKe8QD4snHoGbtFzU9+ezJB6E7+DvbIMXP4vC/O2/odFYD7Qf6RNBt8auQCDN2PQiFfAN//D6Fh4AYs7XXDkt/m7I3eftgyEIHg5GOYLc3CzdwtOBPvNI+k3z7a1LS91oLl1Qj+Y+RnGMnGoFgoUjt7OwN1l/tlsNrwf+fHJgBmgVrsQRKODp803sagfZ0Fa7se3Bm/Ck+mn8pwXHmtCZwVEZp6LIsoFGeoL90cEvm9FjwWavjfKZcMRnteeg6bSYgliPNOFtx37sPbX9lg5W4r1J9wKkQ0DkYoHOdJPtzp63oJ3IERCLDw/rRXA8/mi4o9T+SeQG7qEby7cRusXf8xrNnwqUIE5kR2ekbhB60/7VGcHqyOFvInKsF7E39q4LiSwexDxQrf2XMA1m3eTuGSrfyCK4+5dA0GMpMaAejvr7SrnG8h/iZJQj4qhYYVIMHRPCoBGHYWTgWQdxK8prsPBsYndRejEWANtAXZ5MAwsXA03AIMqyQAw41hl+BrPtgK9T91y/BlPX2QeTStgf877tNcUOT2szvV2em+d10hAG0Lk4SSCAw7Gguv6f4HGt2iBu66O6hXnDos2EbpldfOxBXIFwuyACwyhjWAgS+/5ILAxJQMn3k2Az2jf+hXRzyG2MMZ1fYjQ79ANJeQRWCR0YhQwc+N3pXhWBHRh1Fptont71mwHNpCDk0pZu107CKM5OJQKpVokcFzTnOC2fOP3GG68nw+D8OTMTrH9GIS+VHaquG9bHQZqa2VXDTO5FUYzATAOxGFzuQIdBHz3BuiheZirBcO3Tha2c34n7BH0Qnpdb2V3GovdUWT1WPfqWjHsHt9LXD0EW7/TNMP0ms5JPy62HCy+rO6PeFCTWl1OiM+KDWlmp6QbcvnP7uqvXLvD5H2VSxcbsnUD/thUqWesMPhcSxXww0FyDlBuldyV6Re4TsgxSacGm4qQBq86+DON7GBtPrtyYrhopDAc84eNT24bg4YDcaKiT0c1m/81sM9neslhOjcb/puL5ZX9ceoERzfvwApT7t293t0AgAAAABJRU5ErkJggg==";
        img.oncontextmenu = () => false;
        img.addEventListener("click", () => newTabView());
        document.body.append(img);
        let menuDiv = document.createElement("div");
        menuDiv.id = "FullPictureLoadFixedMenuB";
        const menuObj = [{
            id: "FullPictureLoadCaptureNum",
            text: "0",
            cfn: async () => {
                let srcArr;
                if (siteData.category === "lazyLoad") {
                    srcArr = captureSrcArray;
                } else {
                    let selector = siteData.capture ?? siteData.imgs;
                    srcArr = await getImgs(selector);
                }
                if (srcArr.length == 0) return showMsg(displayLanguage.str_44);
                let titleText = customTitle ?? document.title;
                let picNum = srcArr.length;
                let fileName = `${titleText}[${picNum}P]_MediaURLs.txt`;
                if (videoSrcArray.length > 0) {
                    srcArr = srcArr.concat(videoSrcArray);
                    fileName = `${titleText}[${picNum}P + ${videoSrcArray.length}V]_MediaURLs.txt`;
                }
                let str = srcArr.join("\n");
                let blob = new Blob([str], {
                    type: "text/plain",
                    endings: "native"
                });
                saveData(blob, fileName);
                showMsg(`${displayLanguage.str_101}`);
            }
        }];
        const createMenu = obj => {
            let item = document.createElement("div");
            if (!!obj.id) item.id = obj.id;
            item.innerText = obj.text;
            item.oncontextmenu = () => false;
            if (!!obj.cfn) item.addEventListener("click", obj.cfn);
            if (!!obj.mfn) item.addEventListener("mousedown", obj.mfn);
            menuDiv.append(item);
        };
        [...menuObj].forEach(obj => createMenu(obj));
        document.body.append(menuDiv);
    };

    //清除圖片縮放級別
    const cancelZoom = () => {
        if (isFetching || !siteData.insertImg || ge("#FullPictureLoadOptionsShadowElement")) return;
        if (ge(".FullPictureLoadImage:not(.small)")) {
            options.zoom = 0;
            ge("#FullPictureLoadOptionsZoom").value = options.zoom;
            let jsonStr = JSON.stringify(options);
            localStorage.setItem("FullPictureLoadOptions", jsonStr);
            gae(".FullPictureLoadImage:not(.small)").forEach(img => {
                img.style.width = "";
                let pE = img.parentNode;
                if (pE.nodeName === "A") {
                    pE.style.width = "";
                }
            });
            fun.showMsg(displayLanguage.str_61);
        }
    };

    //創建腳本在頁面左下的功能按鈕
    const addFullPictureLoadButton = () => {
        if (ge("#FullPictureLoad")) return;
        isAddFullPictureLoadButton = true;
        let img = new Image();
        img.id = "FullPictureLoad";
        img.className = "FullPictureLoadFixedBtn";
        img.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAACFlBMVEVEREAAAABEREBEREBUXnFTXXBTXG5VXXJUXHFUW28grV0grV0hrl4hrV0hq10iql0oomAhrV2BiZiAiJd/h5V+h5Uiq16OlaKNlKGMk5+Mkp+KkZ89p28nq2Hp9+/n9u3t8PHs7/Dg9Ojp7O3d8+bo7O3o6+zn6+3m6uzl6evX8OLV8OHi5ujh5efO7dze4uTe4ePb3+LY3eDX29/W2t7T19u35Mu25Mr01lqw4sbz1Vmv4sXA1NWs4cPw0lnv0lmp4MCk3r3ozVuh3buu0M6vz83kylugysefycadx8OexsOdxsOF0qZ6zp5pyJK1p2S0pmOsoGRWv4SLlKEmuZpBsnc5t3AmuJmQi2ont5kmtpcptJiOiWg0tWwytGorr5Yqr5YsrpUws2kqrJRNmpMusmcsqpIuqJMssWkqsWQqsGUnsGUzoI8lsGGAf2wkr2Ekr2BzfI0irl8hrl5ye4x9fGogrWAhrV03mIwgrF9xeoshq10gql8dp2ccp2cdpmkcnIUanIYcm4QRoIUTnoURn4QdmYM/h4QcmIMSnYMXmoMWmoIbloIclYJDgYIYl4EaloAek4IfkYFqbm0jjoBqbW0ni4ApiX9Hd35kanBjaXBhaG9MbnpOanhOaXhPaHdDbXZHanZGanRLZnZJZ3RSYnVMZXRPY3ROY3VSYXRQYnRTYHRVX3NUX3RSYHNUXnNTXXJTXXFME6frAAAAHnRSTlMAAAUGZ2dqeHh7lrzNzc7O3O/09PT19fn5+fn5/f4hZOrvAAAB1UlEQVR42oWTzYoTQRSFv6q6RqOoqBicTTCKK1cOURBGBV9AXCgu9Vl8FF/ApcshI4qKgrtBByZK0HSGmMxkMrF/qq6LTjptErGX5zu3uu65dY3TYCh9ag2UNPsfjnmpZW4MgBbaIy/6PCnxvL7gEQhJ7AruAqifcZ96EHDX67ngKgCJn/k3B6AC1O9Cj9ri/2mBsZIf9iLi0rMFDhhjbO6NsL9er+CQG3pYMT+XuGVmuH9SzPF7S/UONDfUHl44/6A24wfdpMgsSO6tP52ffxjF6cUT056MBdxf/cVRzP6PiQG8KhZMJedhewik0QT43RsBQUEwLufZx53Td85p7wCwEu+Fs6qAGBsA1aO3XUZbG/EAsAJJlM/MGgOoDltdYNTam3JIOlVmOaj2N/sAjHf9lGdBqwACmmi0FU/TOWxfEY483o/9tcuvJBXU+90PaZHf5NtVFzTL+N7bqD4GS9DRmzl3btJWk2WFIKradqX8LfudU3VKBuKd0vwc+HCjNDJhkJXfB6jq+wZJBSAT5MmKN1/la7sJ+jmsiyQrdkZo9N819FNnXcSZFTt1rGnXhl/G6a26IP/YOXczi5prQmFY3snbkzNSXGyBV+28p+nNF+vn2h97PvHD5SOHkgAAAABJRU5ErkJggg==";
        img.setAttribute("title", displayLanguage.str_47);
        img.oncontextmenu = () => false;
        img.addEventListener("click", () => {
            fastDownload = false;
            DownloadFn();
        });
        img.addEventListener("mousedown", (event) => {
            if (event.button == 1) {
                event.preventDefault();
                exportImgSrcText();
            }
            if (event.button == 2) {
                event.preventDefault();
                copyImgSrcText();
            }
        });
        document.body.append(img);
        if ("insertImg" in siteData) {
            let img2 = new Image();
            img2.id = "FullPictureLoadGoToFirstImage";
            img2.className = "FullPictureLoadFixedBtn";
            img2.style.display = "none";
            img2.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAA7BJREFUWEetl29olVUYwH/n3jvvGpp/WtNlIdoK1MJazBwO0/mlZqFgRCgGfZC7TTbwixqbMnPiHIIwmdd9MYiMhD4o6gqirenGsoF/MLfaahFz3a1Shlv7e9/3yHnnxXvv3vee96574P3wcp4/v/M8z3nOOQK3o67Oj2+0EMlWPKxEkg3Wp0YIQQiTLgQXCWc0UV4+4ca00Ao1HM3G8B0CuROYp5WfFhgGcQ5v+FMCFaFEOs4An1WlM+6vRIq9QIZLx/Fiowh5kvSJaj6uGrezYQ9QX7sEYV4A3pyl43i160jPNvbsG4ifmAlwquZVfDQieV7nfJE/3RJ5MGG7uFh1wT3CFFF24E70RCyAWrnH7NA5V0pH8gooW51r2Tp19wYHO1qROmIFYXryoiPxBEDlfCz9B13YlULd+s0EVq6JcdfQdZvytu/1EHCdp8Y3RmriCUDwWDVSVOgq1s55RMc1hJBHKfmkUulNA1hbzftbomp3Wnk8sEuIUbxGjtqi0wCnjwdBFjut3q3z5CIhzlC6v0Qw3eH+cWoyyTpPAmKYcMazgtM17wCNTk0iUc51Re8iHUWC+pozCAJ2DeL/OHcVCUmDIFjTgmRDPMDB3HzUl4qxq7mR87//MtOU4KpKQTfwUvTsgjl+QrtK8Qr9WeUGsG2gn02Xz9uJ9iiAYWBu9OwbmYtp36YOv9SM/8JTZH1ez5RpxhscsQWYP8fPnzsCZPh8MQph0+THv0MULFlqS9Y60M+6rGx8Hk/M/Nlf71B87Ts7HQtgRgqUZNkruZxYt/Fxp4JJ0+Cj5m/IeXoB1XkFtgCVHa10Dt2ndu0GcuYvtGR+fvAvO5uu0DV03yEFDkWopNVqtix70QrdFz2d9D4cYt+atQkBam//ZEFvXrqMCcPg2sA95zxaReiwDZ203AC4rhxrGyZoRHaGUgoARdpWHA+RQoDHrVh50BxG0RApBAhSeqDU9XEcgUgRwAhpRg67KwaTupAoiD2rX+dk/ibbOtvb3kz93Zv6GhTiECX7jyjBpK9k+Yufo+W9D22dvHXpK9oH/9IAiDYyxwr5oGoyFkD9ubyUfln4Lu+veDnG0de93exouqxz3kdaOE+FPiI4q2u5OqRKVr3G2y8st+x82/cHwc5bGDLRvVj0Ycgtia/lEayUP0xEG2nh7dErd45AZCY1T7MRhKjlmbHjkZzH50h/4M/ucfoQOEeacdhu1dEQeoCItPPzXCVenTj9SNmJ4BLeRS0EAlP6/QiPAMXOipDq4W0VAAAAAElFTkSuQmCC";
            img2.setAttribute("title", displayLanguage.str_62);
            img2.addEventListener("click", () => goToImg("first"));
            document.body.append(img2);
            let img3 = new Image();
            img3.id = "FullPictureLoadGoToLastImage";
            img3.className = "FullPictureLoadFixedBtn";
            img3.style.display = "none";
            img3.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAA6lJREFUWEfFl21IlWcYx3/3c46vayG1lq5i5FablrQFbon2oiOYzlgfgsY2gvrinCQEwzayklI69SVQPMdDH4KJMkZBoxf6kpkYVjK32FqgtiGbs8xczeF0O5477ucknZfnzaPUDc+n57ru/++67uu6XwROh9+fwNToRiRbECIbWAIsBQQwhGCIILcRfEcgtY3KykknUytn63GibjH/uw4CnwDz7cyf/B8D0YIrcIiyfUNWPuYA39Yk8iBlL1JWAfMcCkebjSPkcZIna9lZM2E0hzGAHrX7NMj8OIWj3a4jta1UVN2N/hEL0ODJwSXOg1xmJu4SgvLst3h/2XLd5OLvv+H75UempDTnFfxBgBJ2f/lTuFEkQCjybitx5dxaVMq2zJURYqd+7eXjtnPWCVMQQS03PBNPAdSaj6S02aU9b/ErXNnykaHQxrPf0HXvT7tVu07KxKbpmngK4Du6HykP2XlXrHqb43mFhmZ7ui7TeOsHuylAyDrKv6pWhiGAUKv1O6n2qjXvUJtbYChS3d3JsZs37AFgHNfU66pFQwBejxcod+I5RwAq9iY+31suqK9Pwj1+H3jx2QIwRiB1kcDrKQYuOBFXNnOXAV2xRNDoaUJQ9lwAJH6Bz3MFyQYzgPXpS0lyubg0OIDaZpxkIHN+Gp+uyCZB0zg/cIdrwybHgaBDLUEvsCIaICttIS1FH7B6wUv6r/5Hf1F1o4PstIWWXdD/90O+LiwmUXPpfgr6i2vtNPzcYxRjnwIYM2q/pvWb2fVGToRTIBjUoylIVydx7Oi8O8i6lzNwa1rEz/FAgFdb/Tz6L+aE/scQQKVueEcFL7gTnJaGrV3emRa+H7kXbacDGC7B5dLt5JtEaqsWZaAOqYxmLw9jM9BnWoTbX3uT5sKSmWoZ2h/u6UJ9MUMvQpM2VFtkff57lGWtmRWE//ZNKq9e0osxZuhtaLERzRbCUjxEU2K7FccL4UD8yVasOLxHfSA/M8v1TCEciIcdRkrVX5fBlH4cp84Wwpl49HGsVH1HapFin1XF2WXCobjBhUSpnqxJ5t/kduDdeCAci4PJlUypNh5LRwt2I/UXj+lQmTicW8DuVWt1m4ZbPezv7jRutfBZLC+l04bqWu7mgh2EMl+QlKx7jU4avjkiA3B0LZ92UZkQwTN2yzGDHWoGD5PpWVVNTCRVI8Ueq+6wgYjzaRY+q96i7gMg1ePU0b0RmIPHaXRooctrEZIP0chCkgH6p0bcz/PHF6yIkDG/FFMAAAAASUVORK5CYII=";
            img3.setAttribute("title", displayLanguage.str_63);
            img3.addEventListener("click", () => goToImg("last"));
            img3.addEventListener("mousedown", (event) => {
                if (event.button == 2) {
                    event.preventDefault();
                    exportImgSrcText();
                }
            });
            document.body.append(img3);
        }
    };

    //創建浮動選單
    const addFullPictureLoadFixedMenu = () => {
        if (ge("#FullPictureLoadFixedMenu")) return;
        isAddFullPictureLoadFixedMenu = true;
        let menuDiv = document.createElement("div");
        menuDiv.id = "FullPictureLoadFixedMenu";
        menuDiv.style.width = "54px";
        const menuObj = [{
            text: displayLanguage.str_141,
            show: 0,
            cfn: event => {
                event.preventDefault();
                createShadowGallery();
            }
        }, {
            name: "newTabView",
            text: displayLanguage.str_106,
            show: 0,
            cfn: event => {
                event.preventDefault();
                newTabView();
            }
        }, {
            text: displayLanguage.str_107,
            show: 0,
            cfn: event => {
                event.preventDefault();
                fastDownload = true;
                DownloadFn();
            }
        }, {
            text: displayLanguage.str_104,
            show: 0,
            cfn: event => {
                event.preventDefault();
                exportImgSrcText();
            }
        }, {
            text: displayLanguage.str_105,
            show: 0,
            cfn: event => {
                event.preventDefault();
                copyImgSrcTextB();
            }
        }, {
            name: "zoom",
            text: displayLanguage.str_88,
            show: 0,
            cfn: event => {
                event.preventDefault();
                fun.clearSetTimeout();
                cancelZoom();
            }
        }, {
            name: "zoom",
            text: displayLanguage.str_87,
            show: 0,
            cfn: event => {
                event.preventDefault();
                fun.clearSetTimeout();
                reduceZoom();
            },
            mfn: event => {
                if (event.button == 2) {
                    event.preventDefault();
                    increaseZoom();
                }
            }
        }, {
            name: "toggleImgMode",
            text: displayLanguage.str_86,
            show: 0,
            cfn: event => {
                event.preventDefault();
                toggleImgMode();
            }
        }, {
            text: displayLanguage.str_85,
            show: 0,
            cfn: event => {
                event.preventDefault();
                createPictureLoadOptionsShadowElement();
            }
        }, {
            text: displayLanguage.str_133,
            show: 1
        }];
        const createMenu = obj => {
            if (!siteData.insertImg && ["toggleImgMode", "zoom"].some(e => e === obj.name) || "newTabView" === obj.name && siteData.eye === 0) return;
            let item = document.createElement("div");
            item.innerText = obj.text;
            if (obj.show === 0) item.classList.add("itemNoShow");
            item.oncontextmenu = () => false;
            if (!!obj.cfn) item.addEventListener("click", obj.cfn);
            if (!!obj.mfn) item.addEventListener("mousedown", obj.mfn);
            menuDiv.append(item);
        };
        [...menuObj].forEach(obj => createMenu(obj));
        document.body.append(menuDiv);
        menuDiv.onmouseenter = () => {
            fun.gae(".itemNoShow", menuDiv).forEach(e => {
                e.classList.remove("itemNoShow");
                e.classList.add("itemShow");
                e.width = "112px";
            });
            menuDiv.style.width = "124px";
            menuDiv.lastChild.width = "112px";
            menuDiv.lastChild.innerText = displayLanguage.str_134;
        }
        menuDiv.onmouseleave = () => {
            fun.gae(".itemShow", menuDiv).forEach(e => {
                e.classList.remove("itemShow");
                e.classList.add("itemNoShow");
                e.width = "36px";
            });
            menuDiv.style.width = "46px";
            menuDiv.lastChild.width = "36px";
            menuDiv.lastChild.innerText = displayLanguage.str_133;
        }
    };

    //元素模擬點擊
    const elementClick = ele => {
        const dispatchTouchEvent = (_ele, type) => {
            let touchEvent = document.createEvent("UIEvent");
            touchEvent.initUIEvent(type, true, true);
            touchEvent.touches = [{
                clientX: 1,
                clientY: 1
            }];
            _ele.dispatchEvent(touchEvent);
        };
        if (hasTouchEvents) {
            dispatchTouchEvent(ele, "touchstart");
            dispatchTouchEvent(ele, "touchend");
        }
        ele.click();
    };

    //創建返回頂部按鈕
    const addReturnTopButton = () => {
        let a = document.createElement("a");
        a.href = "javascript:void(0);";
        a.setAttribute("onclick", "window.scrollTo({top:0,behavior:'smooth'});");
        let img = new Image();
        img.src = "data:image/png;base64,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";
        img.className = "FullPictureLoadImageReturnTop";
        a.append(img);
        document.body.append(a);
    };

    //列出寫真站
    const nsfw1Data = customData.filter(item => item.category === "nsfw1");
    //列出老司機站
    const nsfw2Data = customData.filter(item => item.category === "nsfw2");
    //列出漫畫站
    const comicData = customData.filter(item => item.category === "comic");
    //列出H漫站
    const hcomicData = customData.filter(item => item.category === "hcomic");
    //列出LazyLoad模式規則
    const lazyLoadData = customData.filter(item => item.category === "lazyLoad");
    //列出自動翻頁
    const autoPagerData = customData.filter(item => item.category.includes("autoPager"));
    //列出去廣告規則
    const AD_Data = customData.filter(item => item.category === "ad");
    //列出未分類
    const noneData = customData.filter(item => item.category === "none");

    //創建腳本選項元素
    const createPictureLoadOptionsShadowElement = () => {

        const mainHtml = '<div id="FullPictureLoadOptionsShadowElement" style="display: initial !important;position: fixed !important;z-index: 2147483647 !important;"></div>';
        document.body.insertAdjacentHTML("beforeend", mainHtml);

        const mainElement = document.querySelector("#FullPictureLoadOptionsShadowElement");
        const shadow = mainElement.attachShadow({
            mode: "open"
        });

        const style = createStyle(`
#FullPictureLoadOptions {
    text-align: center;
    width: 360px !important;
    height: auto !important;
    position: fixed !important;
    top: ${hasTouchEvents ? "10%" : "20%"};
    left: 50%;
    margin-left: -180px;
    border: 1px solid #a0a0a0 !important;
    border-radius: 3px !important;
    box-shadow: -2px 2px 5px rgb(0 0 0 / 30%) !important;
    background-color: #FAFAFB;
    z-index: 2147483647 !important;
}

#FullPictureLoadOptions label, #FullPictureLoadOptions select {
    margin: 0px !important;
    padding: 0px !important;
}

#FullPictureLoadOptions select {
    border: 1px solid #a0a0a0 !important;
    background-color: transparent !important;
    border-radius: 0px !important;
    min-width: 60px !important;
    height: unset !important;
    -webkit-box-shadow: unset !important;
    box-shadow: unset !important;
    -webkit-appearance: auto !important;
    appearance: auto !important;
    background-image: unset !important;
    display: inline-block !important;
}

#FullPictureLoadOptions * {
    font: unset !important;
    font-family: Arial, sans-serif !important;
    font-size: 14px !important;
    color: black;
    float: none !important;
    line-height: 18px !important;
    margin-bottom: 4px !important;
    padding: 1px 4px !important;
    width: auto;
}

#FullPictureLoadOptions button {
    width: auto;
    min-width: 102px;
    max-width: 110px;
    min-height: unset !important;
    max-height: 24px !important;
    margin-left: 2px;
    margin-right: 2px;
    margin-bottom: 4px !important;
    display: inline-block;
    color: #000000 !important;
    border: 1px solid #a0a0a0 !important;
    background-color: transparent !important;
    border-radius: unset !important;
}

#FullPictureLoadOptions input {
    position: unset !important;
    opacity: 1 !important;
    pointer-events: auto !important;
    color: #000000 !important;
    height: 18px !important;
    border: 1px solid #a0a0a0 !important;
    border-radius: unset !important;
    background-color: transparent !important;
    outline: unset !important;
    display: unset !important;
    -webkit-appearance: auto !important;
}

#FullPictureLoadOptions p {
    text-align: center !important;
    margin-block-start: 0px !important;
    margin-block-end: 0px !important;
    margin-inline-start: 0px !important;
    margin-inline-end: 0px !important;
}

`);
        shadow.appendChild(style);

        const main = document.createElement("div");
        main.id = "FullPictureLoadOptions";
        const FullPictureLoadOptionsMainHtmlStr = `
<div style="width: 100%;">
    <p>${displayLanguage.str_68}</p>
</div>
<div style="width: 348px; display: flex;">
    <input id="FullPictureLoadOptionsIcon" type="checkbox" style="width: 14px; margin: 0 6px;">
    <label>${displayLanguage.str_69}</label>
</div>
<div id="FullPictureLoadAutoInsertImgDIV" style="width: 348px; display: flex;">
    <input id="FullPictureLoadAutoInsertImg" type="checkbox" style="width: 14px; margin: 0 6px;">
    <label>${displayLanguage.str_139}</label>
</div>
<div id="ShowFullPictureLoadFixedMenuDIV" style="width: 348px; display: flex;">
    <input id="ShowFullPictureLoadFixedMenu" type="checkbox" style="width: 14px; margin: 0 6px;">
    <label>※${displayLanguage.str_117}</label>
</div>
<div style="width: 348px; display: flex; margin-left: 6px;">
    <label>${displayLanguage.str_108}</label>
    <select id="FullPictureLoadOptionsMsgPos">
        ${Object.values(displayLanguage.str_109).map((v, i) => `<option value="${i}">${v}</option>`).join("")}
    </select>
</div>
<div style="width: 348px; display: flex;">
    <input id="FullPictureLoadOptionsConvert" type="checkbox" style="width: 14px; margin: 0 6px;">
    <label>${displayLanguage.str_110}</label>
</div>
<div style="width: 348px; display: flex; margin-left: 6px;">
    <label>${displayLanguage.str_70}</label>
    <select id="FullPictureLoadOptionsThreading">
        ${fun.arr(32, (_,i) => `<option value="${i + 1}">${i + 1}</option>`).join("")}
    </select>
</div>
<div style="width: 348px; display: flex;">
    <input id="FullPictureLoadOptionsZip" type="checkbox" style="width: 14px; margin: 0 6px;">
    <label>${displayLanguage.str_71}</label>
</div>
<div style="width: 348px; display: flex; margin-left: 6px;">
    <label>${displayLanguage.str_72}</label>
    <select id="FullPictureLoadOptionsExtension">
        ${["zip", "cbz"].map(v => `<option value="${v}">${v}</option>`).join("")}
    </select>
</div>
<div id="FullPictureLoadOptionsAutoDownloadDIV" style="width: 348px; display: flex;">
    <input id="FullPictureLoadOptionsAutoDownload" type="checkbox" style="width: 14px; margin: 0 6px;">
    <label>${displayLanguage.str_73}${displayLanguage.str_74}</label>
</div>
<div id="FullPictureLoadOptionsCountdownDIV" style="width: 348px; display: flex; margin-left: 6px;">
    <label>${displayLanguage.str_75}</label>
    <input id="FullPictureLoadOptionsCountdown" style="width: 60px; margin: 0 6px !important;">
</div>
<div id="FullPictureLoadOptionsComicDIV" style="width: 348px; display: none;">
    <input id="FullPictureLoadOptionsComic" type="checkbox" style="width: 14px; margin: 0 6px;">
    <label>${displayLanguage.str_76}</label>
</div>
<div id="FullPictureLoadOptionsDoubleDIV" style="width: 348px; display: flex;">
    <input id="FullPictureLoadOptionsDouble" type="checkbox" style="width: 14px; margin: 0 6px;">
    <label>${displayLanguage.str_77}</label>
</div>
<div style="width: 348px; display: flex;">
    <input id="FullPictureLoadOptionsFancybox" type="checkbox" style="width: 14px; margin: 0 6px;">
    <label>${displayLanguage.str_78}</label>
</div>
<div style="width: 348px; display: flex; margin-left: 6px;">
    <label>${displayLanguage.str_79}</label>
    <select id="FullPictureLoadOptionsZoom">
        ${fun.arr(11, (v, i) => `<option value="${i}">${i === 0 ? "Auto" : i + "0%"}</option>`).join("")}
    </select>
</div>
<div style="width: 348px; display: flex; margin-left: 6px;">
    <label>${displayLanguage.str_80}</label>
    <select id="FullPictureLoadOptionsColumn" title="${displayLanguage.str_81}">
        ${fun.arr(5, (v, i) => `<option value="${i + 2}">${i + 2}</option>`).join("")}
    </select>
</div>
<div style="width: 348px; display: flex;">
    <input id="FullPictureLoadOptionsviewMode" type="checkbox" style="width: 14px; margin: 0 6px;">
    <label>${displayLanguage.str_103}</label>
</div>
<div id="FullPictureLoadOptionsShadowGalleryModeDIV" style="width: 348px; display: flex;">
    <input id="FullPictureLoadOptionsShadowGalleryMode" type="checkbox" style="width: 14px; margin: 0 6px;">
    <label>${displayLanguage.str_140}</label>
</div>
<button id="FullPictureLoadOptionsCancelBtn">${displayLanguage.str_82}</button>
<button id="FullPictureLoadOptionsResetBtn">${displayLanguage.str_83}</button>
<button id="FullPictureLoadOptionsSaveBtn">${displayLanguage.str_84}</button>
`;
        main.innerHTML = FullPictureLoadOptionsMainHtmlStr;

        ge("#FullPictureLoadOptionsIcon", main).checked = options.icon == 1 ? true : false;
        ge("#FullPictureLoadAutoInsertImg", main).checked = options.autoInsert == 1 ? true : false;
        ge("#ShowFullPictureLoadFixedMenu", main).checked = _GM_getValue("ShowFullPictureLoadFixedMenu", 1) == 1 ? true : false;
        ge("#FullPictureLoadOptionsMsgPos", main).value = _GM_getValue("FullPictureLoadMsgPos", 0);
        ge("#FullPictureLoadOptionsThreading", main).value = options.threading;
        ge("#FullPictureLoadOptionsZip", main).checked = options.zip == 1 ? true : false;
        ge("#FullPictureLoadOptionsExtension", main).value = options.file_extension;
        ge("#FullPictureLoadOptionsConvert", main).checked = _GM_getValue("convertWebpToJpg", 1) == 1 ? true : false;
        ge("#FullPictureLoadOptionsAutoDownload", main).checked = options.autoDownload == 1 ? true : false;
        ge("#FullPictureLoadOptionsCountdown", main).value = options.autoDownloadCountdown;
        ge("#FullPictureLoadOptionsComic", main).checked = options.comic == 1 ? true : false;
        ge("#FullPictureLoadOptionsDouble", main).checked = options.doubleTouchNext == 1 ? true : false;
        if ("insertImg" in siteData) {
            const [, insertMode] = siteData.insertImg;
            if (![1, 2].some(n => n == insertMode)) {
                ge("#FullPictureLoadAutoInsertImgDIV", main).style.display = "none";
            }
        }
        if (!("insertImg" in siteData)) {
            ge("#FullPictureLoadAutoInsertImgDIV", main).style.display = "none";
        }
        if (hasTouchEvents) {
            ge("#ShowFullPictureLoadFixedMenuDIV", main).style.display = "none";
            ge("#FullPictureLoadOptionsShadowGalleryModeDIV", main).style.display = "none";
        }
        if ("SPA" in siteData) {
            ge("#FullPictureLoadOptionsShadowGalleryModeDIV", main).style.display = "none";
        }
        if (fancyboxBlackList()) {
            ge("#FullPictureLoadOptionsFancybox", main).checked = false;
            ge("#FullPictureLoadOptionsFancybox", main).style.display = "none";
        } else {
            ge("#FullPictureLoadOptionsFancybox", main).checked = options.fancybox == 1 ? true : false;
        }
        ge("#FullPictureLoadOptionsZoom", main).value = options.zoom;
        siteData.category == "comic" ? ge("#FullPictureLoadOptionsColumn", main).value = 2 : ge("#FullPictureLoadOptionsColumn", main).value = options.column;
        ge("#FullPictureLoadOptionsviewMode", main).checked = options.viewMode == 1 ? true : false;
        ge("#FullPictureLoadOptionsShadowGalleryMode", main).checked = options.shadowGallery == 1 ? true : false;
        if (comicSwitch) {
            ge("#FullPictureLoadOptionsComicDIV", main).style.display = "flex";
        }
        let autoDownload = siteData.autoDownload;
        if (hasTouchEvents && showOptions || !autoDownload && showOptions) {
            fun.gae("#FullPictureLoadOptionsAutoDownloadDIV,#FullPictureLoadOptionsCountdownDIV", main).forEach(e => (e.style.display = "none"));
        }
        if (!hasTouchEvents && showOptions || (hasTouchEvents && showOptions && !siteData.next)) {
            ge("#FullPictureLoadOptionsDoubleDIV", main).style.display = "none";
        }

        ge("#FullPictureLoadOptionsCancelBtn", main).addEventListener("click", () => {
            mainElement.remove();
        });
        ge("#FullPictureLoadOptionsResetBtn", main).addEventListener("click", event => {
            event.preventDefault();
            localStorage.removeItem("FullPictureLoadOptions");
            _GM_setValue("FullPictureLoadMsgPos", 0);
            _GM_setValue("convertWebpToJpg", 0);
            location.reload();
        });
        ge("#FullPictureLoadOptionsSaveBtn", main).addEventListener("click", event => {
            event.preventDefault();
            options.icon = ge("#FullPictureLoadOptionsIcon", main).checked == true ? 1 : 0;
            options.autoInsert = ge("#FullPictureLoadAutoInsertImg", main).checked == true ? 1 : 0;
            _GM_setValue("ShowFullPictureLoadFixedMenu", ge("#ShowFullPictureLoadFixedMenu", main).checked == true ? 1 : 0);
            _GM_setValue("FullPictureLoadMsgPos", ge("#FullPictureLoadOptionsMsgPos", main).value);
            options.threading = ge("#FullPictureLoadOptionsThreading", main).value;
            options.zip = ge("#FullPictureLoadOptionsZip", main).checked == true ? 1 : 0;
            options.file_extension = ge("#FullPictureLoadOptionsExtension", main).value;
            _GM_setValue("convertWebpToJpg", ge("#FullPictureLoadOptionsConvert", main).checked == true ? 1 : 0);
            options.comic = ge("#FullPictureLoadOptionsComic", main).checked == true ? 1 : 0;
            options.autoDownload = ge("#FullPictureLoadOptionsAutoDownload", main).checked == true ? 1 : 0;
            options.autoDownloadCountdown = ge("#FullPictureLoadOptionsCountdown", main).value;
            options.doubleTouchNext = ge("#FullPictureLoadOptionsDouble", main).checked == true ? 1 : 0;
            options.fancybox = ge("#FullPictureLoadOptionsFancybox", main).checked == true ? 1 : 0;
            options.zoom = ge("#FullPictureLoadOptionsZoom", main).value;
            options.column = ge("#FullPictureLoadOptionsColumn", main).value;
            options.viewMode = ge("#FullPictureLoadOptionsviewMode", main).checked == true ? 1 : 0;
            options.shadowGallery = ge("#FullPictureLoadOptionsShadowGalleryMode", main).checked == true ? 1 : 0;
            let jsonStr = JSON.stringify(options);
            localStorage.setItem("FullPictureLoadOptions", jsonStr);
            location.reload();
        });
        shadow.appendChild(main);
    };

    //腳本的CSS樣式
    let FullPictureLoadMsgPos = _GM_getValue("FullPictureLoadMsgPos", 0);

    let msgPosCss;
    if (FullPictureLoadMsgPos == 1) {
        msgPosCss = `
    top: 10px;
    left: 10px;
    `;
    } else if (FullPictureLoadMsgPos == 2) {
        msgPosCss = `
    top: 10px;
    right: 10px;
    `;
    } else if (FullPictureLoadMsgPos == 3) {
        msgPosCss = `
    bottom: 10px;
    left: 72px;
    `;
    } else if (FullPictureLoadMsgPos == 4) {
        msgPosCss = `
    bottom: 10px;
    right: 10px;
    `;
    } else {
        msgPosCss = `
    top: 30%;
    left: 50%;
    margin-left: -180px;
    `;
    }

    const favor_columns = hasTouchEvents ? "1fr 1fr 1fr" : "1fr 1fr 1fr 1fr";
    const FullPictureLoadStyle = `
.fancybox-container,.fancybox__container {
    z-index: 2147483647 !important;
}

.fancybox-image {
    opacity: 1 !important;
}

.FullPictureLoadImageReturnTop {
    position: fixed;
    right: 10px;
    bottom: 80px;
    width: 53px !important;
    height: 53px !important;
    border: unset;
    z-index: 99;
    opacity: 0.6;
}

#FullPictureLoad {
    bottom: 24px !important;
    display: block !important;
}

#FullPictureLoadGoToLastImage {
    bottom: 66px !important;
}

#FullPictureLoadGoToFirstImage {
    bottom: 108px !important;
}

.FullPictureLoadFixedBtn {
    position: fixed !important;
    left: 24px !important;
    width: 32px !important;
    height: 32px !important;
    border: unset !important;
    border-radius: unset !important;
    margin: unset !important;
    padding: unset !important;
    z-index: 2147483640 !important;
    cursor: pointer !important;
    pointer-events: auto !important;
    background: unset !important;
    min-width: unset !important;
    min-height: unset !important;
    opacity: 0.8 !important;
}

#FullPictureLoadEye {
    bottom: 24px !important;
    display: block !important;
    position: fixed !important;
    right: 24px !important;
    width: 32px !important;
    height: 32px !important;
    border-radius: unset !important;
    z-index: 2147483600 !important;
    opacity: 1 !important;
    cursor: pointer !important;
    pointer-events: auto !important;
}

#FullPictureLoadFixedMenu {
    text-align: center !important;
    font-family: Arial, sans-serif !important;
    font-size: 14px !important;
    color: #000000 !important;
    height: auto !important;
    padding: 5px 5px 2px 5px !important;
    position: fixed !important;
    left: 10px !important;
    bottom: 152px !important;
    border: #ccc 1px solid !important;
    border-radius: 3px !important;
    background-color: #fff !important;
    box-sizing: unset !important;
    opacity: 0.4;
    z-index: 2147483640 !important;
}

#FullPictureLoadFixedMenu > div, #FullPictureLoadFixedMenuB > div {
    height: 24px !important;
    line-height: 24px !important;
    overflow: hidden !important;
    font-size: 14px !important;
    text-shadow: unset !important;
    text-align: center !important;
    letter-spacing: unset !important;
    border: #ccc 1px solid !important;
    background-color: #f6f6f6 !important;
    padding: 0 5px 0 5px !important;
    margin: 0 2px 3px 0 !important;
    cursor: pointer !important;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

#FullPictureLoadFixedMenu:hover,
.FullPictureLoadFixedBtn:hover {
  opacity: 1 !important;
}

#FullPictureLoadFixedMenu .itemNoShow {
  display: none !important;
}

#FullPictureLoadFixedMenuB {
    text-align: center !important;
    font-family: Arial, sans-serif !important;
    font-size: 14px !important;
    color: #000000 !important;
    width: 112px !important;
    height: auto !important;
    padding: 5px 5px 2px 5px !important;
    position: fixed !important;
    right: 64px !important;
    bottom: 22px !important;
    border: #ccc 1px solid !important;
    border-radius: 3px !important;
    background-color: #fff !important;
    opacity: 1;
    z-index: 2147483600 !important;
    letter-spacing: unset !important;
}

.FullPictureLoadMsg {
    font-family: Arial, sans-serif !important;
    font-size: 24px;
    font-weight: bold;
    text-align: center;
    line-height: 50px;
    color: #ffffff;
    width: 360px;
    height: auto;
${msgPosCss}
    padding: 0px !important;
    background-color: #000;
    border: 1px solid #303030;
    border-radius: 10px;
    position: fixed;
    z-index: 2147483640;
    opacity: 0.7;
}

.FullPictureLoadImage:not(.small) {
    width: auto;
    height: auto;
    max-width: 100%;
    max-height: unset !important;
    display: block !important;
    float: unset !important;
    opacity: 1 !important;
    border: none !important;
    border-radius: unset !important;
    padding: 0 !important;
    margin: 0 auto !important;
    transition: unset !important;
    transform: unset !important;
}

.FullPictureLoadImage.small {
    width: auto;
    height: auto;
    max-width: 100% !important;
    max-height: 100% !important;
    min-height: 50x !important;
    display: block !important;
    float: unset !important;
    opacity: 1 !important;
    border: none !important;
    border-radius: unset !important;
    padding: 0 !important;
    margin: auto;
    transition: unset !important;
    transform: unset !important;
}

#FullPictureLoadImgBox {
    display: block;
    opacity: 1 !important;
    border: none !important;
    border-radius: unset !important;
    padding: 0 !important;
    margin: 0 auto 10Px !important;
}

#FullPictureLoadImgBox>div {
    height: auto;
}

a[data-fancybox=FullPictureLoadImageOriginal],a[data-fancybox=FullPictureLoadImageSmall] {
    position: unset !important;
    padding: 0 !important;
    margin: 0 auto!important;
    display: block !important;
}

#FullPictureLoadEnd {
    font-size: 20px;
    height: 30px;
    width: 100%;
    line-height: 30px;
    text-align: center !important;
    margin: 5px auto !important;
}

#FullPictureLoadEnd~*:not(h3,ul,.tags):not(#FullPictureLoadFixedMenu):not(#FullPictureLoadOptions):not(.FullPictureLoadMsg):not(.FullPictureLoadFixedBtn):not(a[href='javascript:void(0);']):not(.post-info):not(.post-tags):not(.article-tags):not(*[class^=fancybox]):not(div[tabindex]):not(.row):not(.text-center):not(.link-d):not(#myrating):not(.gallery-a):not(.pagination):not(div[class^=picnext]):not(a.zwf):not(p):not(.bo_nav) {
    display: none !important;
}

.FullPictureLoadLoading {
    font-size: 20px;
    text-align: center;
    height: 30px;
    line-height: 30px;
    margin: 5px auto !important;
    border: none !important;
}

.autoPagerTitle {
    width: auto;
    height: 30px;
    font-size: 18px;
    color: black;
    font-family: Arial, sans-serif !important;
    line-height: 29px;
    text-align: center;
    overflow: hidden;
    display: block;
    margin: 10px 5px;
    border: 1px solid #e0e0e0;
    background-color: #f0f0f0;
    background: -webkit-gradient(linear, 0 0, 0 100%, from(#f9f9f9), to(#f0f0f0));
    background: -moz-linear-gradient(top, #f9f9f9, #f0f0f0);
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.6);
    border-radius: 5px;
}

.autoPagerTitle.off {
    color: white;
    border: 1px solid #0e0e0e;
    background-color: #0f0f0f;
    background: -webkit-gradient(linear, 0 0, 0 100%, from(#9f9f9f), to(#0f0f0f));
    background: -moz-linear-gradient(top, #9f9f9f, #0f0f0f);
    box-shadow: 0 0 5px rgba(255, 255, 255, 0.6);
    border-radius: 5px;
}

.autoPagerTitle a:-webkit-any-link {
    font-family: Arial, sans-serif !important;
    color: black;
}

.autoPagerTitle.off a:-webkit-any-link {
    color: white;
}

.autoPagerLoading {
    width: auto;
    height: auto;
    max-width: 60px !important;
    max-height: 60px !important;
    display: block !important;
    opacity: 1 !important;
    border: none !important;
    border-radius: unset !important;
    padding: 0 !important;
    margin: 20px auto !important;
}

#FullPictureLoadOptionsButtonParentDiv {
    max-width: 100% !important;
    height: 80px !important;
}

.FullPictureLoadPageButtonTop {
    height: 24px;
    min-height: unset !important;
    padding: 1px !important;
    margin: 10px 0 10px 0 !important;
    border-radius: unset !important;
    appearance: auto;
    text-rendering: auto;
    color: black !important;
    letter-spacing: normal;
    word-spacing: normal;
    line-height: normal;
    font-size: 14px !important;
    font-weight: unset !important;
    text-transform: none;
    text-indent: 0px;
    text-shadow: none;
    display: inline-block !important;
    text-align: center;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    align-items: flex-start;
    cursor: default;
    box-sizing: border-box;
    background: unset !important;
    background-color: #F6F6F6 !important;
    border: 1px solid #a0a0a0 !important;
    cursor: pointer !important;
}

.FullPictureLoadPageButtonBottom {
    height: 24px;
    min-height: unset !important;
    padding: 1px !important;
    margin: 0 0 6px 0 !important;
    border-radius: unset !important;
    appearance: auto;
    text-rendering: auto;
    color: black !important;
    letter-spacing: normal;
    word-spacing: normal;
    line-height: normal;
    font-size: 14px !important;
    font-weight: unset !important;
    text-transform: none;
    text-indent: 0px;
    text-shadow: none;
    display: inline-block !important;
    text-align: center;
    align-items: flex-start;
    cursor: default;
    box-sizing: border-box;
    background: unset !important;
    background-color: #F6F6F6 !important;
    border: 1px solid #a0a0a0 !important;
    cursor: pointer !important;
}

#FullPictureLoadOptions button:hover,.FullPictureLoadPageButtonTop:hover,.FullPictureLoadPageButtonBottom:hover {
  color: black !important;
}

.viewer-open:not(.fancybox-active) {
    overflow: unset !important;
    padding-right: 0px !important;
}

.fancybox-infobar *,.fancybox__infobar,a[data-fancybox-download],a[data-fancybox-download]:hover,a[data-fancybox-download]:link,a[data-fancybox-download]:visited,a[data-fancybox-download]:active {
    color: white;
}

a[data-fancybox]:hover {
    opacity: 1 !important;
}

#FullPictureLoadFavorUl {
    width: 100%;
    background-color: transparent !important;
    padding-left: 0;
    list-style-type: none !important;
    display: grid !important;
    grid-template-columns: ${favor_columns};
    padding: 2px;
    list-style: none !important;
    margin: 0;
    border: 0;
    font: inherit !important;
    vertical-align: baseline;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 0px;
    margin-inline-end: 0px;
}

.favor-item {
    float: left !important;
    width: unset !important;
    height: unset !important;
    min-height: unset !important;
    max-height: 44px !important;
    margin:0px 10px 10px 0px !important;
    position: unset !important;
    line-height: 26px !important;
    padding: 3px !important;
    font: unset !important;
    font-family: Arial, sans-serif !important;
    font-size: 16px !important;
    text-align: center !important;
    border-radius: 8px !important;
    white-space: nowrap !important;
    list-style: none !important;
}

.favor-item a {
    display: block !important;
    text-align: center !important;
    text-decoration: unset !important;
    font: unset !important;
    font-family: Arial, sans-serif !important;
    font-size: 16px !important;
    background-color: unset !important;
    border-color: unset !important;
    margin:0 !important;
}

#editFavorTextarea {
    display:block !important;
    height: 30em;
    resize: both !important;
    overflow: auto !important;
    background-color: unset !important;
    color: #000000 !important;
    border-color: #000000 !important;
    margin: 0px auto !important;
    padding: 5px !important;
    max-width: unset !important;
    max-height: unset !important;
}

#editFavorDiv {
    text-align: center !important;
    background-color: #FAFAFB;
    margin: 0 0 6px 0 !important;
    padding-top: 10px !important;
}

.editFavorButton {
    min-width: 70px;
    line-height: 25px;
    margin: 5px !important;
    float: none !important;
    padding: 0 !important;
    color: #000000 !important;
    border: 1px solid #a0a0a0 !important;
    background-color: transparent !important;
}
                `;

    let noGoToFirstImage = _GM_getValue("noGoToFirstImage", 0);
    let TurnOffImageNavigationShortcutKeys = _GM_getValue("TurnOffImageNavigationShortcutKeys", 0);
    let ShowFullPictureLoadFixedMenu = _GM_getValue("ShowFullPictureLoadFixedMenu", 1);
    let autoScrollAllElement = _GM_getValue("autoScrollAllElement", 0);
    let convertWebpToJpg = _GM_getValue("convertWebpToJpg", 0);

    let lazyLoadFullResolution = _GM_getValue("lazyLoadFullResolution", 0);
    let lazyLoadPreloadImages = _GM_getValue("lazyLoadPreloadImages", 0);

    let comicInfiniteScrollMode = localStorage.getItem("FullPictureLoadComicInfiniteScrollMode") ?? 0;

    const addLazyLoadFullResolutionMenu = async () => {
        _GM_registerMenuCommand(lazyLoadFullResolution == 0 ? "❌ " + displayLanguage.str_111 : "✔️ " + displayLanguage.str_111, () => {
            lazyLoadFullResolution == 0 ? _GM_setValue("lazyLoadFullResolution", 1) : _GM_setValue("lazyLoadFullResolution", 0);
            location.reload();
        });
        _GM_registerMenuCommand(lazyLoadPreloadImages == 0 ? "❌ " + displayLanguage.str_113 : "✔️ " + displayLanguage.str_113, () => {
            lazyLoadPreloadImages == 0 ? _GM_setValue("lazyLoadPreloadImages", 1) : _GM_setValue("lazyLoadPreloadImages", 0);
            location.reload();
        });
    };

    let E_HENTAI_LoadOriginalImage = _GM_getValue("E_HENTAI_LoadOriginalImage", 0);

    if (/^https?:\/\/(e-hentai|exhentai).org\//.test(fun.url)) {
        _GM_registerMenuCommand(E_HENTAI_LoadOriginalImage == 0 ? "❌ " + displayLanguage.str_114 : "✔️ " + displayLanguage.str_114, () => {
            E_HENTAI_LoadOriginalImage == 0 ? _GM_setValue("E_HENTAI_LoadOriginalImage", 1) : _GM_setValue("E_HENTAI_LoadOriginalImage", 0);
            location.reload();
        });
    }

    let setYinawSinaOriginalURL = _GM_getValue("setYinawSinaOriginalURL", 0);

    if (/^https?:\/\/yinaw\.com\/\d+\.html$/.test(fun.url)) {
        _GM_registerMenuCommand(setYinawSinaOriginalURL == 0 ? "❌ 壹纳网使用原始新浪图床链结" : "✔️ 壹纳网使用原始新浪图床链结", () => {
            setYinawSinaOriginalURL == 0 ? _GM_setValue("setYinawSinaOriginalURL", 1) : _GM_setValue("setYinawSinaOriginalURL", 0);
            location.reload();
        });
    }

    //確認選項設置資料
    const checkOptionsData = async () => {
        const getOptionsData = localStorage.getItem("FullPictureLoadOptions");
        if (getOptionsData === null && options.autoDownload !== 1) {
            let jsonStr = JSON.stringify(defaultOptions);
            localStorage.setItem("FullPictureLoadOptions", jsonStr);
        } else if (options.autoDownload !== 1) {
            let optionsJson = JSON.parse(getOptionsData);
            options = Object.assign(defaultOptions, optionsJson);
            //debug("\nFull Picture Load Options Json\n", options);
        }
    };

    //Fancybox5的語系
    const Fancyboxl10nV5 = () => {
        if (!_unsafeWindow?.Fancybox?.defaults?.l10n) return;
        switch (language) {
            case "zh-TW":
            case "zh-HK":
            case "zh-Hant-TW":
            case "zh-Hant-HK":
                _unsafeWindow.Fancybox.defaults.l10n = {
                    PANUP: "上移",
                    PANDOWN: "下移",
                    PANLEFT: "左移",
                    PANRIGHT: "右移",
                    ZOOMIN: "放大",
                    ZOOMOUT: "縮小",
                    TOGGLEZOOM: "切換縮放等級",
                    TOGGLE1TO1: "切換縮放等級",
                    ITERATEZOOM: "切換縮放等級",
                    ROTATECCW: "逆時針旋轉",
                    ROTATECW: "順時針旋轉",
                    FLIPX: "水平翻轉",
                    FLIPY: "垂直翻轉",
                    FITX: "水平適應",
                    FITY: "垂直適應",
                    RESET: "重設",
                    TOGGLEFS: "切換全螢幕",
                    CLOSE: "關閉",
                    NEXT: "下一個",
                    PREV: "上一個",
                    MODAL: "使用 ESC 鍵關閉",
                    ERROR: "發生了錯誤，請稍後再試",
                    IMAGE_ERROR: "找不到圖像",
                    ELEMENT_NOT_FOUND: "找不到 HTML 元素",
                    AJAX_NOT_FOUND: "載入 AJAX 時出錯: 未找到",
                    AJAX_FORBIDDEN: "載入 AJAX 時出錯: 被阻止",
                    IFRAME_ERROR: "載入頁面出錯",
                    TOGGLE_ZOOM: "切換縮放等級",
                    TOGGLE_THUMBS: "切換縮圖",
                    TOGGLE_SLIDESHOW: "切換幻燈片",
                    TOGGLE_FULLSCREEN: "切換全螢幕",
                    DOWNLOAD: "下載"
                };
                break;
            case "zh":
            case "zh-CN":
            case "zh-Hans-CN":
                _unsafeWindow.Fancybox.defaults.l10n = {
                    PANUP: "上移",
                    PANDOWN: "下移",
                    PANLEFT: "左移",
                    PANRIGHT: "右移",
                    ZOOMIN: "放大",
                    ZOOMOUT: "缩小",
                    TOGGLEZOOM: "切换缩放级别",
                    TOGGLE1TO1: "切换缩放级别",
                    ITERATEZOOM: "切换缩放级别",
                    ROTATECCW: "逆时针旋转",
                    ROTATECW: "顺时针旋转",
                    FLIPX: "水平翻转",
                    FLIPY: "垂直翻转",
                    FITX: "水平适应",
                    FITY: "垂直适应",
                    RESET: "重置",
                    TOGGLEFS: "切换全屏",
                    CLOSE: "关闭",
                    NEXT: "下一个",
                    PREV: "上一个",
                    MODAL: "使用 ESC 键关闭",
                    ERROR: "发生了错误，请稍后再试",
                    IMAGE_ERROR: "找不到图像",
                    ELEMENT_NOT_FOUND: "找不到 HTML 元素",
                    AJAX_NOT_FOUND: "载入 AJAX 时出错: 未找到",
                    AJAX_FORBIDDEN: "载入 AJAX 时出错: 被阻止",
                    IFRAME_ERROR: "加载页面出错",
                    TOGGLE_ZOOM: "切换缩放级别",
                    TOGGLE_THUMBS: "切换缩略图",
                    TOGGLE_SLIDESHOW: "切换幻灯片",
                    TOGGLE_FULLSCREEN: "切换全屏",
                    DOWNLOAD: "下载"
                };
                break;
        }
        _unsafeWindow.Fancybox.defaults.animated = false;
        //debug("\nFancybox 5.0.xx 預設選項物件 Fancybox.defaults\n", Fancybox.defaults);
    };

    //Fancybox3的語系
    const Fancyboxi18nV3 = async () => {
        if (siteData.fancybox?.js === false) return;
        switch (language) {
            case "zh-TW":
            case "zh-HK":
            case "zh-Hant-TW":
            case "zh-Hant-HK":
                _unsafeWindow.jQuery.fancybox.defaults.i18n.tw = {
                    "CLOSE": "關閉",
                    "NEXT": "下一個",
                    "PREV": "上一個",
                    "ERROR": "無法載入請求的內容。 <br/> 請稍後重試。",
                    "PLAY_START": "開始幻燈片",
                    "PLAY_STOP": "暫停幻燈片",
                    "FULL_SCREEN": "全螢幕",
                    "THUMBS": "縮圖",
                    "DOWNLOAD": "下載",
                    "SHARE": "分享",
                    "ZOOM": "縮放"
                };
                _unsafeWindow.jQuery.fancybox.defaults.lang = "tw";
                break;
            case "zh":
            case "zh-CN":
            case "zh-Hans-CN":
                _unsafeWindow.jQuery.fancybox.defaults.i18n.cn = {
                    "CLOSE": "关闭",
                    "NEXT": "下一个",
                    "PREV": "上一个",
                    "ERROR": "无法加载请求的内容。 <br/> 请稍后重试。",
                    "PLAY_START": "开始幻灯片",
                    "PLAY_STOP": "暂停幻灯片",
                    "FULL_SCREEN": "全面屏",
                    "THUMBS": "缩略图",
                    "DOWNLOAD": "下载",
                    "SHARE": "分享",
                    "ZOOM": "缩放"
                };
                _unsafeWindow.jQuery.fancybox.defaults.lang = "cn";
                break;
        }
    };

    //更改Fancybox3的預設選項
    const FancyboxOptionsV3 = () => {
        if (siteData.fancybox?.js === false) return; //"download",
        _unsafeWindow.jQuery.fancybox.defaults.buttons = ["zoom", "slideShow", "fullScreen", "thumbs", "close"];
        _unsafeWindow.jQuery.fancybox.defaults.loop = true;
        _unsafeWindow.jQuery.fancybox.defaults.toolbar = true;
        //console.log("fancybox 3.5.7 選項物件", _unsafeWindow.jQuery.fancybox.defaults);
    };

    //頁面容器快捷鍵
    const addKeyEvent = async event => {
        if (ge(".fancybox-container,.fancybox__container,#mainShadowGallery")) return;
        if (event.ctrlKey && event.altKey && (event.code === "KeyC" || event.key === "c" || event.key === "C")) return;
        if (event.ctrlKey && (event.code === "NumpadDecimal" || event.key === ".")) return;
        if ((event.code != "Escape" || event.key != "Escape") && ge("#FullPictureLoadOptionsShadowElement")) return;
        if (["INPUT", "TEXTAREA"].some(n => n === document.activeElement.tagName)) return;
        if (event.ctrlKey && event.altKey && (event.code === "KeyT" || event.key === "t" || event.key === "T")) {
            let str = _unsafeWindow.getSelection().toString();
            str == "" ? null : customTitle = str;
            let newTitle = await prompt("New Title", customTitle);
            newTitle == null ? null : customTitle = newTitle;
            fun.showMsg(displayLanguage.str_118);
            debug("圖集新標題", newTitle || customTitle);
        }
        if (event.code === "KeyG") { //數字鍵0
            return createShadowGallery();
        }
        if (event.code === "Numpad0" || event.key === "0") { //數字鍵0
            fastDownload = false;
            return DownloadFn();
        }
        if (event.code === "Numpad1" || event.key === "1") return copyImgSrcText(); //數字鍵1
        if (event.code === "Numpad2" || event.key === "2") return goToImg("first"); //數字鍵2
        if (event.code === "Numpad3" || event.key === "3") { //數字鍵3
            fastDownload = true;
            return DownloadFn();
        }
        if (event.code === "Numpad4" || event.key === "4") return goToImg("last"); //數字鍵4
        if (event.code === "Numpad5" || event.key === "5") return toggleImgMode(); //數字鍵5
        if (event.code === "Numpad6" || event.key === "6") return autoScrollEles(); //數字鍵6
        if (event.code === "Numpad7" || event.key === "7") return exportImgSrcText(); //數字鍵7
        if (event.code === "Numpad8" || event.key === "8") return newTabView(); //數字鍵8
        if (event.code === "Numpad9" || event.key === "9") return toggleFavor(); //數字鍵9
        if (event.code === "NumpadSubtract" || event.key === "-") { //數字鍵-
            fun.clearSetTimeout();
            return reduceZoom();
        }
        if (event.code === "NumpadAdd" || event.key === "+") { //數字鍵+
            fun.clearSetTimeout();
            return increaseZoom();
        }
        if (event.code === "NumpadDecimal" || event.key === ".") { //數字鍵.
            fun.clearSetTimeout();
            return cancelZoom();
        }
        if (event.code === "NumpadMultiply" || event.key === "*") { //數字鍵*
            createPictureLoadOptionsShadowElement();
        }
        if (event.code === "Escape" || event.key === "Escape") { //Esc鍵
            ge("#FullPictureLoadOptionsShadowElement")?.remove();
            return;
        }
        if (event.code === "NumpadDivide" || event.key === "/") { //數字鍵/
            fun.showMsg(displayLanguage.str_91);
            localStorage.removeItem("FullPictureLoadOptions"); //重置當前網站的用戶設定恢復為預設選項
            setTimeout(() => location.reload(), 1000);
            return;
        }
    };

    const toggleUI = async () => {
        if (!"SPA" in siteData || !isFn(siteData.SPA) || !!ge(".FullPictureLoadImage") || isFetching) return;
        const validPage = siteData.SPA();
        if (validPage === true || isPromise(validPage)) {
            isValidPage = true;
            if (isAddFullPictureLoadButton) addFullPictureLoadButton();
            if (isAddFullPictureLoadFixedMenu) addFullPictureLoadFixedMenu();
            if (isAddnewTabViewButton) addnewTabViewButton();
            document.addEventListener("keydown", addKeyEvent);
            if (isPromise(validPage)) {
                await validPage;
            }
            if ("insertImg" in siteData) {
                let [, insertMode, ] = siteData.insertImg;
                if (insertMode === 1 || insertMode === 2) {
                    await fun.immediateInsertImg();
                }
            }
        } else {
            fun.remove(".FullPictureLoadFixedBtn,#FullPictureLoadEye,#FullPictureLoadFixedMenu,#FullPictureLoadFixedMenuB");
            document.removeEventListener("keydown", addKeyEvent);
            isValidPage = false;
        }
        await fun.delay(200, 0);
    };

    const getNextLink = async (next, text = "\n圖片全載NEXT：") => {
        let tempLink = null;
        isFn(next) ? tempLink = await next() : tempLink = fun.ge(next);
        debug(text, tempLink);
        try {
            if (tempLink !== null && tempLink !== undefined) {
                if (isString(tempLink)) {
                    nextLink = tempLink;
                    return tempLink;
                }
                if (isEle(tempLink) && tempLink?.tagName === "A") {
                    try {
                        if (/^http/.test(tempLink.href)) {
                            nextLink = tempLink.href;
                            return tempLink;
                        }
                    } catch {}
                }
            }
        } catch {}
        return tempLink;
    };

    const getTitle = async (title) => {
        let text;
        if (isString(title)) {
            text = fun.dt({
                s: title
            });
        } else if (isFn(title)) {
            text = await title();
        }
        return text;
    };

    let showOptions = false;
    let comicSwitch = false;

    //遍歷腳本站點JSON數據
    for (let i = 0; i < customData.length; i++) {
        const data = customData[i];
        tempData = customData[i];
        let check = false;
        try {
            if (isRegExp(data.reg)) {
                check = data.reg.test(siteUrl);
            } else if (isArray(data.reg)) {
                check = data.reg.some(r => r.test(siteUrl));
            } else if (isFn(data.reg)) {
                check = await data.reg();
            }
            if (check) {
                let category = data.category;
                if (category == "comic" && data.enable == 0) {
                    showOptions = true;
                    comicSwitch = true;
                }
                let delay = data.delay;
                if (isNumber(delay)) await fun.delay(delay, 0);
                checkOptionsData();
                if (data.enable == 0) {
                    //checkOptionsData();
                    if (options.comic == 1 && category === "comic") {
                        showOptions = true;
                        options.enable = 1;
                        debug("\n漫畫類預設關閉的此站規則已開啟");
                    } else {
                        //showOptions = true;
                        debug("\n此規則禁用", data);
                        continue;
                    }
                }
                //if (data.enable != 0) checkOptionsData();
                let include = data.include;
                if (isString(include)) {
                    if (!fun.ge(include)) {
                        debug("\n頁面沒有包含必須的元素", data);
                        continue;
                    }
                } else if (isArray(include)) {
                    let checkEles = include.every(e => !!fun.ge(e));
                    if (!checkEles) {
                        debug("\n頁面沒有包含必須的所有元素", data);
                        continue;
                    }
                }
                let exclude = data.exclude;
                if (isString(exclude)) {
                    if (!!fun.ge(exclude)) {
                        debug("\n頁面包含必須排除的元素", data);
                        continue;
                    }
                } else if (isArray(exclude)) {
                    let checkEles = exclude.some(s => !!fun.ge(s));
                    if (checkEles) {
                        debug("\n頁面包含數組選擇器中必須排除的元素", data);
                        continue;
                    }
                }
                if ("autoPager" in data && isObject(data.autoPager) && category !== "comic autoPager") {
                    if (!fun.checkAutoPagerEle(data.autoPager)) {
                        siteData = {};
                        _this = {};
                        continue;
                    }
                }
                siteData = customData[i];
                _this = customData[i];
                if (!siteData.category.includes("autoPager") && !["lazyLoad", "none", "ad"].some(c => c === siteData.category)) {
                    showOptions = true;
                }
                const loadingBakBlobURL = fun.dataURLtoBlobURL(loading_bak);
                const checkBlobURL = await fun.checkImgStatus(loadingBakBlobURL, 0);
                if (checkBlobURL.ok) {
                    loading_bak = loadingBakBlobURL;
                    autoPagerLoading_gif = fun.dataURLtoBlobURL(autoPagerLoading_gif);
                }
                break;
            }
        } catch (error) {
            console.error("圖片全載規則出錯", error);
            debug("圖片全載規則出錯", customData[i]);
            debug("出錯之前的規則", customData[i - 1]);
            return;
        }
    }

    if (showOptions) {
        //_unsafeWindow.FullPictureLoadCustomData = customData;
        //debug("\n圖片全載開啟了GM選單?\n", showOptions);
        _GM_registerMenuCommand(displayLanguage.str_67, () => createPictureLoadOptionsShadowElement());
        if (!ge("#FullPictureLoadMainStyle")) {
            fun.css(FullPictureLoadStyle, "FullPictureLoadMainStyle");
        }
    }

    if (!("category" in siteData)) {
        _GM_unregisterMenuCommand(FullPictureLoadBlacklist_menu_command_id);
        return;
    }

    try {
        if (!ge("#FullPictureLoadMainStyle")) {
            fun.css(FullPictureLoadStyle, "FullPictureLoadMainStyle");
        }
        if ("init" in siteData) {
            const init_code = siteData.init;
            if (isString(init_code)) {
                await new Function("siteData", "fun", '"use strict";' + init_code)(siteData, fun);
            } else if (isFn(init_code)) {
                await init_code();
            }
        }
        if (!ge("#FullPictureLoadMainStyle")) {
            fun.css(FullPictureLoadStyle, "FullPictureLoadMainStyle");
        }
        if ("css" in siteData && isString(siteData.css)) {
            fun.css(siteData.css);
        }
        if (options.fancybox == 1 && siteData.category !== "none" && !isObject(siteData.autoPager) && siteData.fancybox?.v == 3 && siteData.fancybox?.insertLibrarys == 1) {
            addLibrarysV3();
            Fancyboxi18nV3();
            FancyboxOptionsV3();
        } else if (options.fancybox == 1 && !siteData.category.includes("autoPager") && !["lazyLoad", "none", "ad"].some(c => c === siteData.category) && !fancyboxBlackList()) {
            addLibrarysV5();
            Fancyboxl10nV5();
            fun.css(FancyboxV5Css);
        }

        if ("imgs" in siteData) {
            debug("\nCSS/Xpath/JS選擇器：" + siteData.imgs);
        }
        if ("threading" in siteData && isNumber(siteData.threading)) {
            options.threading = siteData.threading;
            debug("\n下載線程數：" + options.threading);
        }
        if ("customTitle" in siteData) {
            customTitle = await getTitle(siteData.customTitle);
            debug(`\n自定義標題：${customTitle}`);
        }
        if ("observerTitle" in siteData && isBoolean(siteData.observerTitle) && siteData.observerTitle === true) {
            const observerTitle_CB = async (mutationList, observer) => {
                //console.log(mutationList);
                if (mutationList) {
                    const mutationList_removedNodes = [...mutationList].filter(item => item.type === "childList" && item?.removedNodes?.length > 0);
                    if (mutationList_removedNodes.length > 0) {
                        for (const mutation of mutationList_removedNodes) {
                            const removedNodes = mutation.removedNodes;
                            for (const node of removedNodes) {
                                if (node?.id == "mainShadowGallery") {
                                    return;
                                }
                            }
                        }
                    }
                }
                if (observer) {
                    observer.disconnect();
                    setTimeout(async () => {
                        const body = await fun.waitEle("body");
                        observer.observe(body, MutationObserverConfig);
                        if (!ge("#mainShadowGallery")) {
                            await toggleUI();
                        }
                    }, 200);
                }
                if (mutationList) {
                    try {
                        const mutationList_addedNodes = [...mutationList].filter(item => item.type === "childList" && item?.addedNodes?.length > 0);
                        if (mutationList_addedNodes.length === 0) {
                            return;
                        }
                        const strings = ["FullPictureLoad", "mainShadowGallery", "pagetual", "comicRead", "Autopage", "pv-"];
                        for (const mutation of mutationList_addedNodes) {
                            const attributes = [mutation?.target?.id, mutation?.target?.className, mutation?.target?.name].filter(e => e);
                            const checkM = attributes.some(attr => strings.some(str => attr?.startsWith(str)));
                            if (checkM) {
                                return;
                            }
                            const addedNodes = mutation.addedNodes;
                            for (const node of addedNodes) {
                                const attributes = [node?.id, node?.className, node?.name].filter(e => e);
                                const checkN = attributes.some(attr => strings.some(str => attr?.startsWith(str)));
                                if (checkN) {
                                    return;
                                }
                            }
                        }
                        //console.log(mutationList_addedNodes);
                    } catch {}
                }
                if (isFetching || isDownloading) return;
                await toggleUI();
                const newCustomTitle = await getTitle(siteData.customTitle);
                if ("capture" in siteData && !newCustomTitle) {
                    captureSrcB(1);
                }
                if (customTitle !== newCustomTitle && newCustomTitle !== null && newCustomTitle !== undefined && newCustomTitle !== "") {
                    customTitle = newCustomTitle;
                    debug(`\n自定義標題：${newCustomTitle}`);
                    if ("capture" in siteData) {
                        captureSrcB();
                    }
                    if ("next" in siteData) {
                        await getNextLink(siteData.next, "\n標題變換 nextLink：");
                    }
                }
            };
            const MutationObserverURL = new MutationObserver(observerTitle_CB);
            MutationObserverURL.observe(document.body, MutationObserverConfig);
        }
        if ("observerURL" in siteData && isBoolean(siteData.observerURL) && siteData.observerURL === true) {
            const observerURL_CB = async (mutationList, observer) => {
                if (mutationList) {
                    const mutationList_removedNodes = [...mutationList].filter(item => item.type === "childList" && item?.removedNodes?.length > 0);
                    if (mutationList_removedNodes.length > 0) {
                        for (const mutation of mutationList_removedNodes) {
                            const removedNodes = mutation.removedNodes;
                            for (const node of removedNodes) {
                                if (node?.id == "mainShadowGallery") {
                                    return;
                                }
                            }
                        }
                    }
                }
                if (observer) {
                    observer.disconnect();
                    setTimeout(async () => {
                        const body = await fun.waitEle("body");
                        observer.observe(body, MutationObserverConfig);
                        if (!ge("#mainShadowGallery")) {
                            await toggleUI();
                        }
                        if ("customTitle" in siteData && !("capture" in siteData)) {
                            const newCustomTitle = await getTitle(siteData.customTitle);
                            if (customTitle !== newCustomTitle && newCustomTitle !== null && newCustomTitle !== undefined && newCustomTitle !== "") {
                                customTitle = newCustomTitle;
                                debug(`\n自定義標題：${newCustomTitle}`);
                            }
                        }
                    }, 200);
                }
                if (mutationList) {
                    try {
                        const mutationList_addedNodes = [...mutationList].filter(item => item.type === "childList" && item?.addedNodes?.length > 0);
                        if (mutationList_addedNodes.length === 0) {
                            return;
                        }
                        const strings = ["FullPictureLoad", "mainShadowGallery", "pagetual", "comicRead", "Autopage", "pv-"];
                        for (const mutation of mutationList_addedNodes) {
                            const attributes = [mutation?.target?.id, mutation?.target?.className, mutation?.target?.name].filter(e => e);
                            const checkM = attributes.some(attr => strings.some(str => attr?.startsWith(str)));
                            if (checkM) {
                                return;
                            }
                            const addedNodes = mutation.addedNodes;
                            for (const node of addedNodes) {
                                const attributes = [node?.id, node?.className, node?.name].filter(e => e);
                                const checkN = attributes.some(attr => strings.some(str => attr?.startsWith(str)));
                                if (checkN) {
                                    return;
                                }
                            }
                        }
                        //console.log(mutationList_addedNodes);
                    } catch {}
                }
                if (isFetching || isDownloading) return;
                await toggleUI();
                if (siteUrl !== _unsafeWindow.document.URL.replace(/#FullPictureLoad.+$|#gallery.+$|#lightbox.+$/i, "")) {
                    siteUrl = _unsafeWindow.document.URL;
                    const newCustomTitle = await getTitle(siteData.customTitle);
                    if ("capture" in siteData && !newCustomTitle) {
                        await captureSrcB(1);
                        const newCustomTitle = await getTitle(siteData.customTitle);
                        if (customTitle !== newCustomTitle && newCustomTitle !== null && newCustomTitle !== undefined && newCustomTitle !== "") {
                            customTitle = newCustomTitle;
                        }
                    }
                    if (customTitle !== newCustomTitle && newCustomTitle !== null && newCustomTitle !== undefined && newCustomTitle !== "") {
                        customTitle = newCustomTitle;
                        debug(`\n自定義標題：${newCustomTitle}`);
                        if ("capture" in siteData) {
                            captureSrcB();
                        }
                    }
                    if ("next" in siteData) {
                        await getNextLink(siteData.next, "\nURL變換 nextLink：");
                    }
                }
            };
            const MutationObserverURL = new MutationObserver(observerURL_CB);
            MutationObserverURL.observe(document.body, MutationObserverConfig);
        }
        if ("next" in siteData) {
            const next = siteData.next;
            const nextE = await getNextLink(next);
            const callback = () => {
                if (isFn(next)) {
                    fun.showMsg(displayLanguage.str_34, 0);
                    if (isString(nextE)) {
                        location.href = nextE;
                    } else if (isEle(nextE)) {
                        elementClick(nextE);
                    } else {
                        fun.showMsg(displayLanguage.str_37);
                    }
                } else if (isString(next)) {
                    if (isEle(nextE)) {
                        //link.click();
                        elementClick(nextE);
                        fun.showMsg(displayLanguage.str_35);
                    } else {
                        fun.showMsg(displayLanguage.str_37);
                    }
                }
            };
            if (hasTouchEvents && !!siteData.next && options.doubleTouchNext == 1) {
                document.addEventListener("dblclick", () => callback());
            }
            document.addEventListener("keydown", event => {
                if (ge("#FullPictureLoadOptionsShadowElement,.fancybox-container,.fancybox__container,#mainShadowGallery")) return;
                if (event.code === "ArrowRight") callback();
            });
        }
        if ("prev" in siteData) {
            const prev = siteData.prev;
            document.addEventListener("keydown", event => {
                if (ge("#FullPictureLoadOptionsShadowElement,.fancybox-container,.fancybox__container,#mainShadowGallery")) return;
                if (event.code === "ArrowLeft") {
                    event.preventDefault();
                    if (prev === 1) {
                        fun.showMsg(displayLanguage.str_38);
                        history.back();
                        return;
                    }
                    let ele = fun.ge(prev);
                    if (ele) {
                        //ele.click();
                        elementClick(ele);
                        fun.showMsg(displayLanguage.str_39);
                    } else {
                        fun.showMsg(displayLanguage.str_40);
                    }
                }
            });
        }
        if ("autoClick" in siteData) {
            const autoClick = siteData.autoClick;
            if (isArray(autoClick)) {
                let [selector, delay] = autoClick;
                setTimeout(() => {
                    let ele = fun.ge(selector);
                    if (ele) {
                        elementClick(ele);
                        debug(`\n圖片全載autoClick("${selector}")`, ele);
                    }
                }, delay ?? 1000);
            } else if (isString(autoClick)) {
                let ele = fun.ge(autoClick);
                if (!!ele) {
                    elementClick(ele);
                    debug(`\n圖片全載autoClick("${autoClick}")`, ele);
                }
            }
        }
        if ("observerClick" in siteData) {
            const observerClick = siteData.observerClick;
            let selectors;
            if (isString(observerClick)) {
                selectors = [observerClick];
            } else {
                selectors = observerClick;
            }
            fun.wait(() => selectors.some(selector => !!fun.ge(selector)), null, null, 30).then(() => {
                selectors.forEach((selector, i) => {
                    setTimeout(() => {
                        let ele = fun.ge(selector);
                        if (ele) {
                            const observer = new IntersectionObserver((entries, observer) => {
                                entries.forEach(entry => {
                                    if (entry.isIntersecting) {
                                        observer.unobserve(entry.target);
                                        elementClick(entry.target);
                                        debug(`\n圖片全載observerClick("${selector}")\n`, entry.target);
                                        setTimeout(async () => {
                                            if (await fun.waitEle(selector, 30)) {
                                                observer.observe(fun.ge(selector));
                                            }
                                        }, 1000);
                                    }
                                });
                            });
                            observer.observe(ele);
                        }
                    }, (i + 1) * 200);
                });
            });
        }
        if ("loadMore" in siteData && isString(siteData.loadMore)) {
            const selector = siteData.loadMore;
            const callback = () => {
                if (_unsafeWindow.innerHeight + _unsafeWindow.pageYOffset >= document.body.offsetHeight - 200) {
                    document.removeEventListener("scroll", callback);
                    const ele = fun.ge(selector);
                    if (!!ele) {
                        elementClick(ele);
                        debug(`圖片全載loadMore("${selector}")`);
                    }
                    setTimeout(async () => {
                        if (await fun.waitEle(selector, 30)) {
                            document.addEventListener("scroll", callback);
                        }
                    }, 1000);
                }
            };
            document.addEventListener("scroll", callback);
        }
        if ("autoPager" in siteData && isObject(siteData.autoPager)) {
            const observer = siteData.autoPager?.observer;
            if (isString(observer)) {
                let ele = fun.gae(observer).at(-1);
                if (ele) fun.autoPagerNextObserver.observe(ele);
            } else {
                const callback = async () => {
                    if (_unsafeWindow.innerHeight + _unsafeWindow.pageYOffset >= document.body.offsetHeight - (siteData.autoPager?.bottom ?? screen.height)) {
                        if (!autoPagerSwitch) return;
                        document.removeEventListener("scroll", callback);
                        await fun.autoPager();
                        await fun.delay(siteData.autoPager?.sleep || 1000, 0);
                        document.addEventListener("scroll", callback);
                    }
                };
                document.addEventListener("scroll", callback);
            }
            document.addEventListener("dblclick", () => fun.toggleAutoPager());
            let hide = siteData.autoPager?.hide;
            if (isString(hide)) {
                let eles = fun.gae(hide);
                eles.forEach(e => (e.style.display = "none"));
            }
            let preloadNextPage = siteData.autoPager?.preloadNextPage;
            if (!!preloadNextPage) {
                fun.preloadNextPage();
            }
        }
        if ("insertImg" in siteData) {
            const insertImg = siteData.insertImg;
            const autoDownload = siteData.autoDownload;
            if (isArray(insertImg)) {
                let autoStart;
                if (isArray(autoDownload)) {
                    [autoStart] = autoDownload;
                    autoStart = (autoStart == 1 || options.autoDownload == 1);
                }
                const [, insertMode] = insertImg;
                if (insertMode == 1 && !autoStart || insertMode == 2 && !autoStart) {
                    if (options.autoInsert == 1) {
                        if (options.shadowGallery == 1) {
                            await fun.immediateInsertImg();
                        } else {
                            fun.immediateInsertImg();
                        }
                    }
                }
            }
        }
        if ("autoDownload" in siteData) {
            const autoDownload = siteData.autoDownload;
            if (isArray(autoDownload)) {
                const [autoStart] = autoDownload;
                if (autoStart == 1 || options.autoDownload == 1) {
                    DownloadFn();
                }
            }
        }
        if (options.shadowGallery == 1 && options.autoDownload != 1 && !siteData.category.includes("autoPager") && !["lazyLoad", "none", "ad"].some(c => c === siteData.category) && !(("capture" in siteData) && ("SPA" in siteData))) {
            if ("SPA" in siteData && isFn(siteData.SPA)) {
                if (siteData.SPA()) {
                    setTimeout(() => createShadowGallery(), 200);
                }
            } else {
                setTimeout(() => createShadowGallery(), 200);
            }
        }
        if ("openInNewTab" in siteData && isString(siteData.openInNewTab)) {
            const openInNewTab = siteData.openInNewTab;
            fun.openInNewTab(openInNewTab);
            fun.addMutationObserver(() => fun.openInNewTab(openInNewTab));
        }
        if ("topButton" in siteData && isBoolean(siteData.topButton) && siteData.topButton === true) {
            addReturnTopButton();
        }
        if ("setFancybox" in siteData) {
            const setFancybox = siteData.setFancybox;
            if (isBoolean(setFancybox) && options.fancybox == 1 && isString(siteData.imgs)) {
                fun.setFancybox(siteData.imgs);
            } else if (isString(setFancybox) && options.fancybox == 1) {
                fun.setFancybox(setFancybox);
            }
        }
    } catch (error) {
        console.error("圖片全載規則出錯", error);
        debug("圖片全載規則出錯", siteData);
        return;
    }

    if ("reg" in siteData) {
        debug("\n列出此站資料", siteData);
        debug(`\n列出規則總數(${customData.length})`);
        debug("\n列出NSFW規則", nsfw1Data);
        debug("\n列出NSFW+規則", nsfw2Data);
        debug("\n列出COMIC規則", comicData);
        debug("\n列出HCOMIC規則", hcomicData);
        debug("\n列出LazyLoad模式規則", lazyLoadData);
        debug("\n列出自動翻頁規則", autoPagerData);
        debug("\n列出去廣告規則", AD_Data);
        debug("\n列出未分類規則", noneData);
    }

    if (!hasTouchEvents && showOptions && isArray(siteData.insertImg)) {
        _GM_registerMenuCommand(TurnOffImageNavigationShortcutKeys == 0 ? "❌ " + displayLanguage.str_121 : "✔️ " + displayLanguage.str_121, () => {
            TurnOffImageNavigationShortcutKeys == 0 ? _GM_setValue("TurnOffImageNavigationShortcutKeys", 1) : _GM_setValue("TurnOffImageNavigationShortcutKeys", 0);
            location.reload();
        });
    }

    if (showOptions && isNumber(siteData.go)) {
        _GM_registerMenuCommand(noGoToFirstImage == 0 ? "❌ " + displayLanguage.str_115 : "✔️ " + displayLanguage.str_115, () => {
            noGoToFirstImage == 0 ? _GM_setValue("noGoToFirstImage", 1) : _GM_setValue("noGoToFirstImage", 0);
            location.reload();
        });
    }

    if (isArray(siteData.scrollEle) || isFn(siteData.scrollEle)) {
        _GM_registerMenuCommand(autoScrollAllElement == 0 ? "❌ " + displayLanguage.str_116 : "✔️ " + displayLanguage.str_116, () => {
            autoScrollAllElement == 0 ? _GM_setValue("autoScrollAllElement", 1) : _GM_setValue("autoScrollAllElement", 0);
            location.reload();
        });
    }

    if (siteData.category && ["nsfw1", "nsfw2", "hcomic", "comic", "lazyLoad"].some(c => c === siteData.category)) {
        if (!hasTouchEvents) {
            _GM_registerMenuCommand(FancyboxWheelOptions == 0 ? "❌ " + displayLanguage.str_119 : "✔️ " + displayLanguage.str_119, () => {
                FancyboxWheelOptions == 0 ? _GM_setValue("FancyboxWheelOptions", 1) : _GM_setValue("FancyboxWheelOptions", 0);
                location.reload();
            });
        }
        _GM_registerMenuCommand(newTabViewLightGallery == 0 ? "❌ " + displayLanguage.str_120 : "✔️ " + displayLanguage.str_120, () => {
            newTabViewLightGallery == 0 ? localStorage.setItem("newTabViewLightGallery", 1) : localStorage.setItem("newTabViewLightGallery", 0);
            location.reload();
        });
    }

    if (siteData.category === "comic" && siteData.infiniteScroll || siteData.category === "comic autoPager") {
        _GM_registerMenuCommand(comicInfiniteScrollMode == 0 ? "❌ " + displayLanguage.str_122 : "✔️  " + displayLanguage.str_122, () => {
            comicInfiniteScrollMode == 0 ? localStorage.setItem("FullPictureLoadComicInfiniteScrollMode", 1) : localStorage.setItem("FullPictureLoadComicInfiniteScrollMode", 0);
            location.reload();
        });
    }

    let FullPictureLoadCustomDownloadVideo = localStorage.getItem("FullPictureLoadCustomDownloadVideo") ?? 1;

    let downloadVideo = siteData.downloadVideo;
    if (!!downloadVideo && downloadVideo === true && !hasTouchEvents) {
        _GM_registerMenuCommand(FullPictureLoadCustomDownloadVideo == 0 ? "❌ " + displayLanguage.str_124 : "✔️ " + displayLanguage.str_124, () => {
            FullPictureLoadCustomDownloadVideo == 0 ? localStorage.setItem("FullPictureLoadCustomDownloadVideo", 1) : localStorage.setItem("FullPictureLoadCustomDownloadVideo", 0);
            location.reload();
        });
    }

    let autoDownload = siteData.autoDownload;

    if (!!autoDownload) {
        document.addEventListener("keydown", event => {
            if (ge("#FullPictureLoadOptionsShadowElement,.fancybox-container,.fancybox__container,#mainShadowGallery")) return;
            if (event.ctrlKey && (event.code === "NumpadDecimal" || event.key === ".")) {
                if (options.autoDownload == 0) {
                    fun.showMsg(displayLanguage.str_64, 0);
                    options.autoDownload = 1;
                    let jsonStr = JSON.stringify(options);
                    localStorage.setItem("FullPictureLoadOptions", jsonStr);
                    setTimeout(() => location.reload(), 2000);
                } else {
                    options.autoDownload = 0;
                    let jsonStr = JSON.stringify(options);
                    localStorage.setItem("FullPictureLoadOptions", jsonStr);
                    fun.clearSetTimeout();
                    fun.showMsg(displayLanguage.str_65, 0);
                    location.reload();
                }
            }
        });
    }

    if (hasTouchEvents && "insertImg" in siteData) {
        let timeId;
        const touchstartCB = event => {
            //console.log(event);
            if (isFetching || isDownloading) return;
            const check = (e) => {
                if (e.target.tagName === "A" && e.target?.previousElementSibling?.nodeName === "IMG") {
                    return true;
                }
                if (["IMG", "CANVAS"].some(t => t === e.target.tagName) && e.target.id != "FullPictureLoad") {
                    return true;
                }
                if (["A", "FIGURE", "SPAN"].some(t => t === e.target.tagName)) {
                    return !!e.target.querySelector("img,canvas");
                }
                return false;
            };
            if (check(event)) {
                timeId = setTimeout(() => {
                    copyImgSrcText();
                }, 500);
            }
        };
        const clearCB = () => {
            if (isFetching || isDownloading) return;
            clearTimeout(timeId);
        };
        document.addEventListener("touchstart", touchstartCB);
        document.addEventListener("touchmove", clearCB);
        document.addEventListener("touchend", clearCB);
    }

    //debug("\n最終options物件\n", options);

    if (siteData.category == "lazyLoad") {
        addLazyLoadFullResolutionMenu();
    }

    //漫畫類預讀下一話圖片
    setTimeout(() => {
        let preloadNext = siteData.preloadNext;
        try {
            if (!!nextLink && !!preloadNext && !isDownloading) {
                window.addEventListener("message", event => {
                    if (!!event.data?.iframePicArr) {
                        fun.picPreload(event.data.iframePicArr, event.data?.title, "next");
                    }
                }, false);
                fun.xhrDoc(nextLink).then(async nextDoc => {
                    //debug("\nnextDoc", nextDoc);
                    if (isBoolean(preloadNext) && preloadNext === true && isFn(siteData.imgs) && isFn(siteData.customTitle)) {
                        fun.picPreload(await siteData.imgs(nextDoc), await siteData.customTitle(nextDoc), "next");
                    } else if (isBoolean(preloadNext) && preloadNext === true && isString(siteData.imgs) && isFn(siteData.customTitle)) {
                        let arr = fun.getImgSrcArr(siteData.imgs, nextDoc);
                        fun.picPreload(arr, await siteData.customTitle(nextDoc), "next");
                    } else if (isFn(preloadNext)) {
                        preloadNext(nextDoc, siteData);
                    }
                });
            }
        } catch (error) {
            console.error("圖片全載preloadNext()出錯", error);
        }
    }, 1000);

    let FullPictureLoadShowEye = localStorage.getItem("FullPictureLoadShowEye") ?? 1;

    if (siteData.category != "lazyLoad" && !!siteData.capture) {
        _GM_registerMenuCommand(FullPictureLoadShowEye == 0 ? "❌ " + displayLanguage.str_123 : "✔️  " + displayLanguage.str_123, () => {
            FullPictureLoadShowEye == 0 ? localStorage.setItem("FullPictureLoadShowEye", 1) : localStorage.setItem("FullPictureLoadShowEye", 0);
            location.reload();
        });
    }

    //捕獲圖片網址
    const captureSrc = async (mutationList) => {
        if (isDownloading || isFetching) return;
        if (mutationList) {
            for (const mutation of mutationList) {
                if (mutation.type === "childList" && mutation?.target?.id === "FullPictureLoadCaptureNum") {
                    return;
                }
            }
            //console.log(mutationList);
        }
        let num = captureSrcArray.length;
        let imgSrcs = await getImgs(siteData.capture ?? siteData.imgs);
        let imagePreloadArray = [];
        imgSrcs.forEach(src => {
            if (!captureSrcArray.includes(src)) {
                captureSrcArray.push(src);
                imagePreloadArray.push(src);
            }
        });
        if (ge("#FullPictureLoadCaptureNum") && num < captureSrcArray.length) {
            ge("#FullPictureLoadCaptureNum").innerText = captureSrcArray.length;
        }
        if (lazyLoadPreloadImages == 1) {
            fun.picPreload(imagePreloadArray, "Lazy Load Mode");
        }
    };

    const captureSrcB = async (invalidPage = 0) => {
        if (isDownloading || isFetching) return;
        if (invalidPage === 1 && !!ge("#FullPictureLoadCaptureNum") && ge("#FullPictureLoadCaptureNum")?.innerText != 0) {
            ge("#FullPictureLoadCaptureNum").innerText = 0;
            return;
        }
        await fun.delay(1000, 0);
        let captureSrcArray = await getImgs(siteData.capture ?? siteData.imgs);
        let num = captureSrcArray.length;
        if (ge("#FullPictureLoadCaptureNum")) {
            ge("#FullPictureLoadCaptureNum").innerText = num;
        }
    };

    //動態捕獲圖片網址
    if (siteData.category?.includes("lazyLoad") && lazyLoadFullResolution == 1 && !!siteData.capture || isString(siteData.imgs) && !isArray(siteData.insertImg) || isFn(siteData.capture) && siteData.category != "lazyLoad") {
        if (isFn(siteData.capture) && siteData.category != "lazyLoad" || isString(siteData.capture) && siteData.category != "lazyLoad" || isString(siteData.imgs) && siteData.category != "lazyLoad") {
            if (FullPictureLoadShowEye == 1 && siteData.eye != 0) {
                await fun.delay(1000, 0);
                addnewTabViewButton();
                captureSrc();
            }
        }
        if (siteData.category === "lazyLoad" && siteData.eye != 0) {
            addnewTabViewButton();
            fun.addMutationObserver(captureSrc, document.body, {
                childList: true,
                subtree: true,
                attributes: true
            });
        }
    }

    const defaultFavor = "text-color,#000\nbackground-color,#15d3bf\n4KHD,https://www.4khd.com/\nSpace Miss,https://spacemiss.com/\n小黃書,https://xchina.biz/\n紳士会所,https://www.hentaiclub.net/\n图宅网,https://www.tuzac.com/\n丝袜客,https://siwake.cc/\n萌图社,http://www.446m.com/\nModels Vibe,https://www.modelsvibe.com/\nEVERIA.CLUB,https://everia.club/\nAVJB,https://avjb.com/albums/\nHotGirl World,https://www.hotgirl2024.com/\nMIC MIC IDOL,https://www.micmicidol.club/\nXasiat,https://www.xasiat.com/albums/\nXO福利圖,https://kb1.a7xofulitu.com/%E5%84%BF%E6%AD%8C%E4%B8%89%E7%99%BE%E9%A6%96/\n色图,https://setu.lol/\n紳士漫畫,https://www.wnacg.com/albums-index-cate-3.html"

    const createFavorTextarea = () => {
        let tE = ge("#FullPictureLoadOptionsButtonParentDiv");
        if (!tE) return;
        let parentWidth = tE.parentNode.clientWidth;
        let favorData = _GM_getValue("favorData", defaultFavor);
        let editFavorDiv = document.createElement("div");
        editFavorDiv.id = "editFavorDiv";
        let textarea = document.createElement("textarea");
        textarea.id = "editFavorTextarea";
        textarea.style.width = (parentWidth - 20) + "px";
        editFavorDiv.append(textarea);
        insertAfter(tE, editFavorDiv);
        [{
            text: displayLanguage.str_132,
            id: "editFavorCloseBtn",
            cfn: event => {
                event.preventDefault();
                let b = fun.ge("#FullPictureLoadOpenFavoritesBtn");
                b.innerText = displayLanguage.str_128;
                editFavorDiv.remove();
            }
        }, {
            text: displayLanguage.str_131,
            id: "editFavorSaveBtn",
            cfn: event => {
                event.preventDefault();
                _GM_setValue("favorData", textarea.value);
                createFavor();
                editFavorDiv.remove();
            }
        }].forEach(obj => {
            let button = document.createElement("button");
            button.id = obj.id;
            button.className = "editFavorButton";
            button.innerText = obj.text;
            if (!!obj.cfn) button.addEventListener("click", obj.cfn);
            editFavorDiv.append(button);
        });
        textarea.value = favorData;
        editFavorDiv.scrollIntoView({
            block: "center",
            inline: "center"
        });
    };

    const createFavor = () => {
        let tE = ge("#FullPictureLoadOptionsButtonParentDiv");
        if (!tE) return;
        let favorData = _GM_getValue("favorData", defaultFavor);
        let parentWidth = tE.parentNode.clientWidth;
        let FavorUl = document.createElement("ul");
        FavorUl.id = "FullPictureLoadFavorUl";
        FavorUl.style.maxWidth = parentWidth + "px";
        insertAfter(tE, FavorUl);
        let favorDataArray = favorData.split("\n").filter(item => item);
        let textColor = "#000";
        let backgroundColor = "#15d3bf";
        for (let favor of favorDataArray) {
            try {
                let [name, value] = favor.split(",");
                if (name === "text-color") {
                    textColor = value;
                } else if (name === "background-color") {
                    backgroundColor = value;
                } else {
                    let li = document.createElement("li");
                    li.className = "favor-item";
                    li.style.backgroundColor = backgroundColor;
                    li.style.color = textColor;
                    let a = document.createElement("a");
                    a.innerText = name;
                    a.href = value;
                    a.style.color = textColor;
                    li.append(a);
                    FavorUl.append(li);
                }
            } catch (error) {
                console.error(error);
            }
        }
        let li = document.createElement("li");
        li.className = "favor-item";
        li.style.backgroundColor = backgroundColor;
        li.style.color = textColor;
        li.innerText = displayLanguage.str_130;
        li.addEventListener("click", () => {
            createFavorTextarea();
            FavorUl.remove();
        });
        FavorUl.append(li);
    };

    const toggleFavor = () => {
        let b = ge("#FullPictureLoadOpenFavoritesBtn");
        let f = ge("#FullPictureLoadFavorUl");
        let t = ge("#editFavorDiv");
        if (f || t) {
            fun.remove("#FullPictureLoadFavorUl,#editFavorDiv");
            b.innerText = displayLanguage.str_128;
        } else {
            createFavor();
            b.innerText = displayLanguage.str_129;
        }
    };

    if (!siteData.category.includes("autoPager") && !["lazyLoad", "none", "ad"].some(c => c === siteData.category)) {
        if (siteData.key != 0) {
            if (!hasTouchEvents) {
                if (ShowFullPictureLoadFixedMenu === 1) addFullPictureLoadFixedMenu();
            }
            document.addEventListener("keydown", addKeyEvent);
        }

        if (siteData.icon == 0) {
            //return;
        } else if (options.icon == 1 || siteData.icon == 1) {
            addFullPictureLoadButton();
        }
        toggleUI();
    }

    if ("category" in siteData) {
        _GM_registerMenuCommand(displayLanguage.str_125, () => {
            const keys = [
                "newTabViewLightGallery",
                "newWindowData",
                "FullPictureLoadComicInfiniteScrollMode",
                "FullPictureLoadOptions",
                "FullPictureLoadCustomDownloadVideo",
                "FullPictureLoadShowEye"
            ];
            for (const key of keys) {
                if (!!localStorage.getItem(key)) {
                    localStorage.removeItem(key);
                }
            }
            location.reload();
        });
        _GM_registerMenuCommand(displayLanguage.str_126, () => {
            const GM_keys = _GM_listValues();
            if (GM_keys.length > 0) {
                GM_keys.forEach(key => _GM_deleteValue(key));
            }
            location.reload();
        });
    }

})(JSZip, jQuery);
